(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ly(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var dm={exports:{}},lo={},hm={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=Symbol.for("react.element"),cy=Symbol.for("react.portal"),uy=Symbol.for("react.fragment"),dy=Symbol.for("react.strict_mode"),hy=Symbol.for("react.profiler"),fy=Symbol.for("react.provider"),my=Symbol.for("react.context"),py=Symbol.for("react.forward_ref"),gy=Symbol.for("react.suspense"),xy=Symbol.for("react.memo"),yy=Symbol.for("react.lazy"),Dd=Symbol.iterator;function by(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mm=Object.assign,pm={};function vs(e,t,n){this.props=e,this.context=t,this.refs=pm,this.updater=n||fm}vs.prototype.isReactComponent={};vs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gm(){}gm.prototype=vs.prototype;function eu(e,t,n){this.props=e,this.context=t,this.refs=pm,this.updater=n||fm}var tu=eu.prototype=new gm;tu.constructor=eu;mm(tu,vs.prototype);tu.isPureReactComponent=!0;var Rd=Array.isArray,xm=Object.prototype.hasOwnProperty,nu={current:null},ym={key:!0,ref:!0,__self:!0,__source:!0};function bm(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)xm.call(t,r)&&!ym.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ei,type:e,key:i,ref:a,props:s,_owner:nu.current}}function vy(e,t){return{$$typeof:Ei,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ru(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ei}function wy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Fd=/\/+/g;function zo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wy(""+e.key):t.toString(36)}function ga(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ei:case cy:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+zo(a,0):r,Rd(s)?(n="",e!=null&&(n=e.replace(Fd,"$&/")+"/"),ga(s,t,n,"",function(u){return u})):s!=null&&(ru(s)&&(s=vy(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Fd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Rd(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+zo(i,l);a+=ga(i,t,n,c,s)}else if(c=by(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+zo(i,l++),a+=ga(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Hi(e,t,n){if(e==null)return e;var r=[],s=0;return ga(e,r,"","",function(i){return t.call(n,i,s++)}),r}function ky(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},xa={transition:null},jy={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:xa,ReactCurrentOwner:nu};function vm(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Hi,forEach:function(e,t,n){Hi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hi(e,function(){t++}),t},toArray:function(e){return Hi(e,function(t){return t})||[]},only:function(e){if(!ru(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=vs;je.Fragment=uy;je.Profiler=hy;je.PureComponent=eu;je.StrictMode=dy;je.Suspense=gy;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jy;je.act=vm;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=mm({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=nu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)xm.call(t,c)&&!ym.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ei,type:e.type,key:s,ref:i,props:r,_owner:a}};je.createContext=function(e){return e={$$typeof:my,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fy,_context:e},e.Consumer=e};je.createElement=bm;je.createFactory=function(e){var t=bm.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:py,render:e}};je.isValidElement=ru;je.lazy=function(e){return{$$typeof:yy,_payload:{_status:-1,_result:e},_init:ky}};je.memo=function(e,t){return{$$typeof:xy,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};je.unstable_act=vm;je.useCallback=function(e,t){return kt.current.useCallback(e,t)};je.useContext=function(e){return kt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};je.useEffect=function(e,t){return kt.current.useEffect(e,t)};je.useId=function(){return kt.current.useId()};je.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return kt.current.useMemo(e,t)};je.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};je.useRef=function(e){return kt.current.useRef(e)};je.useState=function(e){return kt.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return kt.current.useTransition()};je.version="18.3.1";hm.exports=je;var N=hm.exports;const Ce=Zc(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy=N,Ny=Symbol.for("react.element"),_y=Symbol.for("react.fragment"),Cy=Object.prototype.hasOwnProperty,Ey=Sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ty={key:!0,ref:!0,__self:!0,__source:!0};function wm(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Cy.call(t,r)&&!Ty.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ny,type:e,key:i,ref:a,props:s,_owner:Ey.current}}lo.Fragment=_y;lo.jsx=wm;lo.jsxs=wm;dm.exports=lo;var o=dm.exports,km={exports:{}},$t={},jm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,Y){var k=B.length;B.push(Y);e:for(;0<k;){var H=k-1>>>1,ne=B[H];if(0<s(ne,Y))B[H]=Y,B[k]=ne,k=H;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],k=B.pop();if(k!==Y){B[0]=k;e:for(var H=0,ne=B.length,j=ne>>>1;H<j;){var U=2*(H+1)-1,ae=B[U],R=U+1,$=B[R];if(0>s(ae,k))R<ne&&0>s($,ae)?(B[H]=$,B[R]=k,H=R):(B[H]=ae,B[U]=k,H=U);else if(R<ne&&0>s($,k))B[H]=$,B[R]=k,H=R;else break e}}return Y}function s(B,Y){var k=B.sortIndex-Y.sortIndex;return k!==0?k:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,m=3,f=!1,p=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=B)r(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(u)}}function _(B){if(y=!1,x(B),!p)if(n(c)!==null)p=!0,te(S);else{var Y=n(u);Y!==null&&ee(_,Y.startTime-B)}}function S(B,Y){p=!1,y&&(y=!1,g(I),I=-1),f=!0;var k=m;try{for(x(Y),d=n(c);d!==null&&(!(d.expirationTime>Y)||B&&!T());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var ne=H(d.expirationTime<=Y);Y=e.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),x(Y)}else r(c);d=n(c)}if(d!==null)var j=!0;else{var U=n(u);U!==null&&ee(_,U.startTime-Y),j=!1}return j}finally{d=null,m=k,f=!1}}var w=!1,E=null,I=-1,P=5,b=-1;function T(){return!(e.unstable_now()-b<P)}function M(){if(E!==null){var B=e.unstable_now();b=B;var Y=!0;try{Y=E(!0,B)}finally{Y?O():(w=!1,E=null)}}else w=!1}var O;if(typeof v=="function")O=function(){v(M)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=M,O=function(){q.postMessage(null)}}else O=function(){C(M,0)};function te(B){E=B,w||(w=!0,O())}function ee(B,Y){I=C(function(){B(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,te(S))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var k=m;m=Y;try{return B()}finally{m=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var k=m;m=B;try{return Y()}finally{m=k}},e.unstable_scheduleCallback=function(B,Y,k){var H=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?H+k:H):k=H,B){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=k+ne,B={id:h++,callback:Y,priorityLevel:B,startTime:k,expirationTime:ne,sortIndex:-1},k>H?(B.sortIndex=k,t(u,B),n(c)===null&&B===n(u)&&(y?(g(I),I=-1):y=!0,ee(_,k-H))):(B.sortIndex=ne,t(c,B),p||f||(p=!0,te(S))),B},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(B){var Y=m;return function(){var k=m;m=Y;try{return B.apply(this,arguments)}finally{m=k}}}})(Sm);jm.exports=Sm;var Py=jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy=N,zt=Py;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nm=new Set,oi={};function Tr(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for(oi[e]=t,e=0;e<t.length;e++)Nm.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dl=Object.prototype.hasOwnProperty,Ay=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},$d={};function My(e){return Dl.call($d,e)?!0:Dl.call(zd,e)?!1:Ay.test(e)?$d[e]=!0:(zd[e]=!0,!1)}function Ly(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Oy(e,t,n,r){if(t===null||typeof t>"u"||Ly(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var su=/[\-:]([a-z])/g;function iu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(su,iu);lt[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(su,iu);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(su,iu);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function au(e,t,n,r){var s=lt.hasOwnProperty(t)?lt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Oy(t,n,s,r)&&(n=null),r||s===null?My(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=Iy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qi=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),ou=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),_m=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),lu=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),cu=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Em=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function Ts(e){return e===null||typeof e!="object"?null:(e=Bd&&e[Bd]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,$o;function Bs(e){if($o===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$o=t&&t[1]||""}return`
`+$o+e}var Bo=!1;function Uo(e,t){if(!e||Bo)return"";Bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Bo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bs(e):""}function Dy(e){switch(e.tag){case 5:return Bs(e.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 2:case 15:return e=Uo(e.type,!1),e;case 11:return e=Uo(e.type.render,!1),e;case 1:return e=Uo(e.type,!0),e;default:return""}}function $l(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gr:return"Fragment";case Wr:return"Portal";case Rl:return"Profiler";case ou:return"StrictMode";case Fl:return"Suspense";case zl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cm:return(e.displayName||"Context")+".Consumer";case _m:return(e._context.displayName||"Context")+".Provider";case lu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cu:return t=e.displayName||null,t!==null?t:$l(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return $l(e(t))}catch{}}return null}function Ry(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $l(t);case 8:return t===ou?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function er(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fy(e){var t=Tm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wi(e){e._valueTracker||(e._valueTracker=Fy(e))}function Pm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bl(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ud(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=er(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Im(e,t){t=t.checked,t!=null&&au(e,"checked",t,!1)}function Ul(e,t){Im(e,t);var n=er(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hl(e,t.type,er(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hl(e,t,n){(t!=="number"||Pa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Us=Array.isArray;function rs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+er(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ql(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Us(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:er(n)}}function Am(e,t){var n=er(t.value),r=er(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gi,Lm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gi=Gi||document.createElement("div"),Gi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function li(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zy=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(e){zy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gs[t]=Gs[e]})});function Om(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Gs.hasOwnProperty(e)&&Gs[e]?(""+t).trim():t+"px"}function Dm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Om(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var $y=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(e,t){if(t){if($y[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function uu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jl=null,ss=null,is=null;function Gd(e){if(e=Ii(e)){if(typeof Jl!="function")throw Error(G(280));var t=e.stateNode;t&&(t=mo(t),Jl(e.stateNode,e.type,t))}}function Rm(e){ss?is?is.push(e):is=[e]:ss=e}function Fm(){if(ss){var e=ss,t=is;if(is=ss=null,Gd(e),t)for(e=0;e<t.length;e++)Gd(t[e])}}function zm(e,t){return e(t)}function $m(){}var Ho=!1;function Bm(e,t,n){if(Ho)return e(t,n);Ho=!0;try{return zm(e,t,n)}finally{Ho=!1,(ss!==null||is!==null)&&($m(),Fm())}}function ci(e,t){var n=e.stateNode;if(n===null)return null;var r=mo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Ql=!1;if(_n)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Ql=!1}function By(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Vs=!1,Ia=null,Aa=!1,Yl=null,Uy={onError:function(e){Vs=!0,Ia=e}};function Hy(e,t,n,r,s,i,a,l,c){Vs=!1,Ia=null,By.apply(Uy,arguments)}function qy(e,t,n,r,s,i,a,l,c){if(Hy.apply(this,arguments),Vs){if(Vs){var u=Ia;Vs=!1,Ia=null}else throw Error(G(198));Aa||(Aa=!0,Yl=u)}}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Um(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vd(e){if(Pr(e)!==e)throw Error(G(188))}function Wy(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vd(s),e;if(i===r)return Vd(s),t;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function Hm(e){return e=Wy(e),e!==null?qm(e):null}function qm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qm(e);if(t!==null)return t;e=e.sibling}return null}var Wm=zt.unstable_scheduleCallback,Kd=zt.unstable_cancelCallback,Gy=zt.unstable_shouldYield,Vy=zt.unstable_requestPaint,Ke=zt.unstable_now,Ky=zt.unstable_getCurrentPriorityLevel,du=zt.unstable_ImmediatePriority,Gm=zt.unstable_UserBlockingPriority,Ma=zt.unstable_NormalPriority,Jy=zt.unstable_LowPriority,Vm=zt.unstable_IdlePriority,co=null,mn=null;function Qy(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(co,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Zy,Yy=Math.log,Xy=Math.LN2;function Zy(e){return e>>>=0,e===0?32:31-(Yy(e)/Xy|0)|0}var Vi=64,Ki=4194304;function Hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function La(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Hs(l):(i&=a,i!==0&&(r=Hs(i)))}else a=n&~s,a!==0?r=Hs(a):i!==0&&(r=Hs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sn(t),s=1<<n,r|=e[n],t&=~s;return r}function e0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-sn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=e0(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Km(){var e=Vi;return Vi<<=1,!(Vi&4194240)&&(Vi=64),e}function qo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ti(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function n0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function hu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ie=0;function Jm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qm,fu,Ym,Xm,Zm,Zl=!1,Ji=[],Gn=null,Vn=null,Kn=null,ui=new Map,di=new Map,Bn=[],r0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jd(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":ui.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function Is(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ii(t),t!==null&&fu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function s0(e,t,n,r,s){switch(t){case"focusin":return Gn=Is(Gn,e,t,n,r,s),!0;case"dragenter":return Vn=Is(Vn,e,t,n,r,s),!0;case"mouseover":return Kn=Is(Kn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ui.set(i,Is(ui.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,di.set(i,Is(di.get(i)||null,e,t,n,r,s)),!0}return!1}function ep(e){var t=pr(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=Um(n),t!==null){e.blockedOn=t,Zm(e.priority,function(){Ym(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ec(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Kl=r,n.target.dispatchEvent(r),Kl=null}else return t=Ii(n),t!==null&&fu(t),e.blockedOn=n,!1;t.shift()}return!0}function Qd(e,t,n){ya(e)&&n.delete(t)}function i0(){Zl=!1,Gn!==null&&ya(Gn)&&(Gn=null),Vn!==null&&ya(Vn)&&(Vn=null),Kn!==null&&ya(Kn)&&(Kn=null),ui.forEach(Qd),di.forEach(Qd)}function As(e,t){e.blockedOn===t&&(e.blockedOn=null,Zl||(Zl=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,i0)))}function hi(e){function t(s){return As(s,e)}if(0<Ji.length){As(Ji[0],e);for(var n=1;n<Ji.length;n++){var r=Ji[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&As(Gn,e),Vn!==null&&As(Vn,e),Kn!==null&&As(Kn,e),ui.forEach(t),di.forEach(t),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)ep(n),n.blockedOn===null&&Bn.shift()}var as=In.ReactCurrentBatchConfig,Oa=!0;function a0(e,t,n,r){var s=Ie,i=as.transition;as.transition=null;try{Ie=1,mu(e,t,n,r)}finally{Ie=s,as.transition=i}}function o0(e,t,n,r){var s=Ie,i=as.transition;as.transition=null;try{Ie=4,mu(e,t,n,r)}finally{Ie=s,as.transition=i}}function mu(e,t,n,r){if(Oa){var s=ec(e,t,n,r);if(s===null)el(e,t,r,Da,n),Jd(e,r);else if(s0(s,e,t,n,r))r.stopPropagation();else if(Jd(e,r),t&4&&-1<r0.indexOf(e)){for(;s!==null;){var i=Ii(s);if(i!==null&&Qm(i),i=ec(e,t,n,r),i===null&&el(e,t,r,Da,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else el(e,t,r,null,n)}}var Da=null;function ec(e,t,n,r){if(Da=null,e=uu(r),e=pr(e),e!==null)if(t=Pr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Um(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Da=e,null}function tp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ky()){case du:return 1;case Gm:return 4;case Ma:case Jy:return 16;case Vm:return 536870912;default:return 16}default:return 16}}var qn=null,pu=null,ba=null;function np(){if(ba)return ba;var e,t=pu,n=t.length,r,s="value"in qn?qn.value:qn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return ba=s.slice(e,1<r?1-r:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qi(){return!0}function Yd(){return!1}function Bt(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qi:Yd,this.isPropagationStopped=Yd,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=Bt(ws),Pi=qe({},ws,{view:0,detail:0}),l0=Bt(Pi),Wo,Go,Ms,uo=qe({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ms&&(Ms&&e.type==="mousemove"?(Wo=e.screenX-Ms.screenX,Go=e.screenY-Ms.screenY):Go=Wo=0,Ms=e),Wo)},movementY:function(e){return"movementY"in e?e.movementY:Go}}),Xd=Bt(uo),c0=qe({},uo,{dataTransfer:0}),u0=Bt(c0),d0=qe({},Pi,{relatedTarget:0}),Vo=Bt(d0),h0=qe({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Bt(h0),m0=qe({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p0=Bt(m0),g0=qe({},ws,{data:0}),Zd=Bt(g0),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b0[e])?!!t[e]:!1}function xu(){return v0}var w0=qe({},Pi,{key:function(e){if(e.key){var t=x0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k0=Bt(w0),j0=qe({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=Bt(j0),S0=qe({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),N0=Bt(S0),_0=qe({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=Bt(_0),E0=qe({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T0=Bt(E0),P0=[9,13,27,32],yu=_n&&"CompositionEvent"in window,Ks=null;_n&&"documentMode"in document&&(Ks=document.documentMode);var I0=_n&&"TextEvent"in window&&!Ks,rp=_n&&(!yu||Ks&&8<Ks&&11>=Ks),th=" ",nh=!1;function sp(e,t){switch(e){case"keyup":return P0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ip(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function A0(e,t){switch(e){case"compositionend":return ip(t);case"keypress":return t.which!==32?null:(nh=!0,th);case"textInput":return e=t.data,e===th&&nh?null:e;default:return null}}function M0(e,t){if(Vr)return e==="compositionend"||!yu&&sp(e,t)?(e=np(),ba=pu=qn=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rp&&t.locale!=="ko"?null:t.data;default:return null}}var L0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!L0[e.type]:t==="textarea"}function ap(e,t,n,r){Rm(r),t=Ra(t,"onChange"),0<t.length&&(n=new gu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Js=null,fi=null;function O0(e){xp(e,0)}function ho(e){var t=Qr(e);if(Pm(t))return e}function D0(e,t){if(e==="change")return t}var op=!1;if(_n){var Ko;if(_n){var Jo="oninput"in document;if(!Jo){var sh=document.createElement("div");sh.setAttribute("oninput","return;"),Jo=typeof sh.oninput=="function"}Ko=Jo}else Ko=!1;op=Ko&&(!document.documentMode||9<document.documentMode)}function ih(){Js&&(Js.detachEvent("onpropertychange",lp),fi=Js=null)}function lp(e){if(e.propertyName==="value"&&ho(fi)){var t=[];ap(t,fi,e,uu(e)),Bm(O0,t)}}function R0(e,t,n){e==="focusin"?(ih(),Js=t,fi=n,Js.attachEvent("onpropertychange",lp)):e==="focusout"&&ih()}function F0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(fi)}function z0(e,t){if(e==="click")return ho(t)}function $0(e,t){if(e==="input"||e==="change")return ho(t)}function B0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:B0;function mi(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Dl.call(t,s)||!ln(e[s],t[s]))return!1}return!0}function ah(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oh(e,t){var n=ah(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ah(n)}}function cp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function up(){for(var e=window,t=Pa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Pa(e.document)}return t}function bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U0(e){var t=up(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cp(n.ownerDocument.documentElement,n)){if(r!==null&&bu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=oh(n,i);var a=oh(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H0=_n&&"documentMode"in document&&11>=document.documentMode,Kr=null,tc=null,Qs=null,nc=!1;function lh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nc||Kr==null||Kr!==Pa(r)||(r=Kr,"selectionStart"in r&&bu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qs&&mi(Qs,r)||(Qs=r,r=Ra(tc,"onSelect"),0<r.length&&(t=new gu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kr)))}function Yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jr={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},Qo={},dp={};_n&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function fo(e){if(Qo[e])return Qo[e];if(!Jr[e])return e;var t=Jr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dp)return Qo[e]=t[n];return e}var hp=fo("animationend"),fp=fo("animationiteration"),mp=fo("animationstart"),pp=fo("transitionend"),gp=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(e,t){gp.set(e,t),Tr(t,[e])}for(var Yo=0;Yo<ch.length;Yo++){var Xo=ch[Yo],q0=Xo.toLowerCase(),W0=Xo[0].toUpperCase()+Xo.slice(1);nr(q0,"on"+W0)}nr(hp,"onAnimationEnd");nr(fp,"onAnimationIteration");nr(mp,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(pp,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function uh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qy(r,t,void 0,e),e.currentTarget=null}function xp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;uh(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;uh(s,l,u),i=c}}}if(Aa)throw e=Yl,Aa=!1,Yl=null,e}function Fe(e,t){var n=t[oc];n===void 0&&(n=t[oc]=new Set);var r=e+"__bubble";n.has(r)||(yp(t,e,2,!1),n.add(r))}function Zo(e,t,n){var r=0;t&&(r|=4),yp(n,e,r,t)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function pi(e){if(!e[Xi]){e[Xi]=!0,Nm.forEach(function(n){n!=="selectionchange"&&(G0.has(n)||Zo(n,!1,e),Zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xi]||(t[Xi]=!0,Zo("selectionchange",!1,t))}}function yp(e,t,n,r){switch(tp(t)){case 1:var s=a0;break;case 4:s=o0;break;default:s=mu}n=s.bind(null,t,n,e),s=void 0,!Ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function el(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=pr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Bm(function(){var u=i,h=uu(n),d=[];e:{var m=gp.get(e);if(m!==void 0){var f=gu,p=e;switch(e){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":f=k0;break;case"focusin":p="focus",f=Vo;break;case"focusout":p="blur",f=Vo;break;case"beforeblur":case"afterblur":f=Vo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=u0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=N0;break;case hp:case fp:case mp:f=f0;break;case pp:f=C0;break;case"scroll":f=l0;break;case"wheel":f=T0;break;case"copy":case"cut":case"paste":f=p0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=eh}var y=(t&4)!==0,C=!y&&e==="scroll",g=y?m!==null?m+"Capture":null:m;y=[];for(var v=u,x;v!==null;){x=v;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,g!==null&&(_=ci(v,g),_!=null&&y.push(gi(v,_,x)))),C)break;v=v.return}0<y.length&&(m=new f(m,p,null,n,h),d.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==Kl&&(p=n.relatedTarget||n.fromElement)&&(pr(p)||p[Cn]))break e;if((f||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?pr(p):null,p!==null&&(C=Pr(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=Xd,_="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=eh,_="onPointerLeave",g="onPointerEnter",v="pointer"),C=f==null?m:Qr(f),x=p==null?m:Qr(p),m=new y(_,v+"leave",f,n,h),m.target=C,m.relatedTarget=x,_=null,pr(h)===u&&(y=new y(g,v+"enter",p,n,h),y.target=x,y.relatedTarget=C,_=y),C=_,f&&p)t:{for(y=f,g=p,v=0,x=y;x;x=Lr(x))v++;for(x=0,_=g;_;_=Lr(_))x++;for(;0<v-x;)y=Lr(y),v--;for(;0<x-v;)g=Lr(g),x--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Lr(y),g=Lr(g)}y=null}else y=null;f!==null&&dh(d,m,f,y,!1),p!==null&&C!==null&&dh(d,C,p,y,!0)}}e:{if(m=u?Qr(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var S=D0;else if(rh(m))if(op)S=$0;else{S=F0;var w=R0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=z0);if(S&&(S=S(e,u))){ap(d,S,n,h);break e}w&&w(e,m,u),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&Hl(m,"number",m.value)}switch(w=u?Qr(u):window,e){case"focusin":(rh(w)||w.contentEditable==="true")&&(Kr=w,tc=u,Qs=null);break;case"focusout":Qs=tc=Kr=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,lh(d,n,h);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":lh(d,n,h)}var E;if(yu)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Vr?sp(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(rp&&n.locale!=="ko"&&(Vr||I!=="onCompositionStart"?I==="onCompositionEnd"&&Vr&&(E=np()):(qn=h,pu="value"in qn?qn.value:qn.textContent,Vr=!0)),w=Ra(u,I),0<w.length&&(I=new Zd(I,e,null,n,h),d.push({event:I,listeners:w}),E?I.data=E:(E=ip(n),E!==null&&(I.data=E)))),(E=I0?A0(e,n):M0(e,n))&&(u=Ra(u,"onBeforeInput"),0<u.length&&(h=new Zd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=E))}xp(d,t)})}function gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ra(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ci(e,n),i!=null&&r.unshift(gi(e,i,s)),i=ci(e,t),i!=null&&r.push(gi(e,i,s))),e=e.return}return r}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dh(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ci(n,i),c!=null&&a.unshift(gi(n,c,l))):s||(c=ci(n,i),c!=null&&a.push(gi(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var V0=/\r\n?/g,K0=/\u0000|\uFFFD/g;function hh(e){return(typeof e=="string"?e:""+e).replace(V0,`
`).replace(K0,"")}function Zi(e,t,n){if(t=hh(t),hh(e)!==t&&n)throw Error(G(425))}function Fa(){}var rc=null,sc=null;function ic(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ac=typeof setTimeout=="function"?setTimeout:void 0,J0=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,Q0=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(e){return fh.resolve(null).then(e).catch(Y0)}:ac;function Y0(e){setTimeout(function(){throw e})}function tl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),hi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);hi(t)}function Jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ks=Math.random().toString(36).slice(2),fn="__reactFiber$"+ks,xi="__reactProps$"+ks,Cn="__reactContainer$"+ks,oc="__reactEvents$"+ks,X0="__reactListeners$"+ks,Z0="__reactHandles$"+ks;function pr(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mh(e);e!==null;){if(n=e[fn])return n;e=mh(e)}return t}e=n,n=e.parentNode}return null}function Ii(e){return e=e[fn]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function mo(e){return e[xi]||null}var lc=[],Yr=-1;function rr(e){return{current:e}}function ze(e){0>Yr||(e.current=lc[Yr],lc[Yr]=null,Yr--)}function Re(e,t){Yr++,lc[Yr]=e.current,e.current=t}var tr={},mt=rr(tr),Pt=rr(!1),wr=tr;function ds(e,t){var n=e.type.contextTypes;if(!n)return tr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function It(e){return e=e.childContextTypes,e!=null}function za(){ze(Pt),ze(mt)}function ph(e,t,n){if(mt.current!==tr)throw Error(G(168));Re(mt,t),Re(Pt,n)}function bp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(G(108,Ry(e)||"Unknown",s));return qe({},n,r)}function $a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tr,wr=mt.current,Re(mt,e),Re(Pt,Pt.current),!0}function gh(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=bp(e,t,wr),r.__reactInternalMemoizedMergedChildContext=e,ze(Pt),ze(mt),Re(mt,e)):ze(Pt),Re(Pt,n)}var wn=null,po=!1,nl=!1;function vp(e){wn===null?wn=[e]:wn.push(e)}function eb(e){po=!0,vp(e)}function sr(){if(!nl&&wn!==null){nl=!0;var e=0,t=Ie;try{var n=wn;for(Ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,po=!1}catch(s){throw wn!==null&&(wn=wn.slice(e+1)),Wm(du,sr),s}finally{Ie=t,nl=!1}}return null}var Xr=[],Zr=0,Ba=null,Ua=0,Ht=[],qt=0,kr=null,kn=1,jn="";function ur(e,t){Xr[Zr++]=Ua,Xr[Zr++]=Ba,Ba=e,Ua=t}function wp(e,t,n){Ht[qt++]=kn,Ht[qt++]=jn,Ht[qt++]=kr,kr=e;var r=kn;e=jn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,kn=1<<32-sn(t)+s|n<<s|r,jn=i+e}else kn=1<<i|n<<s|r,jn=e}function vu(e){e.return!==null&&(ur(e,1),wp(e,1,0))}function wu(e){for(;e===Ba;)Ba=Xr[--Zr],Xr[Zr]=null,Ua=Xr[--Zr],Xr[Zr]=null;for(;e===kr;)kr=Ht[--qt],Ht[qt]=null,jn=Ht[--qt],Ht[qt]=null,kn=Ht[--qt],Ht[qt]=null}var Rt=null,Dt=null,Be=!1,rn=null;function kp(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Dt=Jn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kr!==null?{id:kn,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,Dt=null,!0):!1;default:return!1}}function cc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uc(e){if(Be){var t=Dt;if(t){var n=t;if(!xh(e,t)){if(cc(e))throw Error(G(418));t=Jn(n.nextSibling);var r=Rt;t&&xh(e,t)?kp(r,n):(e.flags=e.flags&-4097|2,Be=!1,Rt=e)}}else{if(cc(e))throw Error(G(418));e.flags=e.flags&-4097|2,Be=!1,Rt=e}}}function yh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function ea(e){if(e!==Rt)return!1;if(!Be)return yh(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ic(e.type,e.memoizedProps)),t&&(t=Dt)){if(cc(e))throw jp(),Error(G(418));for(;t;)kp(e,t),t=Jn(t.nextSibling)}if(yh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dt=Jn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Rt?Jn(e.stateNode.nextSibling):null;return!0}function jp(){for(var e=Dt;e;)e=Jn(e.nextSibling)}function hs(){Dt=Rt=null,Be=!1}function ku(e){rn===null?rn=[e]:rn.push(e)}var tb=In.ReactCurrentBatchConfig;function Ls(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bh(e){var t=e._init;return t(e._payload)}function Sp(e){function t(g,v){if(e){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=Zn(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,v,x,_){return v===null||v.tag!==6?(v=cl(x,g.mode,_),v.return=g,v):(v=s(v,x),v.return=g,v)}function c(g,v,x,_){var S=x.type;return S===Gr?h(g,v,x.props.children,_,x.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zn&&bh(S)===v.type)?(_=s(v,x.props),_.ref=Ls(g,v,x),_.return=g,_):(_=Ca(x.type,x.key,x.props,null,g.mode,_),_.ref=Ls(g,v,x),_.return=g,_)}function u(g,v,x,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=ul(x,g.mode,_),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function h(g,v,x,_,S){return v===null||v.tag!==7?(v=br(x,g.mode,_,S),v.return=g,v):(v=s(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=cl(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qi:return x=Ca(v.type,v.key,v.props,null,g.mode,x),x.ref=Ls(g,null,v),x.return=g,x;case Wr:return v=ul(v,g.mode,x),v.return=g,v;case zn:var _=v._init;return d(g,_(v._payload),x)}if(Us(v)||Ts(v))return v=br(v,g.mode,x,null),v.return=g,v;ta(g,v)}return null}function m(g,v,x,_){var S=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(g,v,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qi:return x.key===S?c(g,v,x,_):null;case Wr:return x.key===S?u(g,v,x,_):null;case zn:return S=x._init,m(g,v,S(x._payload),_)}if(Us(x)||Ts(x))return S!==null?null:h(g,v,x,_,null);ta(g,x)}return null}function f(g,v,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(x)||null,l(v,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qi:return g=g.get(_.key===null?x:_.key)||null,c(v,g,_,S);case Wr:return g=g.get(_.key===null?x:_.key)||null,u(v,g,_,S);case zn:var w=_._init;return f(g,v,x,w(_._payload),S)}if(Us(_)||Ts(_))return g=g.get(x)||null,h(v,g,_,S,null);ta(v,_)}return null}function p(g,v,x,_){for(var S=null,w=null,E=v,I=v=0,P=null;E!==null&&I<x.length;I++){E.index>I?(P=E,E=null):P=E.sibling;var b=m(g,E,x[I],_);if(b===null){E===null&&(E=P);break}e&&E&&b.alternate===null&&t(g,E),v=i(b,v,I),w===null?S=b:w.sibling=b,w=b,E=P}if(I===x.length)return n(g,E),Be&&ur(g,I),S;if(E===null){for(;I<x.length;I++)E=d(g,x[I],_),E!==null&&(v=i(E,v,I),w===null?S=E:w.sibling=E,w=E);return Be&&ur(g,I),S}for(E=r(g,E);I<x.length;I++)P=f(E,g,I,x[I],_),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?I:P.key),v=i(P,v,I),w===null?S=P:w.sibling=P,w=P);return e&&E.forEach(function(T){return t(g,T)}),Be&&ur(g,I),S}function y(g,v,x,_){var S=Ts(x);if(typeof S!="function")throw Error(G(150));if(x=S.call(x),x==null)throw Error(G(151));for(var w=S=null,E=v,I=v=0,P=null,b=x.next();E!==null&&!b.done;I++,b=x.next()){E.index>I?(P=E,E=null):P=E.sibling;var T=m(g,E,b.value,_);if(T===null){E===null&&(E=P);break}e&&E&&T.alternate===null&&t(g,E),v=i(T,v,I),w===null?S=T:w.sibling=T,w=T,E=P}if(b.done)return n(g,E),Be&&ur(g,I),S;if(E===null){for(;!b.done;I++,b=x.next())b=d(g,b.value,_),b!==null&&(v=i(b,v,I),w===null?S=b:w.sibling=b,w=b);return Be&&ur(g,I),S}for(E=r(g,E);!b.done;I++,b=x.next())b=f(E,g,I,b.value,_),b!==null&&(e&&b.alternate!==null&&E.delete(b.key===null?I:b.key),v=i(b,v,I),w===null?S=b:w.sibling=b,w=b);return e&&E.forEach(function(M){return t(g,M)}),Be&&ur(g,I),S}function C(g,v,x,_){if(typeof x=="object"&&x!==null&&x.type===Gr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case qi:e:{for(var S=x.key,w=v;w!==null;){if(w.key===S){if(S=x.type,S===Gr){if(w.tag===7){n(g,w.sibling),v=s(w,x.props.children),v.return=g,g=v;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zn&&bh(S)===w.type){n(g,w.sibling),v=s(w,x.props),v.ref=Ls(g,w,x),v.return=g,g=v;break e}n(g,w);break}else t(g,w);w=w.sibling}x.type===Gr?(v=br(x.props.children,g.mode,_,x.key),v.return=g,g=v):(_=Ca(x.type,x.key,x.props,null,g.mode,_),_.ref=Ls(g,v,x),_.return=g,g=_)}return a(g);case Wr:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=ul(x,g.mode,_),v.return=g,g=v}return a(g);case zn:return w=x._init,C(g,v,w(x._payload),_)}if(Us(x))return p(g,v,x,_);if(Ts(x))return y(g,v,x,_);ta(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=cl(x,g.mode,_),v.return=g,g=v),a(g)):n(g,v)}return C}var fs=Sp(!0),Np=Sp(!1),Ha=rr(null),qa=null,es=null,ju=null;function Su(){ju=es=qa=null}function Nu(e){var t=Ha.current;ze(Ha),e._currentValue=t}function dc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function os(e,t){qa=e,ju=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(ju!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(qa===null)throw Error(G(308));es=e,qa.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var gr=null;function _u(e){gr===null?gr=[e]:gr.push(e)}function _p(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,_u(t)):(n.next=s.next,s.next=n),t.interleaved=n,En(e,r)}function En(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,En(e,n)}return s=r.interleaved,s===null?(t.next=t,_u(r)):(t.next=s.next,s.next=t),r.interleaved=t,En(e,n)}function wa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hu(e,n)}}function vh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var s=e.updateQueue;$n=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;a=0,h=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(f,d,m):p,m==null)break e;d=qe({},d,m);break e;case 2:$n=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=f,c=d):h=h.next=f,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Sr|=a,e.lanes=a,e.memoizedState=d}}function wh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Ai={},pn=rr(Ai),yi=rr(Ai),bi=rr(Ai);function xr(e){if(e===Ai)throw Error(G(174));return e}function Eu(e,t){switch(Re(bi,t),Re(yi,e),Re(pn,Ai),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wl(t,e)}ze(pn),Re(pn,t)}function ms(){ze(pn),ze(yi),ze(bi)}function Ep(e){xr(bi.current);var t=xr(pn.current),n=Wl(t,e.type);t!==n&&(Re(yi,e),Re(pn,n))}function Tu(e){yi.current===e&&(ze(pn),ze(yi))}var Ue=rr(0);function Ga(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rl=[];function Pu(){for(var e=0;e<rl.length;e++)rl[e]._workInProgressVersionPrimary=null;rl.length=0}var ka=In.ReactCurrentDispatcher,sl=In.ReactCurrentBatchConfig,jr=0,He=null,et=null,nt=null,Va=!1,Ys=!1,vi=0,nb=0;function ct(){throw Error(G(321))}function Iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ln(e[n],t[n]))return!1;return!0}function Au(e,t,n,r,s,i){if(jr=i,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ka.current=e===null||e.memoizedState===null?ab:ob,e=n(r,s),Ys){i=0;do{if(Ys=!1,vi=0,25<=i)throw Error(G(301));i+=1,nt=et=null,t.updateQueue=null,ka.current=lb,e=n(r,s)}while(Ys)}if(ka.current=Ka,t=et!==null&&et.next!==null,jr=0,nt=et=He=null,Va=!1,t)throw Error(G(300));return e}function Mu(){var e=vi!==0;return vi=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?He.memoizedState=nt=e:nt=nt.next=e,nt}function Jt(){if(et===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=nt===null?He.memoizedState:nt.next;if(t!==null)nt=t,et=e;else{if(e===null)throw Error(G(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},nt===null?He.memoizedState=nt=e:nt=nt.next=e}return nt}function wi(e,t){return typeof t=="function"?t(e):t}function il(e){var t=Jt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((jr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=r):c=c.next=d,He.lanes|=h,Sr|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,ln(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,He.lanes|=i,Sr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function al(e){var t=Jt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);ln(i,t.memoizedState)||(Tt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Tp(){}function Pp(e,t){var n=He,r=Jt(),s=t(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,Lu(Mp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ki(9,Ap.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(G(349));jr&30||Ip(n,t,s)}return s}function Ip(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ap(e,t,n,r){t.value=n,t.getSnapshot=r,Lp(t)&&Op(e)}function Mp(e,t,n){return n(function(){Lp(t)&&Op(e)})}function Lp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ln(e,n)}catch{return!0}}function Op(e){var t=En(e,1);t!==null&&an(t,e,1,-1)}function kh(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=ib.bind(null,He,e),[t.memoizedState,e]}function ki(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Dp(){return Jt().memoizedState}function ja(e,t,n,r){var s=un();He.flags|=e,s.memoizedState=ki(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(et!==null){var a=et.memoizedState;if(i=a.destroy,r!==null&&Iu(r,a.deps)){s.memoizedState=ki(t,n,i,r);return}}He.flags|=e,s.memoizedState=ki(1|t,n,i,r)}function jh(e,t){return ja(8390656,8,e,t)}function Lu(e,t){return go(2048,8,e,t)}function Rp(e,t){return go(4,2,e,t)}function Fp(e,t){return go(4,4,e,t)}function zp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $p(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,zp.bind(null,t,e),n)}function Ou(){}function Bp(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Iu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Up(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Iu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hp(e,t,n){return jr&21?(ln(n,t)||(n=Km(),He.lanes|=n,Sr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function rb(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var r=sl.transition;sl.transition={};try{e(!1),t()}finally{Ie=n,sl.transition=r}}function qp(){return Jt().memoizedState}function sb(e,t,n){var r=Xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wp(e))Gp(t,n);else if(n=_p(e,t,n,r),n!==null){var s=wt();an(n,e,r,s),Vp(n,t,r)}}function ib(e,t,n){var r=Xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wp(e))Gp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,ln(l,a)){var c=t.interleaved;c===null?(s.next=s,_u(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=_p(e,t,s,r),n!==null&&(s=wt(),an(n,e,r,s),Vp(n,t,r))}}function Wp(e){var t=e.alternate;return e===He||t!==null&&t===He}function Gp(e,t){Ys=Va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hu(e,n)}}var Ka={readContext:Kt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},ab={readContext:Kt,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:jh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ja(4194308,4,zp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sb.bind(null,He,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:kh,useDebugValue:Ou,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=kh(!1),t=e[0];return e=rb.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=He,s=un();if(Be){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),rt===null)throw Error(G(349));jr&30||Ip(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,jh(Mp.bind(null,r,i,e),[e]),r.flags|=2048,ki(9,Ap.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=un(),t=rt.identifierPrefix;if(Be){var n=jn,r=kn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ob={readContext:Kt,useCallback:Bp,useContext:Kt,useEffect:Lu,useImperativeHandle:$p,useInsertionEffect:Rp,useLayoutEffect:Fp,useMemo:Up,useReducer:il,useRef:Dp,useState:function(){return il(wi)},useDebugValue:Ou,useDeferredValue:function(e){var t=Jt();return Hp(t,et.memoizedState,e)},useTransition:function(){var e=il(wi)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Tp,useSyncExternalStore:Pp,useId:qp,unstable_isNewReconciler:!1},lb={readContext:Kt,useCallback:Bp,useContext:Kt,useEffect:Lu,useImperativeHandle:$p,useInsertionEffect:Rp,useLayoutEffect:Fp,useMemo:Up,useReducer:al,useRef:Dp,useState:function(){return al(wi)},useDebugValue:Ou,useDeferredValue:function(e){var t=Jt();return et===null?t.memoizedState=e:Hp(t,et.memoizedState,e)},useTransition:function(){var e=al(wi)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Tp,useSyncExternalStore:Pp,useId:qp,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xo={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),s=Xn(e),i=Sn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Qn(e,i,s),t!==null&&(an(t,e,s,r),wa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),s=Xn(e),i=Sn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Qn(e,i,s),t!==null&&(an(t,e,s,r),wa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=Xn(e),s=Sn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Qn(e,s,r),t!==null&&(an(t,e,r,n),wa(t,e,r))}};function Sh(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!mi(n,r)||!mi(s,i):!0}function Kp(e,t,n){var r=!1,s=tr,i=t.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=It(t)?wr:mt.current,r=t.contextTypes,i=(r=r!=null)?ds(e,s):tr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Nh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function fc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Cu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=It(t)?wr:mt.current,s.context=ds(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&xo.enqueueReplaceState(s,s.state,null),Wa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var n="",r=t;do n+=Dy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ol(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cb=typeof WeakMap=="function"?WeakMap:Map;function Jp(e,t,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qa||(Qa=!0,Sc=r),mc(e,t)},n}function Qp(e,t,n){n=Sn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){mc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mc(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function _h(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cb;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jb.bind(null,e,t,n),t.then(e,e))}function Ch(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Eh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sn(-1,1),t.tag=2,Qn(n,t,1))),n.lanes|=1),e)}var ub=In.ReactCurrentOwner,Tt=!1;function bt(e,t,n,r){t.child=e===null?Np(t,null,n,r):fs(t,e.child,n,r)}function Th(e,t,n,r,s){n=n.render;var i=t.ref;return os(t,s),r=Au(e,t,n,r,i,s),n=Mu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Be&&n&&vu(t),t.flags|=1,bt(e,t,r,s),t.child)}function Ph(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Hu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Yp(e,t,i,r,s)):(e=Ca(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:mi,n(a,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=Zn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Yp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(mi(i,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return pc(e,t,n,r,s)}function Xp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(ns,Ot),Ot|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(ns,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(ns,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Re(ns,Ot),Ot|=r;return bt(e,t,s,n),t.child}function Zp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pc(e,t,n,r,s){var i=It(n)?wr:mt.current;return i=ds(t,i),os(t,s),n=Au(e,t,n,r,i,s),r=Mu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Be&&r&&vu(t),t.flags|=1,bt(e,t,n,s),t.child)}function Ih(e,t,n,r,s){if(It(n)){var i=!0;$a(t)}else i=!1;if(os(t,s),t.stateNode===null)Sa(e,t),Kp(t,n,r),fc(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=It(n)?wr:mt.current,u=ds(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Nh(t,a,r,u),$n=!1;var m=t.memoizedState;a.state=m,Wa(t,r,a,s),c=t.memoizedState,l!==r||m!==c||Pt.current||$n?(typeof h=="function"&&(hc(t,n,h,r),c=t.memoizedState),(l=$n||Sh(t,n,l,r,m,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Cp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:en(t.type,l),a.props=u,d=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=It(n)?wr:mt.current,c=ds(t,c));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Nh(t,a,r,c),$n=!1,m=t.memoizedState,a.state=m,Wa(t,r,a,s);var p=t.memoizedState;l!==d||m!==p||Pt.current||$n?(typeof f=="function"&&(hc(t,n,f,r),p=t.memoizedState),(u=$n||Sh(t,n,u,r,m,p,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return gc(e,t,n,r,i,s)}function gc(e,t,n,r,s,i){Zp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&gh(t,n,!1),Tn(e,t,i);r=t.stateNode,ub.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,l,i)):bt(e,t,l,i),t.memoizedState=r.state,s&&gh(t,n,!0),t.child}function eg(e){var t=e.stateNode;t.pendingContext?ph(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ph(e,t.context,!1),Eu(e,t.containerInfo)}function Ah(e,t,n,r,s){return hs(),ku(s),t.flags|=256,bt(e,t,n,r),t.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function yc(e){return{baseLanes:e,cachePool:null,transitions:null}}function tg(e,t,n){var r=t.pendingProps,s=Ue.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(Ue,s&1),e===null)return uc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=vo(a,r,0,null),e=br(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yc(n),t.memoizedState=xc,e):Du(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return db(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Zn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Zn(l,i):(i=br(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?yc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=xc,r}return i=e.child,e=i.sibling,r=Zn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Du(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,n,r){return r!==null&&ku(r),fs(t,e.child,null,n),e=Du(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function db(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=ol(Error(G(422))),na(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vo({mode:"visible",children:r.children},s,0,null),i=br(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&fs(t,e.child,null,a),t.child.memoizedState=yc(a),t.memoizedState=xc,i);if(!(t.mode&1))return na(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(G(419)),r=ol(i,r,void 0),na(e,t,a,r)}if(l=(a&e.childLanes)!==0,Tt||l){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,En(e,s),an(r,e,s,-1))}return Uu(),r=ol(Error(G(421))),na(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Sb.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Dt=Jn(s.nextSibling),Rt=t,Be=!0,rn=null,e!==null&&(Ht[qt++]=kn,Ht[qt++]=jn,Ht[qt++]=kr,kn=e.id,jn=e.overflow,kr=t),t=Du(t,r.children),t.flags|=4096,t)}function Mh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),dc(e.return,t,n)}function ll(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ng(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bt(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mh(e,n,t);else if(e.tag===19)Mh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ga(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ll(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ga(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ll(t,!0,n,null,i);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hb(e,t,n){switch(t.tag){case 3:eg(t),hs();break;case 5:Ep(t);break;case 1:It(t.type)&&$a(t);break;case 4:Eu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Re(Ha,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?tg(e,t,n):(Re(Ue,Ue.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Re(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ng(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,Xp(e,t,n)}return Tn(e,t,n)}var rg,bc,sg,ig;rg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bc=function(){};sg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,xr(pn.current);var i=null;switch(n){case"input":s=Bl(e,s),r=Bl(e,r),i=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),i=[];break;case"textarea":s=ql(e,s),r=ql(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fa)}Gl(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};ig=function(e,t,n,r){n!==r&&(t.flags|=4)};function Os(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fb(e,t,n){var r=t.pendingProps;switch(wu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return It(t.type)&&za(),ut(t),null;case 3:return r=t.stateNode,ms(),ze(Pt),ze(mt),Pu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rn!==null&&(Cc(rn),rn=null))),bc(e,t),ut(t),null;case 5:Tu(t);var s=xr(bi.current);if(n=t.type,e!==null&&t.stateNode!=null)sg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return ut(t),null}if(e=xr(pn.current),ea(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fn]=t,r[xi]=i,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<qs.length;s++)Fe(qs[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Ud(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":qd(r,i),Fe("invalid",r)}Gl(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zi(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zi(r.textContent,l,e),s=["children",""+l]):oi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Wi(r),Hd(r,i,!0);break;case"textarea":Wi(r),Wd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fa)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fn]=t,e[xi]=r,rg(e,t,!1,!1),t.stateNode=e;e:{switch(a=Vl(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),s=r;break;case"iframe":case"object":case"embed":Fe("load",e),s=r;break;case"video":case"audio":for(s=0;s<qs.length;s++)Fe(qs[s],e);s=r;break;case"source":Fe("error",e),s=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),s=r;break;case"details":Fe("toggle",e),s=r;break;case"input":Ud(e,r),s=Bl(e,r),Fe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":qd(e,r),s=ql(e,r),Fe("invalid",e);break;default:s=r}Gl(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Dm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lm(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&li(e,c):typeof c=="number"&&li(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Fe("scroll",e):c!=null&&au(e,i,c,a))}switch(n){case"input":Wi(e),Hd(e,r,!1);break;case"textarea":Wi(e),Wd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+er(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?rs(e,!!r.multiple,i,!1):r.defaultValue!=null&&rs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Fa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)ig(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=xr(bi.current),xr(pn.current),ea(t)){if(r=t.stateNode,n=t.memoizedProps,r[fn]=t,(i=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:Zi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=t,t.stateNode=r}return ut(t),null;case 13:if(ze(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Dt!==null&&t.mode&1&&!(t.flags&128))jp(),hs(),t.flags|=98560,i=!1;else if(i=ea(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[fn]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else rn!==null&&(Cc(rn),rn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?tt===0&&(tt=3):Uu())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return ms(),bc(e,t),e===null&&pi(t.stateNode.containerInfo),ut(t),null;case 10:return Nu(t.type._context),ut(t),null;case 17:return It(t.type)&&za(),ut(t),null;case 19:if(ze(Ue),i=t.memoizedState,i===null)return ut(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Os(i,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ga(e),a!==null){for(t.flags|=128,Os(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(Ue,Ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ke()>gs&&(t.flags|=128,r=!0,Os(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ga(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Os(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Be)return ut(t),null}else 2*Ke()-i.renderingStartTime>gs&&n!==1073741824&&(t.flags|=128,r=!0,Os(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,n=Ue.current,Re(Ue,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return Bu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ot&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function mb(e,t){switch(wu(t),t.tag){case 1:return It(t.type)&&za(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ms(),ze(Pt),ze(mt),Pu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tu(t),null;case 13:if(ze(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ue),null;case 4:return ms(),null;case 10:return Nu(t.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var ra=!1,dt=!1,pb=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ts(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function vc(e,t,n){try{n()}catch(r){We(e,t,r)}}var Lh=!1;function gb(e,t){if(rc=Oa,e=up(),bu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(l=a+s),d!==i||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)m=d,d=f;for(;;){if(d===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++h===r&&(c=a),(f=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sc={focusedElem:e,selectionRange:n},Oa=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,C=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),C);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(_){We(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return p=Lh,Lh=!1,p}function Xs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&vc(t,n,i)}s=s.next}while(s!==r)}}function yo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ag(e){var t=e.alternate;t!==null&&(e.alternate=null,ag(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[xi],delete t[oc],delete t[X0],delete t[Z0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function og(e){return e.tag===5||e.tag===3||e.tag===4}function Oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||og(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fa));else if(r!==4&&(e=e.child,e!==null))for(kc(e,t,n),e=e.sibling;e!==null;)kc(e,t,n),e=e.sibling}function jc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jc(e,t,n),e=e.sibling;e!==null;)jc(e,t,n),e=e.sibling}var at=null,tn=!1;function On(e,t,n){for(n=n.child;n!==null;)lg(e,t,n),n=n.sibling}function lg(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:dt||ts(n,t);case 6:var r=at,s=tn;at=null,On(e,t,n),at=r,tn=s,at!==null&&(tn?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(tn?(e=at,n=n.stateNode,e.nodeType===8?tl(e.parentNode,n):e.nodeType===1&&tl(e,n),hi(e)):tl(at,n.stateNode));break;case 4:r=at,s=tn,at=n.stateNode.containerInfo,tn=!0,On(e,t,n),at=r,tn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&vc(n,t,a),s=s.next}while(s!==r)}On(e,t,n);break;case 1:if(!dt&&(ts(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,On(e,t,n),dt=r):On(e,t,n);break;default:On(e,t,n)}}function Dh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pb),t.forEach(function(r){var s=Nb.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,tn=!1;break e;case 3:at=l.stateNode.containerInfo,tn=!0;break e;case 4:at=l.stateNode.containerInfo,tn=!0;break e}l=l.return}if(at===null)throw Error(G(160));lg(i,a,s),at=null,tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){We(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cg(t,e),t=t.sibling}function cg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),cn(e),r&4){try{Xs(3,e,e.return),yo(3,e)}catch(y){We(e,e.return,y)}try{Xs(5,e,e.return)}catch(y){We(e,e.return,y)}}break;case 1:Xt(t,e),cn(e),r&512&&n!==null&&ts(n,n.return);break;case 5:if(Xt(t,e),cn(e),r&512&&n!==null&&ts(n,n.return),e.flags&32){var s=e.stateNode;try{li(s,"")}catch(y){We(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Im(s,i),Vl(l,a);var u=Vl(l,i);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?Dm(s,d):h==="dangerouslySetInnerHTML"?Lm(s,d):h==="children"?li(s,d):au(s,h,d,u)}switch(l){case"input":Ul(s,i);break;case"textarea":Am(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?rs(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[xi]=i}catch(y){We(e,e.return,y)}}break;case 6:if(Xt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){We(e,e.return,y)}}break;case 3:if(Xt(t,e),cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hi(t.containerInfo)}catch(y){We(e,e.return,y)}break;case 4:Xt(t,e),cn(e);break;case 13:Xt(t,e),cn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zu=Ke())),r&4&&Dh(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(u=dt)||h,Xt(t,e),dt=u):Xt(t,e),cn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ie=e,h=e.child;h!==null;){for(d=ie=h;ie!==null;){switch(m=ie,f=m.child,m.tag){case 0:case 11:case 14:case 15:Xs(4,m,m.return);break;case 1:ts(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){We(r,n,y)}}break;case 5:ts(m,m.return);break;case 22:if(m.memoizedState!==null){Fh(d);continue}}f!==null?(f.return=m,ie=f):Fh(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Om("display",a))}catch(y){We(e,e.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){We(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xt(t,e),cn(e),r&4&&Dh(e);break;case 21:break;default:Xt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(og(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(li(s,""),r.flags&=-33);var i=Oh(e);jc(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Oh(e);kc(e,l,a);break;default:throw Error(G(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xb(e,t,n){ie=e,ug(e)}function ug(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ra;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||dt;l=ra;var u=dt;if(ra=a,(dt=c)&&!u)for(ie=s;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?zh(s):c!==null?(c.return=a,ie=c):zh(s);for(;i!==null;)ie=i,ug(i),i=i.sibling;ie=s,ra=l,dt=u}Rh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Rh(e)}}function Rh(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||yo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&wh(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wh(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&hi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}dt||t.flags&512&&wc(t)}catch(m){We(t,t.return,m)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Fh(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function zh(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yo(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var i=t.return;try{wc(t)}catch(c){We(t,i,c)}break;case 5:var a=t.return;try{wc(t)}catch(c){We(t,a,c)}}}catch(c){We(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var yb=Math.ceil,Ja=In.ReactCurrentDispatcher,Ru=In.ReactCurrentOwner,Vt=In.ReactCurrentBatchConfig,Pe=0,rt=null,Qe=null,ot=0,Ot=0,ns=rr(0),tt=0,ji=null,Sr=0,bo=0,Fu=0,Zs=null,Ct=null,zu=0,gs=1/0,bn=null,Qa=!1,Sc=null,Yn=null,sa=!1,Wn=null,Ya=0,ei=0,Nc=null,Na=-1,_a=0;function wt(){return Pe&6?Ke():Na!==-1?Na:Na=Ke()}function Xn(e){return e.mode&1?Pe&2&&ot!==0?ot&-ot:tb.transition!==null?(_a===0&&(_a=Km()),_a):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:tp(e.type)),e):1}function an(e,t,n,r){if(50<ei)throw ei=0,Nc=null,Error(G(185));Ti(e,n,r),(!(Pe&2)||e!==rt)&&(e===rt&&(!(Pe&2)&&(bo|=n),tt===4&&Un(e,ot)),At(e,r),n===1&&Pe===0&&!(t.mode&1)&&(gs=Ke()+500,po&&sr()))}function At(e,t){var n=e.callbackNode;t0(e,t);var r=La(e,e===rt?ot:0);if(r===0)n!==null&&Kd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kd(n),t===1)e.tag===0?eb($h.bind(null,e)):vp($h.bind(null,e)),Q0(function(){!(Pe&6)&&sr()}),n=null;else{switch(Jm(r)){case 1:n=du;break;case 4:n=Gm;break;case 16:n=Ma;break;case 536870912:n=Vm;break;default:n=Ma}n=yg(n,dg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dg(e,t){if(Na=-1,_a=0,Pe&6)throw Error(G(327));var n=e.callbackNode;if(ls()&&e.callbackNode!==n)return null;var r=La(e,e===rt?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xa(e,r);else{t=r;var s=Pe;Pe|=2;var i=fg();(rt!==e||ot!==t)&&(bn=null,gs=Ke()+500,yr(e,t));do try{wb();break}catch(l){hg(e,l)}while(!0);Su(),Ja.current=i,Pe=s,Qe!==null?t=0:(rt=null,ot=0,t=tt)}if(t!==0){if(t===2&&(s=Xl(e),s!==0&&(r=s,t=_c(e,s))),t===1)throw n=ji,yr(e,0),Un(e,r),At(e,Ke()),n;if(t===6)Un(e,r);else{if(s=e.current.alternate,!(r&30)&&!bb(s)&&(t=Xa(e,r),t===2&&(i=Xl(e),i!==0&&(r=i,t=_c(e,i))),t===1))throw n=ji,yr(e,0),Un(e,r),At(e,Ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:dr(e,Ct,bn);break;case 3:if(Un(e,r),(r&130023424)===r&&(t=zu+500-Ke(),10<t)){if(La(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ac(dr.bind(null,e,Ct,bn),t);break}dr(e,Ct,bn);break;case 4:if(Un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-sn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yb(r/1960))-r,10<r){e.timeoutHandle=ac(dr.bind(null,e,Ct,bn),r);break}dr(e,Ct,bn);break;case 5:dr(e,Ct,bn);break;default:throw Error(G(329))}}}return At(e,Ke()),e.callbackNode===n?dg.bind(null,e):null}function _c(e,t){var n=Zs;return e.current.memoizedState.isDehydrated&&(yr(e,t).flags|=256),e=Xa(e,t),e!==2&&(t=Ct,Ct=n,t!==null&&Cc(t)),e}function Cc(e){Ct===null?Ct=e:Ct.push.apply(Ct,e)}function bb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t){for(t&=~Fu,t&=~bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function $h(e){if(Pe&6)throw Error(G(327));ls();var t=La(e,0);if(!(t&1))return At(e,Ke()),null;var n=Xa(e,t);if(e.tag!==0&&n===2){var r=Xl(e);r!==0&&(t=r,n=_c(e,r))}if(n===1)throw n=ji,yr(e,0),Un(e,t),At(e,Ke()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dr(e,Ct,bn),At(e,Ke()),null}function $u(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(gs=Ke()+500,po&&sr())}}function Nr(e){Wn!==null&&Wn.tag===0&&!(Pe&6)&&ls();var t=Pe;Pe|=1;var n=Vt.transition,r=Ie;try{if(Vt.transition=null,Ie=1,e)return e()}finally{Ie=r,Vt.transition=n,Pe=t,!(Pe&6)&&sr()}}function Bu(){Ot=ns.current,ze(ns)}function yr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,J0(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(wu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:ms(),ze(Pt),ze(mt),Pu();break;case 5:Tu(r);break;case 4:ms();break;case 13:ze(Ue);break;case 19:ze(Ue);break;case 10:Nu(r.type._context);break;case 22:case 23:Bu()}n=n.return}if(rt=e,Qe=e=Zn(e.current,null),ot=Ot=t,tt=0,ji=null,Fu=bo=Sr=0,Ct=Zs=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}gr=null}return e}function hg(e,t){do{var n=Qe;try{if(Su(),ka.current=Ka,Va){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Va=!1}if(jr=0,nt=et=He=null,Ys=!1,vi=0,Ru.current=null,n===null||n.return===null){tt=1,ji=t,Qe=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Ch(a);if(f!==null){f.flags&=-257,Eh(f,a,l,i,t),f.mode&1&&_h(i,u,t),t=f,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){_h(i,u,t),Uu();break e}c=Error(G(426))}}else if(Be&&l.mode&1){var C=Ch(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Eh(C,a,l,i,t),ku(ps(c,l));break e}}i=c=ps(c,l),tt!==4&&(tt=2),Zs===null?Zs=[i]:Zs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Jp(i,c,t);vh(i,g);break e;case 1:l=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Yn===null||!Yn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Qp(i,l,t);vh(i,_);break e}}i=i.return}while(i!==null)}pg(n)}catch(S){t=S,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function fg(){var e=Ja.current;return Ja.current=Ka,e===null?Ka:e}function Uu(){(tt===0||tt===3||tt===2)&&(tt=4),rt===null||!(Sr&268435455)&&!(bo&268435455)||Un(rt,ot)}function Xa(e,t){var n=Pe;Pe|=2;var r=fg();(rt!==e||ot!==t)&&(bn=null,yr(e,t));do try{vb();break}catch(s){hg(e,s)}while(!0);if(Su(),Pe=n,Ja.current=r,Qe!==null)throw Error(G(261));return rt=null,ot=0,tt}function vb(){for(;Qe!==null;)mg(Qe)}function wb(){for(;Qe!==null&&!Gy();)mg(Qe)}function mg(e){var t=xg(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?pg(e):Qe=t,Ru.current=null}function pg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mb(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Qe=null;return}}else if(n=fb(n,t,Ot),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);tt===0&&(tt=5)}function dr(e,t,n){var r=Ie,s=Vt.transition;try{Vt.transition=null,Ie=1,kb(e,t,n,r)}finally{Vt.transition=s,Ie=r}return null}function kb(e,t,n,r){do ls();while(Wn!==null);if(Pe&6)throw Error(G(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(n0(e,i),e===rt&&(Qe=rt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,yg(Ma,function(){return ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vt.transition,Vt.transition=null;var a=Ie;Ie=1;var l=Pe;Pe|=4,Ru.current=null,gb(e,n),cg(n,e),U0(sc),Oa=!!rc,sc=rc=null,e.current=n,xb(n),Vy(),Pe=l,Ie=a,Vt.transition=i}else e.current=n;if(sa&&(sa=!1,Wn=e,Ya=s),i=e.pendingLanes,i===0&&(Yn=null),Qy(n.stateNode),At(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qa)throw Qa=!1,e=Sc,Sc=null,e;return Ya&1&&e.tag!==0&&ls(),i=e.pendingLanes,i&1?e===Nc?ei++:(ei=0,Nc=e):ei=0,sr(),null}function ls(){if(Wn!==null){var e=Jm(Ya),t=Vt.transition,n=Ie;try{if(Vt.transition=null,Ie=16>e?16:e,Wn===null)var r=!1;else{if(e=Wn,Wn=null,Ya=0,Pe&6)throw Error(G(331));var s=Pe;for(Pe|=4,ie=e.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ie=u;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Xs(8,h,i)}var d=h.child;if(d!==null)d.return=h,ie=d;else for(;ie!==null;){h=ie;var m=h.sibling,f=h.return;if(ag(h),h===u){ie=null;break}if(m!==null){m.return=f,ie=m;break}ie=f}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xs(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ie=g;break e}ie=i.return}}var v=e.current;for(ie=v;ie!==null;){a=ie;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ie=x;else e:for(a=v;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yo(9,l)}}catch(S){We(l,l.return,S)}if(l===a){ie=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ie=_;break e}ie=l.return}}if(Pe=s,sr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(co,e)}catch{}r=!0}return r}finally{Ie=n,Vt.transition=t}}return!1}function Bh(e,t,n){t=ps(n,t),t=Jp(e,t,1),e=Qn(e,t,1),t=wt(),e!==null&&(Ti(e,1,t),At(e,t))}function We(e,t,n){if(e.tag===3)Bh(e,e,n);else for(;t!==null;){if(t.tag===3){Bh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=ps(n,e),e=Qp(t,e,1),t=Qn(t,e,1),e=wt(),t!==null&&(Ti(t,1,e),At(t,e));break}}t=t.return}}function jb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(ot&n)===n&&(tt===4||tt===3&&(ot&130023424)===ot&&500>Ke()-zu?yr(e,0):Fu|=n),At(e,t)}function gg(e,t){t===0&&(e.mode&1?(t=Ki,Ki<<=1,!(Ki&130023424)&&(Ki=4194304)):t=1);var n=wt();e=En(e,t),e!==null&&(Ti(e,t,n),At(e,n))}function Sb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gg(e,n)}function Nb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),gg(e,n)}var xg;xg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,hb(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Be&&t.flags&1048576&&wp(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sa(e,t),e=t.pendingProps;var s=ds(t,mt.current);os(t,n),s=Au(null,t,r,e,s,n);var i=Mu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(r)?(i=!0,$a(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cu(t),s.updater=xo,t.stateNode=s,s._reactInternals=t,fc(t,r,e,n),t=gc(null,t,r,!0,i,n)):(t.tag=0,Be&&i&&vu(t),bt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Cb(r),e=en(r,e),s){case 0:t=pc(null,t,r,e,n);break e;case 1:t=Ih(null,t,r,e,n);break e;case 11:t=Th(null,t,r,e,n);break e;case 14:t=Ph(null,t,r,en(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),pc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Ih(e,t,r,s,n);case 3:e:{if(eg(t),e===null)throw Error(G(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Cp(e,t),Wa(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ps(Error(G(423)),t),t=Ah(e,t,r,n,s);break e}else if(r!==s){s=ps(Error(G(424)),t),t=Ah(e,t,r,n,s);break e}else for(Dt=Jn(t.stateNode.containerInfo.firstChild),Rt=t,Be=!0,rn=null,n=Np(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hs(),r===s){t=Tn(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return Ep(t),e===null&&uc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,ic(r,s)?a=null:i!==null&&ic(r,i)&&(t.flags|=32),Zp(e,t),bt(e,t,a,n),t.child;case 6:return e===null&&uc(t),null;case 13:return tg(e,t,n);case 4:return Eu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fs(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Th(e,t,r,s,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Re(Ha,r._currentValue),r._currentValue=a,i!==null)if(ln(i.value,a)){if(i.children===s.children&&!Pt.current){t=Tn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Sn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),dc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),dc(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}bt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,os(t,n),s=Kt(s),r=r(s),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,s=en(r,t.pendingProps),s=en(r.type,s),Ph(e,t,r,s,n);case 15:return Yp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Sa(e,t),t.tag=1,It(r)?(e=!0,$a(t)):e=!1,os(t,n),Kp(t,r,s),fc(t,r,s,n),gc(null,t,r,!0,e,n);case 19:return ng(e,t,n);case 22:return Xp(e,t,n)}throw Error(G(156,t.tag))};function yg(e,t){return Wm(e,t)}function _b(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new _b(e,t,n,r)}function Hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cb(e){if(typeof e=="function")return Hu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lu)return 11;if(e===cu)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ca(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Hu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Gr:return br(n.children,s,i,t);case ou:a=8,s|=8;break;case Rl:return e=Gt(12,n,t,s|2),e.elementType=Rl,e.lanes=i,e;case Fl:return e=Gt(13,n,t,s),e.elementType=Fl,e.lanes=i,e;case zl:return e=Gt(19,n,t,s),e.elementType=zl,e.lanes=i,e;case Em:return vo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _m:a=10;break e;case Cm:a=9;break e;case lu:a=11;break e;case cu:a=14;break e;case zn:a=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Gt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function br(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function vo(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=Em,e.lanes=n,e.stateNode={isHidden:!1},e}function cl(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function ul(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eb(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qu(e,t,n,r,s,i,a,l,c){return e=new Eb(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Gt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cu(i),e}function Tb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bg(e){if(!e)return tr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(It(n))return bp(e,n,t)}return t}function vg(e,t,n,r,s,i,a,l,c){return e=qu(n,r,!0,e,s,i,a,l,c),e.context=bg(null),n=e.current,r=wt(),s=Xn(n),i=Sn(r,s),i.callback=t??null,Qn(n,i,s),e.current.lanes=s,Ti(e,s,r),At(e,r),e}function wo(e,t,n,r){var s=t.current,i=wt(),a=Xn(s);return n=bg(n),t.context===null?t.context=n:t.pendingContext=n,t=Sn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qn(s,t,a),e!==null&&(an(e,s,a,i),wa(e,s,a)),a}function Za(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wu(e,t){Uh(e,t),(e=e.alternate)&&Uh(e,t)}function Pb(){return null}var wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}ko.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));wo(e,t,null,null)};ko.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nr(function(){wo(null,e,null,null)}),t[Cn]=null}};function ko(e){this._internalRoot=e}ko.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bn.length&&t!==0&&t<Bn[n].priority;n++);Bn.splice(n,0,e),n===0&&ep(e)}};function Vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hh(){}function Ib(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Za(a);i.call(u)}}var a=vg(t,r,e,0,null,!1,!1,"",Hh);return e._reactRootContainer=a,e[Cn]=a.current,pi(e.nodeType===8?e.parentNode:e),Nr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Za(c);l.call(u)}}var c=qu(e,0,!1,null,null,!1,!1,"",Hh);return e._reactRootContainer=c,e[Cn]=c.current,pi(e.nodeType===8?e.parentNode:e),Nr(function(){wo(t,c,n,r)}),c}function So(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Za(a);l.call(c)}}wo(t,a,e,s)}else a=Ib(n,t,e,s,r);return Za(a)}Qm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hs(t.pendingLanes);n!==0&&(hu(t,n|1),At(t,Ke()),!(Pe&6)&&(gs=Ke()+500,sr()))}break;case 13:Nr(function(){var r=En(e,1);if(r!==null){var s=wt();an(r,e,1,s)}}),Wu(e,1)}};fu=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var n=wt();an(t,e,134217728,n)}Wu(e,134217728)}};Ym=function(e){if(e.tag===13){var t=Xn(e),n=En(e,t);if(n!==null){var r=wt();an(n,e,t,r)}Wu(e,t)}};Xm=function(){return Ie};Zm=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}};Jl=function(e,t,n){switch(t){case"input":if(Ul(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mo(r);if(!s)throw Error(G(90));Pm(r),Ul(r,s)}}}break;case"textarea":Am(e,n);break;case"select":t=n.value,t!=null&&rs(e,!!n.multiple,t,!1)}};zm=$u;$m=Nr;var Ab={usingClientEntryPoint:!1,Events:[Ii,Qr,mo,Rm,Fm,$u]},Ds={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mb={bundleType:Ds.bundleType,version:Ds.version,rendererPackageName:Ds.rendererPackageName,rendererConfig:Ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hm(e),e===null?null:e.stateNode},findFiberByHostInstance:Ds.findFiberByHostInstance||Pb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{co=ia.inject(Mb),mn=ia}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ab;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(t))throw Error(G(200));return Tb(e,t,null,n)};$t.createRoot=function(e,t){if(!Vu(e))throw Error(G(299));var n=!1,r="",s=wg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=qu(e,1,!1,null,null,n,!1,r,s),e[Cn]=t.current,pi(e.nodeType===8?e.parentNode:e),new Gu(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Hm(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Nr(e)};$t.hydrate=function(e,t,n){if(!jo(t))throw Error(G(200));return So(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Vu(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=wg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vg(t,null,e,1,n??null,s,!1,i,a),e[Cn]=t.current,pi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ko(t)};$t.render=function(e,t,n){if(!jo(t))throw Error(G(200));return So(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!jo(e))throw Error(G(40));return e._reactRootContainer?(Nr(function(){So(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};$t.unstable_batchedUpdates=$u;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jo(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return So(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kg)}catch(e){console.error(e)}}kg(),km.exports=$t;var Lb=km.exports,jg,qh=Lb;jg=qh.createRoot,qh.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ob={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},h)=>N.createElement("svg",{ref:h,...Ob,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Db(e)}`,l].join(" "),...u},[...t.map(([d,m])=>N.createElement(d,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=ge("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ge("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=ge("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ge("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ge("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=ge("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Xb="modulepreload",Zb=function(e){return"/battleplanapp/"+e},Vh={},Di=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Zb(c),c in Vh)return;Vh[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Xb,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},ev=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Di(async()=>{const{default:r}=await Promise.resolve().then(()=>Ns);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Xu extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class tv extends Xu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Kh extends Xu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jh extends Xu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Pc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Pc||(Pc={}));var nv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class rv{constructor(t,{headers:n={},customFetch:r,region:s=Pc.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=ev(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return nv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(y=>{throw new tv(y)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new Kh(d);if(!d.ok)throw new Jh(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Jh||s instanceof Kh?s.context:void 0}}})}}var Et={},Zu={},_o={},Ri={},Co={},Eo={},sv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xs=sv();const iv=xs.fetch,Tg=xs.fetch.bind(xs),Pg=xs.Headers,av=xs.Request,ov=xs.Response,Ns=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pg,Request:av,Response:ov,default:Tg,fetch:iv},Symbol.toStringTag,{value:"Module"})),lv=ly(Ns);var To={};Object.defineProperty(To,"__esModule",{value:!0});let cv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};To.default=cv;var Ig=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});const uv=Ig(lv),dv=Ig(To);let hv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=uv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,h=null,d=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=g:h=JSON.parse(g))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&C&&C.length>1&&(d=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,f="OK")}catch{i.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new dv.default(u)}return{error:u,data:h,count:d,status:m,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Eo.default=hv;var fv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Co,"__esModule",{value:!0});const mv=fv(Eo);let pv=class extends mv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Co.default=pv;var gv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ri,"__esModule",{value:!0});const xv=gv(Co);let yv=class extends xv.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ri.default=yv;var bv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_o,"__esModule",{value:!0});const Rs=bv(Ri);let vv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Rs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Rs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Rs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Rs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Rs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_o.default=vv;var Po={},Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.version=void 0;Io.version="0.0.0-automated";Object.defineProperty(Po,"__esModule",{value:!0});Po.DEFAULT_HEADERS=void 0;const wv=Io;Po.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wv.version}`};var Ag=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zu,"__esModule",{value:!0});const kv=Ag(_o),jv=Ag(Ri),Sv=Po;let Nv=class Mg{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Sv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new kv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Mg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new jv.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Zu.default=Nv;var _s=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Et,"__esModule",{value:!0});Et.PostgrestError=Et.PostgrestBuilder=Et.PostgrestTransformBuilder=Et.PostgrestFilterBuilder=Et.PostgrestQueryBuilder=Et.PostgrestClient=void 0;const Lg=_s(Zu);Et.PostgrestClient=Lg.default;const Og=_s(_o);Et.PostgrestQueryBuilder=Og.default;const Dg=_s(Ri);Et.PostgrestFilterBuilder=Dg.default;const Rg=_s(Co);Et.PostgrestTransformBuilder=Rg.default;const Fg=_s(Eo);Et.PostgrestBuilder=Fg.default;const zg=_s(To);Et.PostgrestError=zg.default;var _v=Et.default={PostgrestClient:Lg.default,PostgrestQueryBuilder:Og.default,PostgrestFilterBuilder:Dg.default,PostgrestTransformBuilder:Rg.default,PostgrestBuilder:Fg.default,PostgrestError:zg.default};const{PostgrestClient:Cv,PostgrestQueryBuilder:XC,PostgrestFilterBuilder:ZC,PostgrestTransformBuilder:eE,PostgrestBuilder:tE,PostgrestError:nE}=_v;class Ev{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Tv="2.15.1",Pv=`realtime-js/${Tv}`,Iv="1.0.0",Ic=1e4,Av=1e3,Mv=100;var ti;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ti||(ti={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var nn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(nn||(nn={}));var Ac;(function(e){e.websocket="websocket"})(Ac||(Ac={}));var fr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fr||(fr={}));class Lv{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class $g{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Oe||(Oe={}));const Qh=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=Ov(a,e,t,s),i),{})},Ov=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Bg(i,a):Mc(a)},Bg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return zv(t,n)}switch(e){case Oe.bool:return Dv(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Rv(t);case Oe.json:case Oe.jsonb:return Fv(t);case Oe.timestamp:return $v(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Mc(t);default:return Mc(t)}},Mc=e=>e,Dv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Rv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},zv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Bg(t,l))}return e},$v=e=>typeof e=="string"?e.replace(" ","T"):e,Ug=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class dl{constructor(t,n,r={},s=Ic){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yh||(Yh={}));class ni{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ni.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ni.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ni.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,h)=>{a[u]||(c[u]=h)}),this.map(a,(u,h)=>{const d=i[u];if(d){const m=h.map(C=>C.presence_ref),f=d.map(C=>C.presence_ref),p=h.filter(C=>f.indexOf(C.presence_ref)<0),y=d.filter(C=>m.indexOf(C.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(f=>f.presence_ref),m=h.filter(f=>d.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xh||(Xh={}));var ri;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ri||(ri={}));var vn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vn||(vn={}));class ed{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dl(this,nn.join,this.params,this.timeout),this.rejoinTimer=new $g(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ni(this),this.broadcastEndpointURL=Ug(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[ri.PRESENCE]&&this.bindings[ri.PRESENCE].length>0,h={},d={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(vn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(vn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){t==null||t(vn.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,C=[];for(let g=0;g<y;g++){const v=p[g],{filter:{event:x,schema:_,table:S,filter:w}}=v,E=m&&m[g];if(E&&E.event===x&&E.schema===_&&E.table===S&&E.filter===w)C.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(vn.SUBSCRIBED);return}}).receive("error",m=>{this.state=Xe.errored,t==null||t(vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Xe.joined&&t===ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new dl(this,nn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dl(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Mv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=nn;if(r&&[l,c,u,h].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,y,C;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((C=(y=f.filter)===null||y===void 0?void 0:y.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(f=>f.callback(m,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var p,y,C,g,v,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const _=f.id,S=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((y=n.ids)===null||y===void 0?void 0:y.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const _=(v=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:C,commit_timestamp:g,type:v,errors:x}=p;m=Object.assign(Object.assign({},{schema:y,table:C,commit_timestamp:g,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}f.callback(m,r)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ed.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nn.close,{},t)}_onError(t){this._on(nn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Qh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Qh(t.columns,t.old_record)),n}}const Zh=()=>{},aa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bv=[1e3,2e3,5e3,1e4],Uv=1e4,Hv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qv{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ic,this.transport=null,this.heartbeatIntervalMs=aa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zh,this.ref=0,this.reconnectTimer=null,this.logger=Zh,this.conn=null,this.sendBuffer=[],this.serializer=new Lv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Di(async()=>{const{default:l}=await Promise.resolve().then(()=>Ns);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ac.websocket}`,this.httpEndpoint=Ug(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ev.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Iv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ti.connecting:return fr.Connecting;case ti.open:return fr.Open;case ti.closing:return fr.Closing;default:return fr.Closed}}isConnected(){return this.connectionState()===fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ed(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Av,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},aa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(nn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Hv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Pv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(nn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new $g(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},aa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Ic,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:aa.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>Bv[h-1]||Uv,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class td extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Wv extends td{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lc extends td{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Gv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Hg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Di(async()=>{const{default:r}=await Promise.resolve().then(()=>Ns);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Vv=()=>Gv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Di(()=>Promise.resolve().then(()=>Ns),void 0)).Response:Response}),Oc=e=>{if(Array.isArray(e))return e.map(n=>Oc(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Oc(r)}),t},Kv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ar=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const hl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jv=(e,t,n)=>Ar(void 0,void 0,void 0,function*(){const r=yield Vv();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new Wv(hl(s),i,a))}).catch(s=>{t(new Lc(hl(s),s))}):t(new Lc(hl(e),e))}),Qv=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Kv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Fi(e,t,n,r,s,i){return Ar(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,Qv(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Jv(c,l,r))})})}function to(e,t,n,r){return Ar(this,void 0,void 0,function*(){return Fi(e,"GET",t,n,r)})}function dn(e,t,n,r,s){return Ar(this,void 0,void 0,function*(){return Fi(e,"POST",t,r,s,n)})}function Dc(e,t,n,r,s){return Ar(this,void 0,void 0,function*(){return Fi(e,"PUT",t,r,s,n)})}function Yv(e,t,n,r){return Ar(this,void 0,void 0,function*(){return Fi(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function qg(e,t,n,r,s){return Ar(this,void 0,void 0,function*(){return Fi(e,"DELETE",t,r,s,n)})}var yt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Xv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ef={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zv{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Hg(s)}uploadOrUpdate(t,n,r,s){return yt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},ef),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),d=yield(t=="PUT"?Dc:dn)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(Ze(i))return{data:null,error:i};throw i}})}upload(t,n,r){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return yt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ef.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield Dc(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return yt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield dn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new td("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}update(t,n,r){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return yt(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}copy(t,n,r){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield dn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return yt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield dn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return yt(this,void 0,void 0,function*(){try{const s=yield dn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}download(t,n){return yt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield to(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ze(l))return{data:null,error:l};throw l}})}info(t){return yt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield to(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Oc(r),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}exists(t){return yt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Yv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ze(r)&&r instanceof Lc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return yt(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}list(t,n,r){return yt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Xv),n),{prefix:t||""});return{data:yield dn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}listV2(t,n){return yt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield dn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const ew="2.11.0",tw={"X-Client-Info":`storage-js/${ew}`};var Or=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class nw{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},tw),n),this.fetch=Hg(r)}listBuckets(){return Or(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ze(t))return{data:null,error:t};throw t}})}getBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Or(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Or(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Or(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}}class rw extends nw{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new Zv(this.url,this.headers,t,this.fetch)}}const sw="2.55.0";let Ws="";typeof Deno<"u"?Ws="deno":typeof document<"u"?Ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ws="react-native":Ws="node";const iw={"X-Client-Info":`supabase-js-${Ws}/${sw}`},aw={headers:iw},ow={schema:"public"},lw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cw={};var uw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const dw=e=>{let t;return e?t=e:typeof fetch>"u"?t=Tg:t=fetch,(...n)=>t(...n)},hw=()=>typeof Headers>"u"?Pg:Headers,fw=(e,t,n)=>{const r=dw(n),s=hw();return(i,a)=>uw(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var mw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function pw(e){return e.endsWith("/")?e:e+"/"}function gw(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>mw(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Wg="2.71.1",Ur=30*1e3,Rc=3,fl=Rc*Ur,xw="http://localhost:9999",yw="supabase.auth.token",bw={"X-Client-Info":`gotrue-js/${Wg}`},Fc="X-Supabase-Api-Version",Gg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ww=10*60*1e3;class nd extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class kw extends nd{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jw(e){return xe(e)&&e.name==="AuthApiError"}class Vg extends nd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ir extends nd{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Fn extends ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sw(e){return xe(e)&&e.name==="AuthSessionMissingError"}class oa extends ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class la extends ir{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ca extends ir{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nw(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class tf extends ir{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zc extends ir{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ml(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class nf extends ir{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class $c extends ir{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rf=` 	
\r=`.split(""),_w=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rf.length;t+=1)e[rf[t].charCodeAt(0)]=-2;for(let t=0;t<no.length;t+=1)e[no[t].charCodeAt(0)]=t;return e})();function sf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(no[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(no[r]),t.queuedBits-=6}}function Kg(e,t,n){const r=_w[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function af(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Tw(a,r,n)};for(let a=0;a<e.length;a+=1)Kg(e.charCodeAt(a),s,i);return t.join("")}function Cw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Ew(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Cw(r,t)}}function Tw(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Pw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Kg(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Iw(e){const t=[];return Ew(e,n=>t.push(n)),new Uint8Array(t)}function Aw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>sf(s,n,r)),sf(null,n,r),t.join("")}function Mw(e){return Math.round(Date.now()/1e3)+e}function Lw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Zt=()=>typeof window<"u"&&typeof document<"u",or={tested:!1,writable:!1},Jg=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(or.tested)return or.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),or.tested=!0,or.writable=!0}catch{or.tested=!0,or.writable=!1}return or.writable};function Ow(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Qg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Di(async()=>{const{default:r}=await Promise.resolve().then(()=>Ns);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Dw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},lr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dn=async(e,t)=>{await e.removeItem(t)};class Ao{constructor(){this.promise=new Ao.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ao.promiseConstructor=Promise;function pl(e){const t=e.split(".");if(t.length!==3)throw new $c("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!vw.test(t[r]))throw new $c("JWT not in base64url format");return{header:JSON.parse(af(t[0])),payload:JSON.parse(af(t[1])),signature:Pw(t[2]),raw:{header:t[0],payload:t[1]}}}async function Rw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Fw(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function zw(e){return("0"+e.toString(16)).substr(-2)}function $w(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,zw).join("")}async function Bw(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Uw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Bw(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(e,t,n=!1){const r=$w();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Hr(e,`${t}-code-verifier`,s);const i=await Uw(r);return[i,r===i?"plain":"s256"]}const Hw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qw(e){const t=e.headers.get(Fc);if(!t||!t.match(Hw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Ww(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Gw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rr(e){if(!Vw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gl(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function of(e){return JSON.parse(JSON.stringify(e))}var Kw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const hr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jw=[502,503,504];async function lf(e){var t;if(!Dw(e))throw new zc(hr(e),0);if(Jw.includes(e.status))throw new zc(hr(e),e.status);let n;try{n=await e.json()}catch(i){throw new Vg(hr(i),i)}let r;const s=qw(e);if(s&&s.getTime()>=Gg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nf(hr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new nf(hr(n),e.status,n.weak_password.reasons);throw new kw(hr(n),e.status||500,r)}const Qw=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function we(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Fc]||(i[Fc]=Gg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Yw(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Yw(e,t,n,r,s,i){const a=Qw(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new zc(hr(c),0)}if(l.ok||await lf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await lf(c)}}function yn(e){var t;let n=null;t1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Mw(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function cf(e){const t=yn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Hn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xw(e){return{data:e,error:null}}function Zw(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=Kw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function e1(e){return e}function t1(e){return e.access_token&&e.refresh_token&&e.expires_in}const xl=["global","local","others"];var n1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class r1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Qg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=xl[0]){if(xl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xl.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Hn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=n1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Zw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hn})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:e1});if(h.error)throw h.error;const d=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(p.split(";")[1].split("=")[1]);u[`${C}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(xe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Rr(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hn})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Rr(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Hn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Rr(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Hn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Rr(t.userId);try{const{data:n,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Rr(t.userId),Rr(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}}function uf(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function s1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fr={debug:!!(globalThis&&Jg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class i1 extends Yg{}async function a1(e,t,n){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new i1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}s1();const o1={url:xw,storageKey:yw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function df(e,t,n){return await n()}const zr={};class Ni{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ni.nextInstanceID,Ni.nextInstanceID+=1,this.instanceID>0&&Zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},o1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new r1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Qg(s.fetch),this.lock=s.lock||df,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Zt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=a1:this.lock=df,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Jg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uf(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=zr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=zr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Ow(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Zt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Nw(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return xe(n)?{error:n}:{error:new Vg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:yn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:h,password:d,options:m}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Dr(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:p},xform:yn})}else if("phone"in t){const{phone:h,password:d,options:m}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:yn})}else throw new la("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cf})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cf})}else throw new la("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new oa}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,h,d,m,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:C,wallet:g,statement:v,options:x}=t;let _;if(Zt())if(typeof g=="object")_=g;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))_=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const w=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let E;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")E=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)E=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const w=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=w}}try{const{data:C,error:g}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Aw(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:yn});if(g)throw g;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new oa}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:g})}catch(C){if(xe(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const n=await lr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:yn});if(await Dn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new oa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(xe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new oa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Dr(this.storage,this.storageKey));const{error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new la("You must provide either an email or phone number.")}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:yn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Dr(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Xw})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fn;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await we(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await we(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new la("You must provide either an email or phone number and a type")}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<fl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await lr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=gl()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hn}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hn})})}catch(n){if(xe(n))return Sw(n)&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Fn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Dr(this.storage,this.storageKey));const{data:u,error:h}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Hn});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=pl(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(xe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Zt())throw new ca("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ca(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ca("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new tf("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new ca("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let m=h+d;c&&(m=parseInt(c));const f=m-h;f*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=m-d;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,h);const{data:y,error:C}=await this._getUser(i);if(C)throw C;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:m,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(xe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await lr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(jw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Lw(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Dr(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,h;const{data:d,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Zt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(xe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Fw(async s=>(s>0&&await Rw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ml(i)&&Date.now()+a-r<Ur})}catch(r){if(this._debug(n,"error",r),xe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Zt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await lr(this.storage,this.storageKey);if(s&&this.userStorage){let a=await lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Hr(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:gl()}else if(s&&!s.user&&!s.user){const a=await lr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Dn(this.storage,this.storageKey+"-user"),await Hr(this.storage,this.storageKey,s)):s.user=gl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${fl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ml(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ao;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Fn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),xe(i)){const a={session:null,error:i};return ml(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Hr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=of(s);await Hr(this.storage,this.storageKey,i)}else{const s=of(n);await Hr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Dn(this.storage,this.storageKey),await Dn(this.storage,this.storageKey+"-code-verifier"),await Dn(this.storage,this.storageKey+"-user"),this.userStorage&&await Dn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${Rc} ticks`),s<=Rc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Yg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Dr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(xe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pl(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+ww>s)return r;const{data:i,error:a}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=pl(r);n!=null&&n.allowExpired||Ww(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const h=Gw(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,a,Iw(`${l}.${c}`)))throw new $c("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}}Ni.nextInstanceID=0;const l1=Ni;class c1 extends l1{constructor(t){super(t)}}var u1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class d1{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=pw(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:ow,realtime:cw,auth:Object.assign(Object.assign({},lw),{storageKey:u}),global:aw},d=gw(r??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=fw(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Cv(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new rw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new rv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return u1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new qv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h1=(e,t,n)=>new d1(e,t,n);function f1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}f1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const m1="https://dthxptbozocrbvmhwvao.supabase.co",p1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg",V=h1(m1,p1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),g1=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Xg=()=>g1()?"http://localhost:5173":window.location.origin,yl=()=>`${Xg()}/auth/callback`,ro=e=>`${Xg()}${e}`;function gt(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),s=async m=>{if(!(m!=null&&m.user)){t(null);return}try{const{data:f,error:p}=await V.from("users").select("is_admin, user_name_public").eq("id",m.user.id).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user profile:",p);const{data:y,error:C}=await V.from("locations").select("id").contains("admins",[m.user.id]).limit(1),g=!C&&y&&y.length>0;t({...m.user,is_admin:(f==null?void 0:f.is_admin)||!1,is_location_admin:g,user_name_public:(f==null?void 0:f.user_name_public)||null})}catch(f){console.error("Error fetching user profile:",f),t(m.user)}};N.useEffect(()=>{V.auth.getSession().then(({data:{session:f}})=>{s(f),r(!1)});const{data:{subscription:m}}=V.auth.onAuthStateChange((f,p)=>{s(p),r(!1)});return()=>m.unsubscribe()},[]);const i=async(m,f)=>{const{data:p,error:y}=await V.auth.signInWithPassword({email:m,password:f});return{data:p,error:y}},a=async(m,f)=>{const{data:p,error:y}=await V.auth.signUp({email:m,password:f,options:{emailRedirectTo:yl()}});return{data:p,error:y}},l=async()=>{const{data:m,error:f}=await V.auth.signInWithOAuth({provider:"google",options:{redirectTo:yl()}});return{data:m,error:f}},c=async()=>{const{error:m}=await V.auth.signOut();return{error:m}},u=async m=>{const{data:f,error:p}=await V.auth.resetPasswordForEmail(m,{redirectTo:yl()});return{data:f,error:p}},h=async m=>{const{data:f,error:p}=await V.auth.updateUser({password:m});return{data:f,error:p}},d=e&&window.location.hash.includes("type=recovery");return{user:e,loading:n,signIn:i,signUp:a,signInWithGoogle:l,signOut:c,resetPassword:u,updatePassword:h,needsPasswordReset:d}}function Zg(){const[e,t]=N.useState(()=>{const r=localStorage.getItem("darkMode");return r!==null?JSON.parse(r):window.matchMedia("(prefers-color-scheme: dark)").matches});return N.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),{isDarkMode:e,toggleDarkMode:()=>{t(!e)}}}function $r({onAddModel:e,onAdminClick:t,activeTab:n,onTabChange:r}){const[s,i]=N.useState(!1),[a,l]=N.useState(!1),{isDarkMode:c,toggleDarkMode:u}=Zg(),{user:h,signOut:d}=gt(),m=async()=>{i(!1),await d()},f=[{id:"collection",name:"Collection",icon:An},{id:"battleplan",name:"Battleplan",icon:pt}],p=y=>{l(!1),r==null||r(y)};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:h&&o.jsx("button",{onClick:()=>l(!a),className:"text-secondary-text hover:text-text focus:outline-none mr-4",children:a?o.jsx(Ee,{className:"w-6 h-6 text-icon"}):o.jsx(qb,{className:"w-6 h-6 text-icon"})})}),o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsx("img",{src:"Battleplan-Logo-Purple.svg",alt:"Mini Myths Logo",className:"max-h-[300px] w-auto"})}),o.jsx("div",{className:"flex items-center space-x-4",children:h?o.jsx(o.Fragment,{children:o.jsx("button",{onClick:()=>i(!s),className:"text-secondary-text hover:text-text focus:outline-none",children:o.jsx(Nn,{className:"w-6 h-6 text-icon hover:text-icon-hover"})})}):null})]}),h&&o.jsxs("div",{className:`absolute right-4 top-16 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-50 min-w-[200px] transition-all duration-200 ease-in-out ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}`,children:[o.jsx("div",{className:"px-4 py-2 border-b border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Nn,{className:"w-5 h-5 text-icon"}),o.jsx("span",{className:"text-base text-text",children:h.email})]})}),o.jsxs("button",{onClick:()=>{i(!1),t==null||t()},className:`flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors ${h!=null&&h.is_admin||h!=null&&h.is_location_admin?"":"hidden"}`,children:[o.jsx(Kb,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{children:"Admin"})]}),o.jsxs("button",{onClick:()=>{i(!1)},className:"flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:[o.jsx(Vb,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{children:"Settings"})]}),o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[c?o.jsx(Cg,{className:"w-5 h-5 text-icon hover:text-icon-hover"}):o.jsx(Eg,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{className:"text-base font-semibold text-text",children:c?"Dark Mode":"Light Mode"})]}),o.jsx("button",{onClick:u,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring---color-brand focus:ring-offset-2 ${c?"bg-brand":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]}),o.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:"Sign Out"})]})]})}),h&&o.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-bg-primary border-r border-border-custom shadow-lg transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"-translate-x-full"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[o.jsx("h2",{className:"text-lg font-semibold text-title",children:"Navigation"}),o.jsx("button",{onClick:()=>l(!1),className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),o.jsx("nav",{className:"flex-1 p-4",children:o.jsxs("div",{className:"space-y-2",children:[f.map(y=>{const C=y.icon,g=n===y.id;return o.jsxs("button",{onClick:()=>p(y.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${g?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[o.jsx(C,{className:`w-5 h-5 ${g?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:`font-medium ${g?"text-brand":""}`,children:y.name})]},y.id)}),o.jsx("div",{className:"border-t border-border-custom my-4"}),o.jsxs("button",{onClick:()=>{l(!1),r==null||r("about")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-secondary-text hover:text-text hover:bg-bg-secondary",children:[o.jsx(Nn,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{className:"font-medium",children:"About"})]}),((h==null?void 0:h.is_admin)||(h==null?void 0:h.is_location_admin))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-border-custom my-4"}),o.jsx("div",{className:"px-4 py-2",children:o.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"Admin Tools"})}),o.jsxs("button",{onClick:()=>{l(!1),r==null||r("all-bookings")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${n==="all-bookings"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[o.jsx(pt,{className:`w-5 h-5 ${n==="all-bookings"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:`font-medium ${n==="all-bookings"?"text-brand":""}`,children:"All Bookings"})]})]})]})})]})}),h&&o.jsx("div",{className:`fixed inset-0 bg-black z-30 transition-opacity duration-300 ease-in-out ${a?"bg-opacity-50 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>l(!1)}),h&&o.jsx("div",{className:`fixed inset-0 bg-black z-40 transition-opacity duration-200 ease-in-out ${s?"bg-opacity-25 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>{i(!1)}})]})}function Fs({activeTab:e,onTabChange:t}){const n=[{id:"collection",name:"Collection",icon:An},{id:"battleplan",name:"Battleplan",icon:pt}];return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black/75 backdrop-blur-md border-t border-border-custom/30",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("nav",{className:"flex justify-center items-center space-x-8","aria-label":"Tabs",children:n.map(r=>{const s=r.icon,i=e===r.id;return o.jsxs("button",{onClick:()=>t(r.id),className:`flex items-center space-x-2 py-4 px-6 border-b-2 font-medium text-sm transition-colors ${i?"border---color-brand text-brand":"border-transparent text-secondary-text hover:text-text hover:border-border-custom"}`,children:[o.jsx(s,{className:`w-5 h-5 ${i?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:i?"text-brand":"",children:r.name})]},r.id)})})})})}function x1({activeView:e,onViewChange:t}){const n=[{id:"recent",label:"Recent",icon:js},{id:"models",label:"Models",icon:Ub},{id:"collections",label:"Collections",icon:An}];return o.jsx("div",{className:"bg-bg-secondary shadow-sm",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"flex justify-center items-center py-3",children:o.jsx("div",{className:"flex space-x-8",children:n.map(r=>{const s=r.icon,i=e===r.id;return o.jsxs("button",{onClick:()=>t(r.id),className:"flex flex-col items-center space-y-2 px-6 py-2 rounded-lg transition-all duration-200",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-border-custom transition-opacity",children:o.jsx(s,{className:`w-4 h-4 transition-opacity ${i?"text-icon-active opacity-100":"text-icon opacity-75"}`})}),o.jsx("span",{className:`text-lg font-medium transition-colors ${i?"text-text":"text-secondary-text"}`,children:r.label})]},r.id)})})})})})}function zi({games:e,selectedGame:t,onGameSelect:n,placeholder:r="Choose a Game",recentGames:s=[]}){const[i,a]=N.useState(!1),[l,c]=N.useState(""),u=N.useRef(null),h=N.useRef(null),d=e.find(x=>x.id===t),m=e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),f=new Set(s.map(x=>x.id)),p=s.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),y=m.filter(x=>!f.has(x.id));N.useEffect(()=>{const x=_=>{u.current&&!u.current.contains(_.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),N.useEffect(()=>{i&&h.current&&h.current.focus()},[i]);const C=x=>{n(x),c(""),a(!1)},g=x=>{c(x.target.value)},v=()=>{a(!i),i||c("")};return o.jsxs("div",{className:"relative",ref:u,children:[o.jsxs("button",{type:"button",onClick:v,className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-left bg-bg-primary flex items-center justify-between hover:bg-bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[d!=null&&d.icon?o.jsx("img",{src:d.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:x=>{const _=x.target;console.warn("Dropdown game icon failed to load:",d.icon),_.style.display="none"},onLoad:()=>{console.warn("Dropdown game icon loaded successfully:",d.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:d?"text-text":"text-secondary-text",children:d?d.name:r})]}),o.jsx(Ku,{className:`w-5 h-5 text-icon transition-transform ${i?"rotate-180":""}`})]}),i&&o.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg max-h-60 overflow-hidden",children:[o.jsx("div",{className:"p-3 border-b border-border-custom",children:o.jsxs("div",{className:"relative",children:[o.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),o.jsx("input",{ref:h,type:"text",value:l,onChange:g,placeholder:"Search games...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-sm bg-bg-primary text-text"})]})}),o.jsx("div",{className:"max-h-48 overflow-y-auto",children:p.length===0&&y.length===0?o.jsxs("div",{className:"px-4 py-3 text-secondary-text text-sm",children:['No games found matching "',l,'"']}):o.jsxs(o.Fragment,{children:[p.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-4 py-2 bg-amber-50 border-b border-border-custom",children:o.jsx("span",{className:"text-xs font-semibold text-amber-800 uppercase tracking-wide",children:"Recently Used"})}),p.map(x=>o.jsxs("button",{type:"button",onClick:()=>C(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-amber-25",children:[x.icon?o.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:_=>{const S=_.target;console.warn("Game list icon failed to load:",x.icon),S.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:"text-text",children:x.name})]},`recent-${x.id}`))]}),y.length>0&&o.jsxs(o.Fragment,{children:[p.length>0&&o.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-custom",children:o.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"All Games"})}),y.map(x=>o.jsxs("button",{type:"button",onClick:()=>C(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors",children:[x.icon?o.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:_=>{const S=_.target;console.warn("Game list icon failed to load:",x.icon),S.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:"text-text",children:x.name})]},x.id))]})]})})]})]})}const ua="mini-myths-recent-games",hf=3;function y1(){const[e,t]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{try{const i=localStorage.getItem(ua);if(i){const l=JSON.parse(i).sort((c,u)=>u.lastUsed-c.lastUsed).slice(0,hf);t(l)}}catch(i){console.error("Error loading recent games:",i),t([])}};return{recentGames:e,addRecentGame:i=>{try{const a=Date.now(),l={id:i.id,name:i.name,icon:i.icon,lastUsed:a},c=localStorage.getItem(ua);let u=[];c&&(u=JSON.parse(c)),u=u.filter(h=>h.id!==i.id),u.unshift(l),u=u.slice(0,hf),localStorage.setItem(ua,JSON.stringify(u)),t(u)}catch(a){console.error("Error saving recent game:",a)}},clearRecentGames:()=>{try{localStorage.removeItem(ua),t([])}catch(i){console.error("Error clearing recent games:",i)}}}}function b1({isOpen:e,onClose:t,onBookingCreated:n,lastSelectedLocation:r="",onLocationSelected:s}){const[i,a]=N.useState([]),[l,c]=N.useState([]),[u,h]=N.useState([]),[d,m]=N.useState(r),[f,p]=N.useState(""),[y,C]=N.useState(""),[g,v]=N.useState(""),[x,_]=N.useState(""),[S,w]=N.useState(null),[E,I]=N.useState(!1),[P,b]=N.useState(0),[T,M]=N.useState(!1),[O,W]=N.useState(!1),[q,te]=N.useState(""),{user:ee}=gt(),{recentGames:B,addRecentGame:Y}=y1(),k=()=>{try{return localStorage.getItem("mini-myths-last-location")||""}catch(F){return console.error("Error loading last selected location:",F),""}},H=F=>{try{F&&localStorage.setItem("mini-myths-last-location",F)}catch(re){console.error("Error saving last selected location:",re)}};Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{if(e){U(),R(),j();const F=k();m(F||r),ee!=null&&ee.user_name_public&&_(ee.user_name_public)}},[e,r]),N.useEffect(()=>{d?(ae(),H(d),s==null||s(d)):(c([]),C(""))},[d,s]),N.useEffect(()=>{f&&(C(""),w(null))},[f]),N.useEffect(()=>{d&&f&&y?ne():w(null)},[d,f,y]);const ne=async()=>{if(!(!d||!f||!y)){I(!0);try{const{data:F,error:re}=await V.from("locations").select("tables").eq("id",d).single();if(re)throw re;const be=F.tables,Q=l.find(Ne=>Ne.id===y),le=(Q==null?void 0:Q.isAllDay)||!1;let ve=0;if(le){const{data:Ne,error:_e}=await V.from("bookings").select("timeslot_id").eq("location_id",d).eq("date",f);if(_e)throw _e;const Z={};Ne==null||Ne.forEach(oe=>{const Se=oe.timeslot_id;Z[Se]=(Z[Se]||0)+1}),ve=Math.max(0,...Object.values(Z))}else{const{data:Ne,error:_e}=await V.from("bookings").select("id").eq("location_id",d).eq("date",f).eq("timeslot_id",y);if(_e)throw _e;const{data:Z,error:oe}=await V.from("bookings").select("timeslot:timeslots(id, name, start_time, end_time)").eq("location_id",d).eq("date",f);if(oe)throw oe;const Se=(Ne==null?void 0:Ne.length)||0,A=(Z==null?void 0:Z.filter(D=>{const se=D.timeslot;return se&&(se.name==="All Day Booking"||se.start_time==="00:00:00"&&se.end_time==="23:59:59")}).length)||0;ve=Se+A}const Ae=be-ve;w(Math.max(0,Ae))}catch(F){console.error("Error checking table availability:",F),w(null)}finally{I(!1)}}},j=async()=>{if(ee){M(!0);try{const F=new Date().toISOString().split("T")[0],{data:re,error:be}=await V.from("bookings").select("id").eq("user_id",ee.id).gte("date",F);if(be)throw be;b((re==null?void 0:re.length)||0)}catch(F){console.error("Error checking current bookings:",F),b(0)}finally{M(!1)}}},U=async()=>{try{const{data:F,error:re}=await V.from("locations").select("*").order("name");if(re)throw re;a(F||[])}catch(F){console.error("Error fetching locations:",F)}},ae=async()=>{try{const{data:F,error:re}=await V.from("timeslots").select("*").eq("location_id",d).order("start_time");if(re)throw re;const be=(F||[]).map(Q=>({...Q,isAllDay:Q.name==="All Day Booking"||Q.start_time==="00:00:00"&&Q.end_time==="23:59:59"}));c(be)}catch(F){console.error("Error fetching timeslots:",F)}},R=async()=>{try{const{data:F,error:re}=await V.from("games").select("id, name, icon").order("name");if(re)throw re;h(F||[])}catch(F){console.error("Error fetching games:",F)}},$=()=>{if(!f)return null;const F=new Date(f);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][F.getDay()]},me=()=>{const F=$();return F?l.filter(re=>re.availability&&re.availability.includes(F)):[]},de=F=>F==="00:00:00"?"All Day":new Date(`2000-01-01T${F}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),J=async F=>{if(F.preventDefault(),!(!d||!f||!y||!ee)){W(!0),te("");try{x.trim()&&ee.user_name_public!==x.trim()&&await V.from("users").update({user_name_public:x.trim()}).eq("id",ee.id);const{error:re}=await V.from("bookings").insert({location_id:d,timeslot_id:y,game_id:g||null,date:f,user_id:ee.id,user_name:x.trim(),user_email:ee.email});if(re)throw re;if(g){const be=u.find(Q=>Q.id===g);be&&Y(be)}m(""),p(""),C(""),v(""),_(""),n(),t(),b(be=>be+1)}catch(re){te(re instanceof Error?re.message:"Failed to create booking")}finally{W(!1)}}},fe=d&&f&&y&&x.trim()&&P<4;if(!e)return null;const X=F=>{F.target===F.currentTarget&&t()},z=me();return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:X,children:o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-text font-overpass",children:"New Booking"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),T?o.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),o.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking booking limit..."})]})}):P>=4?o.jsx("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:o.jsx("span",{className:"text-red-700 text-sm font-medium",children:" You have reached the maximum of 4 active bookings. Cancel an existing booking to create a new one."})}):P>=3?o.jsx("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200",children:o.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" You have ",P," active booking",P!==1?"s":"",". You can create ",4-P," more."]})}):null,o.jsxs("form",{onSubmit:J,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Your Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"userName",value:x,onChange:F=>_(F.target.value),placeholder:"Enter your full name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"This will be shared with the store for your booking."})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game (Optional)"}),o.jsx(zi,{games:u,selectedGame:g,onGameSelect:v,placeholder:"Choose a Game (Optional)",recentGames:B})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"location",value:d,onChange:F=>m(F.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0,children:[o.jsx("option",{value:"",children:"Select Location"}),i.map(F=>o.jsxs("option",{value:F.id,children:[F.name," - ",F.tables," table",F.tables!==1?"s":""]},F.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"date",value:f,onChange:F=>p(F.target.value),min:new Date().toISOString().split("T")[0],className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"timeslot",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot"}),o.jsxs("div",{className:"relative",children:[o.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"timeslot",value:y,onChange:F=>C(F.target.value),disabled:!d||!f,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text disabled:opacity-50 disabled:cursor-not-allowed",required:!0,children:[o.jsx("option",{value:"",children:d?f?z.length===0?"No timeslots available for this day":"Select Timeslot":"Select date first":"Select location first"}),z.map(F=>o.jsx("option",{value:F.id,children:F.isAllDay?`${F.name} (All Day)`:`${F.name} (${de(F.start_time)} - ${de(F.end_time)})`},F.id))]})]}),f&&z.length===0&&d&&o.jsxs("p",{className:"text-sm text-secondary-text mt-1",children:["No timeslots available for ",$()," at this location."]})]}),q&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:q}),d&&f&&y&&o.jsx("div",{className:`p-4 rounded-lg border ${E?"bg-blue-50 border-blue-200":S===null?"bg-gray-50 border-gray-200":S===0?"bg-red-50 border-red-200":S<=2?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:E?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),o.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking table availability..."})]}):S===null?o.jsx("span",{className:"text-gray-700 text-sm font-medium",children:"Unable to check table availability"}):S===0?o.jsx("span",{className:"text-red-700 text-sm font-medium",children:" No tables available for this timeslot"}):S<=2?o.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" Only ",S," table",S!==1?"s":""," remaining"]}):o.jsxs("span",{className:"text-green-700 text-sm font-medium",children:[" ",S," table",S!==1?"s":""," available"]})}),o.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[o.jsx("button",{type:"submit",disabled:!fe||O||S===0||P>=4,className:`btn-full ${fe&&!O&&S!==0&&P<4?"btn-primary":"btn-disabled"}`,children:O?"Creating Booking...":P>=4?"Booking Limit Reached":S===0?"No Tables Available":"Confirm Booking"}),o.jsx("button",{type:"button",onClick:t,className:"btn-danger-outline btn-full",children:"Cancel"})]})]})]})})}function ex({booking:e,onClick:t,onCancelBooking:n,isPast:r=!1}){const s=i=>new Date(`2000-01-01T${i}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 w-full",children:[o.jsxs("div",{onClick:t,className:"cursor-pointer hover:bg-bg-secondary transition-colors text-left rounded p-2 -m-2 mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(js,{className:"w-4 h-4 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-text text-sm",children:e.timeslot.name}),o.jsxs("p",{className:"text-xs text-secondary-text",children:[s(e.timeslot.start_time)," - ",s(e.timeslot.end_time)]})]})]}),o.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[o.jsx(Mi,{className:"w-4 h-4 text-secondary-text mt-0.5"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"font-medium text-text text-sm truncate",children:e.location.name}),o.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.location.address})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Nn,{className:"w-4 h-4 text-secondary-text"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[e.user_name&&o.jsx("p",{className:"text-sm text-text truncate font-medium",children:e.user_name}),o.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.user_email||e.user.email})]})]}),e.game&&o.jsxs("div",{className:"flex items-center space-x-2",children:[e.game.icon?o.jsx("img",{src:e.game.icon,alt:`${e.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:i=>{const a=i.target;a.style.display="none";const l=a.nextElementSibling;l&&l.classList.contains("icon-fallback")&&(l.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:e.game.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:e.game.name.charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text truncate",children:e.game.name})]})]}),n&&!r&&o.jsx("div",{className:"flex justify-end pt-2 border-t border-border-custom",children:o.jsxs("button",{onClick:()=>n(e.id),className:"btn-danger-outline-sm btn-with-icon-sm",children:[o.jsx(Ee,{className:"w-3 h-3"}),o.jsx("span",{children:"Cancel"})]})})]})}function tx({isOpen:e,onClose:t,onConfirm:n,loading:r=!1}){if(!e)return null;const s=i=>{i.target===i.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:"Are you sure you want to cancel this booking?"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"We'll delete this booking and make the table available for someone else."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:r,className:"btn-ghost btn-flex",children:"No, I'll keep my booking"}),o.jsx("button",{onClick:n,disabled:r,className:"btn-danger btn-flex",children:r?"Deleting...":"Yes, Delete my booking"})]})]})})}function v1(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:a}=gt();N.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await V.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `).eq("user_id",a==null?void 0:a.id).order("date",{ascending:!0});if(u)throw u;if(!c){t([]);return}const h=[...new Set(c.map(y=>y.user_id))],{data:d,error:m}=await V.from("users").select("id, email").in("id",h);if(m)throw m;const f=new Map((d||[]).map(y=>[y.id,y])),p=c.map(y=>({...y,user:f.get(y.user_id)||{id:y.user_id,email:"Unknown User"}}));t(p)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return{bookings:e,loading:n,error:s,refetch:l}}function w1(){const[e,t]=Ce.useState(!1),[n,r]=Ce.useState(new Set),[s,i]=Ce.useState(""),[a,l]=Ce.useState({isOpen:!1,bookingId:null}),[c,u]=Ce.useState(!1),{bookings:h,loading:d,refetch:m}=v1(),f=()=>{m()},p=_=>{i(_)},y=_=>{l({isOpen:!0,bookingId:_})},C=async()=>{if(a.bookingId){u(!0);try{const{error:_}=await V.from("bookings").delete().eq("id",a.bookingId);if(_)throw _;await m(),l({isOpen:!1,bookingId:null})}catch(_){console.error("Error cancelling booking:",_)}finally{u(!1)}}},g=Ce.useMemo(()=>{const _=new Date;_.setHours(0,0,0,0);const S={},w=[];h.forEach(P=>{if(new Date(P.date)>=_){const T=P.date;S[T]||(S[T]=[]),S[T].push(P)}else w.push(P)}),Object.keys(S).forEach(P=>{S[P].sort((b,T)=>b.timeslot.start_time.localeCompare(T.timeslot.start_time))}),w.sort((P,b)=>{const T=b.date.localeCompare(P.date);return T!==0?T:b.timeslot.start_time.localeCompare(P.timeslot.start_time)});const I=Object.keys(S).sort((P,b)=>P.localeCompare(b)).map(P=>({date:P,bookings:S[P],isPast:!1}));return w.length>0&&I.push({date:"past",bookings:w,isPast:!0}),I},[h]);Ce.useEffect(()=>{g.length>0&&r(new Set([g[0].date]))},[g]);const v=_=>{r(S=>{const w=new Set(S);return w.has(_)?w.delete(_):w.add(_),w})},x=_=>_==="past"?"Past Bookings":new Date(_).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-title mb-4",children:"YOUR TABLE BOOKINGS"}),h.length>0&&o.jsxs("button",{onClick:()=>t(!0),className:"btn-primary-sm btn-with-icon-sm",children:[o.jsx(Li,{className:"w-4 h-4"}),o.jsx("span",{children:"New Table Booking"})]})]}),o.jsx("div",{className:"mb-8",children:d?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((_,S)=>o.jsx("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("div",{className:"h-6 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-1/2"})]})},S))}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(pt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No table bookings yet."}),o.jsx("button",{onClick:()=>t(!0),className:"btn-primary",children:"Book Your First Table"})]}):o.jsx("div",{className:"space-y-8",children:g.map(({date:_,bookings:S,isPast:w})=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>v(_),className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:x(_)}),n.has(_)?o.jsx(Ku,{className:"w-5 h-5 text-icon"}):o.jsx(vr,{className:"w-5 h-5 text-icon"})]}),n.has(_)&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(E=>o.jsx(ex,{booking:E,onClick:()=>{},onCancelBooking:y,isPast:w},E.id))})]},_))})})]}),o.jsx(b1,{isOpen:e,onClose:()=>t(!1),onBookingCreated:f,lastSelectedLocation:s,onLocationSelected:p}),o.jsx(tx,{isOpen:a.isOpen,onClose:()=>l({isOpen:!1,bookingId:null}),onConfirm:C,loading:c})]})}function k1({model:e,name:t,boxName:n,gameName:r,gameIcon:s,status:i,count:a,imageUrl:l,onViewModel:c,onViewBox:u}){console.log("ModelCard Debug:",{name:t,gameName:r,gameIcon:s,hasGameIcon:!!s,gameIconType:typeof s,gameIconTrimmed:s==null?void 0:s.trim()});const h=f=>{switch(f){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},d=()=>{var p,y,C;if(l&&typeof l=="string"&&l.trim()!==""&&l!=="undefined"&&l!=="null"&&!l.includes("undefined")&&!l.includes("null")&&(l.startsWith("http")||l.startsWith("/")))return{src:l,isGameFallback:!1};const f=((y=(p=e==null?void 0:e.box)==null?void 0:p.game)==null?void 0:y.icon)||((C=e==null?void 0:e.game)==null?void 0:C.icon);return f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")?{src:f,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},m=f=>!!(f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")&&f.includes("game-assets"));return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col h-full",children:[o.jsxs("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:[(()=>{const f=d();return o.jsx("img",{src:f.src,alt:t,className:`w-full h-48 min-h-[400px] object-cover ${f.isGameFallback?"opacity-10":""}`,loading:"lazy",onError:p=>{const y=p.target,C="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";y.src!==C&&(console.log("Image failed to load:",y.src,"Falling back to default"),y.src=C)}})})(),i!=="None"&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(i)}`,children:i})})]}),o.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[o.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:t}),(e==null?void 0:e.box)&&o.jsx("button",{onClick:()=>u==null?void 0:u(e.box),className:"text-sm text-secondary-text hover:text-brand transition-colors text-left",children:n})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[o.jsx("span",{className:"text-xs text-secondary-text font-bold",children:r.toUpperCase()}),m(s)?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:s||"",alt:`${r} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:f=>{const p=f.target;console.warn("Game icon failed to load (bucket not found):",s,"Falling back to letter icon"),p.style.display="none";const y=p.nextElementSibling;y&&y.classList.contains("icon-fallback")&&(y.style.display="flex")},onLoad:f=>{const y=f.target.nextElementSibling;y&&y.classList.contains("icon-fallback")&&(y.style.display="none")}}),o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]}):o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]})]}),o.jsx("div",{className:"flex justify-center mt-auto",children:o.jsx("button",{onClick:c,className:"btn-secondary btn-flex",children:"View Model"})})]})]})}function j1({name:e,gameName:t,purchaseDate:n,imageUrl:r,gameImage:s,gameIcon:i,onViewBox:a}){const l=h=>new Date(h).toLocaleDateString(),c=()=>r&&typeof r=="string"&&r.trim()!==""&&r!=="undefined"&&r!=="null"&&!r.includes("undefined")&&!r.includes("null")&&(r.startsWith("http")||r.startsWith("/"))?r:s&&typeof s=="string"&&s.trim()!==""&&s!=="undefined"&&s!=="null"&&s.startsWith("http")?s:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",u=h=>!!(h&&typeof h=="string"&&h.trim()!==""&&h!=="undefined"&&h!=="null"&&h.startsWith("http")&&h.includes("game-assets"));return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col",children:[o.jsx("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:o.jsx("img",{src:c(),alt:e,className:"w-full h-48 min-h-[400px] bg-bg-card-secondary object-cover"})}),o.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[o.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:e}),o.jsxs("p",{className:"text-sm text-secondary-text",children:["Purchased: ",l(n)]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[o.jsx("span",{className:"text-xs text-secondary-text font-bold",children:t.toUpperCase()}),u(i)?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:i||"",alt:`${t} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:h=>{const d=h.target;console.warn("Game icon failed to load (bucket not found):",i,"Falling back to letter icon"),d.style.display="none";const m=d.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="flex")},onLoad:h=>{const m=h.target.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="none")}}),o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]}):o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]})]}),o.jsx("div",{className:"flex justify-center mt-auto",children:o.jsx("button",{onClick:a,className:"btn-secondary btn-flex",children:"View Collection"})})]})]})}function da({currentPage:e,totalPages:t,onPageChange:n}){const r=[];if(t>7)if(e<=4){for(let i=1;i<=5;i++)r.push(i);r.push("..."),r.push(t)}else if(e>=t-3){r.push(1),r.push("...");for(let i=t-4;i<=t;i++)r.push(i)}else{r.push(1),r.push("...");for(let i=e-1;i<=e+1;i++)r.push(i);r.push("..."),r.push(t)}else for(let i=1;i<=t;i++)r.push(i);return o.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-8",children:[o.jsx("button",{onClick:()=>n(e-1),disabled:e===1,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:o.jsx(zb,{className:"w-5 h-5"})}),r.map((i,a)=>o.jsx("button",{onClick:()=>typeof i=="number"&&n(i),disabled:i==="...",className:`px-3 py-2 rounded-lg text-sm font-medium ${i===e?"bg-title text-bg-primary":i==="..."?"cursor-default text-secondary-text":"hover:bg-bg-secondary text-text"}`,children:i},a)),o.jsx("button",{onClick:()=>n(e+1),disabled:e===t,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:o.jsx(vr,{className:"w-5 h-5"})})]})}function ff({isOpen:e,onClose:t,mode:n}){const[r,s]=N.useState(""),[i,a]=N.useState(""),[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(n),{signIn:y,signUp:C,signInWithGoogle:g,resetPassword:v}=gt();Ce.useEffect(()=>{p(n),s(""),a(""),h(""),m("")},[n]);const x=async()=>{c(!0),h("");try{const{error:E}=await g();E&&h(E.message)}catch{h("An unexpected error occurred")}finally{c(!1)}},_=async E=>{E.preventDefault(),c(!0),h(""),m("");try{if(f==="forgot-password"){const{error:I}=await v(r);I?h(I.message):(m("Password reset email sent! Check your inbox."),s(""))}else{const{error:I}=f==="login"?await y(r,i):await C(r,i);I?h(I.message):(t(),s(""),a(""))}}catch{h("An unexpected error occurred")}finally{c(!1)}},S=()=>{p("login"),s(""),a(""),h(""),m("")};if(!e)return null;const w=E=>{E.target===E.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:w,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f==="forgot-password"&&o.jsx("button",{onClick:S,className:"text-secondary-text hover:text-text p-1",children:o.jsx(Ir,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-2xl font-bold text-title flex-1 text-center",children:f==="login"?"Log In":f==="signup"?"Sign Up":"Reset Password"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),f!=="forgot-password"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-6",children:o.jsxs("button",{type:"button",onClick:x,disabled:l,className:"btn-secondary btn-full btn-with-icon",children:[o.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o.jsx("span",{className:"font-medium",children:f==="login"?"Sign in with Google":"Sign up with Google"})]})}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-border-custom"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-modal-bg text-secondary-text",children:"Or continue with email"})})]})]}),o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:r,onChange:E=>s(E.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f!=="forgot-password"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:i,onChange:E=>a(E.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f==="login"&&o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"button",onClick:()=>p("forgot-password"),className:"text-sm text-[var(--color-brand)] hover:text-[var(--color-brand)]/80 transition-colors",children:"Forgot your password?"})}),u&&o.jsx("div",{className:"text-red-600 text-sm",children:u}),d&&o.jsx("div",{className:"text-green-600 text-sm",children:d}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{type:"submit",disabled:l,className:"btn-primary btn-full",children:l?"Processing...":f==="login"?"Log In":f==="signup"?"Sign Up":"Send Reset Email"})})]}),f!=="forgot-password"&&o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-sm text-secondary-text",children:[f==="login"?"Don't have an account? ":"Already have an account? ",o.jsx("button",{type:"button",onClick:()=>p(f==="login"?"signup":"login"),className:"btn-ghost btn-ghost-sm",children:f==="login"?"Sign Up":"Log In"})]})})]})})}async function Pn(e,t=1200,n=1200,r=.8){return new Promise((s,i)=>{const a=document.createElement("canvas"),l=a.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:h}=c;u>h?u>t&&(h=h*t/u,u=t):h>n&&(u=u*n/h,h=n),a.width=u,a.height=h,l?(l.drawImage(c,0,0,u,h),a.toBlob(d=>{if(d){const m=new File([d],e.name,{type:e.type,lastModified:Date.now()});s(m)}else i(new Error("Failed to compress image"))},e.type,r)):i(new Error("Failed to get canvas context"))},c.onerror=()=>{i(new Error("Failed to load image"))},c.src=URL.createObjectURL(e)})}function ys(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type.toLowerCase())}function _t(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function Cr({isOpen:e,onClose:t,onCrop:n,imageFile:r}){const s=N.useRef(null);N.useRef(null);const[i,a]=N.useState(null),[l,c]=N.useState({x:0,y:0,width:200,height:200}),[u,h]=N.useState(!1),[d,m]=N.useState(!1),[f,p]=N.useState({x:0,y:0}),[y,C]=N.useState(1),[g,v]=N.useState(0),[x,_]=N.useState(""),[S,w]=N.useState({exposure:0});N.useEffect(()=>{if(e&&r){const k=new Image;return k.onload=()=>{a(k);const H=600,ne=400,j=H/k.width,U=ne/k.height,ae=Math.min(j,U,1),R=k.width*ae,$=k.height*ae,de=Math.min(R,$)*.8;c({x:(H-de)/2,y:(ne-de)/2,width:de,height:de}),C(ae),v(0),w({exposure:0})},k.src=URL.createObjectURL(r),()=>URL.revokeObjectURL(k.src)}},[e,r]);const E=N.useCallback(()=>{const k=s.current,H=k==null?void 0:k.getContext("2d");if(!k||!H||!i)return;H.clearRect(0,0,k.width,k.height),H.save();const ne=k.width/2,j=k.height/2;if(H.translate(ne,j),H.rotate(g*Math.PI/180),H.scale(y,y),S.exposure!==0){const R=document.createElement("canvas"),$=R.getContext("2d");$&&(R.width=i.width,R.height=i.height,$.drawImage(i,0,0),S.exposure>0?($.globalCompositeOperation="screen",$.fillStyle=`rgba(255, 255, 255, ${S.exposure/100})`,$.fillRect(0,0,R.width,R.height)):S.exposure<0&&($.globalCompositeOperation="multiply",$.fillStyle=`rgba(0, 0, 0, ${Math.abs(S.exposure)/100})`,$.fillRect(0,0,R.width,R.height)),H.drawImage(R,-i.width/2,-i.height/2,i.width,i.height))}else H.drawImage(i,-i.width/2,-i.height/2,i.width,i.height);H.restore(),H.strokeStyle="#F59E0B",H.lineWidth=2,H.strokeRect(l.x,l.y,l.width,l.height);const U=8,ae=[{x:l.x-U/2,y:l.y-U/2},{x:l.x+l.width-U/2,y:l.y-U/2},{x:l.x-U/2,y:l.y+l.height-U/2},{x:l.x+l.width-U/2,y:l.y+l.height-U/2},{x:l.x+l.width/2-U/2,y:l.y-U/2},{x:l.x+l.width-U/2,y:l.y+l.height/2-U/2},{x:l.x+l.width/2-U/2,y:l.y+l.height-U/2},{x:l.x-U/2,y:l.y+l.height/2-U/2}];H.fillStyle="#F59E0B",ae.forEach(R=>{H.fillRect(R.x,R.y,U,U)})},[i,l,y,g,S]);N.useEffect(()=>{E()},[E]);const I=k=>{const H=s.current;if(!H)return;const ne=H.getBoundingClientRect(),j=k.clientX-ne.left,U=k.clientY-ne.top,R=window.innerWidth<=768?40:20,$=[{x:l.x-R/2,y:l.y-R/2,type:"nw"},{x:l.x+l.width-R/2,y:l.y-R/2,type:"ne"},{x:l.x-R/2,y:l.y+l.height-R/2,type:"sw"},{x:l.x+l.width-R/2,y:l.y+l.height-R/2,type:"se"},{x:l.x+l.width/2-R/2,y:l.y-R/2,type:"n"},{x:l.x+l.width-R/2,y:l.y+l.height/2-R/2,type:"e"},{x:l.x+l.width/2-R/2,y:l.y+l.height-R/2,type:"s"},{x:l.x-R/2,y:l.y+l.height/2-R/2,type:"w"}];for(let me=0;me<$.length;me++){const de=$[me];if(j>=de.x&&j<=de.x+R&&U>=de.y&&U<=de.y+R){m(!0),_(de.type),p({x:j,y:U});return}}j>=l.x&&j<=l.x+l.width&&U>=l.y&&U<=l.y+l.height&&(h(!0),p({x:j-l.x,y:U-l.y}))},[P,b]=N.useState("crosshair"),T=k=>{const H=s.current;if(!H)return;const ne=H.getBoundingClientRect(),j=k.clientX-ne.left,U=k.clientY-ne.top;if(!u&&!d){const R=window.innerWidth<=768?40:20,$=[{x:l.x-R/2,y:l.y-R/2,type:"nw"},{x:l.x+l.width-R/2,y:l.y-R/2,type:"ne"},{x:l.x-R/2,y:l.y+l.height-R/2,type:"sw"},{x:l.x+l.width-R/2,y:l.y+l.height-R/2,type:"se"},{x:l.x+l.width/2-R/2,y:l.y-R/2,type:"n"},{x:l.x+l.width-R/2,y:l.y+l.height/2-R/2,type:"e"},{x:l.x+l.width/2-R/2,y:l.y+l.height-R/2,type:"s"},{x:l.x-R/2,y:l.y+l.height/2-R/2,type:"w"}];let me=!1;for(let de=0;de<$.length;de++){const J=$[de];if(j>=J.x&&j<=J.x+R&&U>=J.y&&U<=J.y+R){switch(me=!0,J.type){case"nw":case"se":b("nw-resize");break;case"ne":case"sw":b("ne-resize");break;case"n":case"s":b("n-resize");break;case"e":case"w":b("e-resize");break}break}}me||(j>=l.x&&j<=l.x+l.width&&U>=l.y&&U<=l.y+l.height?b("move"):b("default"))}if(u){b("move");const ae=Math.max(0,Math.min(j-f.x,H.width-l.width)),R=Math.max(0,Math.min(U-f.y,H.height-l.height));c($=>({...$,x:ae,y:R}))}else if(d){const ae=j-f.x,R=U-f.y;c($=>{let me=$.x,de=$.y,J=$.width,fe=$.height;switch(x){case"nw":me=Math.max(0,Math.min($.x+ae,$.x+$.width-50)),de=Math.max(0,Math.min($.y+R,$.y+$.height-50)),J=$.width-(me-$.x),fe=$.height-(de-$.y);break;case"ne":de=Math.max(0,Math.min($.y+R,$.y+$.height-50)),J=Math.max(50,Math.min($.width+ae,H.width-$.x)),fe=$.height-(de-$.y);break;case"sw":me=Math.max(0,Math.min($.x+ae,$.x+$.width-50)),J=$.width-(me-$.x),fe=Math.max(50,Math.min($.height+R,H.height-$.y));break;case"se":J=Math.max(50,Math.min($.width+ae,H.width-$.x)),fe=Math.max(50,Math.min($.height+R,H.height-$.y));break;case"n":de=Math.max(0,Math.min($.y+R,$.y+$.height-50)),fe=$.height-(de-$.y);break;case"e":J=Math.max(50,Math.min($.width+ae,H.width-$.x));break;case"s":fe=Math.max(50,Math.min($.height+R,H.height-$.y));break;case"w":me=Math.max(0,Math.min($.x+ae,$.x+$.width-50)),J=$.width-(me-$.x);break}return{x:me,y:de,width:J,height:fe}}),p({x:j,y:U})}},M=()=>{h(!1),m(!1),_("")},O=()=>{C(k=>Math.min(k+.1,3))},W=()=>{C(k=>Math.max(k-.1,.1))},q=()=>{v(k=>(k+90)%360)},te=k=>{const H=parseFloat(k.target.value);w(ne=>({...ne,exposure:H}))},ee=()=>{w({exposure:0})},B=()=>{const k=s.current,H=k==null?void 0:k.getContext("2d");if(!k||!H||!i)return;const ne=k.width,j=k.height,U=ne/2,ae=j/2,R=i.width*y,$=i.height*y,me=U-R/2,de=ae-$/2,J=l.x-me,fe=l.y-de,X=J/y,z=fe/y,F=l.width/y,re=l.height/y,be=Math.max(0,Math.min(X,i.width)),Q=Math.max(0,Math.min(z,i.height)),le=Math.min(F,i.width-be),ve=Math.min(re,i.height-Q),Ae=document.createElement("canvas"),Ne=Ae.getContext("2d");if(Ne){if(Ae.width=Math.round(le),Ae.height=Math.round(ve),g!==0||S.exposure!==0){const _e=document.createElement("canvas"),Z=_e.getContext("2d");if(!Z)return;if(g!==0){const A=g*Math.PI/180,D=Math.abs(Math.cos(A)),se=Math.abs(Math.sin(A));_e.width=i.width*D+i.height*se,_e.height=i.width*se+i.height*D,Z.translate(_e.width/2,_e.height/2),Z.rotate(A)}else _e.width=i.width,_e.height=i.height;Z.drawImage(i,-i.width/2,-i.height/2),S.exposure!==0&&(S.exposure>0?(Z.globalCompositeOperation="screen",Z.fillStyle=`rgba(255, 255, 255, ${S.exposure/100})`,Z.fillRect(0,0,_e.width,_e.height)):(Z.globalCompositeOperation="multiply",Z.fillStyle=`rgba(0, 0, 0, ${Math.abs(S.exposure)/100})`,Z.fillRect(0,0,_e.width,_e.height)));let oe,Se;if(g!==0){const A=g*Math.PI/180,D=Math.abs(Math.cos(A)),se=Math.abs(Math.sin(A));oe=_e.width/2+(X-i.width/2)*D-(z-i.height/2)*se-le/2,Se=_e.height/2+(X-i.width/2)*se+(z-i.height/2)*D-ve/2}else oe=X,Se=z;Ne.drawImage(_e,Math.max(0,oe),Math.max(0,Se),le,ve,0,0,le,ve)}else Ne.drawImage(i,be,Q,le,ve,0,0,le,ve);Ae.toBlob(_e=>{if(_e){const Z=new File([_e],r.name,{type:r.type,lastModified:Date.now()});n(Z)}},r.type,1)}};if(!e)return null;const Y=k=>{k.target===k.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:Y,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Crop Image"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"mb-4",children:o.jsx("canvas",{ref:s,width:600,height:400,className:"border border-border-custom rounded-lg w-full block",style:{cursor:P},onMouseDown:I,onMouseMove:T,onMouseUp:M,onMouseLeave:M})}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[o.jsx("button",{onClick:W,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom Out",children:o.jsx(Yb,{className:"w-4 h-4"})}),o.jsx("button",{onClick:O,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom In",children:o.jsx(Qb,{className:"w-4 h-4"})}),o.jsx("button",{onClick:q,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Rotate",children:o.jsx(Gb,{className:"w-4 h-4"})}),o.jsx("div",{className:"flex items-center space-x-2 text-sm text-secondary-text",children:o.jsx("span",{children:"Drag crop area or resize handles to adjust selection"})})]}),o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm text-secondary-text",children:"Exposure"}),o.jsxs("span",{className:"text-sm text-secondary-text",children:[S.exposure>0?"+":"",S.exposure]})]}),o.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:S.exposure,onChange:te,className:"w-full h-2 bg-border-custom rounded-lg appearance-none cursor-pointer slider"}),o.jsxs("div",{className:"flex justify-between text-xs text-secondary-text mt-1",children:[o.jsx("span",{children:"Darker"}),o.jsx("span",{children:"Brighter"})]})]}),o.jsx("button",{onClick:ee,className:"text-sm text-amber-600 hover:text-amber-700 transition-colors",children:"Reset Adjustments"})]})})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:B,className:"btn-primary btn-flex",children:"Crop & Use"})]})]})})}function S1({isOpen:e,onClose:t,onSuccess:n,preselectedBoxId:r}){const[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(""),[h,d]=N.useState(""),[m,f]=N.useState(""),[p,y]=N.useState(""),[C,g]=N.useState(""),[v,x]=N.useState(""),[_,S]=N.useState("1"),[w,E]=N.useState(null),[I,P]=N.useState(!1),[b,T]=N.useState(null),[M,O]=N.useState([]),[W,q]=N.useState([]),[te,ee]=N.useState(!1),[B,Y]=N.useState(!1),[k,H]=N.useState(""),[ne,j]=N.useState(""),[U,ae]=N.useState(""),{user:R}=gt();Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{e&&($(),me(),r&&u(r))},[e]),N.useEffect(()=>{e&&me()},[e,R]);const $=async()=>{try{const{data:Q,error:le}=await V.from("games").select("id, name, icon").order("name");if(le)throw le;O(Q||[])}catch(Q){console.error("Error fetching games:",Q)}},me=async()=>{if(R)try{const{data:Q,error:le}=await V.from("boxes").select(`
          id,
          name,
          game_id,
          purchase_date,
          created_at,
          game:games(
            name,
            icon
          )
        `).eq("user_id",R.id).order("created_at",{ascending:!1});if(le)throw le;const ve=(Q||[]).map(Ae=>({...Ae,game:Ae.game&&Array.isArray(Ae.game)?Ae.game[0]:Ae.game}));q(ve)}catch(Q){console.error("Error fetching boxes:",Q)}},de=()=>a?W.filter(Q=>Q.game_id===a):W,J=Q=>{const le=Q.target.files;if(j(""),ae(""),le&&le.length>0){const ve=le[0];if(!ys(ve)){j("Please select a valid image file (JPEG, PNG, or WebP)"),E(null),Q.target.value="";return}const Ae=50*1024*1024;ve.size>Ae?(j(`Your image must be 50MB or less. Current size: ${_t(ve.size)}`),E(null),Q.target.value=""):(E(le),le&&le.length>0&&(T(le[0]),P(!0)),ve.size>1024*1024&&ae(`Original size: ${_t(ve.size)}. Image will be automatically compressed before upload.`))}else E(le)},fe=Q=>{const le=new DataTransfer;le.items.add(Q),E(le.files),P(!1),T(null),ae(`Cropped image ready for upload (${_t(Q.size)})`)},X=()=>{P(!1),T(null);const Q=document.getElementById("image");Q&&(Q.value=""),E(null)},z=Q=>{const le=Q.target.value.replace(/[^0-9.]/g,"");if(g(le),le&&!isNaN(parseFloat(le))){const ve=parseFloat(le);x(`$${ve.toFixed(2)}`)}else x("")},F=async Q=>{if(Q.preventDefault(),!(!s.trim()||!R)){ee(!0),H("");try{let le="";if(w&&w.length>0){const Ne=w[0];if(U.includes("Cropped image ready")){Y(!0);try{const Z=await Pn(Ne,1200,1200,.8);console.log(`Cropped image compressed: ${_t(Ne.size)}  ${_t(Z.size)}`);const oe=Z.name.split(".").pop(),Se=`${R.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:A,error:D}=await V.storage.from("model-images").upload(Se,Z);if(D)throw console.error("Compressed cropped image upload error:",D),new Error(`Failed to upload image: ${D.message}`);{const{data:se}=V.storage.from("model-images").getPublicUrl(A.path);le=se.publicUrl,console.log("Uploaded compressed cropped image URL:",le)}}catch(Z){console.error("Cropped image compression error:",Z);const oe=Ne.name.split(".").pop(),Se=`${R.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:A,error:D}=await V.storage.from("model-images").upload(Se,Ne);if(D)throw console.error("Fallback cropped image upload error:",D),new Error(`Failed to upload image: ${D.message}`);{const{data:se}=V.storage.from("model-images").getPublicUrl(A.path);le=se.publicUrl,console.log("Uploaded uncompressed cropped image URL:",le)}}finally{Y(!1)}}else{Y(!0);try{const Z=await Pn(Ne,1200,1200,.8);console.log(`Image compressed: ${_t(Ne.size)}  ${_t(Z.size)}`);const oe=Z.name.split(".").pop(),Se=`${R.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:A,error:D}=await V.storage.from("model-images").upload(Se,Z);if(D)throw console.error("Image upload error:",D),new Error(`Failed to upload image: ${D.message}`);{const{data:se}=V.storage.from("model-images").getPublicUrl(A.path);le=se.publicUrl,console.log("Uploaded compressed image URL:",le)}}catch(Z){console.error("Image compression error:",Z);try{const oe=Ne.name.split(".").pop(),Se=`${R.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:A,error:D}=await V.storage.from("model-images").upload(Se,Ne);if(D)throw console.error("Original image upload error:",D),new Error(`Failed to upload image: ${D.message}`);{const{data:se}=V.storage.from("model-images").getPublicUrl(A.path);le=se.publicUrl,console.log("Uploaded original image URL:",le)}}catch(oe){throw console.error("Fallback upload failed:",oe),new Error("Failed to upload image after compression fallback")}}finally{Y(!1)}}}let ve=a||null;if(c||r){const Ne=c||r,_e=W.find(Z=>Z.id===Ne);_e&&_e.game_id&&(ve=_e.game_id)}const{error:Ae}=await V.from("models").insert({name:s.trim(),box_id:c||r||null,game_id:ve,status:h||"None",count:parseInt(_)||1,user_id:R.id,image_url:le,purchase_date:m||null,painted_date:p||null});if(Ae)throw Ae;i(""),l(""),u(""),d(""),f(""),y(""),g(""),x(""),S("1"),E(null),ae("");try{localStorage.removeItem("mini-myths-temp-box-context")}catch(Ne){console.error("Error clearing box context:",Ne)}n(),t()}catch(le){H(le instanceof Error?le.message:"Failed to add model")}finally{ee(!1),Y(!1)}}},re=s.trim().length>0&&!ne&&!B;if(!e)return null;const be=Q=>{Q.target===Q.currentTarget&&t()};return de(),o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:be,children:[o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Model"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),o.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Don't worry- you can update any of these details later."}),o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{htmlFor:"modelName",className:"block text-sm font-medium text-input-label font-overpass",children:"Model Name"}),o.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),o.jsx("input",{type:"text",id:"modelName",value:s,onChange:Q=>i(Q.target.value),placeholder:'eg. "Space Marine Lieutenant", "Captain America", "US Ranger Squad", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"box",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection (Optional)"}),o.jsxs("select",{id:"box",value:c,onChange:Q=>{u(Q.target.value),Q.target.value&&l("")},className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"No Collection (Loose Model)"}),de().map(Q=>o.jsxs("option",{value:Q.id,children:[Q.name," ",Q.game&&`(${Q.game.name})`]},Q.id))]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"Choose an existing collection or leave as loose model."}),c&&(()=>{const Q=W.find(le=>le.id===c);return Q&&Q.game?o.jsxs("p",{className:"text-xs text-[var(--color-brand)] mt-1",children:["Game will be automatically set to: ",o.jsx("strong",{children:Q.game.name})]}):null})()]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(zi,{games:M,selectedGame:a,onGameSelect:l,placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paintedStatus",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Status"}),o.jsxs("select",{id:"paintedStatus",value:h,onChange:Q=>d(Q.target.value),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"Select Status"}),o.jsx("option",{value:"Assembled",children:"Assembled"}),o.jsx("option",{value:"Primed",children:"Primed"}),o.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),o.jsx("option",{value:"Painted",children:"Painted"})]})]}),h==="Painted"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paintedDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"paintedDate",value:p,onChange:Q=>y(Q.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:m,onChange:Q=>f(Q.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"purchasePrice",value:C,onChange:z,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"numberOfModels",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Models"}),o.jsxs("div",{className:"relative",children:[o.jsx(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"numberOfModels",value:_,onChange:Q=>S(Q.target.value),min:"1",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:J,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."})]}),U&&o.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:U}),ne&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:ne}),k&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:k}),o.jsx("div",{className:"flex justify-center pt-4",children:o.jsx("button",{type:"submit",disabled:!re||te,className:`${re&&!te?"btn-primary":"btn-disabled"}`,children:B?"Compressing Image...":te?"Adding...":"Add to Collection"})})]})]}),b&&o.jsx(Cr,{isOpen:I,onClose:X,onCrop:fe,imageFile:b})]})}function nx({isOpen:e,onClose:t,images:n,onImageSelect:r,searchQuery:s,onFindMoreImages:i,isLoadingMore:a}){if(!e)return null;const l=c=>{c.target===c.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:l,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Qu,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Suggested Images"}),o.jsxs("p",{className:"text-sm text-secondary-text",children:['Search results for: "',s,'"']})]})]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("p",{className:"text-base text-secondary-text mb-4",children:['No images found for "',s,'". Try uploading your own image instead.']}),o.jsx("button",{onClick:t,className:"btn-primary",children:"Upload My Own Image"})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Click on an image to use it for your box. Images are sourced from Google Image Search."}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:n.map((c,u)=>o.jsxs("button",{onClick:()=>r(c),className:"group relative aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border---color-brand transition-all duration-200",children:[o.jsx("img",{src:c,alt:`Suggested image ${u+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy"}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-overpass font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Select Image"})})]},u))}),i&&o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("button",{onClick:i,disabled:a,className:"btn-primary btn-with-icon",children:a?o.jsxs(o.Fragment,{children:[o.jsx(Gh,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Finding more images..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Gh,{className:"w-4 h-4"}),o.jsx("span",{children:"Find more images"})]})})}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:t,className:"btn-ghost",children:"Upload My Own Image Instead"})})]})]})})}function bl({variant:e="primary",size:t="default",width:n="default",withIcon:r=!1,className:s="",children:i,...a}){const l=`btn-${e}`,d=[t==="small"?`btn-${e}-sm`:l,n==="full"?"btn-full":n==="flex"?"btn-flex":"",r?t==="small"?"btn-with-icon-sm":"btn-with-icon":"",s].filter(Boolean).join(" ");return o.jsx("button",{className:d,...a,children:i})}function N1({isOpen:e,onClose:t,onSuccess:n}){var _e;const[r,s]=N.useState(""),[i,a]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(null),[y,C]=N.useState(!1),[g,v]=N.useState(null),[x,_]=N.useState([]),[S,w]=N.useState(!1),[E,I]=N.useState(!1),[P,b]=N.useState(""),[T,M]=N.useState(""),[O,W]=N.useState(""),{user:q}=gt(),[te,ee]=N.useState(!1),[B,Y]=N.useState(!1),[k,H]=N.useState([]),[ne,j]=N.useState(""),[U,ae]=N.useState([]),[R,$]=N.useState(!1);let me=null;Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{e&&de()},[e]);const de=async()=>{try{const{data:Z,error:oe}=await V.from("games").select("id, name, icon").order("name");if(oe)throw oe;_(Z||[])}catch(Z){console.error("Error fetching games:",Z)}},J=Z=>{const oe=Z.target.files;if(M(""),W(""),oe&&oe.length>0){const Se=oe[0];if(!ys(Se)){M("Please select a valid image file (JPEG, PNG, or WebP)"),p(null),Z.target.value="";return}const A=50*1024*1024;Se.size>A?(M(`Your image must be 50MB or less. Current size: ${_t(Se.size)}`),p(null),Z.target.value=""):(p(oe),oe&&oe.length>0&&(v(oe[0]),C(!0)),Se.size>1024*1024&&W(`Original size: ${_t(Se.size)}. Image will be automatically compressed before upload.`))}else p(oe)},fe=Z=>{const oe=new DataTransfer;oe.items.add(Z),p(oe.files),C(!1),v(null),W(`Cropped image ready for upload (${_t(Z.size)})`)},X=()=>{C(!1),v(null);const Z=document.getElementById("boxImage");Z&&(Z.value=""),p(null)},z=Z=>{const oe=Z.target.value.replace(/[^0-9.]/g,"");if(h(oe),oe&&!isNaN(parseFloat(oe))){const Se=parseFloat(oe);m(`$${Se.toFixed(2)}`)}else m("")},F=async()=>{if(r.trim()){Y(!0),H([]),ae([]);try{const Z=x.find(ce=>ce.id===i),oe=(Z==null?void 0:Z.name)||"",Se=`${r.trim()} ${oe}`.trim(),A=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Se,count:6})});if(!A.ok)throw new Error("Failed to search for images");const se=(await A.json()).images||[];H(se),ae(se),ee(!0)}catch(Z){console.error("Error searching for images:",Z),ee(!1)}finally{Y(!1)}}},re=async()=>{if(r.trim()){$(!0);try{const Z=x.find(pe=>pe.id===i),oe=(Z==null?void 0:Z.name)||"",Se=`${r.trim()} ${oe}`.trim();console.log("Finding more images with exclude:",U);const A=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Se,count:6,exclude:U})});if(!A.ok)throw new Error("Failed to search for more images");const se=(await A.json()).images||[];console.log("Received additional images:",se),console.log("Previous results count:",U.length),console.log("New results count:",se.length);const ce=se.filter(pe=>!U.includes(pe));console.log("Unique new images after filtering:",ce),H(ce),ae([...U,...ce])}catch(Z){console.error("Error searching for more images:",Z)}finally{$(!1)}}},be=Z=>{p(null),W(`Selected image: ${Z}`),ee(!1),j(Z)},Q=async Z=>{if(Z.preventDefault(),!(!r.trim()||!q)){w(!0),b("");try{let oe="";if(ne)oe=ne;else if(f&&f.length>0){const D=f[0];if(O.includes("Cropped image ready")){I(!0);try{const ce=await Pn(D,1200,1200,.8);console.log(`Cropped image compressed: ${_t(D.size)}  ${_t(ce.size)}`);const pe=ce.name.split(".").pop(),Ge=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:st,error:Me}=await V.storage.from("model-images").upload(Ge,ce);if(Me)throw console.error("Compressed cropped image upload error:",Me),new Error(`Failed to upload image: ${Me.message}`);{const{data:Ye}=V.storage.from("model-images").getPublicUrl(st.path);oe=Ye.publicUrl,console.log("Uploaded compressed cropped image URL:",oe)}}catch(ce){console.error("Cropped image compression error:",ce);const pe=D.name.split(".").pop(),Ge=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:st,error:Me}=await V.storage.from("model-images").upload(Ge,D);if(Me)throw console.error("Fallback cropped image upload error:",Me),new Error(`Failed to upload image: ${Me.message}`);{const{data:Ye}=V.storage.from("model-images").getPublicUrl(st.path);oe=Ye.publicUrl,console.log("Uploaded uncompressed cropped image URL:",oe)}}finally{I(!1)}}else{I(!0);try{const ce=await Pn(D,1200,1200,.8);console.log(`Image compressed: ${_t(D.size)}  ${_t(ce.size)}`);const pe=ce.name.split(".").pop(),Ge=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:st,error:Me}=await V.storage.from("model-images").upload(Ge,ce);if(Me)throw console.error("Image upload error:",Me),new Error(`Failed to upload image: ${Me.message}`);{const{data:Ye}=V.storage.from("model-images").getPublicUrl(st.path);oe=Ye.publicUrl,console.log("Uploaded compressed image URL:",oe)}}catch(ce){console.error("Image compression error:",ce);try{const pe=D.name.split(".").pop(),Ge=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:st,error:Me}=await V.storage.from("model-images").upload(Ge,D);if(Me)throw console.error("Original image upload error:",Me),new Error(`Failed to upload image: ${Me.message}`);{const{data:Ye}=V.storage.from("model-images").getPublicUrl(st.path);oe=Ye.publicUrl,console.log("Uploaded original image URL:",oe)}}catch(pe){throw console.error("Fallback upload failed:",pe),new Error("Failed to upload image after compression fallback")}}finally{I(!1)}}}const{data:Se,error:A}=await V.from("boxes").insert({name:r.trim(),game_id:i||null,purchase_date:l||null,user_id:q.id,image_url:oe}).select().single();if(A)throw A;return me=Se.id,s(""),a(""),c(""),h(""),m(""),p(null),W(""),j(""),ee(!1),H([]),n(),Se}catch(oe){throw b(oe instanceof Error?oe.message:"Failed to add box"),oe}finally{w(!1),I(!1)}}},le=async Z=>{try{await Q(Z),t()}catch{}},ve=async Z=>{await Q(Z),t()},Ae=r.trim().length>0&&!T&&!E;if(!e)return null;const Ne=Z=>{Z.target===Z.currentTarget&&t()};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Ne,children:[o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),o.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Don't worry- you can update any of these details later."}),o.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass",children:"Collection Name"}),o.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),o.jsx("input",{type:"text",id:"boxName",value:r,onChange:Z=>s(Z.target.value),placeholder:'eg. "Kill Team Collection", "Space Marine Heroes", "Warhammer 40k Elite Edition", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(zi,{games:x,selectedGame:i,onGameSelect:a,placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:l,onChange:Z=>c(Z.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"purchasePrice",value:u,onChange:z,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:J,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."}),r.trim()&&!f&&!ne&&o.jsx("div",{className:"mt-3",children:o.jsx(bl,{variant:"secondary",width:"full",size:"small",onClick:F,disabled:B,children:B?"Searching for images...":"Find images for this collection"})})]}),O&&o.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:O}),T&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:T}),P&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:P}),o.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[o.jsx(bl,{className:"btn-primary",variant:Ae&&!S?"primary":"disabled",width:"full",onClick:le,disabled:!Ae||S,children:E?"Compressing Image...":S?"Adding...":"Add Empty Collection"}),o.jsx(bl,{variant:Ae&&!S?"primary":"disabled",width:"full",onClick:ve,disabled:!Ae||S,children:E?"Compressing Image...":S?"Adding...":"Add Models to Collection"})]})]})]}),g&&o.jsx(Cr,{isOpen:y,onClose:X,onCrop:fe,imageFile:g}),te&&o.jsx(nx,{isOpen:te,onClose:()=>ee(!1),images:k,onImageSelect:be,searchQuery:`${r} ${((_e=x.find(Z=>Z.id===i))==null?void 0:_e.name)||""}`.trim(),onFindMoreImages:re,isLoadingMore:R})]})}function _1({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,a]=N.useState(null);N.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await V.from("users").select("*").order("created_at",{ascending:!1});if(h)throw h;n(u||[])}catch(u){a(u instanceof Error?u.message:"Failed to fetch users")}finally{s(!1)}},c=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading users..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE USERS"})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:i})}),o.jsx("div",{className:"space-y-4",children:t.map(u=>o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[o.jsx(Nn,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:u.email||"No email"}),o.jsxs("p",{className:"text-sm text-secondary-text",children:["Joined ",c(u.created_at)]})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex-shrink-0 ${u.is_admin?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:u.is_admin?"Admin":"User"})]},u.id))}),t.length===0&&!r&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No users found."})})]})}function C1({isOpen:e,onClose:t,onGameUpdated:n,game:r}){const[s,i]=N.useState({name:"",manufacturer_id:"",image:"",icon:""}),[a,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(null),[m,f]=N.useState(!1),[p,y]=N.useState(!1),[C,g]=N.useState(null),[v,x]=N.useState(null),[_,S]=N.useState(null),[w,E]=N.useState(null),[I,P]=N.useState(!1),[b,T]=N.useState(!1),[M,O]=N.useState("");N.useEffect(()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""})},[r]),N.useEffect(()=>{e&&W()},[e]);const W=async()=>{try{const{data:j,error:U}=await V.from("manufacturers").select("id, name").order("name");if(U)throw U;l(j||[])}catch(j){console.error("Error fetching manufacturers:",j)}},q=j=>{var ae;const U=(ae=j.target.files)==null?void 0:ae[0];if(U){if(!ys(U)){alert("Please select a valid image file");return}u(U),g(U),f(!0)}},te=j=>{var ae;const U=(ae=j.target.files)==null?void 0:ae[0];if(U){if(!ys(U)){alert("Please select a valid image file");return}d(U),x(U),y(!0)}},ee=j=>{S(j),f(!1),g(null)},B=j=>{E(j),y(!1),x(null)},Y=async(j,U,ae)=>{const R=(c==null?void 0:c.name.split(".").pop())||"jpg",$=`${ae}/${Date.now()}-${Math.random().toString(36).substring(2)}.${R}`,{data:me,error:de}=await V.storage.from(U).upload($,j);if(de)throw de;const{data:J}=V.storage.from(U).getPublicUrl(me.path);return J.publicUrl},k=async j=>{if(j.preventDefault(),!!r){P(!0),O("");try{let U=s.image,ae=s.icon;if(_){T(!0);const $=await Pn(_,1200,1200,.8);U=await Y($,"game-assets","images")}if(w){T(!0);const $=await Pn(w,512,512,.9);ae=await Y($,"game-assets","icons")}const{error:R}=await V.from("games").update({name:s.name,manufacturer_id:s.manufacturer_id||null,image:U,icon:ae}).eq("id",r.id);if(R)throw R;n()}catch(U){O(U instanceof Error?U.message:"Failed to update game")}finally{P(!1),T(!1)}}},H=()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""}),u(null),d(null),S(null),E(null),O("")};if(!e||!r)return null;const ne=j=>{j.target===j.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:ne,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Game"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:k,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ju,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"gameName",value:s.name,onChange:j=>i({...s,name:j.target.value}),placeholder:"Enter game name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"manufacturer",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Manufacturer"}),o.jsxs("div",{className:"relative",children:[o.jsx(Rb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"manufacturer",value:s.manufacturer_id,onChange:j=>i({...s,manufacturer_id:j.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"Select a manufacturer..."}),a.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"gameImage",accept:"image/*",onChange:q,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),_&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Icon"}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"gameIcon",accept:"image/*",onChange:te,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),w&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),M&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:M}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:H,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:I||b,className:"btn-primary btn-flex",children:b?"Processing...":I?"Saving...":"Save Changes"})]})]})]})}),C&&o.jsx(Cr,{isOpen:m,onClose:()=>{f(!1),g(null),u(null)},onCrop:ee,imageFile:C}),v&&o.jsx(Cr,{isOpen:p,onClose:()=>{y(!1),x(null),d(null)},onCrop:B,imageFile:v})]})}function E1({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,a]=N.useState(null),[l,c]=N.useState({isOpen:!1,game:null});N.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:m,error:f}=await V.from("games").select(`
          *,
          manufacturer:manufacturers(name)
        `).order("name");if(f)throw f;n(m||[])}catch(m){a(m instanceof Error?m.message:"Failed to fetch games")}finally{s(!1)}},h=m=>{c({isOpen:!0,game:m})},d=()=>{u(),c({isOpen:!1,game:null})};return r?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading games..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE GAMES"})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:i})}),o.jsx("div",{className:"space-y-4",children:t.map(m=>{var f;return o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[m.icon?o.jsx("img",{src:m.icon,alt:`${m.name} icon`,className:"w-12 h-12 object-contain rounded",onError:p=>{const y=p.target;y.style.display="none";const C=y.nextElementSibling;C&&C.classList.contains("icon-fallback")&&(C.style.display="flex")}}):null,o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:m.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:m.name.charAt(0)})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:m.name}),o.jsx("p",{className:"text-sm text-secondary-text",children:((f=m.manufacturer)==null?void 0:f.name)||"No manufacturer"})]})]}),o.jsxs("button",{onClick:()=>h(m),className:"btn-secondary-sm btn-with-icon-sm",children:[o.jsx(Oi,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]})]},m.id)})}),t.length===0&&!r&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No games found."})}),o.jsx(C1,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,game:null}),onGameUpdated:d,game:l.game})]})}function T1({isOpen:e,onClose:t,location:n}){const[r,s]=N.useState([]),[i,a]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(null),[f,p]=N.useState({name:"",start_time:"",end_time:"",availability:[]}),[y,C]=N.useState(!1),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];N.useEffect(()=>{e&&v()},[e,n.id]);const v=async()=>{try{a(!0);const{data:b,error:T}=await V.from("timeslots").select("*").eq("location_id",n.id).order("start_time");if(T)throw T;s(b||[])}catch(b){c(b instanceof Error?b.message:"Failed to fetch timeslots")}finally{a(!1)}},x=()=>{p({name:"",start_time:"",end_time:"",availability:[]}),m(null),h(!1)},_=b=>{p({name:b.name,start_time:b.start_time,end_time:b.end_time,availability:b.availability||[]}),m(b),h(!0)},S=async b=>{if(confirm("Are you sure you want to delete this timeslot?"))try{const{error:T}=await V.from("timeslots").delete().eq("id",b);if(T)throw T;await v()}catch(T){console.error("Error deleting timeslot:",T),alert("Failed to delete timeslot")}},w=b=>{p(T=>({...T,availability:T.availability.includes(b)?T.availability.filter(M=>M!==b):[...T.availability,b]}))},E=async b=>{if(b.preventDefault(),!(!f.name.trim()||!f.start_time||!f.end_time)){C(!0),c(null);try{if(d){const{error:T}=await V.from("timeslots").update({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,availability:f.availability}).eq("id",d.id);if(T)throw T}else{const{error:T}=await V.from("timeslots").insert({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,location_id:n.id,availability:f.availability});if(T)throw T}await v(),x()}catch(T){c(T instanceof Error?T.message:"Failed to save timeslot")}finally{C(!1)}}},I=b=>new Date(`2000-01-01T${b}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(!e)return null;const P=b=>{b.target===b.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:P,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Manage Timeslots - ",n.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),l&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:l})}),!u&&o.jsx("div",{className:"mb-6",children:o.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-with-icon",children:[o.jsx(Li,{className:"w-4 h-4"}),o.jsx("span",{children:"Add Timeslot"})]})}),u&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:d?"Edit Timeslot":"Add New Timeslot"}),o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot Name"}),o.jsx("input",{type:"text",value:f.name,onChange:b=>p({...f,name:b.target.value}),placeholder:"e.g., Morning Session, Evening Games",className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Start Time"}),o.jsx("input",{type:"time",value:f.start_time,onChange:b=>p({...f,start_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"End Time"}),o.jsx("input",{type:"time",value:f.end_time,onChange:b=>p({...f,end_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Available Days"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:g.map(b=>o.jsx("button",{type:"button",onClick:()=>w(b),className:`px-3 py-2 rounded-lg text-sm font-overpass font-medium transition-colors ${f.availability.includes(b)?"bg-brand text-white":"bg-bg-primary border border-border-custom text-text hover:bg-bg-secondary"}`,children:b.slice(0,3)},b))})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:x,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:y,className:"btn-primary btn-flex",children:y?"Saving...":d?"Update Timeslot":"Add Timeslot"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Current Timeslots"}),i?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading timeslots..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(js,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No timeslots configured for this location."})]}):r.map(b=>{var T;return o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-text",children:b.name}),o.jsxs("p",{className:"text-sm text-secondary-text",children:[I(b.start_time)," - ",I(b.end_time)]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(T=b.availability)==null?void 0:T.map(M=>o.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:M.slice(0,3)},M))})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>_(b),className:"p-2 text-secondary-text hover:text-text transition-colors",children:o.jsx(Oi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S(b.id),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:o.jsx(Ss,{className:"w-4 h-4"})})]})]},b.id)})]})]})})}function P1({isOpen:e,onClose:t,location:n,onAdminsUpdated:r}){const[s,i]=N.useState([]),[a,l]=N.useState([]),[c,u]=N.useState(""),[h,d]=N.useState(!0),[m,f]=N.useState(!1),[p,y]=N.useState("");N.useEffect(()=>{e&&n&&(C(),g())},[e,n]);const C=async()=>{try{const{data:S,error:w}=await V.from("users").select("id, email").order("email");if(w)throw w;i(S||[])}catch(S){console.error("Error fetching users:",S),y("Failed to fetch users")}finally{d(!1)}},g=async()=>{if(!(n!=null&&n.admins)){l([]);return}try{const{data:S,error:w}=await V.from("users").select("id, email").in("id",n.admins).order("email");if(w)throw w;l(S||[])}catch(S){console.error("Error fetching admin users:",S)}},v=async()=>{if(!(!c.trim()||!n)){f(!0),y("");try{const S=s.find(I=>I.email.toLowerCase()===c.toLowerCase().trim());if(!S){y("User not found"),f(!1);return}if(n.admins.includes(S.id)){y("User is already an admin"),f(!1);return}const w=[...n.admins,S.id],{error:E}=await V.from("locations").update({admins:w}).eq("id",n.id);if(E)throw E;l([...a,S]),r(w),u("")}catch(S){y(S instanceof Error?S.message:"Failed to add admin")}finally{f(!1)}}},x=async S=>{if(n)try{const w=n.admins.filter(I=>I!==S),{error:E}=await V.from("locations").update({admins:w}).eq("id",n.id);if(E)throw E;l(a.filter(I=>I.id!==S)),r(w)}catch(w){y(w instanceof Error?w.message:"Failed to remove admin")}};if(!e||!n)return null;const _=S=>{S.target===S.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:_,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Edit Location Admins - ",n.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),p&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:p})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Add New Admin"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),o.jsx("input",{type:"text",value:c,onChange:S=>u(S.target.value),placeholder:"Search users by email...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"})]}),o.jsxs("button",{onClick:v,disabled:!c.trim()||m,className:"btn-primary-sm btn-with-icon-sm",children:[o.jsx(Li,{className:"w-4 h-4"}),o.jsx("span",{children:m?"Adding...":"Add"})]})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-2",children:"Enter the exact email address of the user you want to add as an admin."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Current Admins"}),h?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading admins..."})]}):a.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Si,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No admins assigned to this location."})]}):o.jsx("div",{className:"space-y-3",children:a.map(S=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border border-border-custom",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Si,{className:"w-5 h-5 text-secondary-text"}),o.jsx("span",{className:"text-text font-medium",children:S.email})]}),o.jsx("button",{onClick:()=>x(S.id),className:"p-2 text-icon hover:text-icon-hover hover:bg-red-50 rounded-lg transition-colors",title:"Remove admin",children:o.jsx(Ss,{className:"w-4 h-4"})})]},S.id))})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-border-custom",children:o.jsx("button",{onClick:t,className:"btn-primary btn-full",children:"Done"})})]})})}function I1({isOpen:e,onClose:t,onLocationUpdated:n,location:r}){const[s,i]=N.useState({name:"",address:"",icon:"",tables:1,admins:[]}),[a,l]=N.useState(null),[c,u]=N.useState(!1),[h,d]=N.useState(null),[m,f]=N.useState(null),[p,y]=N.useState(!1),[C,g]=N.useState(!1),[v,x]=N.useState(""),[_,S]=N.useState(!1),[w,E]=N.useState(!1);N.useEffect(()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]})},[r]);const I=q=>{var ee;const te=(ee=q.target.files)==null?void 0:ee[0];if(te){if(!ys(te)){alert("Please select a valid image file");return}l(te),d(te),u(!0)}},P=q=>{f(q),u(!1),d(null)},b=async(q,te,ee)=>{const B=(a==null?void 0:a.name.split(".").pop())||"jpg",Y=`${ee}/${Date.now()}-${Math.random().toString(36).substring(2)}.${B}`,{data:k,error:H}=await V.storage.from(te).upload(Y,q);if(H)throw H;const{data:ne}=V.storage.from(te).getPublicUrl(k.path);return ne.publicUrl},T=async q=>{if(q.preventDefault(),!!r){y(!0),x("");try{let te=s.icon;if(m){g(!0);const B=await Pn(m,512,512,.9);te=await b(B,"location-assets","icons")}const{error:ee}=await V.from("locations").update({name:s.name,address:s.address,icon:te,tables:s.tables,admins:s.admins}).eq("id",r.id);if(ee)throw ee;n()}catch(te){x(te instanceof Error?te.message:"Failed to update location")}finally{y(!1),g(!1)}}},M=()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]}),l(null),f(null),x("")},O=q=>{i(te=>({...te,admins:q}))};if(!e||!r)return null;const W=q=>{q.target===q.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:W,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Location"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"locationName",value:s.name,onChange:q=>i({...s,name:q.target.value}),placeholder:"Enter location name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Bb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"address",value:s.address,onChange:q=>i({...s,address:q.target.value}),placeholder:"Enter full address...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tables",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Tables"}),o.jsxs("div",{className:"relative",children:[o.jsx(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"tables",value:s.tables,onChange:q=>i({...s,tables:parseInt(q.target.value)||0}),min:"1",placeholder:"Enter number of tables...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"locationIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Icon"}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"locationIcon",accept:"image/*",onChange:I,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),m&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),v&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:v}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>S(!0),className:"btn-secondary btn-with-icon",children:[o.jsx(js,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Timeslots"})]}),o.jsxs("button",{type:"button",onClick:()=>E(!0),className:"btn-secondary btn-with-icon",children:[o.jsx(Si,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Admins"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:M,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:p||C,className:"btn-primary btn-flex",children:C?"Processing...":p?"Saving...":"Save Changes"})]})]})]})]})}),h&&o.jsx(Cr,{isOpen:c,onClose:()=>{u(!1),d(null),l(null)},onCrop:P,imageFile:h}),o.jsx(T1,{isOpen:_,onClose:()=>S(!1),location:r}),o.jsx(P1,{isOpen:w,onClose:()=>E(!1),location:r,onAdminsUpdated:O})]})}function A1({onBack:e,isLocationAdmin:t=!1}){const[n,r]=N.useState([]),[s,i]=N.useState(!0),[a,l]=N.useState(null),{user:c}=gt(),[u,h]=N.useState({isOpen:!1,location:null});N.useEffect(()=>{d()},[]);const d=async()=>{try{let p=V.from("locations").select("*").order("name");t&&!(c!=null&&c.is_admin)&&(c!=null&&c.id)&&(p=p.contains("admins",[c.id]));const{data:y,error:C}=await p;if(C)throw C;r(y||[])}catch(p){l(p instanceof Error?p.message:"Failed to fetch locations")}finally{i(!1)}},m=p=>{h({isOpen:!0,location:p})},f=()=>{d(),h({isOpen:!1,location:null})};return s?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading locations..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE LOCATIONS"})]}),a&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:a})}),o.jsx("div",{className:"space-y-4",children:n.map(p=>o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[p.icon?o.jsx("img",{src:p.icon,alt:`${p.name} icon`,className:"w-12 h-12 object-contain rounded",onError:y=>{const C=y.target;C.style.display="none";const g=C.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="flex")}}):null,o.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center icon-fallback",style:{display:p.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:p.name.charAt(0)})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:p.name}),o.jsx("p",{className:"text-sm text-secondary-text truncate",children:p.address}),o.jsxs("p",{className:"text-xs text-secondary-text",children:[p.tables," table",p.tables!==1?"s":""]})]})]}),o.jsxs("button",{onClick:()=>m(p),className:"btn-secondary-sm btn-with-icon-sm",children:[o.jsx(Oi,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]})]},p.id))}),n.length===0&&!s&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No locations found."})}),o.jsx(I1,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,location:null}),onLocationUpdated:f,location:u.location})]})}function M1({onBack:e}){const[t,n]=N.useState("main"),{user:r}=gt();return t==="users"?o.jsx(_1,{onBack:()=>n("main")}):t==="games"?o.jsx(E1,{onBack:()=>n("main")}):t==="locations"?o.jsx(A1,{onBack:()=>n("main"),isLocationAdmin:(r==null?void 0:r.is_location_admin)||!1}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Collection"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"ADMIN PANEL"})]}),o.jsxs("div",{className:"space-y-4 max-w-md",children:[(r==null?void 0:r.is_admin)&&o.jsxs("button",{onClick:()=>n("users"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Si,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Users"})]}),o.jsx(vr,{className:"w-5 h-5 text-icon"})]}),(r==null?void 0:r.is_admin)&&o.jsxs("button",{onClick:()=>n("games"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Ju,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Games"})]}),o.jsx(vr,{className:"w-5 h-5 text-icon"})]}),o.jsxs("button",{onClick:()=>n("locations"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Mi,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Locations"})]}),o.jsx(vr,{className:"w-5 h-5 text-icon"})]})]})]})}function L1({onBack:e}){return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title text-center",children:"About this app"})]}),o.jsx("div",{children:o.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-8",children:o.jsxs("div",{className:"space-y-6 text-base text-text leading-relaxed",children:[o.jsx("p",{children:"You're using a very, very early version of the Mini Myths app. Our hope is that one day you'll be able to use this app to manage your tabletop wargaming collection, and book a table at nearby gaming store."}),o.jsx("p",{children:"We're still in very early development, so make sure to let us know if you run into any issues along the way. You can flag issues in the Mini Myths Discord."})]})})})]})}function mf({date:e,bookings:t,isExpanded:n,onToggle:r,onBookingClick:s,onCancelBooking:i}){const a=l=>{const c=new Date(l),u=new Date,h=new Date(u),d=new Date(u);return h.setDate(h.getDate()-1),d.setDate(d.getDate()+1),u.setHours(0,0,0,0),h.setHours(0,0,0,0),d.setHours(0,0,0,0),c.setHours(0,0,0,0),c.getTime()===u.getTime()?"Today":c.getTime()===d.getTime()?"Tomorrow":c.getTime()===h.getTime()?"Yesterday":c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:a(e)}),o.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-sm font-medium rounded-full",children:[t.length," booking",t.length!==1?"s":""]})]}),n?o.jsx(Ku,{className:"w-5 h-5 text-icon"}):o.jsx(vr,{className:"w-5 h-5 text-icon"})]}),n&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>o.jsx(ex,{booking:l,onClick:()=>s(l),onCancelBooking:i,isPast:e==="past"},l.id))})]})}function O1({isOpen:e,onClose:t,onBookingCancelled:n,booking:r}){const[s,i]=N.useState(!1),[a,l]=N.useState(!1),c=async()=>{if(r){i(!0);try{const{error:f}=await V.from("bookings").delete().eq("id",r.id);if(f)throw f;n()}catch(f){console.error("Error cancelling booking:",f),alert("Failed to cancel booking. Please try again.")}finally{i(!1),l(!1)}}},u=f=>{const p=new Date(f),y=new Date,C=new Date(y),g=new Date(y);return C.setDate(C.getDate()-1),g.setDate(g.getDate()+1),y.setHours(0,0,0,0),C.setHours(0,0,0,0),g.setHours(0,0,0,0),p.setHours(0,0,0,0),p.getTime()===y.getTime()?"Today":p.getTime()===C.getTime()?"Yesterday":p.getTime()===g.getTime()?"Tomorrow":p.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},h=f=>new Date(`2000-01-01T${f}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),d=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});if(!e||!r)return null;const m=f=>{f.target===f.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:m,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:"Booking Details"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(pt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:u(r.date)}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.date})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(js,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.timeslot.name}),o.jsxs("p",{className:"text-sm text-secondary-text",children:[h(r.timeslot.start_time)," - ",h(r.timeslot.end_time)]})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Mi,{className:"w-5 h-5 text-secondary-text mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.location.name}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.location.address})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Nn,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.user_name?r.user_name:"Booked by"}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.user_email||r.user.email})]})]}),r.game&&o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r.game.icon?o.jsx("img",{src:r.game.icon,alt:`${r.game.name} icon`,className:"w-5 h-5 object-contain rounded",onError:f=>{const p=f.target;p.style.display="none";const y=p.nextElementSibling;y&&y.classList.contains("icon-fallback")&&(y.style.display="flex")}}):null,o.jsx("div",{className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:r.game.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.game.name.charAt(0)})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:"Game"}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.game.name})]})]}),o.jsx("div",{className:"border-t border-border-custom pt-4",children:o.jsxs("p",{className:"text-sm text-secondary-text",children:["Booking created: ",d(r.created_at)]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-border-custom",children:a?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Are you sure?"}),o.jsx("p",{className:"text-red-700 text-sm",children:"This will permanently delete this booking and make the table available for others to book."})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>l(!1),disabled:s,className:"btn-ghost btn-flex",children:"Keep Booking"}),o.jsx("button",{onClick:c,disabled:s,className:"btn-danger btn-flex",children:s?"Cancelling...":"Yes, Cancel Booking"})]})]}):o.jsxs("button",{onClick:()=>l(!0),className:"btn-danger-outline btn-with-icon",children:[o.jsx(Ss,{className:"w-4 h-4"}),o.jsx("span",{children:"Cancel This Booking"})]})})]})})}function D1(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:a}=gt(),l=async()=>{try{r(!0);let c=V.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `);if(a!=null&&a.is_location_admin&&!(a!=null&&a.is_admin)&&(a!=null&&a.id)){const{data:v,error:x}=await V.from("locations").select("id").contains("admins",[a.id]);if(x)throw x;const _=(v==null?void 0:v.map(S=>S.id))||[];if(_.length===0){t([]);return}c=c.in("location_id",_)}const{data:u,error:h}=await c;if(h)throw h;const d=[...new Set((u==null?void 0:u.map(v=>v.user_id))||[])],{data:m,error:f}=await V.from("users").select("id, email").in("id",d);if(f)throw f;const p=new Map((m==null?void 0:m.map(v=>[v.id,v]))||[]),y=(u==null?void 0:u.map(v=>({...v,user:p.get(v.user_id)||{id:v.user_id,email:"Unknown User"}})))||[],C=new Date;C.setHours(0,0,0,0);const g=y.sort((v,x)=>{const _=new Date(v.date),S=new Date(x.date);_.setHours(0,0,0,0),S.setHours(0,0,0,0);const w=_<C,E=S<C;if(w&&!E)return 1;if(!w&&E)return-1;const I=S.getTime()-_.getTime();return I!==0?I:new Date(x.created_at).getTime()-new Date(v.created_at).getTime()});t(g)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return N.useEffect(()=>{l()},[]),{bookings:e,loading:n,error:s,refetch:l}}function R1({onBack:e}){const[t,n]=N.useState(new Set),[r,s]=N.useState(null),[i,a]=N.useState(!1),[l,c]=N.useState({isOpen:!1,bookingId:null}),[u,h]=N.useState(!1),{bookings:d,loading:m,error:f,refetch:p}=D1(),y=S=>{s(S),a(!0)},C=()=>{a(!1),s(null),p()},g=S=>{console.log("Attempting to cancel booking with ID:",S),c({isOpen:!0,bookingId:S})},v=async()=>{if(console.log("Confirming cancellation for booking ID:",l.bookingId),!!l.bookingId){h(!0);try{const{error:S}=await V.from("bookings").delete().eq("id",l.bookingId);if(S)throw S;console.log("Booking cancelled successfully"),await p(),c({isOpen:!1,bookingId:null})}catch(S){console.error("Error cancelling booking:",S),alert("Failed to cancel booking. Please try again.")}finally{h(!1)}}},x=Ce.useMemo(()=>{const S=new Date;S.setHours(0,0,0,0);const w=[],E=[];d.forEach(O=>{const W=new Date(O.date);W.setHours(0,0,0,0),W>=S?w.push(O):E.push(O)});const I={},P={};w.forEach(O=>{const W=O.date;I[W]||(I[W]=[]),I[W].push(O)}),E.forEach(O=>{const W=O.date;P[W]||(P[W]=[]),P[W].push(O)}),Object.keys(I).forEach(O=>{I[O].sort((W,q)=>W.timeslot.start_time.localeCompare(q.timeslot.start_time))}),Object.keys(P).forEach(O=>{P[O].sort((W,q)=>W.timeslot.start_time.localeCompare(q.timeslot.start_time))});const b=Object.keys(I).sort((O,W)=>O.localeCompare(W)),T=Object.keys(P).sort((O,W)=>W.localeCompare(O)),M=b.map(O=>({date:O,bookings:I[O],isPast:!1}));return T.forEach(O=>{M.push({date:O,bookings:P[O],isPast:!0})}),M},[d]);Ce.useEffect(()=>{if(x.length>0){const S=new Set(x.slice(0,3).map(w=>w.date));n(S)}},[x]);const _=S=>{n(w=>{const E=new Set(w);return E.has(S)?E.delete(S):E.add(S),E})};return m?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading all bookings..."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(Ir,{className:"w-5 h-5"}),o.jsx("span",{children:"Back"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"ALL BOOKINGS"}),o.jsx("p",{className:"text-base text-secondary-text mt-2",children:"View and manage all table bookings across all locations"})]}),f&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:f})}),d.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(pt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"No bookings found."})]}):o.jsxs("div",{className:"space-y-8",children:[x.filter(S=>!S.isPast).length>0&&o.jsx("div",{className:"space-y-6",children:x.filter(S=>!S.isPast).map(({date:S,bookings:w,isPast:E})=>o.jsx(mf,{date:S,bookings:w,isExpanded:t.has(S),onToggle:()=>_(S),onBookingClick:y,onCancelBooking:g},S))}),x.filter(S=>S.isPast).length>0&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"border-t border-border-custom pt-8",children:o.jsx("h2",{className:"text-2xl font-bold text-title mb-6",children:"Past Bookings"})}),x.filter(S=>S.isPast).map(({date:S,bookings:w,isPast:E})=>o.jsx(mf,{date:S,bookings:w,isExpanded:t.has(S),onToggle:()=>_(S),onBookingClick:y,onCancelBooking:g},S))]})]})]}),o.jsx(O1,{isOpen:i,onClose:()=>a(!1),onBookingCancelled:C,booking:r}),o.jsx(tx,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,bookingId:null}),onConfirm:v,loading:u})]})}function F1({isOpen:e,onClose:t,onConfirm:n,modelName:r,loading:s=!1}){if(!e)return null;const i=a=>{a.target===a.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Model"})]})]})})}function z1(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const $1=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,B1=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,U1={};function pf(e,t){return(U1.jsx?B1:$1).test(e)}const H1=/[ \t\n\f\r]/g;function q1(e){return typeof e=="object"?e.type==="text"?gf(e.value):!1:gf(e)}function gf(e){return e.replace(H1,"")===""}class $i{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}$i.prototype.normal={};$i.prototype.property={};$i.prototype.space=void 0;function rx(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new $i(n,r,t)}function Bc(e){return e.toLowerCase()}class Mt{constructor(t,n){this.attribute=n,this.property=t}}Mt.prototype.attribute="";Mt.prototype.booleanish=!1;Mt.prototype.boolean=!1;Mt.prototype.commaOrSpaceSeparated=!1;Mt.prototype.commaSeparated=!1;Mt.prototype.defined=!1;Mt.prototype.mustUseProperty=!1;Mt.prototype.number=!1;Mt.prototype.overloadedBoolean=!1;Mt.prototype.property="";Mt.prototype.spaceSeparated=!1;Mt.prototype.space=void 0;let W1=0;const ye=Mr(),Je=Mr(),Uc=Mr(),K=Mr(),De=Mr(),cs=Mr(),Lt=Mr();function Mr(){return 2**++W1}const Hc=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:Je,commaOrSpaceSeparated:Lt,commaSeparated:cs,number:K,overloadedBoolean:Uc,spaceSeparated:De},Symbol.toStringTag,{value:"Module"})),vl=Object.keys(Hc);class rd extends Mt{constructor(t,n,r,s){let i=-1;if(super(t,n),xf(this,"space",s),typeof r=="number")for(;++i<vl.length;){const a=vl[i];xf(this,vl[i],(r&Hc[a])===Hc[a])}}}rd.prototype.defined=!0;function xf(e,t,n){n&&(e[t]=n)}function Cs(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new rd(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Bc(r)]=r,n[Bc(i.attribute)]=r}return new $i(t,n,e.space)}const sx=Cs({properties:{ariaActiveDescendant:null,ariaAtomic:Je,ariaAutoComplete:null,ariaBusy:Je,ariaChecked:Je,ariaColCount:K,ariaColIndex:K,ariaColSpan:K,ariaControls:De,ariaCurrent:null,ariaDescribedBy:De,ariaDetails:null,ariaDisabled:Je,ariaDropEffect:De,ariaErrorMessage:null,ariaExpanded:Je,ariaFlowTo:De,ariaGrabbed:Je,ariaHasPopup:null,ariaHidden:Je,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:De,ariaLevel:K,ariaLive:null,ariaModal:Je,ariaMultiLine:Je,ariaMultiSelectable:Je,ariaOrientation:null,ariaOwns:De,ariaPlaceholder:null,ariaPosInSet:K,ariaPressed:Je,ariaReadOnly:Je,ariaRelevant:null,ariaRequired:Je,ariaRoleDescription:De,ariaRowCount:K,ariaRowIndex:K,ariaRowSpan:K,ariaSelected:Je,ariaSetSize:K,ariaSort:null,ariaValueMax:K,ariaValueMin:K,ariaValueNow:K,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function ix(e,t){return t in e?e[t]:t}function ax(e,t){return ix(e,t.toLowerCase())}const G1=Cs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cs,acceptCharset:De,accessKey:De,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:De,autoFocus:ye,autoPlay:ye,blocking:De,capture:null,charSet:null,checked:ye,cite:null,className:De,cols:K,colSpan:null,content:null,contentEditable:Je,controls:ye,controlsList:De,coords:K|cs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:Uc,draggable:Je,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:De,height:K,hidden:Uc,high:K,href:null,hrefLang:null,htmlFor:De,httpEquiv:De,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:De,itemRef:De,itemScope:ye,itemType:De,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:K,manifest:null,max:null,maxLength:K,media:null,method:null,min:null,minLength:K,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:K,pattern:null,ping:De,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:De,required:ye,reversed:ye,rows:K,rowSpan:K,sandbox:De,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:K,sizes:null,slot:null,span:K,spellCheck:Je,src:null,srcDoc:null,srcLang:null,srcSet:null,start:K,step:null,style:null,tabIndex:K,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:Je,width:K,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:De,axis:null,background:null,bgColor:null,border:K,borderColor:null,bottomMargin:K,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:K,leftMargin:K,link:null,longDesc:null,lowSrc:null,marginHeight:K,marginWidth:K,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:K,rules:null,scheme:null,scrolling:Je,standby:null,summary:null,text:null,topMargin:K,valueType:null,version:null,vAlign:null,vLink:null,vSpace:K,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:K,security:null,unselectable:null},space:"html",transform:ax}),V1=Cs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Lt,accentHeight:K,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:K,amplitude:K,arabicForm:null,ascent:K,attributeName:null,attributeType:null,azimuth:K,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:K,by:null,calcMode:null,capHeight:K,className:De,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:K,diffuseConstant:K,direction:null,display:null,dur:null,divisor:K,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:K,enableBackground:null,end:null,event:null,exponent:K,externalResourcesRequired:null,fill:null,fillOpacity:K,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cs,g2:cs,glyphName:cs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:K,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:K,horizOriginX:K,horizOriginY:K,id:null,ideographic:K,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:K,k:K,k1:K,k2:K,k3:K,k4:K,kernelMatrix:Lt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:K,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:K,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:K,overlineThickness:K,paintOrder:null,panose1:null,path:null,pathLength:K,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:De,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:K,pointsAtY:K,pointsAtZ:K,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Lt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Lt,rev:Lt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Lt,requiredFeatures:Lt,requiredFonts:Lt,requiredFormats:Lt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:K,specularExponent:K,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:K,strikethroughThickness:K,string:null,stroke:null,strokeDashArray:Lt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:K,strokeOpacity:K,strokeWidth:null,style:null,surfaceScale:K,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Lt,tabIndex:K,tableValues:null,target:null,targetX:K,targetY:K,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Lt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:K,underlineThickness:K,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:K,values:null,vAlphabetic:K,vMathematical:K,vectorEffect:null,vHanging:K,vIdeographic:K,version:null,vertAdvY:K,vertOriginX:K,vertOriginY:K,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:K,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ix}),ox=Cs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),lx=Cs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ax}),cx=Cs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),K1={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},J1=/[A-Z]/g,yf=/-[a-z]/g,Q1=/^data[-\w.:]+$/i;function Y1(e,t){const n=Bc(t);let r=t,s=Mt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Q1.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(yf,Z1);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!yf.test(i)){let a=i.replace(J1,X1);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=rd}return new s(r,t)}function X1(e){return"-"+e.toLowerCase()}function Z1(e){return e.charAt(1).toUpperCase()}const ek=rx([sx,G1,ox,lx,cx],"html"),sd=rx([sx,V1,ox,lx,cx],"svg");function tk(e){return e.join(" ").trim()}var id={},bf=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nk=/\n/g,rk=/^\s*/,sk=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ik=/^:\s*/,ak=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ok=/^[;\s]*/,lk=/^\s+|\s+$/g,ck=`
`,vf="/",wf="*",mr="",uk="comment",dk="declaration",hk=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(p){var y=p.match(nk);y&&(n+=y.length);var C=p.lastIndexOf(ck);r=~C?p.length-C:r+p.length}function i(){var p={line:n,column:r};return function(y){return y.position=new a(p),u(),y}}function a(p){this.start=p,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(p){var y=new Error(t.source+":"+n+":"+r+": "+p);if(y.reason=p,y.filename=t.source,y.line=n,y.column=r,y.source=e,!t.silent)throw y}function c(p){var y=p.exec(e);if(y){var C=y[0];return s(C),e=e.slice(C.length),y}}function u(){c(rk)}function h(p){var y;for(p=p||[];y=d();)y!==!1&&p.push(y);return p}function d(){var p=i();if(!(vf!=e.charAt(0)||wf!=e.charAt(1))){for(var y=2;mr!=e.charAt(y)&&(wf!=e.charAt(y)||vf!=e.charAt(y+1));)++y;if(y+=2,mr===e.charAt(y-1))return l("End of comment missing");var C=e.slice(2,y-2);return r+=2,s(C),e=e.slice(y),r+=2,p({type:uk,comment:C})}}function m(){var p=i(),y=c(sk);if(y){if(d(),!c(ik))return l("property missing ':'");var C=c(ak),g=p({type:dk,property:kf(y[0].replace(bf,mr)),value:C?kf(C[0].replace(bf,mr)):mr});return c(ok),g}}function f(){var p=[];h(p);for(var y;y=m();)y!==!1&&(p.push(y),h(p));return p}return u(),f()};function kf(e){return e?e.replace(lk,mr):mr}var fk=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});id.default=pk;var mk=fk(hk);function pk(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,mk.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.camelCase=void 0;var gk=/^--[a-zA-Z0-9_-]+$/,xk=/-([a-z])/g,yk=/^[^-]+$/,bk=/^-(webkit|moz|ms|o|khtml)-/,vk=/^-(ms)-/,wk=function(e){return!e||yk.test(e)||gk.test(e)},kk=function(e,t){return t.toUpperCase()},jf=function(e,t){return"".concat(t,"-")},jk=function(e,t){return t===void 0&&(t={}),wk(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(vk,jf):e=e.replace(bk,jf),e.replace(xk,kk))};Mo.camelCase=jk;var Sk=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Nk=Sk(id),_k=Mo;function qc(e,t){var n={};return!e||typeof e!="string"||(0,Nk.default)(e,function(r,s){r&&s&&(n[(0,_k.camelCase)(r,t)]=s)}),n}qc.default=qc;var Ck=qc;const Ek=Zc(Ck),ux=dx("end"),ad=dx("start");function dx(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Tk(e){const t=ad(e),n=ux(e);if(t&&n)return{start:t,end:n}}function si(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Sf(e.position):"start"in e||"end"in e?Sf(e):"line"in e||"column"in e?Wc(e):""}function Wc(e){return Nf(e&&e.line)+":"+Nf(e&&e.column)}function Sf(e){return Wc(e&&e.start)+"-"+Wc(e&&e.end)}function Nf(e){return e&&typeof e=="number"?e:1}class xt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=si(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xt.prototype.file="";xt.prototype.name="";xt.prototype.reason="";xt.prototype.message="";xt.prototype.stack="";xt.prototype.column=void 0;xt.prototype.line=void 0;xt.prototype.ancestors=void 0;xt.prototype.cause=void 0;xt.prototype.fatal=void 0;xt.prototype.place=void 0;xt.prototype.ruleId=void 0;xt.prototype.source=void 0;const od={}.hasOwnProperty,Pk=new Map,Ik=/[A-Z]/g,Ak=new Set(["table","tbody","thead","tfoot","tr"]),Mk=new Set(["td","th"]),hx="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Lk(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Uk(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Bk(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?sd:ek,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=fx(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function fx(e,t,n){if(t.type==="element")return Ok(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Dk(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Fk(e,t,n);if(t.type==="mdxjsEsm")return Rk(e,t);if(t.type==="root")return zk(e,t,n);if(t.type==="text")return $k(e,t)}function Ok(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=sd,e.schema=s),e.ancestors.push(t);const i=px(e,t.tagName,!1),a=Hk(e,t);let l=cd(e,t);return Ak.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!q1(c):!0})),mx(e,a,i,t),ld(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function Dk(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}_i(e,t.position)}function Rk(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);_i(e,t.position)}function Fk(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=sd,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:px(e,t.name,!0),a=qk(e,t),l=cd(e,t);return mx(e,a,i,t),ld(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function zk(e,t,n){const r={};return ld(r,cd(e,t)),e.create(t,e.Fragment,r,n)}function $k(e,t){return t.value}function mx(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ld(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Bk(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function Uk(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=ad(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function Hk(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&od.call(t.properties,s)){const i=Wk(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&Mk.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function qk(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else _i(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else _i(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function cd(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:Pk;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=fx(e,i,a);l!==void 0&&n.push(l)}return n}function Wk(e,t,n){const r=Y1(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?z1(n):tk(n)),r.property==="style"){let s=typeof n=="object"?n:Gk(e,String(n));return e.stylePropertyNameCase==="css"&&(s=Vk(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?K1[r.property]||r.property:r.attribute,n]}}function Gk(e,t){try{return Ek(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new xt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=hx+"#cannot-parse-style-attribute",s}}function px(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=pf(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=pf(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return od.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);_i(e)}function _i(e,t){const n=new xt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=hx+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Vk(e){const t={};let n;for(n in e)od.call(e,n)&&(t[Kk(n)]=e[n]);return t}function Kk(e){let t=e.replace(Ik,Jk);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Jk(e){return"-"+e.toLowerCase()}const wl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Qk={};function ud(e,t){const n=Qk,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gx(e,r,s)}function gx(e,t,n){if(Yk(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _f(e.children,t,n)}return Array.isArray(e)?_f(e,t,n):""}function _f(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=gx(e[s],t,n);return r.join("")}function Yk(e){return!!(e&&typeof e=="object")}const Cf=document.createElement("i");function dd(e){const t="&"+e+";";Cf.innerHTML=t;const n=Cf.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ft(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function Wt(e,t){return e.length>0?(Ft(e,e.length,0,t),e):t}const Ef={}.hasOwnProperty;function xx(e){const t={};let n=-1;for(;++n<e.length;)Xk(t,e[n]);return t}function Xk(e,t){let n;for(n in t){const s=(Ef.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){Ef.call(s,a)||(s[a]=[]);const l=i[a];Zk(s[a],Array.isArray(l)?l:l?[l]:[])}}}function Zk(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ft(e,0,0,r)}function yx(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function on(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vt=ar(/[A-Za-z]/),ht=ar(/[\dA-Za-z]/),ej=ar(/[#-'*+\--9=?A-Z^-~]/);function so(e){return e!==null&&(e<32||e===127)}const Gc=ar(/\d/),tj=ar(/[\dA-Fa-f]/),nj=ar(/[!-/:-@[-`{-~]/);function he(e){return e!==null&&e<-2}function Le(e){return e!==null&&(e<0||e===32)}function ke(e){return e===-2||e===-1||e===32}const Lo=ar(new RegExp("\\p{P}|\\p{S}","u")),Er=ar(/\s/);function ar(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Es(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&ht(e.charCodeAt(n+1))&&ht(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Te(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return ke(c)?(e.enter(n),l(c)):t(c)}function l(c){return ke(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const rj={tokenize:sj};function sj(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Te(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return he(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const ij={tokenize:aj},Tf={tokenize:oj};function aj(e){const t=this,n=[];let r=0,s,i,a;return l;function l(x){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,c,u)(x)}return u(x)}function c(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const _=t.events.length;let S=_,w;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){w=t.events[S][1].end;break}g(r);let E=_;for(;E<t.events.length;)t.events[E][1].end={...w},E++;return Ft(t.events,S+1,0,t.events.slice(_)),t.events.length=E,u(x)}return l(x)}function u(x){if(r===n.length){if(!s)return m(x);if(s.currentConstruct&&s.currentConstruct.concrete)return p(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Tf,h,d)(x)}function h(x){return s&&v(),g(r),m(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,p(x)}function m(x){return t.containerState={},e.attempt(Tf,f,p)(x)}function f(x){return r++,n.push([t.currentConstruct,t.containerState]),m(x)}function p(x){if(x===null){s&&v(),g(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),y(x)}function y(x){if(x===null){C(e.exit("chunkFlow"),!0),g(0),e.consume(x);return}return he(x)?(e.consume(x),C(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(x),y)}function C(x,_){const S=t.sliceStream(x);if(_&&S.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(S),t.parser.lazy[x.start.line]){let w=s.events.length;for(;w--;)if(s.events[w][1].start.offset<a&&(!s.events[w][1].end||s.events[w][1].end.offset>a))return;const E=t.events.length;let I=E,P,b;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(P){b=t.events[I][1].end;break}P=!0}for(g(r),w=E;w<t.events.length;)t.events[w][1].end={...b},w++;Ft(t.events,I+1,0,t.events.slice(E)),t.events.length=w}}function g(x){let _=n.length;for(;_-- >x;){const S=n[_];t.containerState=S[1],S[0].exit.call(t,e)}n.length=x}function v(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function oj(e,t,n){return Te(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bs(e){if(e===null||Le(e)||Er(e))return 1;if(Lo(e))return 2}function Oo(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Vc={name:"attention",resolveAll:lj,tokenize:cj};function lj(e,t){let n=-1,r,s,i,a,l,c,u,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},m={...e[n][1].start};Pf(d,-c),Pf(m,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Wt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Wt(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=Wt(u,Oo(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Wt(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,u=Wt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Ft(e,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cj(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=bs(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),h=bs(c),d=!h||h===2&&s||n.includes(c),m=!s||s===2&&h||n.includes(r);return u._open=!!(i===42?d:d&&(s||!m)),u._close=!!(i===42?m:m&&(h||!d)),t(c)}}function Pf(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const uj={name:"autolink",tokenize:dj};function dj(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return vt(f)?(e.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||ht(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||ht(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||so(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),h):ej(f)?(e.consume(f),u):n(f)}function h(f){return ht(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,h):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||ht(f))&&r++<63){const p=f===45?m:d;return e.consume(f),p}return n(f)}}const Bi={partial:!0,tokenize:hj};function hj(e,t,n){return r;function r(i){return ke(i)?Te(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||he(i)?t(i):n(i)}}const bx={continuation:{tokenize:mj},exit:pj,name:"blockQuote",tokenize:fj};function fj(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return ke(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function mj(e,t,n){const r=this;return s;function s(a){return ke(a)?Te(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(bx,t,n)(a)}}function pj(e){e.exit("blockQuote")}const vx={name:"characterEscape",tokenize:gj};function gj(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return nj(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const wx={name:"characterReference",tokenize:xj};function xj(e,t,n){const r=this;let s=0,i,a;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=ht,h(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=tj,h):(e.enter("characterReferenceValue"),i=7,a=Gc,h(d))}function h(d){if(d===59&&s){const m=e.exit("characterReferenceValue");return a===ht&&!dd(r.sliceSerialize(m))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&s++<i?(e.consume(d),h):n(d)}}const If={partial:!0,tokenize:bj},Af={concrete:!0,name:"codeFenced",tokenize:yj};function yj(e,t,n){const r=this,s={partial:!0,tokenize:S};let i=0,a=0,l;return c;function c(w){return u(w)}function u(w){const E=r.events[r.events.length-1];return i=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(w)}function h(w){return w===l?(a++,e.consume(w),h):a<3?n(w):(e.exit("codeFencedFenceSequence"),ke(w)?Te(e,d,"whitespace")(w):d(w))}function d(w){return w===null||he(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(If,y,_)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||he(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):ke(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Te(e,f,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),m)}function f(w){return w===null||he(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||he(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===l?n(w):(e.consume(w),p)}function y(w){return e.attempt(s,_,C)(w)}function C(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),g}function g(w){return i>0&&ke(w)?Te(e,v,"linePrefix",i+1)(w):v(w)}function v(w){return w===null||he(w)?e.check(If,y,_)(w):(e.enter("codeFlowValue"),x(w))}function x(w){return w===null||he(w)?(e.exit("codeFlowValue"),v(w)):(e.consume(w),x)}function _(w){return e.exit("codeFenced"),t(w)}function S(w,E,I){let P=0;return b;function b(q){return w.enter("lineEnding"),w.consume(q),w.exit("lineEnding"),T}function T(q){return w.enter("codeFencedFence"),ke(q)?Te(w,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):M(q)}function M(q){return q===l?(w.enter("codeFencedFenceSequence"),O(q)):I(q)}function O(q){return q===l?(P++,w.consume(q),O):P>=a?(w.exit("codeFencedFenceSequence"),ke(q)?Te(w,W,"whitespace")(q):W(q)):I(q)}function W(q){return q===null||he(q)?(w.exit("codeFencedFence"),E(q)):I(q)}}}function bj(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const kl={name:"codeIndented",tokenize:wj},vj={partial:!0,tokenize:kj};function wj(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Te(e,i,"linePrefix",5)(u)}function i(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):he(u)?e.attempt(vj,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||he(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function kj(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):Te(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):he(a)?s(a):n(a)}}const jj={name:"codeText",previous:Nj,resolve:Sj,tokenize:_j};function Sj(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function Nj(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _j(e,t,n){let r=0,s,i;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(i=e.enter("codeTextSequence"),s=0,h(d)):he(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||he(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function h(d){return d===96?(e.consume(d),s++,h):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",u(d))}}class Cj{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&zs(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),zs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),zs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);zs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);zs(this.left,n.reverse())}}}function zs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function kx(e){const t={};let n=-1,r,s,i,a,l,c,u;const h=new Cj(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Ej(h,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=h.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(h.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...h.get(s)[1].start},l=h.slice(s,n),l.unshift(r),h.splice(s,n-s+1,l))}}return Ft(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function Ej(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let h,d,m=-1,f=n,p=0,y=0;const C=[y];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(h=r.sliceStream(f),f.next||h.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(y=m+1,C.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):C.pop(),m=C.length;m--;){const g=l.slice(C[m],C[m+1]),v=i.pop();c.push([v,v+g.length-1]),e.splice(v,2,g)}for(c.reverse(),m=-1;++m<c.length;)u[p+c[m][0]]=p+c[m][1],p+=c[m][1]-c[m][0]-1;return u}const Tj={resolve:Ij,tokenize:Aj},Pj={partial:!0,tokenize:Mj};function Ij(e){return kx(e),e}function Aj(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):he(l)?e.check(Pj,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Mj(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Te(e,i,"linePrefix")}function i(a){if(a===null||he(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function jx(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let h=0;return d;function d(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),m):g===null||g===32||g===41||so(g)?n(g):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(g))}function m(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(l),m(g)):g===null||g===60||he(g)?n(g):(e.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function y(g){return!h&&(g===null||g===41||Le(g))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(g)):h<u&&g===40?(e.consume(g),h++,y):g===41?(e.consume(g),h--,y):g===null||g===32||g===40||so(g)?n(g):(e.consume(g),g===92?C:y)}function C(g){return g===40||g===41||g===92?(e.consume(g),y):y(g)}}function Sx(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),h}function h(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):he(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||he(f)||l++>999?(e.exit("chunkString"),h(f)):(e.consume(f),c||(c=!ke(f)),f===92?m:d)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,d):d(f)}}function Nx(e,t,n,r,s,i){let a;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),a=m===40?41:m,c):n(m)}function c(m){return m===a?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(i),u(m))}function u(m){return m===a?(e.exit(i),c(a)):m===null?n(m):he(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Te(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===a||m===null||he(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?d:h)}function d(m){return m===a||m===92?(e.consume(m),h):h(m)}}function ii(e,t){let n;return r;function r(s){return he(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):ke(s)?Te(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const Lj={name:"definition",tokenize:Dj},Oj={partial:!0,tokenize:Rj};function Dj(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),a(f)}function a(f){return Sx.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=on(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Le(f)?ii(e,u)(f):u(f)}function u(f){return jx(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function h(f){return e.attempt(Oj,d,d)(f)}function d(f){return ke(f)?Te(e,m,"whitespace")(f):m(f)}function m(f){return f===null||he(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function Rj(e,t,n){return r;function r(l){return Le(l)?ii(e,s)(l):n(l)}function s(l){return Nx(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return ke(l)?Te(e,a,"whitespace")(l):a(l)}function a(l){return l===null||he(l)?t(l):n(l)}}const Fj={name:"hardBreakEscape",tokenize:zj};function zj(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return he(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const $j={name:"headingAtx",resolve:Bj,tokenize:Uj};function Bj(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ft(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function Uj(e,t,n){let r=0;return s;function s(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&r++<6?(e.consume(h),a):h===null||Le(h)?(e.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||he(h)?(e.exit("atxHeading"),t(h)):ke(h)?Te(e,l,"whitespace")(h):(e.enter("atxHeadingText"),u(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),l(h))}function u(h){return h===null||h===35||Le(h)?(e.exit("atxHeadingText"),l(h)):(e.consume(h),u)}}const Hj=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Mf=["pre","script","style","textarea"],qj={concrete:!0,name:"htmlFlow",resolveTo:Vj,tokenize:Kj},Wj={partial:!0,tokenize:Qj},Gj={partial:!0,tokenize:Jj};function Vj(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Kj(e,t,n){const r=this;let s,i,a,l,c;return u;function u(j){return h(j)}function h(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),d}function d(j){return j===33?(e.consume(j),m):j===47?(e.consume(j),i=!0,y):j===63?(e.consume(j),s=3,r.interrupt?t:k):vt(j)?(e.consume(j),a=String.fromCharCode(j),C):n(j)}function m(j){return j===45?(e.consume(j),s=2,f):j===91?(e.consume(j),s=5,l=0,p):vt(j)?(e.consume(j),s=4,r.interrupt?t:k):n(j)}function f(j){return j===45?(e.consume(j),r.interrupt?t:k):n(j)}function p(j){const U="CDATA[";return j===U.charCodeAt(l++)?(e.consume(j),l===U.length?r.interrupt?t:M:p):n(j)}function y(j){return vt(j)?(e.consume(j),a=String.fromCharCode(j),C):n(j)}function C(j){if(j===null||j===47||j===62||Le(j)){const U=j===47,ae=a.toLowerCase();return!U&&!i&&Mf.includes(ae)?(s=1,r.interrupt?t(j):M(j)):Hj.includes(a.toLowerCase())?(s=6,U?(e.consume(j),g):r.interrupt?t(j):M(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):i?v(j):x(j))}return j===45||ht(j)?(e.consume(j),a+=String.fromCharCode(j),C):n(j)}function g(j){return j===62?(e.consume(j),r.interrupt?t:M):n(j)}function v(j){return ke(j)?(e.consume(j),v):b(j)}function x(j){return j===47?(e.consume(j),b):j===58||j===95||vt(j)?(e.consume(j),_):ke(j)?(e.consume(j),x):b(j)}function _(j){return j===45||j===46||j===58||j===95||ht(j)?(e.consume(j),_):S(j)}function S(j){return j===61?(e.consume(j),w):ke(j)?(e.consume(j),S):x(j)}function w(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),c=j,E):ke(j)?(e.consume(j),w):I(j)}function E(j){return j===c?(e.consume(j),c=null,P):j===null||he(j)?n(j):(e.consume(j),E)}function I(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Le(j)?S(j):(e.consume(j),I)}function P(j){return j===47||j===62||ke(j)?x(j):n(j)}function b(j){return j===62?(e.consume(j),T):n(j)}function T(j){return j===null||he(j)?M(j):ke(j)?(e.consume(j),T):n(j)}function M(j){return j===45&&s===2?(e.consume(j),te):j===60&&s===1?(e.consume(j),ee):j===62&&s===4?(e.consume(j),H):j===63&&s===3?(e.consume(j),k):j===93&&s===5?(e.consume(j),Y):he(j)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(Wj,ne,O)(j)):j===null||he(j)?(e.exit("htmlFlowData"),O(j)):(e.consume(j),M)}function O(j){return e.check(Gj,W,ne)(j)}function W(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),q}function q(j){return j===null||he(j)?O(j):(e.enter("htmlFlowData"),M(j))}function te(j){return j===45?(e.consume(j),k):M(j)}function ee(j){return j===47?(e.consume(j),a="",B):M(j)}function B(j){if(j===62){const U=a.toLowerCase();return Mf.includes(U)?(e.consume(j),H):M(j)}return vt(j)&&a.length<8?(e.consume(j),a+=String.fromCharCode(j),B):M(j)}function Y(j){return j===93?(e.consume(j),k):M(j)}function k(j){return j===62?(e.consume(j),H):j===45&&s===2?(e.consume(j),k):M(j)}function H(j){return j===null||he(j)?(e.exit("htmlFlowData"),ne(j)):(e.consume(j),H)}function ne(j){return e.exit("htmlFlow"),t(j)}}function Jj(e,t,n){const r=this;return s;function s(a){return he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function Qj(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Bi,t,n)}}const Yj={name:"htmlText",tokenize:Xj};function Xj(e,t,n){const r=this;let s,i,a;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),S):k===63?(e.consume(k),x):vt(k)?(e.consume(k),I):n(k)}function u(k){return k===45?(e.consume(k),h):k===91?(e.consume(k),i=0,p):vt(k)?(e.consume(k),v):n(k)}function h(k){return k===45?(e.consume(k),f):n(k)}function d(k){return k===null?n(k):k===45?(e.consume(k),m):he(k)?(a=d,ee(k)):(e.consume(k),d)}function m(k){return k===45?(e.consume(k),f):d(k)}function f(k){return k===62?te(k):k===45?m(k):d(k)}function p(k){const H="CDATA[";return k===H.charCodeAt(i++)?(e.consume(k),i===H.length?y:p):n(k)}function y(k){return k===null?n(k):k===93?(e.consume(k),C):he(k)?(a=y,ee(k)):(e.consume(k),y)}function C(k){return k===93?(e.consume(k),g):y(k)}function g(k){return k===62?te(k):k===93?(e.consume(k),g):y(k)}function v(k){return k===null||k===62?te(k):he(k)?(a=v,ee(k)):(e.consume(k),v)}function x(k){return k===null?n(k):k===63?(e.consume(k),_):he(k)?(a=x,ee(k)):(e.consume(k),x)}function _(k){return k===62?te(k):x(k)}function S(k){return vt(k)?(e.consume(k),w):n(k)}function w(k){return k===45||ht(k)?(e.consume(k),w):E(k)}function E(k){return he(k)?(a=E,ee(k)):ke(k)?(e.consume(k),E):te(k)}function I(k){return k===45||ht(k)?(e.consume(k),I):k===47||k===62||Le(k)?P(k):n(k)}function P(k){return k===47?(e.consume(k),te):k===58||k===95||vt(k)?(e.consume(k),b):he(k)?(a=P,ee(k)):ke(k)?(e.consume(k),P):te(k)}function b(k){return k===45||k===46||k===58||k===95||ht(k)?(e.consume(k),b):T(k)}function T(k){return k===61?(e.consume(k),M):he(k)?(a=T,ee(k)):ke(k)?(e.consume(k),T):P(k)}function M(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,O):he(k)?(a=M,ee(k)):ke(k)?(e.consume(k),M):(e.consume(k),W)}function O(k){return k===s?(e.consume(k),s=void 0,q):k===null?n(k):he(k)?(a=O,ee(k)):(e.consume(k),O)}function W(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||Le(k)?P(k):(e.consume(k),W)}function q(k){return k===47||k===62||Le(k)?P(k):n(k)}function te(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function ee(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),B}function B(k){return ke(k)?Te(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):Y(k)}function Y(k){return e.enter("htmlTextData"),a(k)}}const hd={name:"labelEnd",resolveAll:n2,resolveTo:r2,tokenize:s2},Zj={tokenize:i2},e2={tokenize:a2},t2={tokenize:o2};function n2(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Ft(e,0,e.length,n),e}function r2(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Wt(l,e.slice(i+1,i+r+3)),l=Wt(l,[["enter",h,t]]),l=Wt(l,Oo(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=Wt(l,[["exit",h,t],e[a-2],e[a-1],["exit",u,t]]),l=Wt(l,e.slice(a+1)),l=Wt(l,[["exit",c,t]]),Ft(e,i,e.length,l),e}function s2(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(m){return i?i._inactive?d(m):(a=r.parser.defined.includes(on(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(Zj,h,a?h:d)(m):m===91?e.attempt(e2,h,a?u:d)(m):a?h(m):d(m)}function u(m){return e.attempt(t2,h,d)(m)}function h(m){return t(m)}function d(m){return i._balanced=!0,n(m)}}function i2(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),s}function s(d){return Le(d)?ii(e,i)(d):i(d)}function i(d){return d===41?h(d):jx(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return Le(d)?ii(e,c)(d):h(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?Nx(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):h(d)}function u(d){return Le(d)?ii(e,h)(d):h(d)}function h(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function a2(e,t,n){const r=this;return s;function s(l){return Sx.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(on(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function o2(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const l2={name:"labelStartImage",resolveAll:hd.resolveAll,tokenize:c2};function c2(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const u2={name:"labelStartLink",resolveAll:hd.resolveAll,tokenize:d2};function d2(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const jl={name:"lineEnding",tokenize:h2};function h2(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Te(e,t,"linePrefix")}}const Ea={name:"thematicBreak",tokenize:f2};function f2(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||he(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),ke(u)?Te(e,l,"whitespace")(u):l(u))}}const Nt={continuation:{tokenize:x2},exit:b2,name:"list",tokenize:g2},m2={partial:!0,tokenize:v2},p2={partial:!0,tokenize:y2};function g2(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Gc(f)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Ea,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Gc(f)&&++a<10?(e.consume(f),c):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Bi,r.interrupt?n:h,e.attempt(m2,m,d))}function h(f){return r.containerState.initialBlankLine=!0,i++,m(f)}function d(f){return ke(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function x2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Bi,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Te(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!ke(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(p2,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Te(e,e.attempt(Nt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function y2(e,t,n){const r=this;return Te(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function b2(e){e.exit(this.containerState.type)}function v2(e,t,n){const r=this;return Te(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!ke(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Lf={name:"setextUnderline",resolveTo:w2,tokenize:k2};function w2(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function k2(e,t,n){const r=this;let s;return i;function i(u){let h=r.events.length,d;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){d=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),ke(u)?Te(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||he(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const j2={tokenize:S2};function S2(e){const t=this,n=e.attempt(Bi,r,e.attempt(this.parser.constructs.flowInitial,s,Te(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Tj,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const N2={resolveAll:Cx()},_2=_x("string"),C2=_x("text");function _x(e){return{resolveAll:Cx(e==="text"?E2:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(h){return u(h)?i(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return u(h)?(n.exit("data"),i(h)):(n.consume(h),c)}function u(h){if(h===null)return!0;const d=s[h];let m=-1;if(d)for(;++m<d.length;){const f=d[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Cx(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function E2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const T2={42:Nt,43:Nt,45:Nt,48:Nt,49:Nt,50:Nt,51:Nt,52:Nt,53:Nt,54:Nt,55:Nt,56:Nt,57:Nt,62:bx},P2={91:Lj},I2={[-2]:kl,[-1]:kl,32:kl},A2={35:$j,42:Ea,45:[Lf,Ea],60:qj,61:Lf,95:Ea,96:Af,126:Af},M2={38:wx,92:vx},L2={[-5]:jl,[-4]:jl,[-3]:jl,33:l2,38:wx,42:Vc,60:[uj,Yj],91:u2,92:[Fj,vx],93:hd,95:Vc,96:jj},O2={null:[Vc,N2]},D2={null:[42,95]},R2={null:[]},F2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:D2,contentInitial:P2,disable:R2,document:T2,flow:A2,flowInitial:I2,insideSpan:O2,string:M2,text:L2},Symbol.toStringTag,{value:"Module"}));function z2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:E(S),check:E(w),consume:v,enter:x,exit:_,interrupt:E(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:p,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:d};let h=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function d(T){return a=Wt(a,T),C(),a[a.length-1]!==null?[]:(I(t,0),u.events=Oo(i,u.events,u),u.events)}function m(T,M){return B2(f(T),M)}function f(T){return $2(a,T)}function p(){const{_bufferIndex:T,_index:M,line:O,column:W,offset:q}=r;return{_bufferIndex:T,_index:M,line:O,column:W,offset:q}}function y(T){s[T.line]=T.column,b()}function C(){let T;for(;r._index<a.length;){const M=a[r._index];if(typeof M=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<M.length;)g(M.charCodeAt(r._bufferIndex));else g(M)}}function g(T){h=h(T)}function v(T){he(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,b()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=T}function x(T,M){const O=M||{};return O.type=T,O.start=p(),u.events.push(["enter",O,u]),l.push(O),O}function _(T){const M=l.pop();return M.end=p(),u.events.push(["exit",M,u]),M}function S(T,M){I(T,M.from)}function w(T,M){M.restore()}function E(T,M){return O;function O(W,q,te){let ee,B,Y,k;return Array.isArray(W)?ne(W):"tokenize"in W?ne([W]):H(W);function H(R){return $;function $(me){const de=me!==null&&R[me],J=me!==null&&R.null,fe=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(J)?J:J?[J]:[]];return ne(fe)(me)}}function ne(R){return ee=R,B=0,R.length===0?te:j(R[B])}function j(R){return $;function $(me){return k=P(),Y=R,R.partial||(u.currentConstruct=R),R.name&&u.parser.constructs.disable.null.includes(R.name)?ae():R.tokenize.call(M?Object.assign(Object.create(u),M):u,c,U,ae)(me)}}function U(R){return T(Y,k),q}function ae(R){return k.restore(),++B<ee.length?j(ee[B]):te}}}function I(T,M){T.resolveAll&&!i.includes(T)&&i.push(T),T.resolve&&Ft(u.events,M,u.events.length-M,T.resolve(u.events.slice(M),u)),T.resolveTo&&(u.events=T.resolveTo(u.events,u))}function P(){const T=p(),M=u.previous,O=u.currentConstruct,W=u.events.length,q=Array.from(l);return{from:W,restore:te};function te(){r=T,u.previous=M,u.currentConstruct=O,u.events.length=W,l=q,b()}}function b(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function $2(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function B2(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function U2(e){const r={constructs:xx([F2,...(e||{}).extensions||[]]),content:s(rj),defined:[],document:s(ij),flow:s(j2),lazy:{},string:s(_2),text:s(C2)};return r;function s(i){return a;function a(l){return z2(r,i,l)}}}function H2(e){for(;!kx(e););return e}const Of=/[\0\t\n\r]/g;function q2(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,h,d,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(Of.lastIndex=d,u=Of.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(d);break}if(f===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(i.slice(d,m)),e+=m-d),f){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const W2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function G2(e){return e.replace(W2,V2)}function V2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return yx(n.slice(i?2:1),i?16:10)}return dd(n)||e}const Ex={}.hasOwnProperty;function K2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),J2(n)(H2(U2(n).document().write(q2()(e,t,!0))))}function J2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ve),autolinkProtocol:P,autolinkEmail:P,atxHeading:i(re),blockQuote:i(J),characterEscape:P,characterReference:P,codeFenced:i(fe),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(fe,a),codeText:i(X,a),codeTextData:P,data:P,codeFlowValue:P,definition:i(z),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(F),hardBreakEscape:i(be),hardBreakTrailing:i(be),htmlFlow:i(Q,a),htmlFlowData:P,htmlText:i(Q,a),htmlTextData:P,image:i(le),label:a,link:i(ve),listItem:i(Ne),listItemValue:m,listOrdered:i(Ae,d),listUnordered:i(Ae),paragraph:i(_e),reference:j,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(re),strong:i(Z),thematicBreak:i(Se)},exit:{atxHeading:c(),atxHeadingSequence:S,autolink:c(),autolinkEmail:de,autolinkProtocol:me,blockQuote:c(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:R,characterReference:$,codeFenced:c(C),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:b,codeIndented:c(g),codeText:c(q),codeTextData:b,data:b,definition:c(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(M),hardBreakTrailing:c(M),htmlFlow:c(O),htmlFlowData:b,htmlText:c(W),htmlTextData:b,image:c(ee),label:Y,labelText:B,lineEnding:T,link:c(te),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:U,resourceDestinationString:k,resourceTitleString:H,resource:ne,setextHeading:c(I),setextHeadingLineSequence:E,setextHeadingText:w,strong:c(),thematicBreak:c()}};Tx(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(A){let D={type:"root",children:[]};const se={stack:[D],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:h,data:n},ce=[];let pe=-1;for(;++pe<A.length;)if(A[pe][1].type==="listOrdered"||A[pe][1].type==="listUnordered")if(A[pe][0]==="enter")ce.push(pe);else{const Ge=ce.pop();pe=s(A,Ge,pe)}for(pe=-1;++pe<A.length;){const Ge=t[A[pe][0]];Ex.call(Ge,A[pe][1].type)&&Ge[A[pe][1].type].call(Object.assign({sliceSerialize:A[pe][2].sliceSerialize},se),A[pe][1])}if(se.tokenStack.length>0){const Ge=se.tokenStack[se.tokenStack.length-1];(Ge[1]||Df).call(se,void 0,Ge[0])}for(D.position={start:Rn(A.length>0?A[0][1].start:{line:1,column:1,offset:0}),end:Rn(A.length>0?A[A.length-2][1].end:{line:1,column:1,offset:0})},pe=-1;++pe<t.transforms.length;)D=t.transforms[pe](D)||D;return D}function s(A,D,se){let ce=D-1,pe=-1,Ge=!1,st,Me,Ye,L;for(;++ce<=se;){const ue=A[ce];switch(ue[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ue[0]==="enter"?pe++:pe--,L=void 0;break}case"lineEndingBlank":{ue[0]==="enter"&&(st&&!L&&!pe&&!Ye&&(Ye=ce),L=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:L=void 0}if(!pe&&ue[0]==="enter"&&ue[1].type==="listItemPrefix"||pe===-1&&ue[0]==="exit"&&(ue[1].type==="listUnordered"||ue[1].type==="listOrdered")){if(st){let Ve=ce;for(Me=void 0;Ve--;){const $e=A[Ve];if($e[1].type==="lineEnding"||$e[1].type==="lineEndingBlank"){if($e[0]==="exit")continue;Me&&(A[Me][1].type="lineEndingBlank",Ge=!0),$e[1].type="lineEnding",Me=Ve}else if(!($e[1].type==="linePrefix"||$e[1].type==="blockQuotePrefix"||$e[1].type==="blockQuotePrefixWhitespace"||$e[1].type==="blockQuoteMarker"||$e[1].type==="listItemIndent"))break}Ye&&(!Me||Ye<Me)&&(st._spread=!0),st.end=Object.assign({},Me?A[Me][1].start:ue[1].end),A.splice(Me||ce,0,["exit",st,ue[2]]),ce++,se++}if(ue[1].type==="listItemPrefix"){const Ve={type:"listItem",_spread:!1,start:Object.assign({},ue[1].start),end:void 0};st=Ve,A.splice(ce,0,["enter",Ve,ue[2]]),ce++,se++,Ye=void 0,L=!0}}}return A[D][1]._spread=Ge,se}function i(A,D){return se;function se(ce){l.call(this,A(ce),ce),D&&D.call(this,ce)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(A,D,se){this.stack[this.stack.length-1].children.push(A),this.stack.push(A),this.tokenStack.push([D,se||void 0]),A.position={start:Rn(D.start),end:void 0}}function c(A){return D;function D(se){A&&A.call(this,se),u.call(this,se)}}function u(A,D){const se=this.stack.pop(),ce=this.tokenStack.pop();if(ce)ce[0].type!==A.type&&(D?D.call(this,A,ce[0]):(ce[1]||Df).call(this,A,ce[0]));else throw new Error("Cannot close `"+A.type+"` ("+si({start:A.start,end:A.end})+"): its not open");se.position.end=Rn(A.end)}function h(){return ud(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(A){if(this.data.expectingFirstListItemValue){const D=this.stack[this.stack.length-2];D.start=Number.parseInt(this.sliceSerialize(A),10),this.data.expectingFirstListItemValue=void 0}}function f(){const A=this.resume(),D=this.stack[this.stack.length-1];D.lang=A}function p(){const A=this.resume(),D=this.stack[this.stack.length-1];D.meta=A}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A.replace(/(\r?\n|\r)$/g,"")}function v(A){const D=this.resume(),se=this.stack[this.stack.length-1];se.label=D,se.identifier=on(this.sliceSerialize(A)).toLowerCase()}function x(){const A=this.resume(),D=this.stack[this.stack.length-1];D.title=A}function _(){const A=this.resume(),D=this.stack[this.stack.length-1];D.url=A}function S(A){const D=this.stack[this.stack.length-1];if(!D.depth){const se=this.sliceSerialize(A).length;D.depth=se}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function E(A){const D=this.stack[this.stack.length-1];D.depth=this.sliceSerialize(A).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function P(A){const se=this.stack[this.stack.length-1].children;let ce=se[se.length-1];(!ce||ce.type!=="text")&&(ce=oe(),ce.position={start:Rn(A.start),end:void 0},se.push(ce)),this.stack.push(ce)}function b(A){const D=this.stack.pop();D.value+=this.sliceSerialize(A),D.position.end=Rn(A.end)}function T(A){const D=this.stack[this.stack.length-1];if(this.data.atHardBreak){const se=D.children[D.children.length-1];se.position.end=Rn(A.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(D.type)&&(P.call(this,A),b.call(this,A))}function M(){this.data.atHardBreak=!0}function O(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function W(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function q(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function te(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const D=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=D,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function ee(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const D=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=D,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function B(A){const D=this.sliceSerialize(A),se=this.stack[this.stack.length-2];se.label=G2(D),se.identifier=on(D).toLowerCase()}function Y(){const A=this.stack[this.stack.length-1],D=this.resume(),se=this.stack[this.stack.length-1];if(this.data.inReference=!0,se.type==="link"){const ce=A.children;se.children=ce}else se.alt=D}function k(){const A=this.resume(),D=this.stack[this.stack.length-1];D.url=A}function H(){const A=this.resume(),D=this.stack[this.stack.length-1];D.title=A}function ne(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function U(A){const D=this.resume(),se=this.stack[this.stack.length-1];se.label=D,se.identifier=on(this.sliceSerialize(A)).toLowerCase(),this.data.referenceType="full"}function ae(A){this.data.characterReferenceType=A.type}function R(A){const D=this.sliceSerialize(A),se=this.data.characterReferenceType;let ce;se?(ce=yx(D,se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ce=dd(D);const pe=this.stack[this.stack.length-1];pe.value+=ce}function $(A){const D=this.stack.pop();D.position.end=Rn(A.end)}function me(A){b.call(this,A);const D=this.stack[this.stack.length-1];D.url=this.sliceSerialize(A)}function de(A){b.call(this,A);const D=this.stack[this.stack.length-1];D.url="mailto:"+this.sliceSerialize(A)}function J(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function F(){return{type:"emphasis",children:[]}}function re(){return{type:"heading",depth:0,children:[]}}function be(){return{type:"break"}}function Q(){return{type:"html",value:""}}function le(){return{type:"image",title:null,url:"",alt:null}}function ve(){return{type:"link",title:null,url:"",children:[]}}function Ae(A){return{type:"list",ordered:A.type==="listOrdered",start:null,spread:A._spread,children:[]}}function Ne(A){return{type:"listItem",spread:A._spread,checked:null,children:[]}}function _e(){return{type:"paragraph",children:[]}}function Z(){return{type:"strong",children:[]}}function oe(){return{type:"text",value:""}}function Se(){return{type:"thematicBreak"}}}function Rn(e){return{line:e.line,column:e.column,offset:e.offset}}function Tx(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Tx(e,r):Q2(e,r)}}function Q2(e,t){let n;for(n in t)if(Ex.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Df(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+si({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+si({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+si({start:t.start,end:t.end})+") is still open")}function Y2(e){const t=this;t.parser=n;function n(r){return K2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function X2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Z2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function eS(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function tS(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nS(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rS(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Es(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function sS(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iS(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Px(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function aS(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Px(e,t);const s={src:Es(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function oS(e,t){const n={src:Es(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function lS(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function cS(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Px(e,t);const s={href:Es(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function uS(e,t){const n={href:Es(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function dS(e,t,n){const r=e.all(t),s=n?hS(n):Ix(t),i={},a=[];if(typeof t.checked=="boolean"){const h=r[0];let d;h&&h.type==="element"&&h.tagName==="p"?d=h:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const h=r[l];(s||l!==0||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!s?a.push(...h.children):a.push(h)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function hS(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ix(n[r])}return t}function Ix(e){const t=e.spread;return t??e.children.length>1}function fS(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function mS(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pS(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function gS(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xS(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=ad(t.children[1]),c=ux(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function yS(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],m={},f=a?a[c]:void 0;f&&(m.align=f);let p={type:"element",tagName:i,properties:m,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,h),e.applyData(t,h)}function bS(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Rf=9,Ff=32;function vS(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(zf(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(zf(t.slice(s),s>0,!1)),i.join("")}function zf(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===Rf||i===Ff;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===Rf||i===Ff;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function wS(e,t){const n={type:"text",value:vS(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function kS(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const jS={blockquote:X2,break:Z2,code:eS,delete:tS,emphasis:nS,footnoteReference:rS,heading:sS,html:iS,imageReference:aS,image:oS,inlineCode:lS,linkReference:cS,link:uS,listItem:dS,list:fS,paragraph:mS,root:pS,strong:gS,table:xS,tableCell:bS,tableRow:yS,text:wS,thematicBreak:kS,toml:ha,yaml:ha,definition:ha,footnoteDefinition:ha};function ha(){}const Ax=-1,Do=0,ai=1,io=2,fd=3,md=4,pd=5,gd=6,Mx=7,Lx=8,$f=typeof self=="object"?self:globalThis,SS=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Do:case Ax:return n(a,s);case ai:{const l=n([],s);for(const c of a)l.push(r(c));return l}case io:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case fd:return n(new Date(a),s);case md:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case pd:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case gd:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case Mx:{const{name:l,message:c}=a;return n(new $f[l](c),s)}case Lx:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new $f[i](a),s)};return r},Bf=e=>SS(new Map,e)(0),Br="",{toString:NS}={},{keys:_S}=Object,$s=e=>{const t=typeof e;if(t!=="object"||!e)return[Do,t];const n=NS.call(e).slice(8,-1);switch(n){case"Array":return[ai,Br];case"Object":return[io,Br];case"Date":return[fd,Br];case"RegExp":return[md,Br];case"Map":return[pd,Br];case"Set":return[gd,Br];case"DataView":return[ai,n]}return n.includes("Array")?[ai,n]:n.includes("Error")?[Mx,n]:[io,n]},fa=([e,t])=>e===Do&&(t==="function"||t==="symbol"),CS=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=$s(a);switch(l){case Do:{let h=a;switch(c){case"bigint":l=Lx,h=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return s([Ax],a)}return s([l,h],a)}case ai:{if(c){let m=a;return c==="DataView"?m=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(a)),s([c,[...m]],a)}const h=[],d=s([l,h],a);for(const m of a)h.push(i(m));return d}case io:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const h=[],d=s([l,h],a);for(const m of _S(a))(e||!fa($s(a[m])))&&h.push([i(m),i(a[m])]);return d}case fd:return s([l,a.toISOString()],a);case md:{const{source:h,flags:d}=a;return s([l,{source:h,flags:d}],a)}case pd:{const h=[],d=s([l,h],a);for(const[m,f]of a)(e||!(fa($s(m))||fa($s(f))))&&h.push([i(m),i(f)]);return d}case gd:{const h=[],d=s([l,h],a);for(const m of a)(e||!fa($s(m)))&&h.push(i(m));return d}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},Uf=(e,{json:t,lossy:n}={})=>{const r=[];return CS(!(t||n),!!t,new Map,r)(e),r},ao=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Bf(Uf(e,t)):structuredClone(e):(e,t)=>Bf(Uf(e,t));function ES(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function TS(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function PS(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ES,r=e.options.footnoteBackLabel||TS,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const h=e.all(u),d=String(u.identifier).toUpperCase(),m=Es(d.toLowerCase());let f=0;const p=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++f<=y;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const C=h[h.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const v=C.children[C.children.length-1];v&&v.type==="text"?v.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...p)}else h.push(...p);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(u,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ao(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Ro=function(e){if(e==null)return LS;if(typeof e=="function")return Fo(e);if(typeof e=="object")return Array.isArray(e)?IS(e):AS(e);if(typeof e=="string")return MS(e);throw new Error("Expected function, string, or object as test")};function IS(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ro(e[n]);return Fo(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function AS(e){const t=e;return Fo(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function MS(e){return Fo(t);function t(n){return n&&n.type===e}}function Fo(e){return t;function t(n,r,s){return!!(OS(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function LS(){return!0}function OS(e){return e!==null&&typeof e=="object"&&"type"in e}const Ox=[],DS=!0,Kc=!1,RS="skip";function Dx(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=Ro(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,h){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=Ox,p,y,C;if((!t||i(c,u,h[h.length-1]||void 0))&&(f=FS(n(c,h)),f[0]===Kc))return f;if("children"in c&&c.children){const g=c;if(g.children&&f[0]!==RS)for(y=(r?g.children.length:-1)+a,C=h.concat(g);y>-1&&y<g.children.length;){const v=g.children[y];if(p=l(v,y,C)(),p[0]===Kc)return p;y=typeof p[1]=="number"?p[1]:y+a}}return f}}}function FS(e){return Array.isArray(e)?e:typeof e=="number"?[DS,e]:e==null?Ox:[e]}function xd(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),Dx(e,i,l,s);function l(c,u){const h=u[u.length-1],d=h?h.children.indexOf(c):void 0;return a(c,d,h)}}const Jc={}.hasOwnProperty,zS={};function $S(e,t){const n=t||zS,r=new Map,s=new Map,i=new Map,a={...jS,...n.handlers},l={all:u,applyData:US,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:BS,wrap:qS};return xd(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const d=h.type==="definition"?r:s,m=String(h.identifier).toUpperCase();d.has(m)||d.set(m,h)}}),l;function c(h,d){const m=h.type,f=l.handlers[m];if(Jc.call(l.handlers,m)&&f)return f(l,h,d);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:y,...C}=h,g=ao(C);return g.children=l.all(h),g}return ao(h)}return(l.options.unknownHandler||HS)(l,h,d)}function u(h){const d=[];if("children"in h){const m=h.children;let f=-1;for(;++f<m.length;){const p=l.one(m[f],h);if(p){if(f&&m[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Hf(p.value)),!Array.isArray(p)&&p.type==="element")){const y=p.children[0];y&&y.type==="text"&&(y.value=Hf(y.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function BS(e,t){e.position&&(t.position=Tk(e))}function US(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,ao(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function HS(e,t){const n=t.data||{},r="value"in t&&!(Jc.call(n,"hProperties")||Jc.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qS(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Hf(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function qf(e,t){const n=$S(e,t),r=n.one(e,void 0),s=PS(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function WS(e,t){return e&&"run"in e?async function(n,r){const s=qf(n,{file:r,...t});await e.run(s,r)}:function(n,r){return qf(n,{file:r,...e||t})}}function Wf(e){if(e)throw e}var Ta=Object.prototype.hasOwnProperty,Rx=Object.prototype.toString,Gf=Object.defineProperty,Vf=Object.getOwnPropertyDescriptor,Kf=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Rx.call(t)==="[object Array]"},Jf=function(t){if(!t||Rx.call(t)!=="[object Object]")return!1;var n=Ta.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Ta.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Ta.call(t,s)},Qf=function(t,n){Gf&&n.name==="__proto__"?Gf(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Yf=function(t,n){if(n==="__proto__")if(Ta.call(t,n)){if(Vf)return Vf(t,n).value}else return;return t[n]},GS=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,h=!1;for(typeof l=="boolean"&&(h=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Yf(l,n),s=Yf(t,n),l!==s&&(h&&s&&(Jf(s)||(i=Kf(s)))?(i?(i=!1,a=r&&Kf(r)?r:[]):a=r&&Jf(r)?r:{},Qf(l,{name:n,newValue:e(h,a,s)})):typeof s<"u"&&Qf(l,{name:n,newValue:s}));return l};const Sl=Zc(GS);function Qc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function VS(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const h=e[++i];let d=-1;if(c){a(c);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,h?KS(h,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function KS(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const h=u;if(l&&n)throw h;return s(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const hn={basename:JS,dirname:QS,extname:YS,join:XS,sep:"/"};function JS(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ui(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function QS(e){if(Ui(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function YS(e){Ui(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function XS(...e){let t=-1,n;for(;++t<e.length;)Ui(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ZS(n)}function ZS(e){Ui(e);const t=e.codePointAt(0)===47;let n=eN(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function eN(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function Ui(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const tN={cwd:nN};function nN(){return"/"}function Yc(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function rN(e){if(typeof e=="string")e=new URL(e);else if(!Yc(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return sN(e)}function sN(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Nl=["history","path","basename","stem","extname","dirname"];class Fx{constructor(t){let n;t?Yc(t)?n={path:t}:typeof t=="string"||iN(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":tN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Nl.length;){const i=Nl[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Nl.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?hn.basename(this.path):void 0}set basename(t){Cl(t,"basename"),_l(t,"basename"),this.path=hn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hn.dirname(this.path):void 0}set dirname(t){Xf(this.basename,"dirname"),this.path=hn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hn.extname(this.path):void 0}set extname(t){if(_l(t,"extname"),Xf(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Yc(t)&&(t=rN(t)),Cl(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hn.basename(this.path,this.extname):void 0}set stem(t){Cl(t,"stem"),_l(t,"stem"),this.path=hn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new xt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function _l(e,t){if(e&&e.includes(hn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hn.sep+"`")}function Cl(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Xf(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function iN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const aN=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},oN={}.hasOwnProperty;class yd extends aN{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=VS()}copy(){const t=new yd;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Sl(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Pl("data",this.frozen),this.namespace[t]=n,this):oN.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Pl("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ma(t),r=this.parser||this.Parser;return El("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),El("process",this.parser||this.Parser),Tl("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=ma(t),c=r.parse(l);r.run(c,l,function(h,d,m){if(h||!d||!m)return u(h);const f=d,p=r.stringify(f,m);uN(p)?m.value=p:m.result=p,u(h,m)});function u(h,d){h||!d?a(h):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),El("processSync",this.parser||this.Parser),Tl("processSync",this.compiler||this.Compiler),this.process(t,s),em("processSync","process",n),r;function s(i,a){n=!0,Wf(i),r=a}}run(t,n,r){Zf(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=ma(n);s.run(t,c,u);function u(h,d,m){const f=d||t;h?l(h):a?a(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),em("runSync","run",r),s;function i(a,l){Wf(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=ma(n),s=this.compiler||this.Compiler;return Tl("stringify",s),Zf(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Pl("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...d]=u;c(h,d)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Sl(!0,s.settings,u.settings))}function l(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const d=u[h];i(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,h){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===u){m=d;break}if(m===-1)r.push([u,...h]);else if(h.length>0){let[f,...p]=h;const y=r[m][1];Qc(y)&&Qc(f)&&(f=Sl(!0,y,f)),r[m]=[u,f,...p]}}}}const lN=new yd().freeze();function El(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Tl(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Pl(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zf(e){if(!Qc(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function em(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ma(e){return cN(e)?e:new Fx(e)}function cN(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function uN(e){return typeof e=="string"||dN(e)}function dN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tm=[],nm={allowDangerousHtml:!0},fN=/^(https?|ircs?|mailto|xmpp)$/i,mN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bd(e){const t=pN(e),n=gN(e);return xN(t.runSync(t.parse(n),n),e)}function pN(e){const t=e.rehypePlugins||tm,n=e.remarkPlugins||tm,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...nm}:nm;return lN().use(Y2).use(n).use(WS,r).use(t)}function gN(e){const t=e.children||"",n=new Fx;return typeof t=="string"&&(n.value=t),n}function xN(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||yN;for(const h of mN)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+hN+h.id,void 0);return xd(e,u),Lk(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(h,d,m){if(h.type==="raw"&&m&&typeof d=="number")return a?m.children.splice(d,1):m.children[d]={type:"text",value:h.value},d;if(h.type==="element"){let f;for(f in wl)if(Object.hasOwn(wl,f)&&Object.hasOwn(h.properties,f)){const p=h.properties[f],y=wl[f];(y===null||y.includes(h.tagName))&&(h.properties[f]=c(String(p||""),f,h))}}if(h.type==="element"){let f=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(h,d,m)),f&&m&&typeof d=="number")return l&&h.children?m.children.splice(d,1,...h.children):m.children.splice(d,1),d}}}function yN(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||fN.test(e.slice(0,t))?e:""}function rm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function bN(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function vN(e,t,n){const s=Ro((n||{}).ignore||[]),i=wN(t);let a=-1;for(;++a<i.length;)Dx(e,"text",l);function l(u,h){let d=-1,m;for(;++d<h.length;){const f=h[d],p=m?m.children:void 0;if(s(f,p?p.indexOf(f):void 0,m))return;m=f}if(m)return c(u,h)}function c(u,h){const d=h[h.length-1],m=i[a][0],f=i[a][1];let p=0;const C=d.children.indexOf(u);let g=!1,v=[];m.lastIndex=0;let x=m.exec(u.value);for(;x;){const _=x.index,S={index:x.index,input:x.input,stack:[...h,u]};let w=f(...x,S);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?m.lastIndex=_+1:(p!==_&&v.push({type:"text",value:u.value.slice(p,_)}),Array.isArray(w)?v.push(...w):w&&v.push(w),p=_+x[0].length,g=!0),!m.global)break;x=m.exec(u.value)}return g?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(C,1,...v)):v=[u],C+v.length}}function wN(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([kN(s[0]),jN(s[1])])}return t}function kN(e){return typeof e=="string"?new RegExp(bN(e),"g"):e}function jN(e){return typeof e=="function"?e:function(){return e}}const Il="phrasing",Al=["autolink","link","image","label"];function SN(){return{transforms:[IN],enter:{literalAutolink:_N,literalAutolinkEmail:Ml,literalAutolinkHttp:Ml,literalAutolinkWww:Ml},exit:{literalAutolink:PN,literalAutolinkEmail:TN,literalAutolinkHttp:CN,literalAutolinkWww:EN}}}function NN(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Il,notInConstruct:Al},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Il,notInConstruct:Al},{character:":",before:"[ps]",after:"\\/",inConstruct:Il,notInConstruct:Al}]}}function _N(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ml(e){this.config.enter.autolinkProtocol.call(this,e)}function CN(e){this.config.exit.autolinkProtocol.call(this,e)}function EN(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function TN(e){this.config.exit.autolinkEmail.call(this,e)}function PN(e){this.exit(e)}function IN(e){vN(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,AN],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),MN]],{ignore:["link","linkReference"]})}function AN(e,t,n,r,s){let i="";if(!zx(s)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!LN(n)))return!1;const a=ON(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function MN(e,t,n,r){return!zx(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function LN(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function ON(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=rm(e,"(");let i=rm(e,")");for(;r!==-1&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function zx(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Er(n)||Lo(n))&&(!t||n!==47)}$x.peek=qN;function DN(){this.buffer()}function RN(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function FN(){this.buffer()}function zN(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function $N(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=on(this.sliceSerialize(e)).toLowerCase(),n.label=t}function BN(e){this.exit(e)}function UN(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=on(this.sliceSerialize(e)).toLowerCase(),n.label=t}function HN(e){this.exit(e)}function qN(){return"["}function $x(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),l(),a(),i+=s.move("]"),i}function WN(){return{enter:{gfmFootnoteCallString:DN,gfmFootnoteCall:RN,gfmFootnoteDefinitionLabelString:FN,gfmFootnoteDefinition:zN},exit:{gfmFootnoteCallString:$N,gfmFootnoteCall:BN,gfmFootnoteDefinitionLabelString:UN,gfmFootnoteDefinition:HN}}}function GN(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:$x},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,a){const l=i.createTracker(a);let c=l.move("[^");const u=i.enter("footnoteDefinition"),h=i.enter("label");return c+=l.move(i.safe(i.associationId(r),{before:c,after:"]"})),h(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),t?Bx:VN))),u(),c}}function VN(e,t,n){return t===0?e:Bx(e,t,n)}function Bx(e,t,n){return(n?"":"    ")+e}const KN=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Ux.peek=ZN;function JN(){return{canContainEols:["delete"],enter:{strikethrough:YN},exit:{strikethrough:XN}}}function QN(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:KN}],handlers:{delete:Ux}}}function YN(e){this.enter({type:"delete",children:[]},e)}function XN(e){this.exit(e)}function Ux(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(e,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function ZN(){return"~"}function e_(e){return e.length}function t_(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||e_,i=[],a=[],l=[],c=[];let u=0,h=-1;for(;++h<e.length;){const y=[],C=[];let g=-1;for(e[h].length>u&&(u=e[h].length);++g<e[h].length;){const v=n_(e[h][g]);if(n.alignDelimiters!==!1){const x=s(v);C[g]=x,(c[g]===void 0||x>c[g])&&(c[g]=x)}y.push(v)}a[h]=y,l[h]=C}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)i[d]=sm(r[d]);else{const y=sm(r);for(;++d<u;)i[d]=y}d=-1;const m=[],f=[];for(;++d<u;){const y=i[d];let C="",g="";y===99?(C=":",g=":"):y===108?C=":":y===114&&(g=":");let v=n.alignDelimiters===!1?1:Math.max(1,c[d]-C.length-g.length);const x=C+"-".repeat(v)+g;n.alignDelimiters!==!1&&(v=C.length+v+g.length,v>c[d]&&(c[d]=v),f[d]=v),m[d]=x}a.splice(1,0,m),l.splice(1,0,f),h=-1;const p=[];for(;++h<a.length;){const y=a[h],C=l[h];d=-1;const g=[];for(;++d<u;){const v=y[d]||"";let x="",_="";if(n.alignDelimiters!==!1){const S=c[d]-(C[d]||0),w=i[d];w===114?x=" ".repeat(S):w===99?S%2?(x=" ".repeat(S/2+.5),_=" ".repeat(S/2-.5)):(x=" ".repeat(S/2),_=x):_=" ".repeat(S)}n.delimiterStart!==!1&&!d&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&g.push(" "),n.alignDelimiters!==!1&&g.push(x),g.push(v),n.alignDelimiters!==!1&&g.push(_),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function n_(e){return e==null?"":String(e)}function sm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function r_(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),s_);return s(),a}function s_(e,t,n){return">"+(n?"":" ")+e}function i_(e,t){return im(e,t.inConstruct,!0)&&!im(e,t.notInConstruct,!1)}function im(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function am(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&i_(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function a_(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>a&&(a=i):i=1,s=r+t.length,r=n.indexOf(t,s);return a}function o_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function l_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function c_(e,t,n,r){const s=l_(n),i=e.value||"",a=s==="`"?"GraveAccent":"Tilde";if(o_(e,n)){const d=n.enter("codeIndented"),m=n.indentLines(i,u_);return d(),m}const l=n.createTracker(r),c=s.repeat(Math.max(a_(i,s)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${a}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),d()}return h+=l.move(`
`),i&&(h+=l.move(i+`
`)),h+=l.move(c),u(),h}function u_(e,t,n){return(n?"":"    ")+e}function vd(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function d_(e,t,n,r){const s=vd(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),a(),u}function h_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ci(e){return"&#x"+e.toString(16).toUpperCase()+";"}function oo(e,t,n){const r=bs(e),s=bs(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Hx.peek=f_;function Hx(e,t,n,r){const s=h_(n),i=n.enter("emphasis"),a=n.createTracker(r),l=a.move(s);let c=a.move(n.containerPhrasing(e,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),h=oo(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Ci(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=oo(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Ci(d));const f=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function f_(e,t,n){return n.options.emphasis||"*"}function m_(e,t){let n=!1;return xd(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Kc}),!!((!e.depth||e.depth<3)&&ud(e)&&(t.options.setext||n))}function p_(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(m_(e,n)){const h=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),h(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");i.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=Ci(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),l(),u}qx.peek=g_;function qx(e){return e.value||""}function g_(){return"<"}Wx.peek=x_;function Wx(e,t,n,r){const s=vd(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),a(),u}function x_(){return"!"}Gx.peek=y_;function Gx(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function y_(){return"!"}Vx.peek=b_;function Vx(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const a=n.unsafe[i],l=n.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function b_(){return"`"}function Kx(e,t){const n=ud(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Jx.peek=v_;function Jx(e,t,n,r){const s=vd(n),i=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,c;if(Kx(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),l(),n.stack=h,d}l=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${i}`),u+=a.move(" "+s),u+=a.move(n.safe(e.title,{before:u,after:s,...a.current()})),u+=a.move(s),c()),u+=a.move(")"),l(),u}function v_(e,t,n){return Kx(e,n)?"<":"["}Qx.peek=w_;function Qx(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function w_(){return"["}function wd(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function k_(e){const t=wd(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function j_(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Yx(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function S_(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?j_(n):wd(n);const l=e.ordered?a==="."?")":".":k_(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Yx(n)===a&&h){let d=-1;for(;++d<e.children.length;){const m=e.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),u}function N_(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function __(e,t,n,r){const s=N_(n);let i=n.bulletCurrent||wd(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let a=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(a-i.length)),l.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),h);return c(),u;function h(d,m,f){return m?(f?"":" ".repeat(a))+d:(f?i:i+" ".repeat(a-i.length))+d}}function C_(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),s(),a}const E_=Ro(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T_(e,t,n,r){return(e.children.some(function(a){return E_(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function P_(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Xx.peek=I_;function Xx(e,t,n,r){const s=P_(n),i=n.enter("strong"),a=n.createTracker(r),l=a.move(s+s);let c=a.move(n.containerPhrasing(e,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),h=oo(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Ci(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=oo(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Ci(d));const f=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function I_(e,t,n){return n.options.strong||"*"}function A_(e,t,n,r){return n.safe(e.value,r)}function M_(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function L_(e,t,n){const r=(Yx(n)+(n.options.ruleSpaces?" ":"")).repeat(M_(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Zx={blockquote:r_,break:am,code:c_,definition:d_,emphasis:Hx,hardBreak:am,heading:p_,html:qx,image:Wx,imageReference:Gx,inlineCode:Vx,link:Jx,linkReference:Qx,list:S_,listItem:__,paragraph:C_,root:T_,strong:Xx,text:A_,thematicBreak:L_};function O_(){return{enter:{table:D_,tableData:om,tableHeader:om,tableRow:F_},exit:{codeText:z_,table:R_,tableData:Ll,tableHeader:Ll,tableRow:Ll}}}function D_(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function R_(e){this.exit(e),this.data.inTable=void 0}function F_(e){this.enter({type:"tableRow",children:[]},e)}function Ll(e){this.exit(e)}function om(e){this.enter({type:"tableCell",children:[]},e)}function z_(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,$_));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function $_(e,t){return t==="|"?t:e}function B_(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:a,tableCell:c,tableRow:l}};function a(f,p,y,C){return u(h(f,y,C),f.align)}function l(f,p,y,C){const g=d(f,y,C),v=u([g]);return v.slice(0,v.indexOf(`
`))}function c(f,p,y,C){const g=y.enter("tableCell"),v=y.enter("phrasing"),x=y.containerPhrasing(f,{...C,before:i,after:i});return v(),g(),x}function u(f,p){return t_(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function h(f,p,y){const C=f.children;let g=-1;const v=[],x=p.enter("table");for(;++g<C.length;)v[g]=d(C[g],p,y);return x(),v}function d(f,p,y){const C=f.children;let g=-1;const v=[],x=p.enter("tableRow");for(;++g<C.length;)v[g]=c(C[g],f,p,y);return x(),v}function m(f,p,y){let C=Zx.inlineCode(f,p,y);return y.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function U_(){return{exit:{taskListCheckValueChecked:lm,taskListCheckValueUnchecked:lm,paragraph:q_}}}function H_(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:W_}}}function lm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function q_(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let i=-1,a;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function W_(e,t,n,r){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(a);let c=Zx.listItem(e,t,n,{...r,...l.current()});return i&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+a}}function G_(){return[SN(),WN(),JN(),O_(),U_()]}function V_(e){return{extensions:[NN(),GN(e),QN(),B_(e),H_()]}}const K_={tokenize:eC,partial:!0},ey={tokenize:tC,partial:!0},ty={tokenize:nC,partial:!0},ny={tokenize:rC,partial:!0},J_={tokenize:sC,partial:!0},ry={name:"wwwAutolink",tokenize:X_,previous:iy},sy={name:"protocolAutolink",tokenize:Z_,previous:ay},Mn={name:"emailAutolink",tokenize:Y_,previous:oy},gn={};function Q_(){return{text:gn}}let cr=48;for(;cr<123;)gn[cr]=Mn,cr++,cr===58?cr=65:cr===91&&(cr=97);gn[43]=Mn;gn[45]=Mn;gn[46]=Mn;gn[95]=Mn;gn[72]=[Mn,sy];gn[104]=[Mn,sy];gn[87]=[Mn,ry];gn[119]=[Mn,ry];function Y_(e,t,n){const r=this;let s,i;return a;function a(d){return!Xc(d)||!oy.call(r,r.previous)||kd(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return Xc(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(J_,h,u)(d):d===45||d===95||ht(d)?(i=!0,e.consume(d),c):h(d)}function u(d){return e.consume(d),s=!0,c}function h(d){return i&&s&&vt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function X_(e,t,n){const r=this;return s;function s(a){return a!==87&&a!==119||!iy.call(r,r.previous)||kd(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(K_,e.attempt(ey,e.attempt(ty,i),n),n)(a))}function i(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function Z_(e,t,n){const r=this;let s="",i=!1;return a;function a(d){return(d===72||d===104)&&ay.call(r,r.previous)&&!kd(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(vt(d)&&s.length<5)return s+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),i?u:(i=!0,c)):n(d)}function u(d){return d===null||so(d)||Le(d)||Er(d)||Lo(d)?n(d):e.attempt(ey,e.attempt(ty,h),n)(d)}function h(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function eC(e,t,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),s):a===46&&r===3?(e.consume(a),i):n(a)}function i(a){return a===null?n(a):t(a)}}function tC(e,t,n){let r,s,i;return a;function a(u){return u===46||u===95?e.check(ny,c,l)(u):u===null||Le(u)||Er(u)||u!==45&&Lo(u)?c(u):(i=!0,e.consume(u),a)}function l(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),a}function c(u){return s||r||!i?n(u):t(u)}}function nC(e,t){let n=0,r=0;return s;function s(a){return a===40?(n++,e.consume(a),s):a===41&&r<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(ny,t,i)(a):a===null||Le(a)||Er(a)?t(a):(e.consume(a),s)}function i(a){return a===41&&r++,e.consume(a),s}}function rC(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),i):l===93?(e.consume(l),s):l===60||l===null||Le(l)||Er(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||Le(l)||Er(l)?t(l):r(l)}function i(l){return vt(l)?a(l):n(l)}function a(l){return l===59?(e.consume(l),r):vt(l)?(e.consume(l),a):n(l)}}function sC(e,t,n){return r;function r(i){return e.consume(i),s}function s(i){return ht(i)?n(i):t(i)}}function iy(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Le(e)}function ay(e){return!vt(e)}function oy(e){return!(e===47||Xc(e))}function Xc(e){return e===43||e===45||e===46||e===95||ht(e)}function kd(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const iC={tokenize:fC,partial:!0};function aC(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:uC,continuation:{tokenize:dC},exit:hC}},text:{91:{name:"gfmFootnoteCall",tokenize:cC},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:oC,resolveTo:lC}}}}function oC(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return n(c);const u=on(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function lC(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function cC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,a;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!a||d===null||d===91||Le(d))return n(d);if(d===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(on(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Le(d)||(a=!0),i++,e.consume(d),d===92?h:u}function h(d){return d===91||d===92||d===93?(e.consume(d),i++,u):u(d)}}function uC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0,l;return c;function c(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(p)}function h(p){if(a>999||p===93&&!l||p===null||p===91||Le(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return i=on(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Le(p)||(l=!0),a++,e.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(e.consume(p),a++,h):h(p)}function m(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),s.includes(i)||s.push(i),Te(e,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return t(p)}}function dC(e,t,n){return e.check(Bi,t,e.attempt(iC,t,n))}function hC(e){e.exit("gfmFootnoteDefinition")}function fC(e,t,n){const r=this;return Te(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(i):n(i)}}function mC(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},d={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},m=[["enter",h,l],["enter",a[u][1],l],["exit",a[u][1],l],["enter",d,l]],f=l.parser.constructs.insideSpan.null;f&&Ft(m,m.length,0,Oo(f,a.slice(u+1,c),l)),Ft(m,m.length,0,[["exit",d,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",h,l]]),Ft(a,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function i(a,l,c){const u=this.previous,h=this.events;let d=0;return m;function m(p){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(p):(a.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const y=bs(u);if(p===126)return d>1?c(p):(a.consume(p),d++,f);if(d<2&&!n)return c(p);const C=a.exit("strikethroughSequenceTemporary"),g=bs(p);return C._open=!g||g===2&&!!y,C._close=!y||y===2&&!!g,l(p)}}}class pC{constructor(){this.map=[]}add(t,n,r){gC(this,t,n,r)}consume(t){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const i of s)t.push(i);s=r.pop()}this.map.length=0}}function gC(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function xC(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function yC(){return{flow:{null:{name:"table",tokenize:bC,resolveAll:vC}}}}function bC(e,t,n){const r=this;let s=0,i=0,a;return l;function l(b){let T=r.events.length-1;for(;T>-1;){const W=r.events[T][1].type;if(W==="lineEnding"||W==="linePrefix")T--;else break}const M=T>-1?r.events[T][1].type:null,O=M==="tableHead"||M==="tableRow"?w:c;return O===w&&r.parser.lazy[r.now().line]?n(b):O(b)}function c(b){return e.enter("tableHead"),e.enter("tableRow"),u(b)}function u(b){return b===124||(a=!0,i+=1),h(b)}function h(b){return b===null?n(b):he(b)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):n(b):ke(b)?Te(e,h,"whitespace")(b):(i+=1,a&&(a=!1,s+=1),b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),d(b)))}function d(b){return b===null||b===124||Le(b)?(e.exit("data"),h(b)):(e.consume(b),b===92?m:d)}function m(b){return b===92||b===124?(e.consume(b),d):d(b)}function f(b){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(b):(e.enter("tableDelimiterRow"),a=!1,ke(b)?Te(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):p(b))}function p(b){return b===45||b===58?C(b):b===124?(a=!0,e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),y):S(b)}function y(b){return ke(b)?Te(e,C,"whitespace")(b):C(b)}function C(b){return b===58?(i+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),g):b===45?(i+=1,g(b)):b===null||he(b)?_(b):S(b)}function g(b){return b===45?(e.enter("tableDelimiterFiller"),v(b)):S(b)}function v(b){return b===45?(e.consume(b),v):b===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(b))}function x(b){return ke(b)?Te(e,_,"whitespace")(b):_(b)}function _(b){return b===124?p(b):b===null||he(b)?!a||s!==i?S(b):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(b)):S(b)}function S(b){return n(b)}function w(b){return e.enter("tableRow"),E(b)}function E(b){return b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),E):b===null||he(b)?(e.exit("tableRow"),t(b)):ke(b)?Te(e,E,"whitespace")(b):(e.enter("data"),I(b))}function I(b){return b===null||b===124||Le(b)?(e.exit("data"),E(b)):(e.consume(b),b===92?P:I)}function P(b){return b===92||b===124?(e.consume(b),I):I(b)}}function vC(e,t){let n=-1,r=!0,s=0,i=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,u,h,d;const m=new pC;for(;++n<e.length;){const f=e[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,c!==0&&(cm(m,t,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",h,t]])),s=p.type==="tableDelimiterRow"?2:h?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],d=pa(m,t,i,s,void 0,d),i=[0,0,0,0]),a[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(a[0]=a[1],d=pa(m,t,i,s,void 0,d)),i=a,a=[i[1],n,0,0])):p.type==="tableHead"?(l=!0,c=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(c=n,i[1]!==0?(a[0]=a[1],d=pa(m,t,i,s,n,d)):a[1]!==0&&(d=pa(m,t,a,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&cm(m,t,c,u,h),m.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=xC(t.events,n))}return e}function pa(e,t,n,r,s,i){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},qr(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const c=qr(t.events,n[1]);if(i={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=qr(t.events,n[2]),h=qr(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const m=t.events[n[2]],f=t.events[n[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,y=n[3]-n[2]-1;e.add(p,y,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return s!==void 0&&(i.end=Object.assign({},qr(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function cm(e,t,n,r,s){const i=[],a=qr(t.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function qr(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const wC={name:"tasklistCheck",tokenize:jC};function kC(){return{text:{91:wC}}}function jC(e,t,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),i)}function i(c){return Le(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return he(c)?t(c):ke(c)?e.check({tokenize:SC},t,n)(c):n(c)}}function SC(e,t,n){return Te(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function NC(e){return xx([Q_(),aC(),mC(e),yC(),kC()])}const _C={};function jd(e){const t=this,n=e||_C,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(NC(n)),i.push(G_()),a.push(V_(n))}function CC({value:e,onChange:t,placeholder:n="Enter markdown text...",label:r="Notes",rows:s=3}){const[i,a]=N.useState(!1);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:[o.jsx(eo,{className:"w-4 h-4 mr-2"}),r]}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:i?o.jsxs(o.Fragment,{children:[o.jsx(Ec,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Tc,{className:"w-4 h-4"}),o.jsx("span",{children:"Preview"})]})})]}),i?o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 min-h-[80px] max-h-[200px] overflow-y-auto",children:e?o.jsx(bd,{remarkPlugins:[jd],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:l})=>o.jsx("p",{className:"mb-2 last:mb-0",children:l}),h1:({children:l})=>o.jsx("h1",{className:"text-lg font-bold mb-2",children:l}),h2:({children:l})=>o.jsx("h2",{className:"text-base font-bold mb-2",children:l}),h3:({children:l})=>o.jsx("h3",{className:"text-sm font-bold mb-1",children:l}),ul:({children:l})=>o.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:l}),ol:({children:l})=>o.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:l}),li:({children:l})=>o.jsx("li",{className:"text-sm",children:l}),strong:({children:l})=>o.jsx("strong",{className:"font-semibold",children:l}),em:({children:l})=>o.jsx("em",{className:"italic",children:l}),code:({children:l})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:l}),pre:({children:l})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:l}),blockquote:({children:l})=>o.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2",children:l})},children:e}):o.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"No content to preview"})}):o.jsx("textarea",{value:e,onChange:l=>t(l.target.value),rows:s,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white resize-none",placeholder:n}),!i&&o.jsx("div",{className:"mt-1 text-xs text-secondary-text",children:"Supports markdown formatting (**, *, `, #, -, 1., etc.)"})]})}function EC({isOpen:e,onClose:t,model:n,onModelUpdated:r}){var T;const{user:s}=gt(),[i,a]=N.useState({name:"",count:1,purchase_date:"",notes:"",game_id:"",status:"",painted_date:""}),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(!1),[f,p]=N.useState(!1),[y,C]=N.useState(null),[g,v]=N.useState(null),[x,_]=N.useState([]),[S,w]=N.useState(!1);N.useEffect(()=>{n&&a({name:n.name,count:n.count,purchase_date:n.purchase_date||"",notes:n.notes||"",game_id:n.game_id||"",status:n.status||"",painted_date:n.painted_date||""})},[n]),N.useEffect(()=>{e&&(async()=>{const{data:O,error:W}=await V.from("games").select("id, name, icon").order("name");W?console.error("Error fetching games:",W):_(O||[])})()},[e]);const E=M=>{var W;const O=(W=M.target.files)==null?void 0:W[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}c(O),C(O),p(!0)}},I=async M=>{try{m(!0),console.log("Original cropped size:",(M.size/1024).toFixed(2),"KB");const O=await Pn(M,1200,1200,.8);console.log("Compressed size:",(O.size/1024).toFixed(2),"KB"),v(O)}catch(O){console.error("Compression failed, using original cropped image:",O),v(M)}finally{m(!1),p(!1)}},P=()=>{w(!0),v(null),c(null)},b=async M=>{if(M.preventDefault(),!!s){h(!0);try{let O=n.image_url;if(S){if(n.image_url&&n.image_url.includes("supabase"))try{const q=n.image_url.split("/"),te=q.findIndex(ee=>ee==="model-images");if(te!==-1){const ee=q.slice(te+1).join("/");await V.storage.from("model-images").remove([ee])}}catch(q){console.warn("Failed to delete old image:",q)}O=null}else if(g){if(n.image_url&&n.image_url.includes("supabase"))try{const H=n.image_url.split("/"),ne=H.findIndex(j=>j==="model-images");if(ne!==-1){const j=H.slice(ne+1).join("/");await V.storage.from("model-images").remove([j])}}catch(H){console.warn("Failed to delete old image:",H)}const q=(l==null?void 0:l.name.split(".").pop())||"jpg",te=`${Date.now()}-${Math.random().toString(36).substring(2)}.${q}`,ee=`${s.id}/${te}`,{data:B,error:Y}=await V.storage.from("model-images").upload(ee,g);if(Y)throw console.error("Upload error:",Y),new Error(`Failed to upload image: ${Y.message}`);const{data:k}=V.storage.from("model-images").getPublicUrl(B.path);O=k.publicUrl,console.log("New image uploaded:",O)}const{error:W}=await V.from("models").update({name:i.name,count:i.count,purchase_date:i.purchase_date||null,notes:i.notes||null,game_id:i.game_id||null,image_url:O,status:i.status||"None",painted_date:i.painted_date||null}).eq("id",n.id);if(W)throw W;r(),t(),c(null),v(null),C(null),w(!1)}catch(O){console.error("Error updating model:",O),alert("Failed to update model. Please try again.")}finally{h(!1)}}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Model"}),o.jsx("button",{onClick:t,className:"text-icon hover:text-icon-hover",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),f&&y&&o.jsx(Cr,{isOpen:f,imageFile:y,onCrop:I,onClose:()=>{p(!1),C(null),c(null)}}),!f&&o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(eo,{className:"w-4 h-4 mr-2"}),"Model Name"]}),o.jsx("input",{type:"text",value:i.name,onChange:M=>a({...i,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(An,{className:"w-4 h-4 mr-2"}),"Box"]}),o.jsx("input",{type:"text",value:((T=n.box)==null?void 0:T.name)||"No Collection (Loose Model)",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Box assignment cannot be changed in edit mode."})]}),!n.box&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Ju,{className:"w-4 h-4 mr-2"}),"Game"]}),o.jsx(zi,{games:x,selectedGame:i.game_id,onGameSelect:M=>a({...i,game_id:M})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(eo,{className:"w-4 h-4 mr-2"}),"Painted Status"]}),o.jsxs("select",{value:i.status,onChange:M=>a({...i,status:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Select Status"}),o.jsx("option",{value:"Assembled",children:"Assembled"}),o.jsx("option",{value:"Primed",children:"Primed"}),o.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),o.jsx("option",{value:"Painted",children:"Painted"})]})]}),i.status==="Painted"&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(pt,{className:"w-4 h-4 mr-2"}),"Painted Date"]}),o.jsx("input",{type:"date",value:i.painted_date,onChange:M=>a({...i,painted_date:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring---color-brand dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),!n.box&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(pt,{className:"w-4 h-4 mr-2"}),"Purchase Date"]}),o.jsx("input",{type:"date",value:i.purchase_date,onChange:M=>a({...i,purchase_date:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(No,{className:"w-4 h-4 mr-2"}),"Number of Models"]}),o.jsx("input",{type:"number",min:"1",value:i.count,onChange:M=>a({...i,count:parseInt(M.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(_r,{className:"w-4 h-4 mr-2"}),"Replace Image"]}),n.image_url&&!S&&o.jsx("div",{className:"mb-3 p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:n.image_url,alt:"Current model image",className:"w-12 h-12 object-cover rounded",onError:M=>{const O=M.target;O.style.display="none"}}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current image"})]}),o.jsx("button",{type:"button",onClick:P,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:o.jsx(Ss,{className:"w-4 h-4"})})]})}),S&&o.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-md bg-red-50 dark:bg-red-900/20",children:o.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:" Image will be deleted when you save changes"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20"}),g&&o.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[" Cropped image ready for upload (",(g.size/1024).toFixed(1)," KB)"]}),d&&o.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Compressing image..."})]}),o.jsx(CC,{value:i.notes,onChange:M=>a({...i,notes:M}),placeholder:"Optional notes about this model... (supports markdown formatting)",label:"Notes",rows:4}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:u||d,className:"btn-primary btn-flex",children:u?o.jsxs(o.Fragment,{children:[o.jsx(Jb,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Model"})]})]})]})}):null}function TC({message:e,isVisible:t,onClose:n,duration:r=3e3}){return N.useEffect(()=>{if(t){const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)}},[t,r,n]),t?o.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-in slide-in-from-top-2 duration-300",children:o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 flex items-center space-x-3 max-w-sm",children:[o.jsx(Fb,{className:"w-5 h-5 text-icon-active flex-shrink-0"}),o.jsx("p",{className:"text-sm font-medium text-green-800 flex-1",children:e}),o.jsx("button",{onClick:n,className:"text-green-600 hover:text-green-800 transition-colors",children:o.jsx(Ee,{className:"w-4 h-4 text-icon"})})]})}):null}function PC({isOpen:e,onClose:t,onModelDeleted:n,onModelUpdated:r,onViewBox:s,model:i}){var T,M,O,W,q,te,ee,B,Y,k,H,ne,j,U,ae,R,$,me,de;const[a,l]=Ce.useState(!1),[c,u]=Ce.useState(!1),[h,d]=Ce.useState(!1),[m,f]=Ce.useState(!1),[p,y]=Ce.useState(!1),[C,g]=Ce.useState(i);if(Ce.useEffect(()=>{g(i)},[i]),Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e||!i)return null;const v=J=>{J.target===J.currentTarget&&t()},x=J=>new Date(J).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),_=(J,fe)=>`${fe} Model${fe>1?"s":""}`,S=()=>(i==null?void 0:i.painted_date)||null,w=()=>(i==null?void 0:i.notes)||null,E=()=>{l(!0)},I=async()=>{if(i){d(!0);try{if(i.image_url&&typeof i.image_url=="string"&&i.image_url.includes("supabase")){const fe=i.image_url.split("/"),X=fe.findIndex(z=>z==="model-images");if(X!==-1){const z=fe.slice(X+1).join("/");await V.storage.from("model-images").remove([z])}}const{error:J}=await V.from("models").delete().eq("id",i.id);if(J)throw J;l(!1),t(),n&&n()}catch(J){console.error("Error deleting model:",J)}finally{d(!1)}}},P=async()=>{if(i){f(!0);try{const J=ro(`/shared/model/${i.id}`);await navigator.clipboard.writeText(J),y(!0)}catch(J){console.error("Error sharing model:",J);const fe=ro(`/shared/model/${i.id}`),X=document.createElement("textarea");X.value=fe,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),y(!0)}finally{f(!1)}}},b=async()=>{u(!1),t(),r&&await r()};return!e||!C?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:v,children:o.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:(()=>{var fe,X,z;if(i.image_url&&typeof i.image_url=="string"&&i.image_url.trim()!==""&&i.image_url!=="undefined"&&i.image_url!=="null"&&(i.image_url.startsWith("http")||i.image_url.startsWith("/")))return i.image_url;const J=((X=(fe=i.box)==null?void 0:fe.game)==null?void 0:X.image)||((z=i.game)==null?void 0:z.image);return J&&typeof J=="string"&&J.trim()!==""&&J!=="undefined"&&J!=="null"&&J.startsWith("http")?J:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:i.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:J=>{const fe=J.target,X="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";fe.src!==X&&(console.log("Modal image failed to load:",fe.src,"Falling back to default"),fe.src=X)}})}),o.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6 relative",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:i.name}),o.jsx("button",{onClick:()=>u(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:o.jsx(Oi,{className:"w-4 h-4"})})]}),i.box?o.jsx("button",{onClick:()=>{t(),s==null||s(i.box)},className:"text-base text-secondary-text mb-3 hover:text-amber-600 transition-colors",children:i.box.name}):null,o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(M=(T=i.box)==null?void 0:T.game)!=null&&M.icon||(O=i.game)!=null&&O.icon?o.jsx("img",{src:((q=(W=i.box)==null?void 0:W.game)==null?void 0:q.icon)||((te=i.game)==null?void 0:te.icon),alt:`${((B=(ee=i.box)==null?void 0:ee.game)==null?void 0:B.name)||((Y=i.game)==null?void 0:Y.name)||"Unknown Game"} icon`,className:"object-cover rounded max-h-[32px]",onError:J=>{const fe=J.target;console.warn("Game icon failed to load:",fe.src,"Falling back to letter icon"),fe.style.display="none";const X=fe.nextElementSibling;X&&X.classList.contains("icon-fallback")&&(X.style.display="flex")},onLoad:J=>{const X=J.target.nextElementSibling;X&&X.classList.contains("icon-fallback")&&(X.style.display="none")}}):null,o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(H=(k=i.box)==null?void 0:k.game)!=null&&H.icon||(ne=i.game)!=null&&ne.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((U=(j=i.box)==null?void 0:j.game)==null?void 0:U.name)||((ae=i.game)==null?void 0:ae.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:(($=(R=i.box)==null?void 0:R.game)==null?void 0:$.name)||((me=i.game)==null?void 0:me.name)||"Unknown Game"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(No,{className:"w-5 h-5 text-secondary-text"}),o.jsx("span",{className:"text-base text-text font-medium",children:_(i.status,i.count)})]}),((de=i.box)==null?void 0:de.purchase_date)&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(pt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",x(i.box.purchase_date)]})]}),S()&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(Wb,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",x(S())]})]}),w()&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-start space-x-3",children:[o.jsx(eo,{className:"w-5 h-5 text-secondary-text mt-0.5"}),o.jsx("div",{className:"flex-1",children:o.jsx(bd,{remarkPlugins:[jd],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:J})=>o.jsx("p",{className:"mb-2 last:mb-0 text-base text-text",children:J}),h1:({children:J})=>o.jsx("h1",{className:"text-lg font-bold mb-2 text-text",children:J}),h2:({children:J})=>o.jsx("h2",{className:"text-base font-bold mb-2 text-text",children:J}),h3:({children:J})=>o.jsx("h3",{className:"text-sm font-bold mb-1 text-text",children:J}),ul:({children:J})=>o.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:J}),ol:({children:J})=>o.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:J}),li:({children:J})=>o.jsx("li",{className:"text-sm text-text",children:J}),strong:({children:J})=>o.jsx("strong",{className:"font-semibold text-text",children:J}),em:({children:J})=>o.jsx("em",{className:"italic text-text",children:J}),code:({children:J})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:J}),pre:({children:J})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:J}),blockquote:({children:J})=>o.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2 text-text",children:J})},children:w()})})]})]}),o.jsx("div",{className:"flex justify-center pt-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:P,disabled:m,className:"btn-primary btn-full btn-with-icon",children:[o.jsx(Yu,{className:"w-4 h-4"}),o.jsx("span",{children:m?"Copying Link...":"Share Model"})]}),o.jsx("button",{onClick:E,className:"btn-danger-outline",children:"Delete this model"})]})})]})]})}),o.jsx(F1,{isOpen:a,onClose:()=>l(!1),onConfirm:I,modelName:i.name,loading:h}),o.jsx(EC,{isOpen:c,onClose:()=>u(!1),onModelUpdated:b,model:i}),o.jsx(TC,{message:"A share link has been copied to your clipboard",isVisible:p,onClose:()=>y(!1)})]})}function IC({isOpen:e,onClose:t,onConfirm:n,boxName:r,loading:s=!1}){if(!e)return null;const i=a=>{a.target===a.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Box"})]})]})})}function AC({isOpen:e,onClose:t,onModelsAdded:n,onAddNewModel:r,box:s}){var P;const[i,a]=N.useState([]),[l,c]=N.useState(new Set),[u,h]=N.useState(!0),[d,m]=N.useState(!1),[f,p]=N.useState(null),{user:y}=gt();N.useEffect(()=>{e&&y&&C()},[e,y]);const C=async()=>{try{h(!0);const{data:b,error:T}=await V.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          box_id,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("user_id",y==null?void 0:y.id).is("box_id",null).order("created_at",{ascending:!1});if(T)throw T;const M=(b||[]).sort((O,W)=>{var ee,B;const q=O.game_id===((ee=s.game)==null?void 0:ee.id),te=W.game_id===((B=s.game)==null?void 0:B.id);return q&&!te?-1:!q&&te?1:O.name.localeCompare(W.name)});a(M)}catch(b){p(b instanceof Error?b.message:"Failed to fetch models")}finally{h(!1)}},g=b=>{c(T=>{const M=new Set(T);return M.has(b)?M.delete(b):M.add(b),M})},v=async()=>{if(l.size!==0){m(!0),p(null);try{const b=Array.from(l),{error:T}=await V.from("models").update({box_id:s.id}).in("id",b);if(T)throw T;n(),t(),c(new Set)}catch(b){p(b instanceof Error?b.message:"Failed to add models to box")}finally{m(!1)}}},x=()=>{try{localStorage.setItem("mini-myths-temp-box-context",JSON.stringify({id:s.id,name:s.name,game:s.game}))}catch(b){console.error("Error storing box context:",b)}r(),t()},_=b=>{switch(b){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=b=>{var M;if(b.image_url&&typeof b.image_url=="string"&&b.image_url.trim()!==""&&b.image_url!=="undefined"&&b.image_url!=="null"&&(b.image_url.startsWith("http")||b.image_url.startsWith("/")))return{src:b.image_url,isGameFallback:!1};const T=(M=b.game)==null?void 0:M.icon;return T&&typeof T=="string"&&T.trim()!==""&&T!=="undefined"&&T!=="null"&&T.startsWith("http")?{src:T,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},w=i.filter(b=>{var T;return b.game_id===((T=s.game)==null?void 0:T.id)}),E=i.filter(b=>{var T;return b.game_id!==((T=s.game)==null?void 0:T.id)});if(!e)return null;const I=b=>{b.target===b.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:I,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Add Models to Collection: ",s.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),f&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:f})}),u?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading models..."})]}):i.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(An,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text mb-4",children:"No unboxed models found in your collection."}),o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"All your models are already assigned to collections."}),o.jsx("button",{onClick:x,className:"btn-primary-sm",children:"Add new model to collection"})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Select models to add to this box. Models will be moved from their current unboxed state."}),o.jsxs("div",{className:"space-y-6 mb-6",children:[w.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:[((P=s.game)==null?void 0:P.name)||"Same Game"," Models"]}),o.jsx("div",{className:"space-y-2",children:w.map(b=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[o.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&o.jsx(Wh,{className:"w-3 h-3"})}),(()=>{const T=S(b);return o.jsx("img",{src:T.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${T.isGameFallback?"opacity-10":""}`,onError:M=>{const O=M.target;O.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${_(b.status)}`,children:b.status})]})]})]},b.id))})]}),E.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:"Other Models"}),o.jsx("div",{className:"space-y-2",children:E.map(b=>{var T;return o.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[o.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&o.jsx(Wh,{className:"w-3 h-3"})}),(()=>{const M=S(b);return o.jsx("img",{src:M.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${M.isGameFallback?"opacity-10":""}`,onError:O=>{const W=O.target;W.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:"text-xs text-secondary-text",children:((T=b.game)==null?void 0:T.name)||"Unknown Game"}),o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${_(b.status)}`,children:b.status})]})]})]})]},b.id)})})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border-custom",children:[o.jsx("button",{onClick:t,disabled:d,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:v,disabled:l.size===0||d,className:"btn-primary btn-flex",children:d?"Adding...":`Add ${l.size} Model${l.size!==1?"s":""}`})]})]})]})})}function MC({isOpen:e,onClose:t,onBoxUpdated:n,box:r}){var fe;const[s,i]=N.useState({name:"",game_id:"",purchase_date:"",image_url:""}),[a,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(!1),[m,f]=N.useState(null),[p,y]=N.useState(null),[C,g]=N.useState(!1),[v,x]=N.useState(!1),[_,S]=N.useState(""),[w,E]=N.useState(!1),[I,P]=N.useState(!1),[b,T]=N.useState(!1),[M,O]=N.useState([]),[W,q]=N.useState(""),[te,ee]=N.useState([]),[B,Y]=N.useState(!1);N.useEffect(()=>{var X;r&&i({name:r.name,game_id:r.game_id||((X=r.game)==null?void 0:X.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""})},[r]),N.useEffect(()=>{e&&k()},[e]),N.useEffect(()=>{e&&r&&k()},[e,r]);const k=async()=>{try{const{data:X,error:z}=await V.from("games").select("id, name, icon").order("name");if(z)throw z;l(X||[])}catch(X){console.error("Error fetching games:",X)}},H=X=>{var F;const z=(F=X.target.files)==null?void 0:F[0];if(z){if(!ys(z)){alert("Please select a valid image file");return}u(z),f(z),d(!0)}},ne=X=>{y(X),d(!1),f(null)},j=()=>{E(!0),y(null),u(null)},U=async()=>{if(s.name.trim()){T(!0),O([]),ee([]);try{const X=a.find(le=>le.id===s.game_id),z=(X==null?void 0:X.name)||"",F=`${s.name.trim()} ${z}`.trim(),re=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:F,count:6})});if(!re.ok)throw new Error("Failed to search for images");const Q=(await re.json()).images||[];O(Q),ee(Q),P(!0)}catch(X){console.error("Error searching for images:",X),P(!1)}finally{T(!1)}}},ae=X=>{q(X),P(!1)},R=async()=>{if(s.name.trim()){Y(!0);try{const X=a.find(ve=>ve.id===s.game_id),z=(X==null?void 0:X.name)||"",F=`${s.name.trim()} ${z}`.trim();console.log("Finding more images with exclude:",te);const re=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:F,count:6,exclude:te})});if(!re.ok)throw new Error("Failed to search for more images");const Q=(await re.json()).images||[];console.log("Received additional images:",Q),console.log("Previous results count:",te.length),console.log("New results count:",Q.length);const le=Q.filter(ve=>!te.includes(ve));console.log("Unique new images after filtering:",le),O(le),ee([...te,...le])}catch(X){console.error("Error searching for more images:",X)}finally{Y(!1)}}},$=async(X,z,F)=>{const re=(c==null?void 0:c.name.split(".").pop())||"jpg",be=`${F}/${Date.now()}-${Math.random().toString(36).substring(2)}.${re}`,{data:Q,error:le}=await V.storage.from(z).upload(be,X);if(le)throw le;const{data:ve}=V.storage.from(z).getPublicUrl(Q.path);return ve.publicUrl},me=async X=>{if(X.preventDefault(),!!r){g(!0),S("");try{let z=s.image_url;if(w){if(s.image_url&&s.image_url.includes("supabase"))try{const re=s.image_url.split("/"),be=re.findIndex(Q=>Q==="model-images");if(be!==-1){const Q=re.slice(be+1).join("/");await V.storage.from("model-images").remove([Q])}}catch(re){console.warn("Failed to delete old image:",re)}z=null}else if(W)z=W;else if(p){x(!0);const re=await Pn(p,1200,1200,.8);z=await $(re,"model-images","boxes")}const{error:F}=await V.from("boxes").update({name:s.name,game_id:s.game_id||null,purchase_date:s.purchase_date||null,image_url:z}).eq("id",r.id);if(F)throw F;n()}catch(z){S(z instanceof Error?z.message:"Failed to update box")}finally{g(!1),x(!1)}}},de=()=>{var X;r&&i({name:r.name,game_id:r.game_id||((X=r.game)==null?void 0:X.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""}),u(null),y(null),E(!1),q(""),P(!1),O([]),ee([]),S("")};if(!e||!r)return null;const J=X=>{X.target===X.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:J,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),o.jsxs("form",{onSubmit:me,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"boxName",value:s.name,onChange:X=>i({...s,name:X.target.value}),placeholder:"Enter collection name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(zi,{games:a,selectedGame:s.game_id||"",onGameSelect:X=>i({...s,game_id:X}),placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:s.purchase_date,onChange:X=>i({...s,purchase_date:X.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Box Image"}),s.image_url&&!w&&o.jsx("div",{className:"mb-3 p-3 border border-border-custom rounded-lg bg-bg-secondary",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:s.image_url,alt:"Current box image",className:"w-12 h-12 object-cover rounded",onError:X=>{const z=X.target;z.style.display="none"}}),o.jsx("span",{className:"text-sm text-secondary-text",children:"Current image"})]}),o.jsx("button",{type:"button",onClick:j,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:o.jsx(Ss,{className:"w-4 h-4"})})]})}),w&&o.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-lg bg-red-50",children:o.jsx("p",{className:"text-sm text-red-700",children:" Image will be deleted when you save changes"})}),o.jsxs("div",{className:"relative",children:[o.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:H,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),p&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"}),!s.image_url&&!p&&!W&&s.name.trim()&&o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",onClick:U,disabled:b,className:"btn-secondary btn-full",children:b?"Searching for images...":"Find images for this box"})}),W&&o.jsx("div",{className:"mt-3 p-3 border border-green-300 rounded-lg bg-green-50",children:o.jsx("p",{className:"text-sm text-green-700",children:" Image selected from search results"})})]}),_&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:_}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:de,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:C||v,className:"btn-primary btn-flex",children:v?"Processing...":C?"Saving...":"Save Changes"})]})]})]})}),m&&o.jsx(Cr,{isOpen:h,onClose:()=>{d(!1),f(null),u(null)},onCrop:ne,imageFile:m}),I&&o.jsx(nx,{isOpen:I,onClose:()=>P(!1),images:M,onImageSelect:ae,searchQuery:`${s.name} ${((fe=a.find(X=>X.id===s.game_id))==null?void 0:fe.name)||""}`.trim(),onFindMoreImages:R,isLoadingMore:B})]})}function LC({isOpen:e,onClose:t,onConfirm:n,modelName:r,boxName:s,loading:i=!1}){if(!e)return null;const a=l=>{l.target===l.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:a,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Remove ",r," from ",s,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"Are you sure you want to remove this model from this box? This won't delete the model or the box from your collection."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:i,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:i,className:"btn-primary btn-flex",children:i?"Removing...":"Remove from Box"})]})]})})}function OC({isOpen:e,onClose:t,onCollectionUpdated:n,box:r}){const[s,i]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState("");N.useEffect(()=>{r&&i(r.public??!1)},[r]);const m=async()=>{if(r){l(!0),d("");try{const{error:y}=await V.from("boxes").update({public:!s}).eq("id",r.id);if(y)throw y;i(!s),n==null||n()}catch(y){d(y instanceof Error?y.message:"Failed to update collection visibility")}finally{l(!1)}}},f=async()=>{if(r){u(!0),d("");try{const y=ro(`/shared/collection/${r.id}`);await navigator.clipboard.writeText(y),console.log("Collection share link copied to clipboard")}catch(y){console.error("Error copying URL:",y);const C=ro(`/shared/collection/${r.id}`),g=document.createElement("textarea");g.value=C,document.body.appendChild(g),g.select(),document.execCommand("copy"),document.body.removeChild(g),console.log("Collection share link copied to clipboard (fallback)")}finally{u(!1)}}},p=y=>{y.target===y.currentTarget&&t()};return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:p,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Share this collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:o.jsx("h3",{className:"font-semibold text-text mb-2",children:r.name})}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Yu,{className:"w-5 h-5 text-icon"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-input-label",children:"Make Public"}),o.jsx("p",{className:"text-xs text-secondary-text",children:"Allow anyone to view this collection"})]})]}),o.jsx("button",{onClick:m,disabled:a,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 disabled:opacity-50 ${s?"bg-brand":"bg-secondary-text"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),s&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(_g,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm text-green-800",children:"This collection is now public and can be viewed by anyone with the link."})]})}),!s&&o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hb,{className:"w-4 h-4 text-gray-600"}),o.jsx("span",{className:"text-sm text-gray-800",children:"This collection is private and only visible to you."})]})}),o.jsxs("button",{onClick:f,disabled:c,className:"btn-secondary btn-full btn-with-icon",children:[o.jsx($b,{className:"w-4 h-4"}),o.jsx("span",{children:c?"Copying...":"Copy URL"})]}),h&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:h}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:t,className:"btn-secondary",children:"Done"})})]})]})})}function DC({isOpen:e,onClose:t,onBoxDeleted:n,onModelsUpdated:r,onViewModel:s,onAddNewModel:i,box:a}){var me,de,J,fe,X;const[l,c]=Ce.useState(!1),[u,h]=Ce.useState(!1),[d,m]=Ce.useState(!1),[f,p]=Ce.useState(!1),[y,C]=Ce.useState({isOpen:!1,model:null}),[g,v]=Ce.useState(!1),[x,_]=Ce.useState(!1),[S,w]=Ce.useState(!1),[E,I]=Ce.useState([]),[P,b]=Ce.useState(!0),[T,M]=Ce.useState(null);Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),Ce.useEffect(()=>{e&&a&&O()},[e,a]);const O=async()=>{if(a){b(!0),M(null);try{const{data:z,error:F}=await V.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",a.id).order("created_at",{ascending:!1});if(F)throw F;I(z||[])}catch(z){M(z instanceof Error?z.message:"Failed to fetch models")}finally{b(!1)}}},W=()=>{h(!1),O(),r==null||r()},q=()=>{h(!1),v(!0),t()};Ce.useEffect(()=>{g&&!e&&(v(!1),i==null||i((a==null?void 0:a.id)||null))},[g,e,i,a==null?void 0:a.id]);const te=z=>{C({isOpen:!0,model:z})},ee=async()=>{if(y.model){w(!0);try{const{error:z}=await V.from("models").update({box_id:null}).eq("id",y.model.id);if(z)throw z;O(),r==null||r(),C({isOpen:!1,model:null})}catch(z){console.error("Error removing model from box:",z)}finally{w(!1)}}},B=z=>{t(),s==null||s(z)},Y=()=>{m(!1),t(),r&&r()};if(!e||!a)return null;const k=z=>{z.target===z.currentTarget&&t()},H=z=>new Date(z).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),ne=()=>{var F;if(a.image_url&&typeof a.image_url=="string"&&a.image_url.trim()!==""&&a.image_url!=="undefined"&&a.image_url!=="null"&&(a.image_url.startsWith("http")||a.image_url.startsWith("/")))return a.image_url;const z=(F=a.game)==null?void 0:F.image;return z&&typeof z=="string"&&z.trim()!==""&&z!=="undefined"&&z!=="null"&&z.startsWith("http")?z:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},j=z=>{switch(z){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},U=z=>{var re;if(z.image_url&&typeof z.image_url=="string"&&z.image_url.trim()!==""&&z.image_url!=="undefined"&&z.image_url!=="null"&&(z.image_url.startsWith("http")||z.image_url.startsWith("/")))return{src:z.image_url,isGameFallback:!1};const F=(re=z.game)==null?void 0:re.icon;return F&&typeof F=="string"&&F.trim()!==""&&F!=="undefined"&&F!=="null"&&F.startsWith("http")?{src:F,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},ae=()=>{p(!0)},R=()=>{c(!0)},$=async()=>{if(a){_(!0);try{if(a.image_url&&typeof a.image_url=="string"&&a.image_url.includes("supabase")){const F=a.image_url.split("/"),re=F.findIndex(be=>be==="model-images");if(re!==-1){const be=F.slice(re+1).join("/");await V.storage.from("model-images").remove([be])}}const{error:z}=await V.from("boxes").delete().eq("id",a.id);if(z)throw z;c(!1),t(),n&&n()}catch(z){console.error("Error deleting box:",z)}finally{_(!1)}}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:k,children:o.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:ne(),alt:a.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:z=>{const F=z.target,re="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";F.src!==re&&(console.log("Box modal image failed to load:",F.src,"Falling back to default"),F.src=re)}})}),o.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:o.jsx(Ee,{className:"w-6 h-6 text-icon"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6 relative",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:a.name}),o.jsx("button",{onClick:()=>m(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:o.jsx(Oi,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(me=a.game)!=null&&me.icon?o.jsx("img",{src:a.game.icon,alt:`${a.game.name} icon`,className:"object-cover rounded max-h-[32px]",onError:z=>{const F=z.target;console.warn("Game icon failed to load:",F.src,"Falling back to letter icon"),F.style.display="none";const re=F.nextElementSibling;re&&re.classList.contains("icon-fallback")&&(re.style.display="flex")},onLoad:z=>{const re=z.target.nextElementSibling;re&&re.classList.contains("icon-fallback")&&(re.style.display="none")}}):null,o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(de=a.game)!=null&&de.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((J=a.game)==null?void 0:J.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((fe=a.game)==null?void 0:fe.name)||"Unknown Game"})]})]}),o.jsx("div",{className:"space-y-3",children:a.purchase_date&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(pt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",H(a.purchase_date)]})]})}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:"Models in this Collection"}),P?o.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((z,F)=>o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]})},F))}):T?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-600",children:T})}):E.length===0?o.jsxs("div",{className:"text-center py-8 bg-bg-secondary rounded-lg",children:[o.jsx(An,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No models in this collection yet."}),o.jsx("p",{className:"text-sm text-secondary-text mt-2",children:'Use the "Add Models to Collection" button to add some!'})]}):o.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:E.map(z=>o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center justify-between hover:bg-bg-primary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(()=>{const F=U(z);return o.jsx("img",{src:F.src,alt:z.name,className:`w-12 h-12 object-cover rounded ${F.isGameFallback?"opacity-10":""}`,onError:re=>{const be=re.target;be.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:z.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:"text-xs text-secondary-text",children:[z.count," model",z.count!==1?"s":""]}),z.status!=="None"&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${j(z.status)}`,children:z.status})]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>te(z),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:o.jsx(Ss,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>B(z),className:"p-2 text-secondary-text hover:text-text transition-colors",children:o.jsx(vr,{className:"w-4 h-4"})})]})]},z.id))})]}),o.jsx("div",{className:"flex justify-center pt-6",children:o.jsxs("div",{className:"space-y-3 w-full",children:[o.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-full btn-with-icon",children:[o.jsx(Li,{className:"w-4 h-4"}),o.jsx("span",{children:"Add Models to Collection"})]}),o.jsxs("button",{onClick:ae,className:"btn-secondary btn-full btn-with-icon",children:[o.jsx(Yu,{className:"w-4 h-4"}),o.jsx("span",{children:"Share Collection"})]}),o.jsx("button",{onClick:R,className:"btn-danger-outline btn-full",children:"Delete Collection"})]})})]})]})}),o.jsx(IC,{isOpen:l,onClose:()=>c(!1),onConfirm:$,boxName:a.name,loading:x}),o.jsx(AC,{isOpen:u,onClose:()=>h(!1),onModelsAdded:W,onAddNewModel:q,box:a}),o.jsx(MC,{isOpen:d,onClose:()=>m(!1),onBoxUpdated:Y,box:a}),o.jsx(LC,{isOpen:y.isOpen,onClose:()=>C({isOpen:!1,model:null}),onConfirm:ee,modelName:((X=y.model)==null?void 0:X.name)||"",boxName:(a==null?void 0:a.name)||"",loading:S}),o.jsx(OC,{isOpen:f,onClose:()=>p(!1),onCollectionUpdated:Y,box:a})]})}function RC({isOpen:e,onClose:t}){const[n,r]=N.useState(""),[s,i]=N.useState(""),[a,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState(!1),[m,f]=N.useState(""),[p,y]=N.useState(!1),{updatePassword:C}=gt(),g=async v=>{if(v.preventDefault(),d(!0),f(""),n.length<6){f("Password must be at least 6 characters long"),d(!1);return}if(n!==s){f("Passwords do not match"),d(!1);return}try{const{error:x}=await C(n);x?f(x.message):(y(!0),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{t(),r(""),i(""),y(!1)},2e3))}catch{f("An unexpected error occurred")}finally{d(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:"Set New Password"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ee,{className:"w-6 h-6"})})]}),p?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-green-600 text-lg font-semibold mb-2",children:"Password updated successfully!"}),o.jsx("p",{className:"text-secondary-text",children:"You can now use your new password to log in."})]}):o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx("p",{className:"text-secondary-text text-sm",children:"Please set a new password for your account."}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:a?"text":"password",id:"newPassword",value:n,onChange:v=>r(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),o.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:a?o.jsx(Ec,{className:"w-4 h-4"}):o.jsx(Tc,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:c?"text":"password",id:"confirmPassword",value:s,onChange:v=>i(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:c?o.jsx(Ec,{className:"w-4 h-4"}):o.jsx(Tc,{className:"w-4 h-4"})})]})]}),m&&o.jsx("div",{className:"text-red-600 text-sm",children:m}),o.jsx("button",{type:"submit",disabled:h,className:"btn-primary btn-full",children:h?"Updating Password...":"Update Password"})]})]})}):null}function FC(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),{user:s}=gt();return N.useEffect(()=>{(async()=>{try{const a=window.location.hash,l=new URLSearchParams(window.location.search);if(a.includes("access_token")||l.has("code"))setTimeout(()=>{r(!1),window.location.href="/"},1e3);else if(a.includes("error")){const c=new URLSearchParams(a.substring(1)).get("error_description");t(c||"Authentication failed"),r(!1)}else t("Invalid authentication callback"),r(!1)}catch(a){console.error("Auth callback error:",a),t("Authentication failed"),r(!1)}})()},[]),N.useEffect(()=>{s&&!n&&(window.location.href="/")},[s,n]),n?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),o.jsx("p",{className:"text-text",children:"Completing authentication..."})]})}):e?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[o.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-2xl font-bold text-title mb-4",children:"Authentication Failed"}),o.jsx("p",{className:"text-red-500 mb-6",children:e}),o.jsx("button",{onClick:()=>window.location.href="/",className:"btn-primary",children:"Return to Home"})]})}):null}function zC({onAddModel:e,onAddCollection:t}){const[n,r]=N.useState(!1),s=()=>{r(!n)},i=()=>{r(!1),e()},a=()=>{r(!1),t()};return o.jsxs("div",{className:"fixed bottom-20 right-2 z-50",children:[n&&o.jsxs("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:[o.jsxs("button",{onClick:i,className:"flex items-center space-x-3 bg-brand hover:bg-brand-hover text-white px-8 py-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 animate-fab-slide-in-delayed",children:[o.jsx(Nn,{className:"w-8 h-8"}),o.jsx("span",{className:"text-sm font-medium",children:"Add Model"})]}),o.jsxs("button",{onClick:a,className:"flex items-center space-x-3 bg-brand hover:bg-brand-hover text-white px-8 py-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 animate-fab-slide-in",children:[o.jsx(An,{className:"w-8 h-8"}),o.jsx("span",{className:"text-sm font-medium",children:"Add Collection"})]})]}),o.jsx("button",{onClick:s,className:`w-14 h-14 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 flex items-center justify-center ${n?"bg-brand-hover text-white":"bg-brand hover:bg-brand-hover text-white"}`,children:n?o.jsx(Ee,{className:"w-6 h-6 transition-transform duration-200"}):o.jsx(Li,{className:"w-6 h-6 transition-transform duration-200"})})]})}function $C(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:a}=gt();N.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await V.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          box:boxes(
            id,
            name,
            purchase_date,
            game:games(id, name, icon, image)
          ),
          game:games(id, name, icon, image)
        `).eq("user_id",a==null?void 0:a.id).order("created_at",{ascending:!1});if(u)throw u;const h=(c||[]).map(d=>({...d,box:d.box&&Array.isArray(d.box)?d.box[0]:d.box,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch models")}finally{r(!1)}};return{models:e,loading:n,error:s,refetch:l}}function BC(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:a}=gt();N.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await V.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(id, name, icon, image)
        `).eq("user_id",a==null?void 0:a.id).order("created_at",{ascending:!1}).limit(10);if(u)throw u;const h=(c||[]).map(d=>({...d,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch boxes")}finally{r(!1)}};return{boxes:e,loading:n,error:s,refetch:l}}const Ol="2025-08-25 01:48:00 UTC",um=()=>({timestamp:Ol,date:new Date(Ol).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:new Date(Ol).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})});function UC({games:e,boxes:t,models:n,selectedBoxes:r,selectedGames:s,selectedStatuses:i,searchQuery:a,onBoxesChange:l,onGamesChange:c,onStatusesChange:u,onSearchChange:h,onClearFilters:d}){const m=r.length>0||s.length>0||i.length>0||a.length>0,f=()=>{const w=new Map;return n.forEach(E=>{if(E.box){const I=E.box.id,P=E.box.name,b=w.get(I)||{name:P,count:0};b.count++,w.set(I,b)}}),Array.from(w.entries()).map(([E,{name:I,count:P}])=>({id:E,name:I,count:P})).sort((E,I)=>I.count-E.count)},p=()=>{const w=new Map;return n.forEach(E=>{var b,T,M,O,W,q;const I=((T=(b=E.box)==null?void 0:b.game)==null?void 0:T.id)||((M=E.game)==null?void 0:M.id),P=((W=(O=E.box)==null?void 0:O.game)==null?void 0:W.name)||((q=E.game)==null?void 0:q.name);if(I&&P){const te=w.get(I)||{name:P,count:0};te.count++,w.set(I,te)}}),Array.from(w.entries()).map(([E,{name:I,count:P}])=>({id:E,name:I,count:P})).sort((E,I)=>I.count-E.count)},y=()=>{const w=new Map;return n.forEach(E=>{const I=w.get(E.status)||0;w.set(E.status,I+1)}),Array.from(w.entries()).map(([E,I])=>({status:E,count:I})).sort((E,I)=>I.count-E.count)},C=f(),g=p(),v=y(),x=w=>{const E=r.includes(w)?r.filter(I=>I!==w):[...r,w];l(E)},_=w=>{const E=s.includes(w)?s.filter(I=>I!==w):[...s,w];c(E)},S=w=>{const E=i.includes(w)?i.filter(I=>I!==w):[...i,w];u(E)};return o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ng,{className:"w-5 h-5 text-secondary-text"}),o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),m&&o.jsxs("button",{onClick:d,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[o.jsx(Ee,{className:"w-4 h-4 text-icon"}),o.jsx("span",{children:"Clear all"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Models"}),o.jsx("input",{type:"text",value:a,onChange:w=>h(w.target.value),placeholder:"Search by model name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collections"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:C.map(w=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r.includes(w.id),onChange:()=>x(w.id),className:"rounded border-border-custom text---color-brand focus:ring---color-brand"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",w.count,")"]})]},w.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:g.map(w=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.includes(w.id),onChange:()=>_(w.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",w.count,")"]})]},w.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Statuses"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:v.map(({status:w,count:E})=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.includes(w),onChange:()=>S(w),className:"rounded border-border-custom text-green-500 focus:ring-green-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",E,")"]})]},w))})]})]}),m&&o.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[a&&o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:['Search: "',a,'"']}),o.jsx("button",{onClick:()=>h(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]}),r.map(w=>{var I;const E=((I=C.find(P=>P.id===w))==null?void 0:I.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Collection: ",E]}),o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]},w)}),s.map(w=>{var I;const E=((I=g.find(P=>P.id===w))==null?void 0:I.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Game: ",E]}),o.jsx("button",{onClick:()=>_(w),className:"text-blue-600 hover:text-blue-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]},w)}),i.map(w=>o.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Status: ",w]}),o.jsx("button",{onClick:()=>S(w),className:"text-green-600 hover:text-green-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]},w))]})})]})}function HC({games:e,boxes:t,selectedGames:n,searchQuery:r,onGamesChange:s,onSearchChange:i,onClearFilters:a}){const l=n.length>0||r.length>0,u=(()=>{const d=new Map;return t.forEach(m=>{if(m.game){const f=m.game.id,p=m.game.name,y=d.get(f)||{name:p,count:0};y.count++,d.set(f,y)}}),Array.from(d.entries()).map(([m,{name:f,count:p}])=>({id:m,name:f,count:p})).sort((m,f)=>f.count-m.count)})(),h=d=>{const m=n.includes(d)?n.filter(f=>f!==d):[...n,d];s(m)};return o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ng,{className:"w-5 h-5 text-secondary-text"}),o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),l&&o.jsxs("button",{onClick:a,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[o.jsx(Ee,{className:"w-4 h-4 text-icon"}),o.jsx("span",{children:"Clear all"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Collections"}),o.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"Search by collection name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:u.map(d=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:n.includes(d.id),onChange:()=>h(d.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:d.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",d.count,")"]})]},d.id))})]})}),l&&o.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:['Search: "',r,'"']}),o.jsx("button",{onClick:()=>i(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]}),n.map(d=>{var f;const m=((f=u.find(p=>p.id===d))==null?void 0:f.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Game: ",m]}),o.jsx("button",{onClick:()=>h(d),className:"text-blue-600 hover:text-blue-800 transition-colors",children:o.jsx(Ee,{className:"w-3 h-3 text-icon"})})]},d)})]})})]})}const qC="/battleplanapp/Battleplan-Logo-Purple.svg";function WC({collectionId:e}){var S,w,E,I;const[t,n]=N.useState(null),[r,s]=N.useState([]),[i,a]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(!1),{isDarkMode:f,toggleDarkMode:p}=Zg();N.useEffect(()=>{const P=b=>{const T=b.target;d&&!T.closest(".profile-dropdown")&&m(!1)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[d]),N.useEffect(()=>{y()},[e]);const y=async()=>{try{a(!0),c(null);const{data:P,error:b}=await V.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("id",e).eq("public",!0).single();if(b){if(b.code==="PGRST116")h(!0);else throw b;return}n(P);const{data:T,error:M}=await V.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",e).order("created_at",{ascending:!1});if(M)throw M;s(T||[])}catch(P){c(P instanceof Error?P.message:"Failed to load collection")}finally{a(!1)}},C=P=>new Date(P).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),g=()=>{var b;if(!t)return"";if(t.image_url&&typeof t.image_url=="string"&&t.image_url.trim()!==""&&t.image_url!=="undefined"&&t.image_url!=="null"&&(t.image_url.startsWith("http")||t.image_url.startsWith("/")))return t.image_url;const P=(b=t.game)==null?void 0:b.image;return P&&typeof P=="string"&&P.trim()!==""&&P!=="undefined"&&P!=="null"&&P.startsWith("http")?P:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},v=P=>{var T;if(P.image_url&&typeof P.image_url=="string"&&P.image_url.trim()!==""&&P.image_url!=="undefined"&&P.image_url!=="null"&&(P.image_url.startsWith("http")||P.image_url.startsWith("/")))return{src:P.image_url,isGameFallback:!1};const b=(T=P.game)==null?void 0:T.icon;return b&&typeof b=="string"&&b.trim()!==""&&b!=="undefined"&&b!=="null"&&b.startsWith("http")?{src:b,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},x=P=>{switch(P){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},_=()=>{window.history.back()};return i?o.jsx("div",{className:"min-h-screen bg-bg-primary",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),o.jsx("div",{className:"h-64 bg-gray-200 rounded mb-8"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})}):u||l?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(_g,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-title mb-2",children:u?"Collection Not Found":"Error Loading Collection"}),o.jsx("p",{className:"text-secondary-text mb-6",children:u?"This collection may be private or no longer exists.":l||"Something went wrong while loading the collection."}),o.jsx("button",{onClick:_,className:"btn-secondary",children:o.jsx("span",{children:"Go Back"})})]})}):t?o.jsxs("div",{className:"min-h-screen bg-bg-primary",children:[o.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center"}),o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsx("img",{src:qC,alt:"Battleplan",className:"max-h-[300px] w-auto"})}),o.jsxs("div",{className:"relative profile-dropdown",children:[o.jsx("button",{onClick:()=>m(!d),className:"text-secondary-text hover:text-text focus:outline-none p-2",children:o.jsx(Nn,{className:"w-6 h-6 text-icon hover:text-icon-hover"})}),d&&o.jsxs("div",{className:"absolute right-0 top-12 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-[60] min-w-[200px]",children:[o.jsx("button",{onClick:()=>{m(!1),window.location.href="/"},className:"w-full px-4 py-2 text-left text-text hover:bg-bg-secondary transition-colors",children:o.jsx("span",{children:"Log In"})}),o.jsx("div",{className:"border-t border-border-custom my-1"}),o.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[f?o.jsx(Cg,{className:"w-5 h-5 text-icon"}):o.jsx(Eg,{className:"w-5 h-5 text-icon"}),o.jsx("span",{className:"text-base font-semibold text-text",children:f?"Dark Mode":"Light Mode"})]}),o.jsx("button",{onClick:P=>{P.stopPropagation(),p()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 ${f?"bg-brand":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]})]})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[o.jsx("div",{className:"mb-8",children:o.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:t.name})}),o.jsx("div",{className:"mb-8",children:o.jsx("img",{src:g(),alt:t.name,className:"w-full h-64 object-contain rounded-lg bg-bg-secondary",loading:"lazy",onError:P=>{const b=P.target,T="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";b.src!==T&&(b.src=T)}})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[(S=t.game)!=null&&S.icon?o.jsx("img",{src:t.game.icon,alt:`${t.game.name} icon`,className:"w-12 h-12 object-cover rounded",onError:P=>{const b=P.target;b.style.display="none";const T=b.nextElementSibling;T&&T.classList.contains("icon-fallback")&&(T.style.display="flex")},onLoad:P=>{const T=P.target.nextElementSibling;T&&T.classList.contains("icon-fallback")&&(T.style.display="none")}}):null,o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(w=t.game)!=null&&w.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:(((E=t.game)==null?void 0:E.name)||"Unknown Game").charAt(0)})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-text",children:"Game"}),o.jsx("p",{className:"text-secondary-text",children:((I=t.game)==null?void 0:I.name)||"Unknown Game"})]})]})}),t.purchase_date&&o.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(pt,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-text",children:"Purchase Date"}),o.jsx("p",{className:"text-secondary-text",children:C(t.purchase_date)})]})]})})]}),o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Si,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Models (",r.length,")"]})]})}),r.length===0?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(An,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No models in this collection."})]}):o.jsx("div",{className:"divide-y divide-border-custom",children:r.map(P=>o.jsx("div",{className:"p-6 hover:bg-bg-secondary transition-colors",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:(()=>{const b=v(P);return o.jsx("img",{src:b.src,alt:P.name,className:`w-16 h-16 object-cover rounded ${b.isGameFallback?"opacity-10":""}`,onError:T=>{const M=T.target;M.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-text mb-2",children:P.name}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-text mb-2",children:[P.count&&o.jsxs("span",{children:[P.count," model",P.count!==1?"s":""]}),P.status&&P.status!=="None"&&o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(P.status)}`,children:P.status})]}),P.notes&&o.jsx("div",{className:"text-sm text-secondary-text",children:o.jsx(bd,{remarkPlugins:[jd],className:"prose prose-sm max-w-none",components:{p:({children:b})=>o.jsx("p",{className:"mb-1 last:mb-0 text-sm text-secondary-text",children:b}),h1:({children:b})=>o.jsx("h1",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h2:({children:b})=>o.jsx("h2",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h3:({children:b})=>o.jsx("h3",{className:"text-xs font-bold mb-1 text-secondary-text",children:b}),ul:({children:b})=>o.jsx("ul",{className:"list-disc list-inside mb-1 space-y-0.5",children:b}),ol:({children:b})=>o.jsx("ol",{className:"list-decimal list-inside mb-1 space-y-0.5",children:b}),li:({children:b})=>o.jsx("li",{className:"text-sm text-secondary-text",children:b}),strong:({children:b})=>o.jsx("strong",{className:"font-semibold text-secondary-text",children:b}),em:({children:b})=>o.jsx("em",{className:"italic text-secondary-text",children:b}),code:({children:b})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:b}),pre:({children:b})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded text-xs font-mono overflow-x-auto mb-1",children:b}),blockquote:({children:b})=>o.jsx("blockquote",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-2 italic mb-1 text-secondary-text",children:b})},children:P.notes})})]})]})},P.id))})]})]})]}):null}function GC(){const e=window.location.pathname==="/auth/callback",t=window.location.pathname.match(/^\/shared\/collection\/(.+)$/),n=t?t[1]:null;if(e)return o.jsx(FC,{});if(n)return o.jsx(WC,{collectionId:n});const[r,s]=N.useState("collection"),[i,a]=N.useState("recent"),[l,c]=N.useState(1),[u,h]=N.useState(1),[d,m]=N.useState({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),[f,p]=N.useState({selectedGames:[],searchQuery:""}),[y,C]=N.useState([]),[g,v]=N.useState({isOpen:!1,mode:"login"}),[x,_]=N.useState(!1),[S,w]=N.useState(!1),[E,I]=N.useState(!1),[P,b]=N.useState(!1),[T,M]=N.useState(null),[O,W]=N.useState({isOpen:!1,model:null}),[q,te]=N.useState({isOpen:!1,box:null}),{user:ee,loading:B,needsPasswordReset:Y}=gt(),{models:k,loading:H,refetch:ne}=$C(),{boxes:j,loading:U,refetch:ae}=BC();N.useEffect(()=>{ee&&R()},[ee]);const R=async()=>{try{const{data:L,error:ue}=await V.from("games").select("id, name, icon").order("name");if(ue)throw ue;C(L||[])}catch(L){console.error("Error fetching games:",L)}},$=6,me=L=>{m(ue=>({...ue,selectedBoxes:L})),c(1)},de=L=>{m(ue=>({...ue,selectedGames:L})),c(1)},J=L=>{m(ue=>({...ue,selectedStatuses:L})),c(1)},fe=()=>{m({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),c(1)},X=L=>{p(ue=>({...ue,selectedGames:L})),h(1)},z=()=>{p({selectedGames:[],searchQuery:""}),h(1)},F=L=>{m(ue=>({...ue,searchQuery:L})),c(1)},re=L=>{p(ue=>({...ue,searchQuery:L})),h(1)},be=k.filter(L=>{var ue,Ve,$e,Qt;return!(d.searchQuery&&!L.name.toLowerCase().includes(d.searchQuery.toLowerCase())||d.selectedBoxes.length>0&&!d.selectedBoxes.includes(((ue=L.box)==null?void 0:ue.id)||"")||d.selectedGames.length>0&&!d.selectedGames.includes((($e=(Ve=L.box)==null?void 0:Ve.game)==null?void 0:$e.id)||"")&&!d.selectedGames.includes(((Qt=L.game)==null?void 0:Qt.id)||"")||d.selectedStatuses.length>0&&!d.selectedStatuses.includes(L.status))}),Q=k.filter(L=>L.status==="Painted"),le=j.filter(L=>{var ue;return!(f.searchQuery&&!L.name.toLowerCase().includes(f.searchQuery.toLowerCase())||f.selectedGames.length>0&&!f.selectedGames.includes(((ue=L.game)==null?void 0:ue.id)||""))}),ve=Math.ceil(be.length/$),Ae=Math.ceil(Q.length/$),Ne=Math.ceil(le.length/$),_e=be.slice((l-1)*$,l*$),Z=Q.slice((l-1)*$,l*$),oe=le.slice((u-1)*$,u*$),Se=()=>{ne(),ae(),M(null)},A=L=>{W({isOpen:!0,model:L})},D=L=>{te({isOpen:!0,box:L})},se=()=>{ne(),ae()},ce=async()=>{await ne(),await ae()},pe=()=>{ae(),ne()},Ge=()=>{ae(),ne()},st=L=>{M(L),_(!0)},Me=L=>{M(L),_(!0)},Ye=()=>{I(!0)};return N.useEffect(()=>{Y&&b(!0)},[Y]),B?o.jsx("div",{className:"min-h-screen bg-bg-secondary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading..."})]})}):ee?E?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{onAddModel:()=>_(!0),onAdminClick:Ye,activeTab:r,onTabChange:s}),o.jsx(M1,{onBack:()=>I(!1)}),o.jsx(Fs,{activeTab:r,onTabChange:L=>{I(!1),s(L)}})]}):r==="about"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{onAddModel:()=>_(!0),onAdminClick:Ye,activeTab:r,onTabChange:s}),o.jsx(L1,{onBack:()=>s("collection")}),o.jsx(Fs,{activeTab:r,onTabChange:s})]}):r==="all-bookings"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{onAddModel:()=>_(!0),onAdminClick:Ye,activeTab:r,onTabChange:s}),o.jsx(R1,{onBack:()=>s("collection")}),o.jsx(Fs,{activeTab:r,onTabChange:s})]}):r==="battleplan"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{onAddModel:()=>_(!0),onAdminClick:Ye,activeTab:r,onTabChange:s}),o.jsx(w1,{}),o.jsx(Fs,{activeTab:r,onTabChange:s})]}):o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{onAddModel:()=>_(!0),onAdminClick:Ye,activeTab:r,onTabChange:s}),r==="collection"&&o.jsx(x1,{activeView:i,onViewChange:a}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[i==="recent"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"mb-16",children:[k.filter(L=>L.status==="Painted").length>0&&o.jsx("div",{className:"flex flex-col items-center mb-8",children:o.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT MODELS"})}),H?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((L,ue)=>o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[o.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),o.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ue))}):Q.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Z.map(L=>{var ue,Ve,$e,Qt,it,St,Ut;return o.jsx(k1,{model:L,name:L.name,boxName:((ue=L.box)==null?void 0:ue.name)||"Unknown Collection",gameName:(($e=(Ve=L.box)==null?void 0:Ve.game)==null?void 0:$e.name)||((Qt=L.game)==null?void 0:Qt.name)||"Unknown Game",gameIcon:((St=(it=L.box)==null?void 0:it.game)==null?void 0:St.icon)||((Ut=L.game)==null?void 0:Ut.icon)||null,status:L.status,count:L.count,imageUrl:L.image_url,onViewModel:()=>A(L),onViewBox:D},L.id)})}),Ae>1&&o.jsx(da,{currentPage:l,totalPages:Ae,onPageChange:c})]})]}),o.jsxs("section",{children:[j.length>0&&o.jsx("div",{className:"flex flex-col items-center mb-8",children:o.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT COLLECTIONS"})}),U?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((L,ue)=>o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[o.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),o.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ue))}):j.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No collections in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:oe.map(L=>{var ue,Ve,$e;return o.jsx(j1,{name:L.name,gameName:((ue=L.game)==null?void 0:ue.name)||"Unknown Game",purchaseDate:L.purchase_date,imageUrl:L.image_url,gameImage:(Ve=L.game)==null?void 0:Ve.image,gameIcon:($e=L.game)==null?void 0:$e.icon,onViewBox:()=>D(L)},L.id)})}),Ne>1&&o.jsx(da,{currentPage:u,totalPages:Ne,onPageChange:h})]})]})]}),i==="collections"&&o.jsxs("section",{children:[j.length>0&&o.jsx(HC,{games:y,boxes:j,selectedGames:f.selectedGames,searchQuery:f.searchQuery,onGamesChange:X,onSearchChange:re,onClearFilters:z}),U?o.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((L,ue)=>o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),o.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ue))}):k.filter(L=>L.status==="Painted").length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:oe.map(L=>{var ue,Ve,$e,Qt;return o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>D(L),children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:(()=>{var St;if(L.image_url&&typeof L.image_url=="string"&&L.image_url.trim()!==""&&L.image_url!=="undefined"&&L.image_url!=="null"&&(L.image_url.startsWith("http")||L.image_url.startsWith("/")))return L.image_url;const it=(St=L.game)==null?void 0:St.image;return it&&typeof it=="string"&&it.trim()!==""&&it!=="undefined"&&it!=="null"&&it.startsWith("http")?it:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:L.name,className:"w-16 h-16 object-cover rounded",onError:it=>{const St=it.target,Ut="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";St.src!==Ut&&(St.src=Ut)}}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:L.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(ue=L.game)!=null&&ue.icon?o.jsx("img",{src:L.game.icon,alt:`${L.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:it=>{const St=it.target;St.style.display="none";const Ut=St.nextElementSibling;Ut&&Ut.classList.contains("icon-fallback")&&(Ut.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Ve=L.game)!=null&&Ve.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:((($e=L.game)==null?void 0:$e.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text",children:((Qt=L.game)==null?void 0:Qt.name)||"Unknown Game"})]}),L.purchase_date&&o.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Purchased: ",new Date(L.purchase_date).toLocaleDateString()]})]})]})},L.id)})}),Ne>1&&o.jsx(da,{currentPage:u,totalPages:Ne,onPageChange:h})]})]}),i==="models"&&o.jsxs("section",{children:[k.length>0&&o.jsx(UC,{games:y,boxes:j,models:k,selectedBoxes:d.selectedBoxes,selectedGames:d.selectedGames,selectedStatuses:d.selectedStatuses,searchQuery:d.searchQuery,onBoxesChange:me,onGamesChange:de,onStatusesChange:J,onSearchChange:F,onClearFilters:fe}),H?o.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((L,ue)=>o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),o.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ue))}):k.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:_e.map(L=>{var ue,Ve,$e,Qt,it,St,Ut,Sd,Nd,_d,Cd,Ed,Td,Pd,Id,Ad,Md,Ld;return o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>A(L),children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:(()=>{var Ln,xn,Od;if(L.image_url&&typeof L.image_url=="string"&&L.image_url.trim()!==""&&L.image_url!=="undefined"&&L.image_url!=="null"&&(L.image_url.startsWith("http")||L.image_url.startsWith("/")))return L.image_url;const Yt=((xn=(Ln=L.box)==null?void 0:Ln.game)==null?void 0:xn.image)||((Od=L.game)==null?void 0:Od.image);return Yt&&typeof Yt=="string"&&Yt.trim()!==""&&Yt!=="undefined"&&Yt!=="null"&&Yt.startsWith("http")?Yt:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:L.name,className:"w-16 h-16 object-cover rounded",onError:Yt=>{const Ln=Yt.target,xn="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";Ln.src!==xn&&(Ln.src=xn)}}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:L.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(Ve=(ue=L.box)==null?void 0:ue.game)!=null&&Ve.icon||($e=L.game)!=null&&$e.icon?o.jsx("img",{src:((it=(Qt=L.box)==null?void 0:Qt.game)==null?void 0:it.icon)||((St=L.game)==null?void 0:St.icon),alt:`${((Sd=(Ut=L.box)==null?void 0:Ut.game)==null?void 0:Sd.name)||((Nd=L.game)==null?void 0:Nd.name)||"Unknown Game"} icon`,className:"w-4 h-4 object-contain rounded",onError:Yt=>{const Ln=Yt.target;Ln.style.display="none";const xn=Ln.nextElementSibling;xn&&xn.classList.contains("icon-fallback")&&(xn.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Cd=(_d=L.box)==null?void 0:_d.game)!=null&&Cd.icon||(Ed=L.game)!=null&&Ed.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((Pd=(Td=L.box)==null?void 0:Td.game)==null?void 0:Pd.name)||((Id=L.game)==null?void 0:Id.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text",children:((Md=(Ad=L.box)==null?void 0:Ad.game)==null?void 0:Md.name)||((Ld=L.game)==null?void 0:Ld.name)||"Unknown Game"})]}),L.status!=="None"&&o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${(()=>{switch(L.status){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:L.status})})]})]})},L.id)})}),ve>1&&o.jsx(da,{currentPage:l,totalPages:ve,onPageChange:c})]})]})]}),o.jsx(Fs,{activeTab:r,onTabChange:s}),o.jsx(ff,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode}),o.jsx(S1,{isOpen:x,onClose:()=>_(!1),onSuccess:Se,preselectedBoxId:T}),o.jsx(N1,{isOpen:S,onClose:()=>w(!1),onSuccess:Se,onAddModelsToBox:st}),o.jsx(PC,{isOpen:O.isOpen,onClose:()=>W({isOpen:!1,model:null}),onModelDeleted:se,onModelUpdated:ce,onViewBox:D,model:O.model}),o.jsx(DC,{isOpen:q.isOpen,onClose:()=>te({isOpen:!1,box:null}),onBoxDeleted:pe,onModelsUpdated:Ge,onViewModel:A,onAddNewModel:Me,box:q.box}),o.jsx(RC,{isOpen:P,onClose:()=>b(!1)}),r==="collection"&&o.jsx(zC,{onAddModel:()=>_(!0),onAddCollection:()=>w(!0)})]}):o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx($r,{}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm p-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:"Welcome to the Mini Myths App Beta"}),o.jsxs("p",{className:"text-xs text-secondary-text mb-2",children:["Last updated: ",um().date," at ",um().time]}),o.jsxs("p",{className:"text-base text-secondary-text mb-8",children:["Track your miniatures and book a table at your favourite gaming store.",o.jsx("br",{}),o.jsx("br",{}),"Make sure to report any bugs and issues on the Discord!"]}),o.jsxs("div",{className:"flex justify-center space-x-4",children:[o.jsx("button",{onClick:()=>v({isOpen:!0,mode:"login"}),className:"btn-secondary",children:"Log In"}),o.jsx("button",{onClick:()=>v({isOpen:!0,mode:"signup"}),className:"btn-primary",children:"Sign Up"})]})]})}),o.jsx(ff,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode})]})}jg(document.getElementById("root")).render(o.jsx(N.StrictMode,{children:o.jsx(GC,{})}));
