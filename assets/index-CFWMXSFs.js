(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ty(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Cm={exports:{}},po={},Em={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=Symbol.for("react.element"),Py=Symbol.for("react.portal"),Iy=Symbol.for("react.fragment"),Ay=Symbol.for("react.strict_mode"),Dy=Symbol.for("react.profiler"),My=Symbol.for("react.provider"),Ly=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Ry=Symbol.for("react.suspense"),Fy=Symbol.for("react.memo"),zy=Symbol.for("react.lazy"),Qd=Symbol.iterator;function $y(e){return e===null||typeof e!="object"?null:(e=Qd&&e[Qd]||e["@@iterator"],typeof e=="function"?e:null)}var Tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pm=Object.assign,Im={};function Cs(e,t,n){this.props=e,this.context=t,this.refs=Im,this.updater=n||Tm}Cs.prototype.isReactComponent={};Cs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Am(){}Am.prototype=Cs.prototype;function mu(e,t,n){this.props=e,this.context=t,this.refs=Im,this.updater=n||Tm}var pu=mu.prototype=new Am;pu.constructor=mu;Pm(pu,Cs.prototype);pu.isPureReactComponent=!0;var Yd=Array.isArray,Dm=Object.prototype.hasOwnProperty,gu={current:null},Mm={key:!0,ref:!0,__self:!0,__source:!0};function Lm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Dm.call(t,r)&&!Mm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Li,type:e,key:i,ref:o,props:s,_owner:gu.current}}function By(e,t){return{$$typeof:Li,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Li}function Uy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xd=/\/+/g;function Jo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uy(""+e.key):t.toString(36)}function ka(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Li:case Py:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Jo(o,0):r,Yd(s)?(n="",e!=null&&(n=e.replace(Xd,"$&/")+"/"),ka(s,t,n,"",function(u){return u})):s!=null&&(xu(s)&&(s=By(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Yd(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Jo(i,l);o+=ka(i,t,n,c,s)}else if(c=$y(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Jo(i,l++),o+=ka(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ji(e,t,n){if(e==null)return e;var r=[],s=0;return ka(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Hy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nt={current:null},ja={transition:null},Gy={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:ja,ReactCurrentOwner:gu};function Om(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Ji,forEach:function(e,t,n){Ji(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ji(e,function(){t++}),t},toArray:function(e){return Ji(e,function(t){return t})||[]},only:function(e){if(!xu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Cs;je.Fragment=Iy;je.Profiler=Dy;je.PureComponent=mu;je.StrictMode=Ay;je.Suspense=Ry;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gy;je.act=Om;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Pm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=gu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Dm.call(t,c)&&!Mm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Li,type:e.type,key:s,ref:i,props:r,_owner:o}};je.createContext=function(e){return e={$$typeof:Ly,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:My,_context:e},e.Consumer=e};je.createElement=Lm;je.createFactory=function(e){var t=Lm.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:Oy,render:e}};je.isValidElement=xu;je.lazy=function(e){return{$$typeof:zy,_payload:{_status:-1,_result:e},_init:Hy}};je.memo=function(e,t){return{$$typeof:Fy,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=ja.transition;ja.transition={};try{e()}finally{ja.transition=t}};je.unstable_act=Om;je.useCallback=function(e,t){return Nt.current.useCallback(e,t)};je.useContext=function(e){return Nt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Nt.current.useDeferredValue(e)};je.useEffect=function(e,t){return Nt.current.useEffect(e,t)};je.useId=function(){return Nt.current.useId()};je.useImperativeHandle=function(e,t,n){return Nt.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Nt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Nt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Nt.current.useMemo(e,t)};je.useReducer=function(e,t,n){return Nt.current.useReducer(e,t,n)};je.useRef=function(e){return Nt.current.useRef(e)};je.useState=function(e){return Nt.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return Nt.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Nt.current.useTransition()};je.version="18.3.1";Em.exports=je;var N=Em.exports;const Ne=fu(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=N,Wy=Symbol.for("react.element"),Vy=Symbol.for("react.fragment"),Ky=Object.prototype.hasOwnProperty,Jy=qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qy={key:!0,ref:!0,__self:!0,__source:!0};function Rm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ky.call(t,r)&&!Qy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Wy,type:e,key:i,ref:o,props:s,_owner:Jy.current}}po.Fragment=Vy;po.jsx=Rm;po.jsxs=Rm;Cm.exports=po;var a=Cm.exports,Fm={exports:{}},Gt={},zm={exports:{}},$m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,Y){var k=z.length;z.push(Y);e:for(;0<k;){var B=k-1>>>1,re=z[B];if(0<s(re,Y))z[B]=Y,z[k]=re,k=B;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],k=z.pop();if(k!==Y){z[0]=k;e:for(var B=0,re=z.length,_=re>>>1;B<_;){var G=2*(B+1)-1,ae=z[G],O=G+1,H=z[O];if(0>s(ae,k))O<re&&0>s(H,ae)?(z[B]=H,z[O]=k,B=O):(z[B]=ae,z[G]=k,B=G);else if(O<re&&0>s(H,k))z[B]=H,z[O]=k,B=O;else break e}}return Y}function s(z,Y){var k=z.sortIndex-Y.sortIndex;return k!==0?k:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,m=3,f=!1,p=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(z){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=z)r(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(u)}}function C(z){if(b=!1,y(z),!p)if(n(c)!==null)p=!0,Z(j);else{var Y=n(u);Y!==null&&ee(C,Y.startTime-z)}}function j(z,Y){p=!1,b&&(b=!1,g(T),T=-1),f=!0;var k=m;try{for(y(Y),d=n(c);d!==null&&(!(d.expirationTime>Y)||z&&!I());){var B=d.callback;if(typeof B=="function"){d.callback=null,m=d.priorityLevel;var re=B(d.expirationTime<=Y);Y=e.unstable_now(),typeof re=="function"?d.callback=re:d===n(c)&&r(c),y(Y)}else r(c);d=n(c)}if(d!==null)var _=!0;else{var G=n(u);G!==null&&ee(C,G.startTime-Y),_=!1}return _}finally{d=null,m=k,f=!1}}var x=!1,S=null,T=-1,D=5,w=-1;function I(){return!(e.unstable_now()-w<D)}function A(){if(S!==null){var z=e.unstable_now();w=z;var Y=!0;try{Y=S(!0,z)}finally{Y?$():(x=!1,S=null)}}else x=!1}var $;if(typeof v=="function")$=function(){v(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,F=J.port2;J.port1.onmessage=A,$=function(){F.postMessage(null)}}else $=function(){E(A,0)};function Z(z){S=z,x||(x=!0,$())}function ee(z,Y){T=E(function(){z(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,Z(j))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var k=m;m=Y;try{return z()}finally{m=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var k=m;m=z;try{return Y()}finally{m=k}},e.unstable_scheduleCallback=function(z,Y,k){var B=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?B+k:B):k=B,z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=k+re,z={id:h++,callback:Y,priorityLevel:z,startTime:k,expirationTime:re,sortIndex:-1},k>B?(z.sortIndex=k,t(u,z),n(c)===null&&z===n(u)&&(b?(g(T),T=-1):b=!0,ee(C,k-B))):(z.sortIndex=re,t(c,z),p||f||(p=!0,Z(j))),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var Y=m;return function(){var k=m;m=Y;try{return z.apply(this,arguments)}finally{m=k}}}})($m);zm.exports=$m;var Yy=zm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=N,Ht=Yy;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bm=new Set,fi={};function Lr(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(fi[e]=t,e=0;e<t.length;e++)Bm.add(t[e])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wl=Object.prototype.hasOwnProperty,Zy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zd={},eh={};function eb(e){return Wl.call(eh,e)?!0:Wl.call(Zd,e)?!1:Zy.test(e)?eh[e]=!0:(Zd[e]=!0,!1)}function tb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nb(e,t,n,r){if(t===null||typeof t>"u"||tb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var yu=/[\-:]([a-z])/g;function bu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yu,bu);ut[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yu,bu);ut[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yu,bu);ut[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function vu(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nb(t,n,s,r)&&(n=null),r||s===null?eb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ln=Xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qi=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),wu=Symbol.for("react.strict_mode"),Vl=Symbol.for("react.profiler"),Um=Symbol.for("react.provider"),Hm=Symbol.for("react.context"),ku=Symbol.for("react.forward_ref"),Kl=Symbol.for("react.suspense"),Jl=Symbol.for("react.suspense_list"),ju=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),Gm=Symbol.for("react.offscreen"),th=Symbol.iterator;function Ls(e){return e===null||typeof e!="object"?null:(e=th&&e[th]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Qo;function Ws(e){if(Qo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qo=t&&t[1]||""}return`
`+Qo+e}var Yo=!1;function Xo(e,t){if(!e||Yo)return"";Yo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Yo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ws(e):""}function rb(e){switch(e.tag){case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return e=Xo(e.type,!1),e;case 11:return e=Xo(e.type.render,!1),e;case 1:return e=Xo(e.type,!0),e;default:return""}}function Ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zr:return"Fragment";case Xr:return"Portal";case Vl:return"Profiler";case wu:return"StrictMode";case Kl:return"Suspense";case Jl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hm:return(e.displayName||"Context")+".Consumer";case Um:return(e._context.displayName||"Context")+".Provider";case ku:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ju:return t=e.displayName||null,t!==null?t:Ql(e.type)||"Memo";case Gn:t=e._payload,e=e._init;try{return Ql(e(t))}catch{}}return null}function sb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ql(t);case 8:return t===wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ib(e){var t=qm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yi(e){e._valueTracker||(e._valueTracker=ib(e))}function Wm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yl(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vm(e,t){t=t.checked,t!=null&&vu(e,"checked",t,!1)}function Xl(e,t){Vm(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zl(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zl(e,t,n){(t!=="number"||Oa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vs=Array.isArray;function us(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ec(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(Vs(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function Km(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ih(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xi,Qm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ab=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(e){ab.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ys[t]=Ys[e]})});function Ym(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ys.hasOwnProperty(e)&&Ys[e]?(""+t).trim():t+"px"}function Xm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ym(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ob=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(e,t){if(t){if(ob[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function rc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function Nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ic=null,ds=null,hs=null;function ah(e){if(e=Fi(e)){if(typeof ic!="function")throw Error(W(280));var t=e.stateNode;t&&(t=vo(t),ic(e.stateNode,e.type,t))}}function Zm(e){ds?hs?hs.push(e):hs=[e]:ds=e}function ep(){if(ds){var e=ds,t=hs;if(hs=ds=null,ah(e),t)for(e=0;e<t.length;e++)ah(t[e])}}function tp(e,t){return e(t)}function np(){}var Zo=!1;function rp(e,t,n){if(Zo)return e(t,n);Zo=!0;try{return tp(e,t,n)}finally{Zo=!1,(ds!==null||hs!==null)&&(np(),ep())}}function pi(e,t){var n=e.stateNode;if(n===null)return null;var r=vo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var ac=!1;if(Pn)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){ac=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{ac=!1}function lb(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Xs=!1,Ra=null,Fa=!1,oc=null,cb={onError:function(e){Xs=!0,Ra=e}};function ub(e,t,n,r,s,i,o,l,c){Xs=!1,Ra=null,lb.apply(cb,arguments)}function db(e,t,n,r,s,i,o,l,c){if(ub.apply(this,arguments),Xs){if(Xs){var u=Ra;Xs=!1,Ra=null}else throw Error(W(198));Fa||(Fa=!0,oc=u)}}function Or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function sp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oh(e){if(Or(e)!==e)throw Error(W(188))}function hb(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return oh(s),e;if(i===r)return oh(s),t;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function ip(e){return e=hb(e),e!==null?ap(e):null}function ap(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ap(e);if(t!==null)return t;e=e.sibling}return null}var op=Ht.unstable_scheduleCallback,lh=Ht.unstable_cancelCallback,fb=Ht.unstable_shouldYield,mb=Ht.unstable_requestPaint,Ve=Ht.unstable_now,pb=Ht.unstable_getCurrentPriorityLevel,Su=Ht.unstable_ImmediatePriority,lp=Ht.unstable_UserBlockingPriority,za=Ht.unstable_NormalPriority,gb=Ht.unstable_LowPriority,cp=Ht.unstable_IdlePriority,go=null,yn=null;function xb(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(go,e,void 0,(e.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:vb,yb=Math.log,bb=Math.LN2;function vb(e){return e>>>=0,e===0?32:31-(yb(e)/bb|0)|0}var Zi=64,ea=4194304;function Ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $a(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ks(l):(i&=o,i!==0&&(r=Ks(i)))}else o=n&~s,o!==0?r=Ks(o):i!==0&&(r=Ks(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-cn(t),s=1<<n,r|=e[n],t&=~s;return r}function wb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-cn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=wb(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function lc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function up(){var e=Zi;return Zi<<=1,!(Zi&4194240)&&(Zi=64),e}function el(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cn(t),e[t]=n}function jb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-cn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function _u(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-cn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function dp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hp,Cu,fp,mp,pp,cc=!1,ta=[],Yn=null,Xn=null,Zn=null,gi=new Map,xi=new Map,Wn=[],Nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ch(e,t){switch(e){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(t.pointerId)}}function Rs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Fi(t),t!==null&&Cu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Sb(e,t,n,r,s){switch(t){case"focusin":return Yn=Rs(Yn,e,t,n,r,s),!0;case"dragenter":return Xn=Rs(Xn,e,t,n,r,s),!0;case"mouseover":return Zn=Rs(Zn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return gi.set(i,Rs(gi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xi.set(i,Rs(xi.get(i)||null,e,t,n,r,s)),!0}return!1}function gp(e){var t=kr(e.target);if(t!==null){var n=Or(t);if(n!==null){if(t=n.tag,t===13){if(t=sp(n),t!==null){e.blockedOn=t,pp(e.priority,function(){fp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Na(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);sc=r,n.target.dispatchEvent(r),sc=null}else return t=Fi(n),t!==null&&Cu(t),e.blockedOn=n,!1;t.shift()}return!0}function uh(e,t,n){Na(e)&&n.delete(t)}function _b(){cc=!1,Yn!==null&&Na(Yn)&&(Yn=null),Xn!==null&&Na(Xn)&&(Xn=null),Zn!==null&&Na(Zn)&&(Zn=null),gi.forEach(uh),xi.forEach(uh)}function Fs(e,t){e.blockedOn===t&&(e.blockedOn=null,cc||(cc=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,_b)))}function yi(e){function t(s){return Fs(s,e)}if(0<ta.length){Fs(ta[0],e);for(var n=1;n<ta.length;n++){var r=ta[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yn!==null&&Fs(Yn,e),Xn!==null&&Fs(Xn,e),Zn!==null&&Fs(Zn,e),gi.forEach(t),xi.forEach(t),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)gp(n),n.blockedOn===null&&Wn.shift()}var fs=Ln.ReactCurrentBatchConfig,Ba=!0;function Cb(e,t,n,r){var s=Pe,i=fs.transition;fs.transition=null;try{Pe=1,Eu(e,t,n,r)}finally{Pe=s,fs.transition=i}}function Eb(e,t,n,r){var s=Pe,i=fs.transition;fs.transition=null;try{Pe=4,Eu(e,t,n,r)}finally{Pe=s,fs.transition=i}}function Eu(e,t,n,r){if(Ba){var s=uc(e,t,n,r);if(s===null)ul(e,t,r,Ua,n),ch(e,r);else if(Sb(s,e,t,n,r))r.stopPropagation();else if(ch(e,r),t&4&&-1<Nb.indexOf(e)){for(;s!==null;){var i=Fi(s);if(i!==null&&hp(i),i=uc(e,t,n,r),i===null&&ul(e,t,r,Ua,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ul(e,t,r,null,n)}}var Ua=null;function uc(e,t,n,r){if(Ua=null,e=Nu(r),e=kr(e),e!==null)if(t=Or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=sp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ua=e,null}function xp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pb()){case Su:return 1;case lp:return 4;case za:case gb:return 16;case cp:return 536870912;default:return 16}default:return 16}}var Jn=null,Tu=null,Sa=null;function yp(){if(Sa)return Sa;var e,t=Tu,n=t.length,r,s="value"in Jn?Jn.value:Jn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Sa=s.slice(e,1<r?1-r:void 0)}function _a(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function dh(){return!1}function qt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?na:dh,this.isPropagationStopped=dh,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=qt(Es),Ri=qe({},Es,{view:0,detail:0}),Tb=qt(Ri),tl,nl,zs,xo=qe({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zs&&(zs&&e.type==="mousemove"?(tl=e.screenX-zs.screenX,nl=e.screenY-zs.screenY):nl=tl=0,zs=e),tl)},movementY:function(e){return"movementY"in e?e.movementY:nl}}),hh=qt(xo),Pb=qe({},xo,{dataTransfer:0}),Ib=qt(Pb),Ab=qe({},Ri,{relatedTarget:0}),rl=qt(Ab),Db=qe({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Mb=qt(Db),Lb=qe({},Es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ob=qt(Lb),Rb=qe({},Es,{data:0}),fh=qt(Rb),Fb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$b[e])?!!t[e]:!1}function Iu(){return Bb}var Ub=qe({},Ri,{key:function(e){if(e.key){var t=Fb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hb=qt(Ub),Gb=qe({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mh=qt(Gb),qb=qe({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),Wb=qt(qb),Vb=qe({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kb=qt(Vb),Jb=qe({},xo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qb=qt(Jb),Yb=[9,13,27,32],Au=Pn&&"CompositionEvent"in window,Zs=null;Pn&&"documentMode"in document&&(Zs=document.documentMode);var Xb=Pn&&"TextEvent"in window&&!Zs,bp=Pn&&(!Au||Zs&&8<Zs&&11>=Zs),ph=" ",gh=!1;function vp(e,t){switch(e){case"keyup":return Yb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function Zb(e,t){switch(e){case"compositionend":return wp(t);case"keypress":return t.which!==32?null:(gh=!0,ph);case"textInput":return e=t.data,e===ph&&gh?null:e;default:return null}}function e0(e,t){if(es)return e==="compositionend"||!Au&&vp(e,t)?(e=yp(),Sa=Tu=Jn=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bp&&t.locale!=="ko"?null:t.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t0[e.type]:t==="textarea"}function kp(e,t,n,r){Zm(r),t=Ha(t,"onChange"),0<t.length&&(n=new Pu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ei=null,bi=null;function n0(e){Dp(e,0)}function yo(e){var t=rs(e);if(Wm(t))return e}function r0(e,t){if(e==="change")return t}var jp=!1;if(Pn){var sl;if(Pn){var il="oninput"in document;if(!il){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),il=typeof yh.oninput=="function"}sl=il}else sl=!1;jp=sl&&(!document.documentMode||9<document.documentMode)}function bh(){ei&&(ei.detachEvent("onpropertychange",Np),bi=ei=null)}function Np(e){if(e.propertyName==="value"&&yo(bi)){var t=[];kp(t,bi,e,Nu(e)),rp(n0,t)}}function s0(e,t,n){e==="focusin"?(bh(),ei=t,bi=n,ei.attachEvent("onpropertychange",Np)):e==="focusout"&&bh()}function i0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yo(bi)}function a0(e,t){if(e==="click")return yo(t)}function o0(e,t){if(e==="input"||e==="change")return yo(t)}function l0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:l0;function vi(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wl.call(t,s)||!hn(e[s],t[s]))return!1}return!0}function vh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wh(e,t){var n=vh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vh(n)}}function Sp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(){for(var e=window,t=Oa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oa(e.document)}return t}function Du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function c0(e){var t=_p(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Sp(n.ownerDocument.documentElement,n)){if(r!==null&&Du(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=wh(n,i);var o=wh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u0=Pn&&"documentMode"in document&&11>=document.documentMode,ts=null,dc=null,ti=null,hc=!1;function kh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hc||ts==null||ts!==Oa(r)||(r=ts,"selectionStart"in r&&Du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ti&&vi(ti,r)||(ti=r,r=Ha(dc,"onSelect"),0<r.length&&(t=new Pu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ts)))}function ra(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ns={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionend:ra("Transition","TransitionEnd")},al={},Cp={};Pn&&(Cp=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function bo(e){if(al[e])return al[e];if(!ns[e])return e;var t=ns[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Cp)return al[e]=t[n];return e}var Ep=bo("animationend"),Tp=bo("animationiteration"),Pp=bo("animationstart"),Ip=bo("transitionend"),Ap=new Map,jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,t){Ap.set(e,t),Lr(t,[e])}for(var ol=0;ol<jh.length;ol++){var ll=jh[ol],d0=ll.toLowerCase(),h0=ll[0].toUpperCase()+ll.slice(1);lr(d0,"on"+h0)}lr(Ep,"onAnimationEnd");lr(Tp,"onAnimationIteration");lr(Pp,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(Ip,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function Nh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,db(r,t,void 0,e),e.currentTarget=null}function Dp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Nh(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Nh(s,l,u),i=c}}}if(Fa)throw e=oc,Fa=!1,oc=null,e}function ze(e,t){var n=t[xc];n===void 0&&(n=t[xc]=new Set);var r=e+"__bubble";n.has(r)||(Mp(t,e,2,!1),n.add(r))}function cl(e,t,n){var r=0;t&&(r|=4),Mp(n,e,r,t)}var sa="_reactListening"+Math.random().toString(36).slice(2);function wi(e){if(!e[sa]){e[sa]=!0,Bm.forEach(function(n){n!=="selectionchange"&&(f0.has(n)||cl(n,!1,e),cl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sa]||(t[sa]=!0,cl("selectionchange",!1,t))}}function Mp(e,t,n,r){switch(xp(t)){case 1:var s=Cb;break;case 4:s=Eb;break;default:s=Eu}n=s.bind(null,t,n,e),s=void 0,!ac||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ul(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=kr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}rp(function(){var u=i,h=Nu(n),d=[];e:{var m=Ap.get(e);if(m!==void 0){var f=Pu,p=e;switch(e){case"keypress":if(_a(n)===0)break e;case"keydown":case"keyup":f=Hb;break;case"focusin":p="focus",f=rl;break;case"focusout":p="blur",f=rl;break;case"beforeblur":case"afterblur":f=rl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Wb;break;case Ep:case Tp:case Pp:f=Mb;break;case Ip:f=Kb;break;case"scroll":f=Tb;break;case"wheel":f=Qb;break;case"copy":case"cut":case"paste":f=Ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mh}var b=(t&4)!==0,E=!b&&e==="scroll",g=b?m!==null?m+"Capture":null:m;b=[];for(var v=u,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,g!==null&&(C=pi(v,g),C!=null&&b.push(ki(v,C,y)))),E)break;v=v.return}0<b.length&&(m=new f(m,p,null,n,h),d.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==sc&&(p=n.relatedTarget||n.fromElement)&&(kr(p)||p[In]))break e;if((f||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?kr(p):null,p!==null&&(E=Or(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(b=hh,C="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(b=mh,C="onPointerLeave",g="onPointerEnter",v="pointer"),E=f==null?m:rs(f),y=p==null?m:rs(p),m=new b(C,v+"leave",f,n,h),m.target=E,m.relatedTarget=y,C=null,kr(h)===u&&(b=new b(g,v+"enter",p,n,h),b.target=y,b.relatedTarget=E,C=b),E=C,f&&p)t:{for(b=f,g=p,v=0,y=b;y;y=Br(y))v++;for(y=0,C=g;C;C=Br(C))y++;for(;0<v-y;)b=Br(b),v--;for(;0<y-v;)g=Br(g),y--;for(;v--;){if(b===g||g!==null&&b===g.alternate)break t;b=Br(b),g=Br(g)}b=null}else b=null;f!==null&&Sh(d,m,f,b,!1),p!==null&&E!==null&&Sh(d,E,p,b,!0)}}e:{if(m=u?rs(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var j=r0;else if(xh(m))if(jp)j=o0;else{j=i0;var x=s0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=a0);if(j&&(j=j(e,u))){kp(d,j,n,h);break e}x&&x(e,m,u),e==="focusout"&&(x=m._wrapperState)&&x.controlled&&m.type==="number"&&Zl(m,"number",m.value)}switch(x=u?rs(u):window,e){case"focusin":(xh(x)||x.contentEditable==="true")&&(ts=x,dc=u,ti=null);break;case"focusout":ti=dc=ts=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,kh(d,n,h);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":kh(d,n,h)}var S;if(Au)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else es?vp(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(bp&&n.locale!=="ko"&&(es||T!=="onCompositionStart"?T==="onCompositionEnd"&&es&&(S=yp()):(Jn=h,Tu="value"in Jn?Jn.value:Jn.textContent,es=!0)),x=Ha(u,T),0<x.length&&(T=new fh(T,e,null,n,h),d.push({event:T,listeners:x}),S?T.data=S:(S=wp(n),S!==null&&(T.data=S)))),(S=Xb?Zb(e,n):e0(e,n))&&(u=Ha(u,"onBeforeInput"),0<u.length&&(h=new fh("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=S))}Dp(d,t)})}function ki(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ha(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pi(e,n),i!=null&&r.unshift(ki(e,i,s)),i=pi(e,t),i!=null&&r.push(ki(e,i,s))),e=e.return}return r}function Br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sh(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=pi(n,i),c!=null&&o.unshift(ki(n,c,l))):s||(c=pi(n,i),c!=null&&o.push(ki(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var m0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function _h(e){return(typeof e=="string"?e:""+e).replace(m0,`
`).replace(p0,"")}function ia(e,t,n){if(t=_h(t),_h(e)!==t&&n)throw Error(W(425))}function Ga(){}var fc=null,mc=null;function pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(e){return Ch.resolve(null).then(e).catch(y0)}:gc;function y0(e){setTimeout(function(){throw e})}function dl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),yi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yi(t)}function er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),xn="__reactFiber$"+Ts,ji="__reactProps$"+Ts,In="__reactContainer$"+Ts,xc="__reactEvents$"+Ts,b0="__reactListeners$"+Ts,v0="__reactHandles$"+Ts;function kr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Eh(e);e!==null;){if(n=e[xn])return n;e=Eh(e)}return t}e=n,n=e.parentNode}return null}function Fi(e){return e=e[xn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function vo(e){return e[ji]||null}var yc=[],ss=-1;function cr(e){return{current:e}}function $e(e){0>ss||(e.current=yc[ss],yc[ss]=null,ss--)}function Fe(e,t){ss++,yc[ss]=e.current,e.current=t}var or={},yt=cr(or),Mt=cr(!1),Cr=or;function ys(e,t){var n=e.type.contextTypes;if(!n)return or;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(e){return e=e.childContextTypes,e!=null}function qa(){$e(Mt),$e(yt)}function Th(e,t,n){if(yt.current!==or)throw Error(W(168));Fe(yt,t),Fe(Mt,n)}function Lp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(W(108,sb(e)||"Unknown",s));return qe({},n,r)}function Wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,Cr=yt.current,Fe(yt,e),Fe(Mt,Mt.current),!0}function Ph(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=Lp(e,t,Cr),r.__reactInternalMemoizedMergedChildContext=e,$e(Mt),$e(yt),Fe(yt,e)):$e(Mt),Fe(Mt,n)}var _n=null,wo=!1,hl=!1;function Op(e){_n===null?_n=[e]:_n.push(e)}function w0(e){wo=!0,Op(e)}function ur(){if(!hl&&_n!==null){hl=!0;var e=0,t=Pe;try{var n=_n;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_n=null,wo=!1}catch(s){throw _n!==null&&(_n=_n.slice(e+1)),op(Su,ur),s}finally{Pe=t,hl=!1}}return null}var is=[],as=0,Va=null,Ka=0,Vt=[],Kt=0,Er=null,Cn=1,En="";function xr(e,t){is[as++]=Ka,is[as++]=Va,Va=e,Ka=t}function Rp(e,t,n){Vt[Kt++]=Cn,Vt[Kt++]=En,Vt[Kt++]=Er,Er=e;var r=Cn;e=En;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var i=32-cn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cn=1<<32-cn(t)+s|n<<s|r,En=i+e}else Cn=1<<i|n<<s|r,En=e}function Mu(e){e.return!==null&&(xr(e,1),Rp(e,1,0))}function Lu(e){for(;e===Va;)Va=is[--as],is[as]=null,Ka=is[--as],is[as]=null;for(;e===Er;)Er=Vt[--Kt],Vt[Kt]=null,En=Vt[--Kt],Vt[Kt]=null,Cn=Vt[--Kt],Vt[Kt]=null}var Bt=null,$t=null,Be=!1,ln=null;function Fp(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ih(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bt=e,$t=er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bt=e,$t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Er!==null?{id:Cn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bt=e,$t=null,!0):!1;default:return!1}}function bc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vc(e){if(Be){var t=$t;if(t){var n=t;if(!Ih(e,t)){if(bc(e))throw Error(W(418));t=er(n.nextSibling);var r=Bt;t&&Ih(e,t)?Fp(r,n):(e.flags=e.flags&-4097|2,Be=!1,Bt=e)}}else{if(bc(e))throw Error(W(418));e.flags=e.flags&-4097|2,Be=!1,Bt=e}}}function Ah(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bt=e}function aa(e){if(e!==Bt)return!1;if(!Be)return Ah(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pc(e.type,e.memoizedProps)),t&&(t=$t)){if(bc(e))throw zp(),Error(W(418));for(;t;)Fp(e,t),t=er(t.nextSibling)}if(Ah(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$t=er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$t=null}}else $t=Bt?er(e.stateNode.nextSibling):null;return!0}function zp(){for(var e=$t;e;)e=er(e.nextSibling)}function bs(){$t=Bt=null,Be=!1}function Ou(e){ln===null?ln=[e]:ln.push(e)}var k0=Ln.ReactCurrentBatchConfig;function $s(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function oa(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dh(e){var t=e._init;return t(e._payload)}function $p(e){function t(g,v){if(e){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=sr(g,v),g.index=0,g.sibling=null,g}function i(g,v,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,v,y,C){return v===null||v.tag!==6?(v=bl(y,g.mode,C),v.return=g,v):(v=s(v,y),v.return=g,v)}function c(g,v,y,C){var j=y.type;return j===Zr?h(g,v,y.props.children,C,y.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gn&&Dh(j)===v.type)?(C=s(v,y.props),C.ref=$s(g,v,y),C.return=g,C):(C=Da(y.type,y.key,y.props,null,g.mode,C),C.ref=$s(g,v,y),C.return=g,C)}function u(g,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=vl(y,g.mode,C),v.return=g,v):(v=s(v,y.children||[]),v.return=g,v)}function h(g,v,y,C,j){return v===null||v.tag!==7?(v=_r(y,g.mode,C,j),v.return=g,v):(v=s(v,y),v.return=g,v)}function d(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bl(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qi:return y=Da(v.type,v.key,v.props,null,g.mode,y),y.ref=$s(g,null,v),y.return=g,y;case Xr:return v=vl(v,g.mode,y),v.return=g,v;case Gn:var C=v._init;return d(g,C(v._payload),y)}if(Vs(v)||Ls(v))return v=_r(v,g.mode,y,null),v.return=g,v;oa(g,v)}return null}function m(g,v,y,C){var j=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:l(g,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qi:return y.key===j?c(g,v,y,C):null;case Xr:return y.key===j?u(g,v,y,C):null;case Gn:return j=y._init,m(g,v,j(y._payload),C)}if(Vs(y)||Ls(y))return j!==null?null:h(g,v,y,C,null);oa(g,y)}return null}function f(g,v,y,C,j){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(y)||null,l(v,g,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Qi:return g=g.get(C.key===null?y:C.key)||null,c(v,g,C,j);case Xr:return g=g.get(C.key===null?y:C.key)||null,u(v,g,C,j);case Gn:var x=C._init;return f(g,v,y,x(C._payload),j)}if(Vs(C)||Ls(C))return g=g.get(y)||null,h(v,g,C,j,null);oa(v,C)}return null}function p(g,v,y,C){for(var j=null,x=null,S=v,T=v=0,D=null;S!==null&&T<y.length;T++){S.index>T?(D=S,S=null):D=S.sibling;var w=m(g,S,y[T],C);if(w===null){S===null&&(S=D);break}e&&S&&w.alternate===null&&t(g,S),v=i(w,v,T),x===null?j=w:x.sibling=w,x=w,S=D}if(T===y.length)return n(g,S),Be&&xr(g,T),j;if(S===null){for(;T<y.length;T++)S=d(g,y[T],C),S!==null&&(v=i(S,v,T),x===null?j=S:x.sibling=S,x=S);return Be&&xr(g,T),j}for(S=r(g,S);T<y.length;T++)D=f(S,g,T,y[T],C),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?T:D.key),v=i(D,v,T),x===null?j=D:x.sibling=D,x=D);return e&&S.forEach(function(I){return t(g,I)}),Be&&xr(g,T),j}function b(g,v,y,C){var j=Ls(y);if(typeof j!="function")throw Error(W(150));if(y=j.call(y),y==null)throw Error(W(151));for(var x=j=null,S=v,T=v=0,D=null,w=y.next();S!==null&&!w.done;T++,w=y.next()){S.index>T?(D=S,S=null):D=S.sibling;var I=m(g,S,w.value,C);if(I===null){S===null&&(S=D);break}e&&S&&I.alternate===null&&t(g,S),v=i(I,v,T),x===null?j=I:x.sibling=I,x=I,S=D}if(w.done)return n(g,S),Be&&xr(g,T),j;if(S===null){for(;!w.done;T++,w=y.next())w=d(g,w.value,C),w!==null&&(v=i(w,v,T),x===null?j=w:x.sibling=w,x=w);return Be&&xr(g,T),j}for(S=r(g,S);!w.done;T++,w=y.next())w=f(S,g,T,w.value,C),w!==null&&(e&&w.alternate!==null&&S.delete(w.key===null?T:w.key),v=i(w,v,T),x===null?j=w:x.sibling=w,x=w);return e&&S.forEach(function(A){return t(g,A)}),Be&&xr(g,T),j}function E(g,v,y,C){if(typeof y=="object"&&y!==null&&y.type===Zr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qi:e:{for(var j=y.key,x=v;x!==null;){if(x.key===j){if(j=y.type,j===Zr){if(x.tag===7){n(g,x.sibling),v=s(x,y.props.children),v.return=g,g=v;break e}}else if(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gn&&Dh(j)===x.type){n(g,x.sibling),v=s(x,y.props),v.ref=$s(g,x,y),v.return=g,g=v;break e}n(g,x);break}else t(g,x);x=x.sibling}y.type===Zr?(v=_r(y.props.children,g.mode,C,y.key),v.return=g,g=v):(C=Da(y.type,y.key,y.props,null,g.mode,C),C.ref=$s(g,v,y),C.return=g,g=C)}return o(g);case Xr:e:{for(x=y.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(g,v.sibling),v=s(v,y.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=vl(y,g.mode,C),v.return=g,g=v}return o(g);case Gn:return x=y._init,E(g,v,x(y._payload),C)}if(Vs(y))return p(g,v,y,C);if(Ls(y))return b(g,v,y,C);oa(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,y),v.return=g,g=v):(n(g,v),v=bl(y,g.mode,C),v.return=g,g=v),o(g)):n(g,v)}return E}var vs=$p(!0),Bp=$p(!1),Ja=cr(null),Qa=null,os=null,Ru=null;function Fu(){Ru=os=Qa=null}function zu(e){var t=Ja.current;$e(Ja),e._currentValue=t}function wc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ms(e,t){Qa=e,Ru=os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dt=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Ru!==e)if(e={context:e,memoizedValue:t,next:null},os===null){if(Qa===null)throw Error(W(308));os=e,Qa.dependencies={lanes:0,firstContext:e}}else os=os.next=e;return t}var jr=null;function $u(e){jr===null?jr=[e]:jr.push(e)}function Up(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,$u(t)):(n.next=s.next,s.next=n),t.interleaved=n,An(e,r)}function An(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qn=!1;function Bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,An(e,n)}return s=r.interleaved,s===null?(t.next=t,$u(r)):(t.next=s.next,s.next=t),r.interleaved=t,An(e,n)}function Ca(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_u(e,n)}}function Mh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ya(e,t,n,r){var s=e.updateQueue;qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,b=l;switch(m=t,f=n,b.tag){case 1:if(p=b.payload,typeof p=="function"){d=p.call(f,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,m=typeof p=="function"?p.call(f,d,m):p,m==null)break e;d=qe({},d,m);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=f,c=d):h=h.next=f,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Pr|=o,e.lanes=o,e.memoizedState=d}}function Lh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var zi={},bn=cr(zi),Ni=cr(zi),Si=cr(zi);function Nr(e){if(e===zi)throw Error(W(174));return e}function Uu(e,t){switch(Fe(Si,t),Fe(Ni,e),Fe(bn,zi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tc(t,e)}$e(bn),Fe(bn,t)}function ws(){$e(bn),$e(Ni),$e(Si)}function Gp(e){Nr(Si.current);var t=Nr(bn.current),n=tc(t,e.type);t!==n&&(Fe(Ni,e),Fe(bn,n))}function Hu(e){Ni.current===e&&($e(bn),$e(Ni))}var He=cr(0);function Xa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fl=[];function Gu(){for(var e=0;e<fl.length;e++)fl[e]._workInProgressVersionPrimary=null;fl.length=0}var Ea=Ln.ReactCurrentDispatcher,ml=Ln.ReactCurrentBatchConfig,Tr=0,Ge=null,et=null,st=null,Za=!1,ni=!1,_i=0,j0=0;function ft(){throw Error(W(321))}function qu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hn(e[n],t[n]))return!1;return!0}function Wu(e,t,n,r,s,i){if(Tr=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ea.current=e===null||e.memoizedState===null?C0:E0,e=n(r,s),ni){i=0;do{if(ni=!1,_i=0,25<=i)throw Error(W(301));i+=1,st=et=null,t.updateQueue=null,Ea.current=T0,e=n(r,s)}while(ni)}if(Ea.current=eo,t=et!==null&&et.next!==null,Tr=0,st=et=Ge=null,Za=!1,t)throw Error(W(300));return e}function Vu(){var e=_i!==0;return _i=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ge.memoizedState=st=e:st=st.next=e,st}function Zt(){if(et===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=st===null?Ge.memoizedState:st.next;if(t!==null)st=t,et=e;else{if(e===null)throw Error(W(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},st===null?Ge.memoizedState=st=e:st=st.next=e}return st}function Ci(e,t){return typeof t=="function"?t(e):t}function pl(e){var t=Zt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Tr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,Ge.lanes|=h,Pr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,hn(r,t.memoizedState)||(Dt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ge.lanes|=i,Pr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gl(e){var t=Zt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);hn(i,t.memoizedState)||(Dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function qp(){}function Wp(e,t){var n=Ge,r=Zt(),s=t(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,Ku(Jp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Ei(9,Kp.bind(null,n,r,s,t),void 0,null),it===null)throw Error(W(349));Tr&30||Vp(n,t,s)}return s}function Vp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Kp(e,t,n,r){t.value=n,t.getSnapshot=r,Qp(t)&&Yp(e)}function Jp(e,t,n){return n(function(){Qp(t)&&Yp(e)})}function Qp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hn(e,n)}catch{return!0}}function Yp(e){var t=An(e,1);t!==null&&un(t,e,1,-1)}function Oh(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t.queue=e,e=e.dispatch=_0.bind(null,Ge,e),[t.memoizedState,e]}function Ei(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Xp(){return Zt().memoizedState}function Ta(e,t,n,r){var s=mn();Ge.flags|=e,s.memoizedState=Ei(1|t,n,void 0,r===void 0?null:r)}function ko(e,t,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(et!==null){var o=et.memoizedState;if(i=o.destroy,r!==null&&qu(r,o.deps)){s.memoizedState=Ei(t,n,i,r);return}}Ge.flags|=e,s.memoizedState=Ei(1|t,n,i,r)}function Rh(e,t){return Ta(8390656,8,e,t)}function Ku(e,t){return ko(2048,8,e,t)}function Zp(e,t){return ko(4,2,e,t)}function eg(e,t){return ko(4,4,e,t)}function tg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ng(e,t,n){return n=n!=null?n.concat([e]):null,ko(4,4,tg.bind(null,t,e),n)}function Ju(){}function rg(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sg(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ig(e,t,n){return Tr&21?(hn(n,t)||(n=up(),Ge.lanes|=n,Pr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=n)}function N0(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=ml.transition;ml.transition={};try{e(!1),t()}finally{Pe=n,ml.transition=r}}function ag(){return Zt().memoizedState}function S0(e,t,n){var r=rr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},og(e))lg(t,n);else if(n=Up(e,t,n,r),n!==null){var s=jt();un(n,e,r,s),cg(n,t,r)}}function _0(e,t,n){var r=rr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(og(e))lg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var c=t.interleaved;c===null?(s.next=s,$u(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Up(e,t,s,r),n!==null&&(s=jt(),un(n,e,r,s),cg(n,t,r))}}function og(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function lg(e,t){ni=Za=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_u(e,n)}}var eo={readContext:Xt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},C0={readContext:Xt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Rh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ta(4194308,4,tg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ta(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=S0.bind(null,Ge,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Oh,useDebugValue:Ju,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Oh(!1),t=e[0];return e=N0.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ge,s=mn();if(Be){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),it===null)throw Error(W(349));Tr&30||Vp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Rh(Jp.bind(null,r,i,e),[e]),r.flags|=2048,Ei(9,Kp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=mn(),t=it.identifierPrefix;if(Be){var n=En,r=Cn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_i++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=j0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},E0={readContext:Xt,useCallback:rg,useContext:Xt,useEffect:Ku,useImperativeHandle:ng,useInsertionEffect:Zp,useLayoutEffect:eg,useMemo:sg,useReducer:pl,useRef:Xp,useState:function(){return pl(Ci)},useDebugValue:Ju,useDeferredValue:function(e){var t=Zt();return ig(t,et.memoizedState,e)},useTransition:function(){var e=pl(Ci)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:qp,useSyncExternalStore:Wp,useId:ag,unstable_isNewReconciler:!1},T0={readContext:Xt,useCallback:rg,useContext:Xt,useEffect:Ku,useImperativeHandle:ng,useInsertionEffect:Zp,useLayoutEffect:eg,useMemo:sg,useReducer:gl,useRef:Xp,useState:function(){return gl(Ci)},useDebugValue:Ju,useDeferredValue:function(e){var t=Zt();return et===null?t.memoizedState=e:ig(t,et.memoizedState,e)},useTransition:function(){var e=gl(Ci)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:qp,useSyncExternalStore:Wp,useId:ag,unstable_isNewReconciler:!1};function sn(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function kc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jo={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),s=rr(e),i=Tn(r,s);i.payload=t,n!=null&&(i.callback=n),t=tr(e,i,s),t!==null&&(un(t,e,s,r),Ca(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),s=rr(e),i=Tn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=tr(e,i,s),t!==null&&(un(t,e,s,r),Ca(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=rr(e),s=Tn(n,r);s.tag=2,t!=null&&(s.callback=t),t=tr(e,s,r),t!==null&&(un(t,e,r,n),Ca(t,e,r))}};function Fh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!vi(n,r)||!vi(s,i):!0}function ug(e,t,n){var r=!1,s=or,i=t.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Lt(t)?Cr:yt.current,r=t.contextTypes,i=(r=r!=null)?ys(e,s):or),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function zh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function jc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Bu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Lt(t)?Cr:yt.current,s.context=ys(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(kc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&jo.enqueueReplaceState(s,s.state,null),Ya(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ks(e,t){try{var n="",r=t;do n+=rb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function xl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var P0=typeof WeakMap=="function"?WeakMap:Map;function dg(e,t,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){no||(no=!0,Mc=r),Nc(e,t)},n}function hg(e,t,n){n=Tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Nc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nc(e,t),typeof r!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $h(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new P0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=G0.bind(null,e,t,n),t.then(e,e))}function Bh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Tn(-1,1),t.tag=2,tr(n,t,1))),n.lanes|=1),e)}var I0=Ln.ReactCurrentOwner,Dt=!1;function wt(e,t,n,r){t.child=e===null?Bp(t,null,n,r):vs(t,e.child,n,r)}function Hh(e,t,n,r,s){n=n.render;var i=t.ref;return ms(t,s),r=Wu(e,t,n,r,i,s),n=Vu(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dn(e,t,s)):(Be&&n&&Mu(t),t.flags|=1,wt(e,t,r,s),t.child)}function Gh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!rd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,fg(e,t,i,r,s)):(e=Da(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vi,n(o,r)&&e.ref===t.ref)return Dn(e,t,s)}return t.flags|=1,e=sr(i,r),e.ref=t.ref,e.return=t,t.child=e}function fg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(vi(i,r)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Dt=!0);else return t.lanes=e.lanes,Dn(e,t,s)}return Sc(e,t,n,r,s)}function mg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(cs,zt),zt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(cs,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Fe(cs,zt),zt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Fe(cs,zt),zt|=r;return wt(e,t,s,n),t.child}function pg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sc(e,t,n,r,s){var i=Lt(n)?Cr:yt.current;return i=ys(t,i),ms(t,s),n=Wu(e,t,n,r,i,s),r=Vu(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dn(e,t,s)):(Be&&r&&Mu(t),t.flags|=1,wt(e,t,n,s),t.child)}function qh(e,t,n,r,s){if(Lt(n)){var i=!0;Wa(t)}else i=!1;if(ms(t,s),t.stateNode===null)Pa(e,t),ug(t,n,r),jc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xt(u):(u=Lt(n)?Cr:yt.current,u=ys(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&zh(t,o,r,u),qn=!1;var m=t.memoizedState;o.state=m,Ya(t,r,o,s),c=t.memoizedState,l!==r||m!==c||Mt.current||qn?(typeof h=="function"&&(kc(t,n,h,r),c=t.memoizedState),(l=qn||Fh(t,n,l,r,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Hp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:sn(t.type,l),o.props=u,d=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=Lt(n)?Cr:yt.current,c=ys(t,c));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||m!==c)&&zh(t,o,r,c),qn=!1,m=t.memoizedState,o.state=m,Ya(t,r,o,s);var p=t.memoizedState;l!==d||m!==p||Mt.current||qn?(typeof f=="function"&&(kc(t,n,f,r),p=t.memoizedState),(u=qn||Fh(t,n,u,r,m,p,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return _c(e,t,n,r,i,s)}function _c(e,t,n,r,s,i){pg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Ph(t,n,!1),Dn(e,t,i);r=t.stateNode,I0.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=vs(t,e.child,null,i),t.child=vs(t,null,l,i)):wt(e,t,l,i),t.memoizedState=r.state,s&&Ph(t,n,!0),t.child}function gg(e){var t=e.stateNode;t.pendingContext?Th(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Th(e,t.context,!1),Uu(e,t.containerInfo)}function Wh(e,t,n,r,s){return bs(),Ou(s),t.flags|=256,wt(e,t,n,r),t.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Ec(e){return{baseLanes:e,cachePool:null,transitions:null}}function xg(e,t,n){var r=t.pendingProps,s=He.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Fe(He,s&1),e===null)return vc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_o(o,r,0,null),e=_r(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ec(n),t.memoizedState=Cc,e):Qu(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return A0(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=sr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=sr(l,i):(i=_r(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Ec(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Cc,r}return i=e.child,e=i.sibling,r=sr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Qu(e,t){return t=_o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function la(e,t,n,r){return r!==null&&Ou(r),vs(t,e.child,null,n),e=Qu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function A0(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=xl(Error(W(422))),la(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=_o({mode:"visible",children:r.children},s,0,null),i=_r(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&vs(t,e.child,null,o),t.child.memoizedState=Ec(o),t.memoizedState=Cc,i);if(!(t.mode&1))return la(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(W(419)),r=xl(i,r,void 0),la(e,t,o,r)}if(l=(o&e.childLanes)!==0,Dt||l){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,An(e,s),un(r,e,s,-1))}return nd(),r=xl(Error(W(421))),la(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=q0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,$t=er(s.nextSibling),Bt=t,Be=!0,ln=null,e!==null&&(Vt[Kt++]=Cn,Vt[Kt++]=En,Vt[Kt++]=Er,Cn=e.id,En=e.overflow,Er=t),t=Qu(t,r.children),t.flags|=4096,t)}function Vh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wc(e.return,t,n)}function yl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function yg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wt(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vh(e,n,t);else if(e.tag===19)Vh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(He,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xa(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),yl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xa(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}yl(t,!0,n,null,i);break;case"together":yl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function D0(e,t,n){switch(t.tag){case 3:gg(t),bs();break;case 5:Gp(t);break;case 1:Lt(t.type)&&Wa(t);break;case 4:Uu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fe(Ja,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?xg(e,t,n):(Fe(He,He.current&1),e=Dn(e,t,n),e!==null?e.sibling:null);Fe(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,mg(e,t,n)}return Dn(e,t,n)}var bg,Tc,vg,wg;bg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tc=function(){};vg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Nr(bn.current);var i=null;switch(n){case"input":s=Yl(e,s),r=Yl(e,r),i=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),i=[];break;case"textarea":s=ec(e,s),r=ec(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ga)}nc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};wg=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bs(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function M0(e,t,n){var r=t.pendingProps;switch(Lu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return Lt(t.type)&&qa(),mt(t),null;case 3:return r=t.stateNode,ws(),$e(Mt),$e(yt),Gu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Rc(ln),ln=null))),Tc(e,t),mt(t),null;case 5:Hu(t);var s=Nr(Si.current);if(n=t.type,e!==null&&t.stateNode!=null)vg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return mt(t),null}if(e=Nr(bn.current),aa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[xn]=t,r[ji]=i,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<Js.length;s++)ze(Js[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":nh(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":sh(r,i),ze("invalid",r)}nc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ia(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ia(r.textContent,l,e),s=["children",""+l]):fi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Yi(r),rh(r,i,!0);break;case"textarea":Yi(r),ih(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ga)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[xn]=t,e[ji]=r,bg(e,t,!1,!1),t.stateNode=e;e:{switch(o=rc(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<Js.length;s++)ze(Js[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":nh(e,r),s=Yl(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),ze("invalid",e);break;case"textarea":sh(e,r),s=ec(e,r),ze("invalid",e);break;default:s=r}nc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Xm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qm(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mi(e,c):typeof c=="number"&&mi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&vu(e,i,c,o))}switch(n){case"input":Yi(e),rh(e,r,!1);break;case"textarea":Yi(e),ih(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?us(e,!!r.multiple,i,!1):r.defaultValue!=null&&us(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ga)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)wg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=Nr(Si.current),Nr(bn.current),aa(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(i=r.nodeValue!==n)&&(e=Bt,e!==null))switch(e.tag){case 3:ia(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ia(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return mt(t),null;case 13:if($e(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&$t!==null&&t.mode&1&&!(t.flags&128))zp(),bs(),t.flags|=98560,i=!1;else if(i=aa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(W(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[xn]=t}else bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),i=!1}else ln!==null&&(Rc(ln),ln=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?tt===0&&(tt=3):nd())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return ws(),Tc(e,t),e===null&&wi(t.stateNode.containerInfo),mt(t),null;case 10:return zu(t.type._context),mt(t),null;case 17:return Lt(t.type)&&qa(),mt(t),null;case 19:if($e(He),i=t.memoizedState,i===null)return mt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Bs(i,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xa(e),o!==null){for(t.flags|=128,Bs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ve()>js&&(t.flags|=128,r=!0,Bs(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xa(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Be)return mt(t),null}else 2*Ve()-i.renderingStartTime>js&&n!==1073741824&&(t.flags|=128,r=!0,Bs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ve(),t.sibling=null,n=He.current,Fe(He,r?n&1|2:n&1),t):(mt(t),null);case 22:case 23:return td(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function L0(e,t){switch(Lu(t),t.tag){case 1:return Lt(t.type)&&qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ws(),$e(Mt),$e(yt),Gu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hu(t),null;case 13:if($e(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(He),null;case 4:return ws(),null;case 10:return zu(t.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var ca=!1,pt=!1,O0=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ls(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Pc(e,t,n){try{n()}catch(r){We(e,t,r)}}var Kh=!1;function R0(e,t){if(fc=Ba,e=_p(),Du(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)m=d,d=f;for(;;){if(d===e)break t;if(m===n&&++u===s&&(l=o),m===i&&++h===r&&(c=o),(f=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:e,selectionRange:n},Ba=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var b=p.memoizedProps,E=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:sn(t.type,b),E);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){We(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return p=Kh,Kh=!1,p}function ri(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pc(t,n,i)}s=s.next}while(s!==r)}}function No(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ic(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kg(e){var t=e.alternate;t!==null&&(e.alternate=null,kg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[ji],delete t[xc],delete t[b0],delete t[v0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jg(e){return e.tag===5||e.tag===3||e.tag===4}function Jh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ac(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ga));else if(r!==4&&(e=e.child,e!==null))for(Ac(e,t,n),e=e.sibling;e!==null;)Ac(e,t,n),e=e.sibling}function Dc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Dc(e,t,n),e=e.sibling;e!==null;)Dc(e,t,n),e=e.sibling}var lt=null,an=!1;function $n(e,t,n){for(n=n.child;n!==null;)Ng(e,t,n),n=n.sibling}function Ng(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(go,n)}catch{}switch(n.tag){case 5:pt||ls(n,t);case 6:var r=lt,s=an;lt=null,$n(e,t,n),lt=r,an=s,lt!==null&&(an?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(an?(e=lt,n=n.stateNode,e.nodeType===8?dl(e.parentNode,n):e.nodeType===1&&dl(e,n),yi(e)):dl(lt,n.stateNode));break;case 4:r=lt,s=an,lt=n.stateNode.containerInfo,an=!0,$n(e,t,n),lt=r,an=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pc(n,t,o),s=s.next}while(s!==r)}$n(e,t,n);break;case 1:if(!pt&&(ls(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}$n(e,t,n);break;case 21:$n(e,t,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,$n(e,t,n),pt=r):$n(e,t,n);break;default:$n(e,t,n)}}function Qh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new O0),t.forEach(function(r){var s=W0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,an=!1;break e;case 3:lt=l.stateNode.containerInfo,an=!0;break e;case 4:lt=l.stateNode.containerInfo,an=!0;break e}l=l.return}if(lt===null)throw Error(W(160));Ng(i,o,s),lt=null,an=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){We(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sg(t,e),t=t.sibling}function Sg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),fn(e),r&4){try{ri(3,e,e.return),No(3,e)}catch(b){We(e,e.return,b)}try{ri(5,e,e.return)}catch(b){We(e,e.return,b)}}break;case 1:nn(t,e),fn(e),r&512&&n!==null&&ls(n,n.return);break;case 5:if(nn(t,e),fn(e),r&512&&n!==null&&ls(n,n.return),e.flags&32){var s=e.stateNode;try{mi(s,"")}catch(b){We(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vm(s,i),rc(l,o);var u=rc(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Xm(s,d):h==="dangerouslySetInnerHTML"?Qm(s,d):h==="children"?mi(s,d):vu(s,h,d,u)}switch(l){case"input":Xl(s,i);break;case"textarea":Km(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?us(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?us(s,!!i.multiple,i.defaultValue,!0):us(s,!!i.multiple,i.multiple?[]:"",!1))}s[ji]=i}catch(b){We(e,e.return,b)}}break;case 6:if(nn(t,e),fn(e),r&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){We(e,e.return,b)}}break;case 3:if(nn(t,e),fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yi(t.containerInfo)}catch(b){We(e,e.return,b)}break;case 4:nn(t,e),fn(e);break;case 13:nn(t,e),fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zu=Ve())),r&4&&Qh(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(u=pt)||h,nn(t,e),pt=u):nn(t,e),fn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ie=e,h=e.child;h!==null;){for(d=ie=h;ie!==null;){switch(m=ie,f=m.child,m.tag){case 0:case 11:case 14:case 15:ri(4,m,m.return);break;case 1:ls(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(b){We(r,n,b)}}break;case 5:ls(m,m.return);break;case 22:if(m.memoizedState!==null){Xh(d);continue}}f!==null?(f.return=m,ie=f):Xh(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ym("display",o))}catch(b){We(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){We(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nn(t,e),fn(e),r&4&&Qh(e);break;case 21:break;default:nn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jg(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mi(s,""),r.flags&=-33);var i=Jh(e);Dc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Jh(e);Ac(e,l,o);break;default:throw Error(W(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F0(e,t,n){ie=e,_g(e)}function _g(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ca;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||pt;l=ca;var u=pt;if(ca=o,(pt=c)&&!u)for(ie=s;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Zh(s):c!==null?(c.return=o,ie=c):Zh(s);for(;i!==null;)ie=i,_g(i),i=i.sibling;ie=s,ca=l,pt=u}Yh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Yh(e)}}function Yh(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||No(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:sn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lh(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&yi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}pt||t.flags&512&&Ic(t)}catch(m){We(t,t.return,m)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Xh(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Zh(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{No(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var i=t.return;try{Ic(t)}catch(c){We(t,i,c)}break;case 5:var o=t.return;try{Ic(t)}catch(c){We(t,o,c)}}}catch(c){We(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var z0=Math.ceil,to=Ln.ReactCurrentDispatcher,Yu=Ln.ReactCurrentOwner,Yt=Ln.ReactCurrentBatchConfig,Ce=0,it=null,Ye=null,ct=0,zt=0,cs=cr(0),tt=0,Ti=null,Pr=0,So=0,Xu=0,si=null,It=null,Zu=0,js=1/0,Nn=null,no=!1,Mc=null,nr=null,ua=!1,Qn=null,ro=0,ii=0,Lc=null,Ia=-1,Aa=0;function jt(){return Ce&6?Ve():Ia!==-1?Ia:Ia=Ve()}function rr(e){return e.mode&1?Ce&2&&ct!==0?ct&-ct:k0.transition!==null?(Aa===0&&(Aa=up()),Aa):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:xp(e.type)),e):1}function un(e,t,n,r){if(50<ii)throw ii=0,Lc=null,Error(W(185));Oi(e,n,r),(!(Ce&2)||e!==it)&&(e===it&&(!(Ce&2)&&(So|=n),tt===4&&Vn(e,ct)),Ot(e,r),n===1&&Ce===0&&!(t.mode&1)&&(js=Ve()+500,wo&&ur()))}function Ot(e,t){var n=e.callbackNode;kb(e,t);var r=$a(e,e===it?ct:0);if(r===0)n!==null&&lh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lh(n),t===1)e.tag===0?w0(ef.bind(null,e)):Op(ef.bind(null,e)),x0(function(){!(Ce&6)&&ur()}),n=null;else{switch(dp(r)){case 1:n=Su;break;case 4:n=lp;break;case 16:n=za;break;case 536870912:n=cp;break;default:n=za}n=Mg(n,Cg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Cg(e,t){if(Ia=-1,Aa=0,Ce&6)throw Error(W(327));var n=e.callbackNode;if(ps()&&e.callbackNode!==n)return null;var r=$a(e,e===it?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=so(e,r);else{t=r;var s=Ce;Ce|=2;var i=Tg();(it!==e||ct!==t)&&(Nn=null,js=Ve()+500,Sr(e,t));do try{U0();break}catch(l){Eg(e,l)}while(!0);Fu(),to.current=i,Ce=s,Ye!==null?t=0:(it=null,ct=0,t=tt)}if(t!==0){if(t===2&&(s=lc(e),s!==0&&(r=s,t=Oc(e,s))),t===1)throw n=Ti,Sr(e,0),Vn(e,r),Ot(e,Ve()),n;if(t===6)Vn(e,r);else{if(s=e.current.alternate,!(r&30)&&!$0(s)&&(t=so(e,r),t===2&&(i=lc(e),i!==0&&(r=i,t=Oc(e,i))),t===1))throw n=Ti,Sr(e,0),Vn(e,r),Ot(e,Ve()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:yr(e,It,Nn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=Zu+500-Ve(),10<t)){if($a(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=gc(yr.bind(null,e,It,Nn),t);break}yr(e,It,Nn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-cn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z0(r/1960))-r,10<r){e.timeoutHandle=gc(yr.bind(null,e,It,Nn),r);break}yr(e,It,Nn);break;case 5:yr(e,It,Nn);break;default:throw Error(W(329))}}}return Ot(e,Ve()),e.callbackNode===n?Cg.bind(null,e):null}function Oc(e,t){var n=si;return e.current.memoizedState.isDehydrated&&(Sr(e,t).flags|=256),e=so(e,t),e!==2&&(t=It,It=n,t!==null&&Rc(t)),e}function Rc(e){It===null?It=e:It.push.apply(It,e)}function $0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~Xu,t&=~So,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-cn(t),r=1<<n;e[n]=-1,t&=~r}}function ef(e){if(Ce&6)throw Error(W(327));ps();var t=$a(e,0);if(!(t&1))return Ot(e,Ve()),null;var n=so(e,t);if(e.tag!==0&&n===2){var r=lc(e);r!==0&&(t=r,n=Oc(e,r))}if(n===1)throw n=Ti,Sr(e,0),Vn(e,t),Ot(e,Ve()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,It,Nn),Ot(e,Ve()),null}function ed(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(js=Ve()+500,wo&&ur())}}function Ir(e){Qn!==null&&Qn.tag===0&&!(Ce&6)&&ps();var t=Ce;Ce|=1;var n=Yt.transition,r=Pe;try{if(Yt.transition=null,Pe=1,e)return e()}finally{Pe=r,Yt.transition=n,Ce=t,!(Ce&6)&&ur()}}function td(){zt=cs.current,$e(cs)}function Sr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,g0(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Lu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qa();break;case 3:ws(),$e(Mt),$e(yt),Gu();break;case 5:Hu(r);break;case 4:ws();break;case 13:$e(He);break;case 19:$e(He);break;case 10:zu(r.type._context);break;case 22:case 23:td()}n=n.return}if(it=e,Ye=e=sr(e.current,null),ct=zt=t,tt=0,Ti=null,Xu=So=Pr=0,It=si=null,jr!==null){for(t=0;t<jr.length;t++)if(n=jr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jr=null}return e}function Eg(e,t){do{var n=Ye;try{if(Fu(),Ea.current=eo,Za){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Za=!1}if(Tr=0,st=et=Ge=null,ni=!1,_i=0,Yu.current=null,n===null||n.return===null){tt=1,Ti=t,Ye=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Bh(o);if(f!==null){f.flags&=-257,Uh(f,o,l,i,t),f.mode&1&&$h(i,u,t),t=f,c=u;var p=t.updateQueue;if(p===null){var b=new Set;b.add(c),t.updateQueue=b}else p.add(c);break e}else{if(!(t&1)){$h(i,u,t),nd();break e}c=Error(W(426))}}else if(Be&&l.mode&1){var E=Bh(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Uh(E,o,l,i,t),Ou(ks(c,l));break e}}i=c=ks(c,l),tt!==4&&(tt=2),si===null?si=[i]:si.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=dg(i,c,t);Mh(i,g);break e;case 1:l=c;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(nr===null||!nr.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=hg(i,l,t);Mh(i,C);break e}}i=i.return}while(i!==null)}Ig(n)}catch(j){t=j,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function Tg(){var e=to.current;return to.current=eo,e===null?eo:e}function nd(){(tt===0||tt===3||tt===2)&&(tt=4),it===null||!(Pr&268435455)&&!(So&268435455)||Vn(it,ct)}function so(e,t){var n=Ce;Ce|=2;var r=Tg();(it!==e||ct!==t)&&(Nn=null,Sr(e,t));do try{B0();break}catch(s){Eg(e,s)}while(!0);if(Fu(),Ce=n,to.current=r,Ye!==null)throw Error(W(261));return it=null,ct=0,tt}function B0(){for(;Ye!==null;)Pg(Ye)}function U0(){for(;Ye!==null&&!fb();)Pg(Ye)}function Pg(e){var t=Dg(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?Ig(e):Ye=t,Yu.current=null}function Ig(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=L0(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ye=null;return}}else if(n=M0(n,t,zt),n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);tt===0&&(tt=5)}function yr(e,t,n){var r=Pe,s=Yt.transition;try{Yt.transition=null,Pe=1,H0(e,t,n,r)}finally{Yt.transition=s,Pe=r}return null}function H0(e,t,n,r){do ps();while(Qn!==null);if(Ce&6)throw Error(W(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(jb(e,i),e===it&&(Ye=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ua||(ua=!0,Mg(za,function(){return ps(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=Pe;Pe=1;var l=Ce;Ce|=4,Yu.current=null,R0(e,n),Sg(n,e),c0(mc),Ba=!!fc,mc=fc=null,e.current=n,F0(n),mb(),Ce=l,Pe=o,Yt.transition=i}else e.current=n;if(ua&&(ua=!1,Qn=e,ro=s),i=e.pendingLanes,i===0&&(nr=null),xb(n.stateNode),Ot(e,Ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(no)throw no=!1,e=Mc,Mc=null,e;return ro&1&&e.tag!==0&&ps(),i=e.pendingLanes,i&1?e===Lc?ii++:(ii=0,Lc=e):ii=0,ur(),null}function ps(){if(Qn!==null){var e=dp(ro),t=Yt.transition,n=Pe;try{if(Yt.transition=null,Pe=16>e?16:e,Qn===null)var r=!1;else{if(e=Qn,Qn=null,ro=0,Ce&6)throw Error(W(331));var s=Ce;for(Ce|=4,ie=e.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ie=u;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:ri(8,h,i)}var d=h.child;if(d!==null)d.return=h,ie=d;else for(;ie!==null;){h=ie;var m=h.sibling,f=h.return;if(kg(h),h===u){ie=null;break}if(m!==null){m.return=f,ie=m;break}ie=f}}}var p=i.alternate;if(p!==null){var b=p.child;if(b!==null){p.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ri(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ie=g;break e}ie=i.return}}var v=e.current;for(ie=v;ie!==null;){o=ie;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ie=y;else e:for(o=v;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:No(9,l)}}catch(j){We(l,l.return,j)}if(l===o){ie=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,ie=C;break e}ie=l.return}}if(Ce=s,ur(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(go,e)}catch{}r=!0}return r}finally{Pe=n,Yt.transition=t}}return!1}function tf(e,t,n){t=ks(n,t),t=dg(e,t,1),e=tr(e,t,1),t=jt(),e!==null&&(Oi(e,1,t),Ot(e,t))}function We(e,t,n){if(e.tag===3)tf(e,e,n);else for(;t!==null;){if(t.tag===3){tf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nr===null||!nr.has(r))){e=ks(n,e),e=hg(t,e,1),t=tr(t,e,1),e=jt(),t!==null&&(Oi(t,1,e),Ot(t,e));break}}t=t.return}}function G0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,it===e&&(ct&n)===n&&(tt===4||tt===3&&(ct&130023424)===ct&&500>Ve()-Zu?Sr(e,0):Xu|=n),Ot(e,t)}function Ag(e,t){t===0&&(e.mode&1?(t=ea,ea<<=1,!(ea&130023424)&&(ea=4194304)):t=1);var n=jt();e=An(e,t),e!==null&&(Oi(e,t,n),Ot(e,n))}function q0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ag(e,n)}function W0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),Ag(e,n)}var Dg;Dg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Dt=!1,D0(e,t,n);Dt=!!(e.flags&131072)}else Dt=!1,Be&&t.flags&1048576&&Rp(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pa(e,t),e=t.pendingProps;var s=ys(t,yt.current);ms(t,n),s=Wu(null,t,r,e,s,n);var i=Vu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(i=!0,Wa(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bu(t),s.updater=jo,t.stateNode=s,s._reactInternals=t,jc(t,r,e,n),t=_c(null,t,r,!0,i,n)):(t.tag=0,Be&&i&&Mu(t),wt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=K0(r),e=sn(r,e),s){case 0:t=Sc(null,t,r,e,n);break e;case 1:t=qh(null,t,r,e,n);break e;case 11:t=Hh(null,t,r,e,n);break e;case 14:t=Gh(null,t,r,sn(r.type,e),n);break e}throw Error(W(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:sn(r,s),Sc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:sn(r,s),qh(e,t,r,s,n);case 3:e:{if(gg(t),e===null)throw Error(W(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Hp(e,t),Ya(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ks(Error(W(423)),t),t=Wh(e,t,r,n,s);break e}else if(r!==s){s=ks(Error(W(424)),t),t=Wh(e,t,r,n,s);break e}else for($t=er(t.stateNode.containerInfo.firstChild),Bt=t,Be=!0,ln=null,n=Bp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bs(),r===s){t=Dn(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return Gp(t),e===null&&vc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,pc(r,s)?o=null:i!==null&&pc(r,i)&&(t.flags|=32),pg(e,t),wt(e,t,o,n),t.child;case 6:return e===null&&vc(t),null;case 13:return xg(e,t,n);case 4:return Uu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vs(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:sn(r,s),Hh(e,t,r,s,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Fe(Ja,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!Mt.current){t=Dn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Tn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),wc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),wc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ms(t,n),s=Xt(s),r=r(s),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,s=sn(r,t.pendingProps),s=sn(r.type,s),Gh(e,t,r,s,n);case 15:return fg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:sn(r,s),Pa(e,t),t.tag=1,Lt(r)?(e=!0,Wa(t)):e=!1,ms(t,n),ug(t,r,s),jc(t,r,s,n),_c(null,t,r,!0,e,n);case 19:return yg(e,t,n);case 22:return mg(e,t,n)}throw Error(W(156,t.tag))};function Mg(e,t){return op(e,t)}function V0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new V0(e,t,n,r)}function rd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function K0(e){if(typeof e=="function")return rd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ku)return 11;if(e===ju)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Da(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")rd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zr:return _r(n.children,s,i,t);case wu:o=8,s|=8;break;case Vl:return e=Qt(12,n,t,s|2),e.elementType=Vl,e.lanes=i,e;case Kl:return e=Qt(13,n,t,s),e.elementType=Kl,e.lanes=i,e;case Jl:return e=Qt(19,n,t,s),e.elementType=Jl,e.lanes=i,e;case Gm:return _o(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Um:o=10;break e;case Hm:o=9;break e;case ku:o=11;break e;case ju:o=14;break e;case Gn:o=16,r=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=Qt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function _r(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function _o(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=Gm,e.lanes=n,e.stateNode={isHidden:!1},e}function bl(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function vl(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function J0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=el(0),this.expirationTimes=el(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=el(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sd(e,t,n,r,s,i,o,l,c){return e=new J0(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bu(i),e}function Q0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Lg(e){if(!e)return or;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Lp(e,n,t)}return t}function Og(e,t,n,r,s,i,o,l,c){return e=sd(n,r,!0,e,s,i,o,l,c),e.context=Lg(null),n=e.current,r=jt(),s=rr(n),i=Tn(r,s),i.callback=t??null,tr(n,i,s),e.current.lanes=s,Oi(e,s,r),Ot(e,r),e}function Co(e,t,n,r){var s=t.current,i=jt(),o=rr(s);return n=Lg(n),t.context===null?t.context=n:t.pendingContext=n,t=Tn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=tr(s,t,o),e!==null&&(un(e,s,o,i),Ca(e,s,o)),o}function io(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function id(e,t){nf(e,t),(e=e.alternate)&&nf(e,t)}function Y0(){return null}var Rg=typeof reportError=="function"?reportError:function(e){console.error(e)};function ad(e){this._internalRoot=e}Eo.prototype.render=ad.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));Co(e,t,null,null)};Eo.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Co(null,e,null,null)}),t[In]=null}};function Eo(e){this._internalRoot=e}Eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=mp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wn.length&&t!==0&&t<Wn[n].priority;n++);Wn.splice(n,0,e),n===0&&gp(e)}};function od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rf(){}function X0(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=io(o);i.call(u)}}var o=Og(t,r,e,0,null,!1,!1,"",rf);return e._reactRootContainer=o,e[In]=o.current,wi(e.nodeType===8?e.parentNode:e),Ir(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=io(c);l.call(u)}}var c=sd(e,0,!1,null,null,!1,!1,"",rf);return e._reactRootContainer=c,e[In]=c.current,wi(e.nodeType===8?e.parentNode:e),Ir(function(){Co(t,c,n,r)}),c}function Po(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=io(o);l.call(c)}}Co(t,o,e,s)}else o=X0(n,t,e,s,r);return io(o)}hp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ks(t.pendingLanes);n!==0&&(_u(t,n|1),Ot(t,Ve()),!(Ce&6)&&(js=Ve()+500,ur()))}break;case 13:Ir(function(){var r=An(e,1);if(r!==null){var s=jt();un(r,e,1,s)}}),id(e,1)}};Cu=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}id(e,134217728)}};fp=function(e){if(e.tag===13){var t=rr(e),n=An(e,t);if(n!==null){var r=jt();un(n,e,t,r)}id(e,t)}};mp=function(){return Pe};pp=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};ic=function(e,t,n){switch(t){case"input":if(Xl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vo(r);if(!s)throw Error(W(90));Wm(r),Xl(r,s)}}}break;case"textarea":Km(e,n);break;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}};tp=ed;np=Ir;var Z0={usingClientEntryPoint:!1,Events:[Fi,rs,vo,Zm,ep,ed]},Us={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ip(e),e===null?null:e.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||Y0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{go=da.inject(ev),yn=da}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;Gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(t))throw Error(W(200));return Q0(e,t,null,n)};Gt.createRoot=function(e,t){if(!od(e))throw Error(W(299));var n=!1,r="",s=Rg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sd(e,1,!1,null,null,n,!1,r,s),e[In]=t.current,wi(e.nodeType===8?e.parentNode:e),new ad(t)};Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=ip(t),e=e===null?null:e.stateNode,e};Gt.flushSync=function(e){return Ir(e)};Gt.hydrate=function(e,t,n){if(!To(t))throw Error(W(200));return Po(null,e,t,!0,n)};Gt.hydrateRoot=function(e,t,n){if(!od(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Rg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Og(t,null,e,1,n??null,s,!1,i,o),e[In]=t.current,wi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Eo(t)};Gt.render=function(e,t,n){if(!To(t))throw Error(W(200));return Po(null,e,t,!1,n)};Gt.unmountComponentAtNode=function(e){if(!To(e))throw Error(W(40));return e._reactRootContainer?(Ir(function(){Po(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Gt.unstable_batchedUpdates=ed;Gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!To(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Po(e,t,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function Fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fg)}catch(e){console.error(e)}}Fg(),Fm.exports=Gt;var zg=Fm.exports,$g,sf=zg;$g=sf.createRoot,sf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>N.createElement("svg",{ref:h,...tv,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${nv(e)}`,l].join(" "),...u},[...t.map(([d,m])=>N.createElement(d,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=pe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=pe("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=pe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=pe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=pe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=pe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),xv="modulepreload",yv=function(e){return"/battleplanapp/"+e},lf={},Ui=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=yv(c),c in lf)return;lf[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":xv,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},bv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ui(async()=>{const{default:r}=await Promise.resolve().then(()=>Is);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class ud extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class vv extends ud{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cf extends ud{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class uf extends ud{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Bc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Bc||(Bc={}));var wv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class kv{constructor(t,{headers:n={},customFetch:r,region:s=Bc.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=bv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return wv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(b=>{throw new vv(b)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new cf(d);if(!d.ok)throw new uf(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof uf||s instanceof cf?s.context:void 0}}})}}var At={},dd={},Mo={},Hi={},Lo={},Oo={},jv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ns=jv();const Nv=Ns.fetch,Kg=Ns.fetch.bind(Ns),Jg=Ns.Headers,Sv=Ns.Request,_v=Ns.Response,Is=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jg,Request:Sv,Response:_v,default:Kg,fetch:Nv},Symbol.toStringTag,{value:"Module"})),Cv=Ty(Is);var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});let Ev=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ro.default=Ev;var Qg=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oo,"__esModule",{value:!0});const Tv=Qg(Cv),Pv=Qg(Ro);let Iv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Tv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,h=null,d=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=g:h=JSON.parse(g))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,f="OK")}catch{i.status===404&&b===""?(m=204,f="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new Pv.default(u)}return{error:u,data:h,count:d,status:m,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Oo.default=Iv;var Av=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lo,"__esModule",{value:!0});const Dv=Av(Oo);let Mv=class extends Dv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Lo.default=Mv;var Lv=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hi,"__esModule",{value:!0});const Ov=Lv(Lo);let Rv=class extends Ov.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Hi.default=Rv;var Fv=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mo,"__esModule",{value:!0});const Hs=Fv(Hi);let zv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Hs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Hs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Hs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Mo.default=zv;var Fo={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.version=void 0;zo.version="0.0.0-automated";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.DEFAULT_HEADERS=void 0;const $v=zo;Fo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${$v.version}`};var Yg=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});const Bv=Yg(Mo),Uv=Yg(Hi),Hv=Fo;let Gv=class Xg{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Hv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Bv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Xg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Uv.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};dd.default=Gv;var As=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(At,"__esModule",{value:!0});At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const Zg=As(dd);At.PostgrestClient=Zg.default;const ex=As(Mo);At.PostgrestQueryBuilder=ex.default;const tx=As(Hi);At.PostgrestFilterBuilder=tx.default;const nx=As(Lo);At.PostgrestTransformBuilder=nx.default;const rx=As(Oo);At.PostgrestBuilder=rx.default;const sx=As(Ro);At.PostgrestError=sx.default;var qv=At.default={PostgrestClient:Zg.default,PostgrestQueryBuilder:ex.default,PostgrestFilterBuilder:tx.default,PostgrestTransformBuilder:nx.default,PostgrestBuilder:rx.default,PostgrestError:sx.default};const{PostgrestClient:Wv,PostgrestQueryBuilder:NE,PostgrestFilterBuilder:SE,PostgrestTransformBuilder:_E,PostgrestBuilder:CE,PostgrestError:EE}=qv;class Vv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Kv="2.15.1",Jv=`realtime-js/${Kv}`,Qv="1.0.0",Uc=1e4,Yv=1e3,Xv=100;var ai;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ai||(ai={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var on;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(on||(on={}));var Hc;(function(e){e.websocket="websocket"})(Hc||(Hc={}));var vr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(vr||(vr={}));class Zv{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ix{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Oe||(Oe={}));const df=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=ew(o,e,t,s),i),{})},ew=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?ax(i,o):Gc(o)},ax=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return sw(t,n)}switch(e){case Oe.bool:return tw(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return nw(t);case Oe.json:case Oe.jsonb:return rw(t);case Oe.timestamp:return iw(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Gc(t);default:return Gc(t)}},Gc=e=>e,tw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},nw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},sw=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>ax(t,l))}return e},iw=e=>typeof e=="string"?e.replace(" ","T"):e,ox=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class wl{constructor(t,n,r={},s=Uc){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hf||(hf={}));class oi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oi.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=oi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=oi.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const m=h.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),p=h.filter(E=>f.indexOf(E.presence_ref)<0),b=d.filter(E=>m.indexOf(E.presence_ref)<0);p.length>0&&(l[u]=p),b.length>0&&(c[u]=b)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(f=>f.presence_ref),m=h.filter(f=>d.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ff;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ff||(ff={}));var li;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(li||(li={}));var Sn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Sn||(Sn={}));class hd{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wl(this,on.join,this.params,this.timeout),this.rejoinTimer=new ix(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(on.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new oi(this),this.broadcastEndpointURL=ox(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[li.PRESENCE]&&this.bindings[li.PRESENCE].length>0,h={},d={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Sn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){t==null||t(Sn.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,b=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,E=[];for(let g=0;g<b;g++){const v=p[g],{filter:{event:y,schema:C,table:j,filter:x}}=v,S=m&&m[g];if(S&&S.event===y&&S.schema===C&&S.table===j&&S.filter===x)E.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Sn.SUBSCRIBED);return}}).receive("error",m=>{this.state=Xe.errored,t==null||t(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Xe.joined&&t===li.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(on.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new wl(this,on.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wl(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Xv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=on;if(r&&[l,c,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,b,E;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(b=f.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,b,E,g,v,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return C&&((b=n.ids)===null||b===void 0?void 0:b.includes(C))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const C=(v=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return C==="*"||C===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:E,commit_timestamp:g,type:v,errors:y}=p;m=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:g,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(p))}f.callback(m,r)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&hd.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(on.close,{},t)}_onError(t){this._on(on.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=df(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=df(t.columns,t.old_record)),n}}const mf=()=>{},ha={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aw=[1e3,2e3,5e3,1e4],ow=1e4,lw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cw{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Uc,this.transport=null,this.heartbeatIntervalMs=ha.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mf,this.ref=0,this.reconnectTimer=null,this.logger=mf,this.conn=null,this.sendBuffer=[],this.serializer=new Zv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ui(async()=>{const{default:l}=await Promise.resolve().then(()=>Is);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Hc.websocket}`,this.httpEndpoint=ox(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ai.connecting:return vr.Connecting;case ai.open:return vr.Open;case ai.closing:return vr.Closing;default:return vr.Closed}}isConnected(){return this.connectionState()===vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new hd(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Yv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ha.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(on.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([lw],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Jv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(on.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ix(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ha.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Uc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ha.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>aw[h-1]||ow,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class fd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class uw extends fd{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qc extends fd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var dw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const lx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ui(async()=>{const{default:r}=await Promise.resolve().then(()=>Is);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},hw=()=>dw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ui(()=>Promise.resolve().then(()=>Is),void 0)).Response:Response}),Wc=e=>{if(Array.isArray(e))return e.map(n=>Wc(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Wc(r)}),t},fw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var zr=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const kl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mw=(e,t,n)=>zr(void 0,void 0,void 0,function*(){const r=yield hw();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new uw(kl(s),i,o))}).catch(s=>{t(new qc(kl(s),s))}):t(new qc(kl(e),e))}),pw=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(fw(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Gi(e,t,n,r,s,i){return zr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,pw(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>mw(c,l,r))})})}function ao(e,t,n,r){return zr(this,void 0,void 0,function*(){return Gi(e,"GET",t,n,r)})}function pn(e,t,n,r,s){return zr(this,void 0,void 0,function*(){return Gi(e,"POST",t,r,s,n)})}function Vc(e,t,n,r,s){return zr(this,void 0,void 0,function*(){return Gi(e,"PUT",t,r,s,n)})}function gw(e,t,n,r){return zr(this,void 0,void 0,function*(){return Gi(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cx(e,t,n,r,s){return zr(this,void 0,void 0,function*(){return Gi(e,"DELETE",t,r,s,n)})}var vt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const xw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yw{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=lx(s)}uploadOrUpdate(t,n,r,s){return vt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},pf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),d=yield(t=="PUT"?Vc:pn)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(Ze(i))return{data:null,error:i};throw i}})}upload(t,n,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return vt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:pf.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield Vc(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new fd("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}update(t,n,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return vt(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}copy(t,n,r){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield pn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return vt(this,void 0,void 0,function*(){try{const s=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}download(t,n){return vt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ao(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ze(l))return{data:null,error:l};throw l}})}info(t){return vt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ao(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wc(r),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}exists(t){return vt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield gw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ze(r)&&r instanceof qc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return vt(this,void 0,void 0,function*(){try{return{data:yield cx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}list(t,n,r){return vt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xw),n),{prefix:t||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}listV2(t,n){return vt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield pn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const bw="2.11.0",vw={"X-Client-Info":`storage-js/${bw}`};var Ur=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class ww{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},vw),n),this.fetch=lx(r)}listBuckets(){return Ur(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ze(t))return{data:null,error:t};throw t}})}getBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Ur(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Ur(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield cx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}}class kw extends ww{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new yw(this.url,this.headers,t,this.fetch)}}const jw="2.55.0";let Qs="";typeof Deno<"u"?Qs="deno":typeof document<"u"?Qs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qs="react-native":Qs="node";const Nw={"X-Client-Info":`supabase-js-${Qs}/${jw}`},Sw={headers:Nw},_w={schema:"public"},Cw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ew={};var Tw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Pw=e=>{let t;return e?t=e:typeof fetch>"u"?t=Kg:t=fetch,(...n)=>t(...n)},Iw=()=>typeof Headers>"u"?Jg:Headers,Aw=(e,t,n)=>{const r=Pw(n),s=Iw();return(i,o)=>Tw(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Dw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function Mw(e){return e.endsWith("/")?e:e+"/"}function Lw(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Dw(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const ux="2.71.1",Jr=30*1e3,Kc=3,jl=Kc*Jr,Ow="http://localhost:9999",Rw="supabase.auth.token",Fw={"X-Client-Info":`gotrue-js/${ux}`},Jc="X-Supabase-Api-Version",dx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$w=10*60*1e3;class md extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ge(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Bw extends md{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Uw(e){return ge(e)&&e.name==="AuthApiError"}class hx extends md{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class dr extends md{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Hn extends dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hw(e){return ge(e)&&e.name==="AuthSessionMissingError"}class fa extends dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ma extends dr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pa extends dr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gw(e){return ge(e)&&e.name==="AuthImplicitGrantRedirectError"}class gf extends dr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qc extends dr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Nl(e){return ge(e)&&e.name==="AuthRetryableFetchError"}class xf extends dr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Yc extends dr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yf=` 	
\r=`.split(""),qw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<yf.length;t+=1)e[yf[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)e[oo[t].charCodeAt(0)]=t;return e})();function bf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(oo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(oo[r]),t.queuedBits-=6}}function fx(e,t,n){const r=qw[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vf(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Kw(o,r,n)};for(let o=0;o<e.length;o+=1)fx(e.charCodeAt(o),s,i);return t.join("")}function Ww(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Vw(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Ww(r,t)}}function Kw(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Jw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)fx(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Qw(e){const t=[];return Vw(e,n=>t.push(n)),new Uint8Array(t)}function Yw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>bf(s,n,r)),bf(null,n,r),t.join("")}function Xw(e){return Math.round(Date.now()/1e3)+e}function Zw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const rn=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},mx=()=>{if(!rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function e1(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const px=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ui(async()=>{const{default:r}=await Promise.resolve().then(()=>Is);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},t1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Bn=async(e,t)=>{await e.removeItem(t)};class $o{constructor(){this.promise=new $o.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}$o.promiseConstructor=Promise;function Sl(e){const t=e.split(".");if(t.length!==3)throw new Yc("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!zw.test(t[r]))throw new Yc("JWT not in base64url format");return{header:JSON.parse(vf(t[0])),payload:JSON.parse(vf(t[1])),signature:Jw(t[2]),raw:{header:t[0],payload:t[1]}}}async function n1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function r1(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function s1(e){return("0"+e.toString(16)).substr(-2)}function i1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,s1).join("")}async function a1(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function o1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await a1(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hr(e,t,n=!1){const r=i1();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Qr(e,`${t}-code-verifier`,s);const i=await o1(r);return[i,r===i?"plain":"s256"]}const l1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c1(e){const t=e.headers.get(Jc);if(!t||!t.match(l1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function u1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function d1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gr(e){if(!h1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _l(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wf(e){return JSON.parse(JSON.stringify(e))}var f1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m1=[502,503,504];async function kf(e){var t;if(!t1(e))throw new Qc(br(e),0);if(m1.includes(e.status))throw new Qc(br(e),e.status);let n;try{n=await e.json()}catch(i){throw new hx(br(i),i)}let r;const s=c1(e);if(s&&s.getTime()>=dx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new xf(br(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Hn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new xf(br(n),e.status,n.weak_password.reasons);throw new Bw(br(n),e.status||500,r)}const p1=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function we(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Jc]||(i[Jc]=dx["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await g1(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function g1(e,t,n,r,s,i){const o=p1(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Qc(br(c),0)}if(l.ok||await kf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await kf(c)}}function jn(e){var t;let n=null;v1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Xw(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function jf(e){const t=jn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function x1(e){return{data:e,error:null}}function y1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=f1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function b1(e){return e}function v1(e){return e.access_token&&e.refresh_token&&e.expires_in}const Cl=["global","local","others"];var w1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class k1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=px(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Cl[0]){if(Cl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cl.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=w1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:y1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kn})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:b1});if(h.error)throw h.error;const d=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ge(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Gr(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kn})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Gr(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Kn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Gr(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Gr(t.userId);try{const{data:n,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Gr(t.userId),Gr(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}}function Nf(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function j1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qr={debug:!!(globalThis&&mx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class N1 extends gx{}async function S1(e,t,n){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new N1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}j1();const _1={url:Ow,storageKey:Rw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Sf(e,t,n){return await n()}const Wr={};class Ai{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ai.nextInstanceID,Ai.nextInstanceID+=1,this.instanceID>0&&rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},_1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new k1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=px(s.fetch),this.lock=s.lock||Sf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:rn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=S1:this.lock=Sf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:mx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ux}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=e1(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),rn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Gw(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ge(n)?{error:n}:{error:new hx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:jn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:h,password:d,options:m}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Hr(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:p},xform:jn})}else if("phone"in t){const{phone:h,password:d,options:m}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:jn})}else throw new ma("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:jf})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:jf})}else throw new ma("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new fa}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,l,c,u,h,d,m,f;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:E,wallet:g,statement:v,options:y}=t;let C;if(rn())if(typeof g=="object")C=g;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))C=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const j=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const x=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),b=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(h=y==null?void 0:y.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await C.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=x}}try{const{data:E,error:g}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Yw(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:jn});if(g)throw g;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new fa}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:g})}catch(E){if(ge(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await mr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:jn});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ge(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:jn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Hr(this.storage,this.storageKey));const{error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new ma("You must provide either an email or phone number.")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:jn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ge(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Hr(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:x1})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Hn;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await we(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await we(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ma("You must provide either an email or phone number and a type")}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<jl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await mr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=_l()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kn})})}catch(n){if(ge(n))return Hw(n)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Hn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Hr(this.storage,this.storageKey));const{data:u,error:h}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Kn});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Sl(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ge(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Hn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!rn())throw new pa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gf("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new pa("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let m=h+d;c&&(m=parseInt(c));const f=m-h;f*1e3<=Jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=m-d;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,h);const{data:b,error:E}=await this._getUser(i);if(E)throw E;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:m,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await mr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Uw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Zw(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Hr(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:d,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return rn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ge(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await r1(async s=>(s>0&&await n1(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:jn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Nl(i)&&Date.now()+o-r<Jr})}catch(r){if(this._debug(n,"error",r),ge(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),rn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await mr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Qr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:_l()}else if(s&&!s.user&&!s.user){const o=await mr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Bn(this.storage,this.storageKey+"-user"),await Qr(this.storage,this.storageKey,s)):s.user=_l()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${jl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Nl(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $o;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Hn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ge(i)){const o={session:null,error:i};return Nl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Qr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=wf(s);await Qr(this.storage,this.storageKey,i)}else{const s=wf(n);await Qr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Jr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Jr}ms, refresh threshold is ${Kc} ticks`),s<=Kc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Hr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Sl(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+$w>s)return r;const{data:i,error:o}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Sl(r);n!=null&&n.allowExpired||u1(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const h=d1(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,Qw(`${l}.${c}`)))throw new Yc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}}Ai.nextInstanceID=0;const C1=Ai;class E1 extends C1{constructor(t){super(t)}}var T1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class P1{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Mw(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:_w,realtime:Ew,auth:Object.assign(Object.assign({},Cw),{storageKey:u}),global:Sw},d=Lw(r??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Aw(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Wv(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new kw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new kv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return T1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new cw(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const I1=(e,t,n)=>new P1(e,t,n);function A1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}A1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const D1="https://dthxptbozocrbvmhwvao.supabase.co",M1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg",q=I1(D1,M1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),L1=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",ci=()=>L1()?"http://localhost:5173":`${window.location.origin}/battleplanapp/`,El=()=>`${ci()}/auth/callback`,lo=e=>`${ci()}${e}`;function rt(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),s=async m=>{if(!(m!=null&&m.user)){t(null);return}try{const{data:f,error:p}=await q.from("users").select("is_admin, user_name_public, onboarded, fav_games, fav_locations").eq("id",m.user.id).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user profile:",p);const{data:b,error:E}=await q.from("locations").select("id").contains("admins",[m.user.id]).limit(1),g=!E&&b&&b.length>0;t({...m.user,is_admin:(f==null?void 0:f.is_admin)||!1,is_location_admin:g,user_name_public:(f==null?void 0:f.user_name_public)||null,onboarded:(f==null?void 0:f.onboarded)||!1,fav_games:(f==null?void 0:f.fav_games)||null,fav_locations:(f==null?void 0:f.fav_locations)||null})}catch(f){console.error("Error fetching user profile:",f),t(m.user)}};N.useEffect(()=>{q.auth.getSession().then(({data:{session:f}})=>{s(f),r(!1)});const{data:{subscription:m}}=q.auth.onAuthStateChange((f,p)=>{s(p),r(!1)});return()=>m.unsubscribe()},[]);const i=async(m,f)=>{const{data:p,error:b}=await q.auth.signInWithPassword({email:m,password:f});return{data:p,error:b}},o=async(m,f)=>{const{data:p,error:b}=await q.auth.signUp({email:m,password:f,options:{emailRedirectTo:El()}});return{data:p,error:b}},l=async()=>{const{data:m,error:f}=await q.auth.signInWithOAuth({provider:"google",options:{redirectTo:El()}});return{data:m,error:f}},c=async()=>{const{error:m}=await q.auth.signOut();return{error:m}},u=async m=>{const{data:f,error:p}=await q.auth.resetPasswordForEmail(m,{redirectTo:El()});return{data:f,error:p}},h=async m=>{const{data:f,error:p}=await q.auth.updateUser({password:m});return{data:f,error:p}},d=e&&window.location.hash.includes("type=recovery");return{user:e,loading:n,signIn:i,signUp:o,signInWithGoogle:l,signOut:c,resetPassword:u,updatePassword:h,needsPasswordReset:d}}function xx(){const[e,t]=N.useState(()=>{const r=localStorage.getItem("darkMode");return r!==null?JSON.parse(r):window.matchMedia("(prefers-color-scheme: dark)").matches});return N.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),{isDarkMode:e,toggleDarkMode:()=>{t(!e)}}}function pr({onAddModel:e,onAdminClick:t,activeTab:n,onTabChange:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),{isDarkMode:c,toggleDarkMode:u}=xx(),{user:h,signOut:d}=rt(),m=async()=>{i(!1),await d()},f=[{id:"collection",name:"Collection",icon:Rn},{id:"battleplan",name:"Battleplan",icon:nt}],p=b=>{l(!1),r==null||r(b)};return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:h&&a.jsx("button",{onClick:()=>l(!o),className:"text-secondary-text hover:text-text focus:outline-none mr-4",children:o?a.jsx(be,{className:"w-6 h-6 text-icon"}):a.jsx(cv,{className:"w-6 h-6 text-icon"})})}),a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsx("img",{src:"Battleplan-Logo-Purple.svg",alt:"Mini Myths Logo",className:"max-h-[300px] w-auto"})}),a.jsx("div",{className:"flex items-center space-x-4",children:h?a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>i(!s),className:"text-secondary-text hover:text-text focus:outline-none",children:a.jsx(vn,{className:"w-6 h-6 text-icon hover:text-icon-hover"})})}):null})]}),h&&a.jsxs("div",{className:`absolute right-4 top-16 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-50 min-w-[200px] transition-all duration-200 ease-in-out ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}`,children:[a.jsx("div",{className:"px-4 py-2 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vn,{className:"w-5 h-5 text-icon"}),a.jsx("span",{className:"text-base text-text",children:h.email})]})}),a.jsxs("button",{onClick:()=>{i(!1),t==null||t()},className:`flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors ${h!=null&&h.is_admin||h!=null&&h.is_location_admin?"":"hidden"}`,children:[a.jsx(fv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{children:"Admin"})]}),a.jsxs("button",{onClick:()=>{i(!1)},className:"flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:[a.jsx(hv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{children:"Settings"})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-bg-secondary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[c?a.jsx(Wg,{className:"w-5 h-5 text-icon hover:text-icon-hover"}):a.jsx(Vg,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{className:"text-base font-semibold text-text",children:c?"Dark Mode":"Light Mode"})]}),a.jsx("button",{onClick:u,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring---color-brand focus:ring-offset-2 ${c?"bg-brand":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:"Sign Out"})]})]})}),h&&a.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-bg-primary border-r border-border-custom shadow-lg transform transition-transform duration-300 ease-in-out ${o?"translate-x-0":"-translate-x-full"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[a.jsx("h2",{className:"text-lg font-semibold text-title",children:"Navigation"}),a.jsx("button",{onClick:()=>l(!1),className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("nav",{className:"flex-1 p-4",children:a.jsxs("div",{className:"space-y-2",children:[f.map(b=>{const E=b.icon,g=n===b.id;return a.jsxs("button",{onClick:()=>p(b.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${g?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(E,{className:`w-5 h-5 ${g?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${g?"text-brand":""}`,children:b.name})]},b.id)}),a.jsx("div",{className:"border-t border-border-custom my-4"}),a.jsxs("button",{onClick:()=>{l(!1),r==null||r("about")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-secondary-text hover:text-text hover:bg-bg-secondary",children:[a.jsx(vn,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{className:"font-medium",children:"About"})]}),((h==null?void 0:h.is_admin)||(h==null?void 0:h.is_location_admin))&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t border-border-custom my-4"}),a.jsx("div",{className:"px-4 py-2",children:a.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"Admin Tools"})}),a.jsxs("button",{onClick:()=>{l(!1),r==null||r("all-bookings")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${n==="all-bookings"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(nt,{className:`w-5 h-5 ${n==="all-bookings"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${n==="all-bookings"?"text-brand":""}`,children:"All Bookings"})]}),a.jsxs("button",{onClick:()=>{l(!1),r==null||r("blocked-dates")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${n==="blocked-dates"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(Bg,{className:`w-5 h-5 ${n==="blocked-dates"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${n==="blocked-dates"?"text-brand":""}`,children:"Blocked Dates"})]})]})]})})]})}),h&&a.jsx("div",{className:`fixed inset-0 bg-black z-30 transition-opacity duration-300 ease-in-out ${o?"bg-opacity-50 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>l(!1)}),h&&a.jsx("div",{className:`fixed inset-0 bg-black z-40 transition-opacity duration-200 ease-in-out ${s?"bg-opacity-25 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>{i(!1)}})]})}function O1({icon:e,label:t,isActive:n,onClick:r}){return a.jsxs("button",{onClick:r,className:`flex items-center space-x-2 py-4 px-6 border-b-2 font-medium text-sm transition-colors ${n?"!border-brand !text-brand":"border-transparent text-secondary-text hover:text-text hover:border-border-custom"}`,children:[a.jsx(e,{className:`w-5 h-5 ${n?"text-brand":"text-secondary-text hover:text-text"}`}),a.jsx("span",{children:t})]})}function Vr({activeTab:e,onTabChange:t}){const n=[{id:"collection",name:"Collection",icon:Rn},{id:"battleplan",name:"Bookings",icon:nt}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black/75 backdrop-blur-md border-t border-border-custom/30",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("nav",{className:"flex justify-center items-center space-x-8","aria-label":"Tabs",children:n.map(r=>a.jsx(O1,{icon:r.icon,label:r.name,isActive:e===r.id,onClick:()=>t(r.id)},r.id))})})})}function R1({activeView:e,onViewChange:t}){const n=[{id:"recent",label:"Recent",icon:Ps},{id:"models",label:"Models",icon:ov},{id:"collections",label:"Collections",icon:Rn}];return a.jsx("div",{className:"bg-bg-secondary shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center items-center py-3",children:a.jsx("div",{className:"flex space-x-8",children:n.map(r=>{const s=r.icon,i=e===r.id;return a.jsxs("button",{onClick:()=>t(r.id),className:"flex flex-col items-center space-y-2 px-6 py-2 rounded-lg transition-all duration-200",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-border-custom transition-opacity",children:a.jsx(s,{className:`w-4 h-4 transition-opacity ${i?"text-icon-active opacity-100":"text-icon opacity-75"}`})}),a.jsx("span",{className:`text-lg font-medium transition-colors ${i?"text-text":"text-secondary-text"}`,children:r.label})]},r.id)})})})})})}function pd(e){return new Date(e)}function gd(e,t={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return pd(e).toLocaleDateString("en-US",t)}function co(e,t={hour:"numeric",minute:"2-digit",hour12:!0}){const n=new Date,[r,s,i="00"]=e.split(":");return new Date(n.getFullYear(),n.getMonth(),n.getDate(),parseInt(r),parseInt(s),parseInt(i)).toLocaleTimeString("en-US",t)}function Xc(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Zc(e){const t=pd(e),n=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<n}function F1(e){const t=pd(e),n=new Date,r=new Date(n),s=new Date(n);return r.setDate(r.getDate()-1),s.setDate(s.getDate()+1),n.setHours(0,0,0,0),r.setHours(0,0,0,0),s.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime()?"Today":t.getTime()===r.getTime()?"Yesterday":t.getTime()===s.getTime()?"Tomorrow":gd(e,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function z1(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function yx({booking:e,onClick:t,onCancelBooking:n,isPast:r=!1}){return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 w-full",children:[a.jsxs("div",{onClick:t,className:"cursor-pointer hover:bg-bg-secondary transition-colors text-left rounded p-2 -m-2 mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Ps,{className:"w-4 h-4 text-secondary-text"}),a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium text-text text-sm",children:[gd(e.date)," - ",e.timeslot.name]}),a.jsxs("p",{className:"text-xs text-secondary-text",children:[co(e.timeslot.start_time)," - ",co(e.timeslot.end_time)]})]})]}),a.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[a.jsx(Rr,{className:"w-4 h-4 text-secondary-text mt-0.5"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-text text-sm truncate",children:e.location.name}),a.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.location.address})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(vn,{className:"w-4 h-4 text-secondary-text"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[e.user_name&&a.jsx("p",{className:"text-sm text-text truncate font-medium",children:e.user_name}),a.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.user_email||e.user.email})]})]}),e.game&&a.jsxs("div",{className:"flex items-center space-x-2",children:[e.game.icon?a.jsx("img",{src:e.game.icon,alt:`${e.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:s=>{const i=s.target;i.style.display="none";const o=i.nextElementSibling;o&&o.classList.contains("icon-fallback")&&(o.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:e.game.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:e.game.name.charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text truncate",children:e.game.name})]})]}),n&&!r&&a.jsx("div",{className:"flex justify-end pt-2 border-t border-border-custom",children:a.jsxs("button",{onClick:()=>n(e.id),className:"btn-danger-outline-sm btn-with-icon-sm",children:[a.jsx(be,{className:"w-3 h-3"}),a.jsx("span",{children:"Cancel"})]})})]})}function bx({isOpen:e,onClose:t,onConfirm:n,loading:r=!1}){if(!e)return null;const s=i=>{i.target===i.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:"Are you sure you want to cancel this booking?"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"We'll delete this booking and make the table available for someone else."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:r,className:"btn-ghost btn-flex",children:"No, I'll keep my booking"}),a.jsx("button",{onClick:n,disabled:r,className:"btn-danger btn-flex",children:r?"Deleting...":"Yes, Delete my booking"})]})]})})}function $1(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(!1),{user:c,loading:u}=rt();N.useEffect(()=>{if(u){r(!0),l(!1);return}if(!u){if(!c){t([]),r(!1),l(!0);return}r(!0),h()}},[c,u]);const h=async()=>{const d=Date.now(),m=500;try{const{data:f,error:p}=await q.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `).eq("user_id",c==null?void 0:c.id).order("date",{ascending:!0});if(p)throw p;if(!f){t([]);return}const b=[...new Set(f.map(C=>C.user_id))],{data:E,error:g}=await q.from("users").select("id, email").in("id",b);if(g)throw g;const v=new Map((E||[]).map(C=>[C.id,C])),y=f.map(C=>({...C,user:v.get(C.user_id)||{id:C.user_id,email:"Unknown User"}}));t(y)}catch(f){i(f instanceof Error?f.message:"Failed to fetch bookings")}finally{const f=Date.now()-d,p=Math.max(0,m-f);setTimeout(()=>{r(!1),l(!0)},p)}};return{bookings:e,loading:n,error:s,hasInitialized:o,refetch:h}}function B1({refreshTrigger:e=0,onNewBooking:t}){const[n,r]=Ne.useState(new Set);Ne.useState("");const[s,i]=Ne.useState({isOpen:!1,bookingId:null}),[o,l]=Ne.useState(!1),{bookings:c,loading:u,hasInitialized:h,refetch:d}=$1();Ne.useEffect(()=>{e>0&&d()},[e,d]);const m=g=>{i({isOpen:!0,bookingId:g})},f=async()=>{if(s.bookingId){l(!0);try{const{error:g}=await q.from("bookings").delete().eq("id",s.bookingId);if(g)throw g;await d(),i({isOpen:!1,bookingId:null})}catch(g){console.error("Error cancelling booking:",g)}finally{l(!1)}}},p=Ne.useMemo(()=>{const g=new Date;g.setHours(0,0,0,0);const v={},y=[];c.forEach(x=>{if(new Date(x.date)>=g){const T=x.date;v[T]||(v[T]=[]),v[T].push(x)}else y.push(x)}),Object.keys(v).forEach(x=>{v[x].sort((S,T)=>S.timeslot.start_time.localeCompare(T.timeslot.start_time))}),y.sort((x,S)=>{const T=S.date.localeCompare(x.date);return T!==0?T:S.timeslot.start_time.localeCompare(x.timeslot.start_time)});const j=Object.keys(v).sort((x,S)=>x.localeCompare(S)).map(x=>({date:x,bookings:v[x],isPast:!1}));return y.length>0&&j.push({date:"past",bookings:y,isPast:!0}),j},[c]);Ne.useEffect(()=>{p.length>0&&r(new Set([p[0].date]))},[p]);const b=g=>{r(v=>{const y=new Set(v);return y.has(g)?y.delete(g):y.add(g),y})},E=g=>g==="past"?"Past Bookings":new Date(g).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsx("div",{className:"text-center mb-12",children:a.jsx("h1",{className:"text-4xl font-bold text-title mb-4",children:"YOUR TABLE BOOKINGS"})}),a.jsx("div",{className:"mb-8",children:u?a.jsx("div",{className:"space-y-8",children:Array.from({length:2}).map((g,v)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-full border-b border-border-custom pb-2 animate-pulse",children:a.jsx("div",{className:"h-6 bg-secondary-text opacity-20 rounded w-48"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:v===0?3:2}).map((y,C)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 animate-pulse",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]}),a.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-2/3 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-full"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-3/4"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/3"})]})]},C))})]},v))}):h&&c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No table bookings yet."}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:t,className:"btn-primary",children:"Book Your First Table"})})]}):a.jsx("div",{className:"space-y-8",children:p.map(({date:g,bookings:v,isPast:y})=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>b(g),className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:E(g)}),n.has(g)?a.jsx(Io,{className:"w-5 h-5 text-icon"}):a.jsx(ir,{className:"w-5 h-5 text-icon"})]}),n.has(g)&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(C=>a.jsx(yx,{booking:C,onClick:()=>{},onCancelBooking:m,isPast:y},C.id))})]},g))})})]}),a.jsx(bx,{isOpen:s.isOpen,onClose:()=>i({isOpen:!1,bookingId:null}),onConfirm:f,loading:o})]})}function U1({model:e,name:t,boxName:n,gameName:r,gameIcon:s,status:i,count:o,imageUrl:l,onViewModel:c,onViewBox:u}){console.log("ModelCard Debug:",{name:t,gameName:r,gameIcon:s,hasGameIcon:!!s,gameIconType:typeof s,gameIconTrimmed:s==null?void 0:s.trim()});const h=f=>{switch(f){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},d=()=>{var p,b,E;if(l&&typeof l=="string"&&l.trim()!==""&&l!=="undefined"&&l!=="null"&&!l.includes("undefined")&&!l.includes("null")&&(l.startsWith("http")||l.startsWith("/")))return{src:l,isGameFallback:!1};const f=((b=(p=e==null?void 0:e.box)==null?void 0:p.game)==null?void 0:b.icon)||((E=e==null?void 0:e.game)==null?void 0:E.icon);return f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")?{src:f,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},m=f=>!!(f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")&&f.includes("game-assets"));return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col h-full",children:[a.jsxs("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:[(()=>{const f=d();return a.jsx("img",{src:f.src,alt:t,className:`w-full h-48 min-h-[400px] object-cover ${f.isGameFallback?"opacity-10":""}`,loading:"lazy",onError:p=>{const b=p.target,E="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";b.src!==E&&(console.log("Image failed to load:",b.src,"Falling back to default"),b.src=E)}})})(),i!=="None"&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(i)}`,children:i})})]}),a.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[a.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:t}),(e==null?void 0:e.box)&&a.jsx("button",{onClick:()=>u==null?void 0:u(e.box),className:"text-sm text-secondary-text hover:text-brand transition-colors text-left",children:n})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[a.jsx("span",{className:"text-xs text-secondary-text font-bold",children:r.toUpperCase()}),m(s)?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s||"",alt:`${r} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:f=>{const p=f.target;console.warn("Game icon failed to load (bucket not found):",s,"Falling back to letter icon"),p.style.display="none";const b=p.nextElementSibling;b&&b.classList.contains("icon-fallback")&&(b.style.display="flex")},onLoad:f=>{const b=f.target.nextElementSibling;b&&b.classList.contains("icon-fallback")&&(b.style.display="none")}}),a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]}):a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]})]}),a.jsx("div",{className:"flex justify-center mt-auto",children:a.jsx("button",{onClick:c,className:"btn-secondary btn-flex",children:"View Model"})})]})]})}function H1({name:e,gameName:t,purchaseDate:n,imageUrl:r,gameImage:s,gameIcon:i,onViewBox:o}){const l=h=>new Date(h).toLocaleDateString(),c=()=>r&&typeof r=="string"&&r.trim()!==""&&r!=="undefined"&&r!=="null"&&!r.includes("undefined")&&!r.includes("null")&&(r.startsWith("http")||r.startsWith("/"))?r:s&&typeof s=="string"&&s.trim()!==""&&s!=="undefined"&&s!=="null"&&s.startsWith("http")?s:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",u=h=>!!(h&&typeof h=="string"&&h.trim()!==""&&h!=="undefined"&&h!=="null"&&h.startsWith("http")&&h.includes("game-assets"));return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col",children:[a.jsx("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:a.jsx("img",{src:c(),alt:e,className:"w-full h-48 min-h-[400px] bg-bg-card-secondary object-cover"})}),a.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[a.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:e}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Purchased: ",l(n)]})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[a.jsx("span",{className:"text-xs text-secondary-text font-bold",children:t.toUpperCase()}),u(i)?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:i||"",alt:`${t} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:h=>{const d=h.target;console.warn("Game icon failed to load (bucket not found):",i,"Falling back to letter icon"),d.style.display="none";const m=d.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="flex")},onLoad:h=>{const m=h.target.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="none")}}),a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]}):a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]})]}),a.jsx("div",{className:"flex justify-center mt-auto",children:a.jsx("button",{onClick:o,className:"btn-secondary btn-flex",children:"View Collection"})})]})]})}function ga({currentPage:e,totalPages:t,onPageChange:n}){const r=[];if(t>7)if(e<=4){for(let i=1;i<=5;i++)r.push(i);r.push("..."),r.push(t)}else if(e>=t-3){r.push(1),r.push("...");for(let i=t-4;i<=t;i++)r.push(i)}else{r.push(1),r.push("...");for(let i=e-1;i<=e+1;i++)r.push(i);r.push("..."),r.push(t)}else for(let i=1;i<=t;i++)r.push(i);return a.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-8",children:[a.jsx("button",{onClick:()=>n(e-1),disabled:e===1,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:a.jsx(Ug,{className:"w-5 h-5"})}),r.map((i,o)=>a.jsx("button",{onClick:()=>typeof i=="number"&&n(i),disabled:i==="...",className:`px-3 py-2 rounded-lg text-sm font-medium ${i===e?"bg-title text-bg-primary":i==="..."?"cursor-default text-secondary-text":"hover:bg-bg-secondary text-text"}`,children:i},o)),a.jsx("button",{onClick:()=>n(e+1),disabled:e===t,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:a.jsx(ir,{className:"w-5 h-5"})})]})}function _f({isOpen:e,onClose:t,mode:n}){const[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(n),{signIn:b,signUp:E,signInWithGoogle:g,resetPassword:v}=rt();Ne.useEffect(()=>{p(n),s(""),o(""),h(""),m("")},[n]);const y=async()=>{c(!0),h("");try{const{error:S}=await g();S&&h(S.message)}catch{h("An unexpected error occurred")}finally{c(!1)}},C=async S=>{S.preventDefault(),c(!0),h(""),m("");try{if(f==="forgot-password"){const{error:T}=await v(r);T?h(T.message):(m("Password reset email sent! Check your inbox."),s(""))}else{const{error:T}=f==="login"?await b(r,i):await E(r,i);T?h(T.message):(t(),s(""),o(""))}}catch{h("An unexpected error occurred")}finally{c(!1)}},j=()=>{p("login"),s(""),o(""),h(""),m("")};if(!e)return null;const x=S=>{S.target===S.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:x,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f==="forgot-password"&&a.jsx("button",{onClick:j,className:"text-secondary-text hover:text-text p-1",children:a.jsx(On,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-2xl font-bold text-title flex-1 text-center",children:f==="login"?"Log In":f==="signup"?"Sign Up":"Reset Password"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),f!=="forgot-password"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{type:"button",onClick:y,disabled:l,className:"btn-secondary btn-full btn-with-icon",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{className:"font-medium",children:f==="login"?"Sign in with Google":"Sign up with Google"})]})}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-border-custom"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-modal-bg text-secondary-text",children:"Or continue with email"})})]})]}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:S=>s(S.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f!=="forgot-password"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:i,onChange:S=>o(S.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f==="login"&&a.jsx("div",{className:"text-right",children:a.jsx("button",{type:"button",onClick:()=>p("forgot-password"),className:"text-sm text-[var(--color-brand)] hover:text-[var(--color-brand)]/80 transition-colors",children:"Forgot your password?"})}),u&&a.jsx("div",{className:"text-red-600 text-sm",children:u}),d&&a.jsx("div",{className:"text-green-600 text-sm",children:d}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{type:"submit",disabled:l,className:"btn-primary btn-full",children:l?"Processing...":f==="login"?"Log In":f==="signup"?"Sign Up":"Send Reset Email"})})]}),f!=="forgot-password"&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-sm text-secondary-text",children:[f==="login"?"Don't have an account? ":"Already have an account? ",a.jsx("button",{type:"button",onClick:()=>p(f==="login"?"signup":"login"),className:"btn-ghost btn-ghost-sm",children:f==="login"?"Sign Up":"Log In"})]})})]})})}const xa="mini-myths-recent-games",Cf=3;function Bo(){const[e,t]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{try{const i=localStorage.getItem(xa);if(i){const l=JSON.parse(i).sort((c,u)=>u.lastUsed-c.lastUsed).slice(0,Cf);t(l)}}catch(i){console.error("Error loading recent games:",i),t([])}};return{recentGames:e,addRecentGame:i=>{try{const o=Date.now(),l={id:i.id,name:i.name,icon:i.icon,lastUsed:o},c=localStorage.getItem(xa);let u=[];c&&(u=JSON.parse(c)),u=u.filter(h=>h.id!==i.id),u.unshift(l),u=u.slice(0,Cf),localStorage.setItem(xa,JSON.stringify(u)),t(u)}catch(o){console.error("Error saving recent game:",o)}},clearRecentGames:()=>{try{localStorage.removeItem(xa),t([])}catch(i){console.error("Error clearing recent games:",i)}}}}function qi({games:e,selectedGame:t,onGameSelect:n,placeholder:r="Choose a Game",favoriteGames:s=[]}){const[i,o]=N.useState(!1),[l,c]=N.useState(""),u=N.useRef(null),h=N.useRef(null),{recentGames:d}=Bo(),m=e.find(x=>x.id===t),f=e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),p=new Set(s.map(x=>x.id)),b=d.find(x=>!p.has(x.id)&&f.some(S=>S.id===x.id)),E=b?f.filter(x=>x.id===b.id):[],g=s.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),v=f.filter(x=>x.id!==(b==null?void 0:b.id)&&!p.has(x.id));N.useEffect(()=>{const x=S=>{u.current&&!u.current.contains(S.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),N.useEffect(()=>{i&&h.current&&h.current.focus()},[i]);const y=x=>{n(x),c(""),o(!1)},C=x=>{c(x.target.value)},j=()=>{o(!i),i||c("")};return a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{type:"button",onClick:j,className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-left bg-bg-primary flex items-center justify-between hover:bg-bg-secondary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[m!=null&&m.icon?a.jsx("img",{src:m.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:x=>{const S=x.target;console.warn("Dropdown game icon failed to load:",m.icon),S.style.display="none"},onLoad:()=>{console.warn("Dropdown game icon loaded successfully:",m.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:m?"text-text":"text-secondary-text",children:m?m.name:r})]}),a.jsx(Io,{className:`w-5 h-5 text-icon transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg max-h-60 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-border-custom",children:a.jsxs("div",{className:"relative",children:[a.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{ref:h,type:"text",value:l,onChange:C,placeholder:"Search games...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-sm bg-bg-primary text-text"})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0&&g.length===0&&v.length===0?a.jsxs("div",{className:"px-4 py-3 text-secondary-text text-sm",children:['No games found matching "',l,'"']}):a.jsxs(a.Fragment,{children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-4 py-2 bg-blue-50 border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-blue-800 uppercase tracking-wide",children:"Recent Games"})}),E.map(x=>a.jsxs("button",{type:"button",onClick:()=>y(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-blue-25",children:[x.icon?a.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const T=S.target;console.warn("Game list icon failed to load:",x.icon),T.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:x.name})]},`recent-${x.id}`))]}),g.length>0&&a.jsxs(a.Fragment,{children:[E.length>0&&a.jsx("div",{className:"px-4 py-2 bg-amber-50 border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-amber-800 uppercase tracking-wide",children:"Favorite Games"})}),g.map(x=>a.jsxs("button",{type:"button",onClick:()=>y(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-amber-25",children:[x.icon?a.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const T=S.target;console.warn("Game list icon failed to load:",x.icon),T.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:x.name})]},`favorite-${x.id}`))]}),v.length>0&&a.jsxs(a.Fragment,{children:[(E.length>0||g.length>0)&&a.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"All Games"})}),v.map(x=>a.jsxs("button",{type:"button",onClick:()=>y(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors",children:[x.icon?a.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const T=S.target;console.warn("Game list icon failed to load:",x.icon),T.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:x.name})]},x.id))]})]})})]})]})}async function Mn(e,t=1200,n=1200,r=.8){return new Promise((s,i)=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:h}=c;u>h?u>t&&(h=h*t/u,u=t):h>n&&(u=u*n/h,h=n),o.width=u,o.height=h,l?(l.drawImage(c,0,0,u,h),o.toBlob(d=>{if(d){const m=new File([d],e.name,{type:e.type,lastModified:Date.now()});s(m)}else i(new Error("Failed to compress image"))},e.type,r)):i(new Error("Failed to get canvas context"))},c.onerror=()=>{i(new Error("Failed to load image"))},c.src=URL.createObjectURL(e)})}function Ss(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type.toLowerCase())}function Pt(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function Dr({isOpen:e,onClose:t,onCrop:n,imageFile:r}){const s=N.useRef(null);N.useRef(null);const[i,o]=N.useState(null),[l,c]=N.useState({x:0,y:0,width:200,height:200}),[u,h]=N.useState(!1),[d,m]=N.useState(!1),[f,p]=N.useState({x:0,y:0}),[b,E]=N.useState(1),[g,v]=N.useState(0),[y,C]=N.useState(""),[j,x]=N.useState({exposure:0});N.useEffect(()=>{if(e&&r){const k=new Image;return k.onload=()=>{o(k);const B=600,re=400,_=B/k.width,G=re/k.height,ae=Math.min(_,G,1),O=k.width*ae,H=k.height*ae,ue=Math.min(O,H)*.8;c({x:(B-ue)/2,y:(re-ue)/2,width:ue,height:ue}),E(ae),v(0),x({exposure:0})},k.src=URL.createObjectURL(r),()=>URL.revokeObjectURL(k.src)}},[e,r]);const S=N.useCallback(()=>{const k=s.current,B=k==null?void 0:k.getContext("2d");if(!k||!B||!i)return;B.clearRect(0,0,k.width,k.height),B.save();const re=k.width/2,_=k.height/2;if(B.translate(re,_),B.rotate(g*Math.PI/180),B.scale(b,b),j.exposure!==0){const O=document.createElement("canvas"),H=O.getContext("2d");H&&(O.width=i.width,O.height=i.height,H.drawImage(i,0,0),j.exposure>0?(H.globalCompositeOperation="screen",H.fillStyle=`rgba(255, 255, 255, ${j.exposure/100})`,H.fillRect(0,0,O.width,O.height)):j.exposure<0&&(H.globalCompositeOperation="multiply",H.fillStyle=`rgba(0, 0, 0, ${Math.abs(j.exposure)/100})`,H.fillRect(0,0,O.width,O.height)),B.drawImage(O,-i.width/2,-i.height/2,i.width,i.height))}else B.drawImage(i,-i.width/2,-i.height/2,i.width,i.height);B.restore(),B.strokeStyle="#F59E0B",B.lineWidth=2,B.strokeRect(l.x,l.y,l.width,l.height);const G=8,ae=[{x:l.x-G/2,y:l.y-G/2},{x:l.x+l.width-G/2,y:l.y-G/2},{x:l.x-G/2,y:l.y+l.height-G/2},{x:l.x+l.width-G/2,y:l.y+l.height-G/2},{x:l.x+l.width/2-G/2,y:l.y-G/2},{x:l.x+l.width-G/2,y:l.y+l.height/2-G/2},{x:l.x+l.width/2-G/2,y:l.y+l.height-G/2},{x:l.x-G/2,y:l.y+l.height/2-G/2}];B.fillStyle="#F59E0B",ae.forEach(O=>{B.fillRect(O.x,O.y,G,G)})},[i,l,b,g,j]);N.useEffect(()=>{S()},[S]);const T=k=>{const B=s.current;if(!B)return;const re=B.getBoundingClientRect(),_=k.clientX-re.left,G=k.clientY-re.top,O=window.innerWidth<=768?40:20,H=[{x:l.x-O/2,y:l.y-O/2,type:"nw"},{x:l.x+l.width-O/2,y:l.y-O/2,type:"ne"},{x:l.x-O/2,y:l.y+l.height-O/2,type:"sw"},{x:l.x+l.width-O/2,y:l.y+l.height-O/2,type:"se"},{x:l.x+l.width/2-O/2,y:l.y-O/2,type:"n"},{x:l.x+l.width-O/2,y:l.y+l.height/2-O/2,type:"e"},{x:l.x+l.width/2-O/2,y:l.y+l.height-O/2,type:"s"},{x:l.x-O/2,y:l.y+l.height/2-O/2,type:"w"}];for(let fe=0;fe<H.length;fe++){const ue=H[fe];if(_>=ue.x&&_<=ue.x+O&&G>=ue.y&&G<=ue.y+O){m(!0),C(ue.type),p({x:_,y:G});return}}_>=l.x&&_<=l.x+l.width&&G>=l.y&&G<=l.y+l.height&&(h(!0),p({x:_-l.x,y:G-l.y}))},[D,w]=N.useState("crosshair"),I=k=>{const B=s.current;if(!B)return;const re=B.getBoundingClientRect(),_=k.clientX-re.left,G=k.clientY-re.top;if(!u&&!d){const O=window.innerWidth<=768?40:20,H=[{x:l.x-O/2,y:l.y-O/2,type:"nw"},{x:l.x+l.width-O/2,y:l.y-O/2,type:"ne"},{x:l.x-O/2,y:l.y+l.height-O/2,type:"sw"},{x:l.x+l.width-O/2,y:l.y+l.height-O/2,type:"se"},{x:l.x+l.width/2-O/2,y:l.y-O/2,type:"n"},{x:l.x+l.width-O/2,y:l.y+l.height/2-O/2,type:"e"},{x:l.x+l.width/2-O/2,y:l.y+l.height-O/2,type:"s"},{x:l.x-O/2,y:l.y+l.height/2-O/2,type:"w"}];let fe=!1;for(let ue=0;ue<H.length;ue++){const K=H[ue];if(_>=K.x&&_<=K.x+O&&G>=K.y&&G<=K.y+O){switch(fe=!0,K.type){case"nw":case"se":w("nw-resize");break;case"ne":case"sw":w("ne-resize");break;case"n":case"s":w("n-resize");break;case"e":case"w":w("e-resize");break}break}}fe||(_>=l.x&&_<=l.x+l.width&&G>=l.y&&G<=l.y+l.height?w("move"):w("default"))}if(u){w("move");const ae=Math.max(0,Math.min(_-f.x,B.width-l.width)),O=Math.max(0,Math.min(G-f.y,B.height-l.height));c(H=>({...H,x:ae,y:O}))}else if(d){const ae=_-f.x,O=G-f.y;c(H=>{let fe=H.x,ue=H.y,K=H.width,le=H.height;switch(y){case"nw":fe=Math.max(0,Math.min(H.x+ae,H.x+H.width-50)),ue=Math.max(0,Math.min(H.y+O,H.y+H.height-50)),K=H.width-(fe-H.x),le=H.height-(ue-H.y);break;case"ne":ue=Math.max(0,Math.min(H.y+O,H.y+H.height-50)),K=Math.max(50,Math.min(H.width+ae,B.width-H.x)),le=H.height-(ue-H.y);break;case"sw":fe=Math.max(0,Math.min(H.x+ae,H.x+H.width-50)),K=H.width-(fe-H.x),le=Math.max(50,Math.min(H.height+O,B.height-H.y));break;case"se":K=Math.max(50,Math.min(H.width+ae,B.width-H.x)),le=Math.max(50,Math.min(H.height+O,B.height-H.y));break;case"n":ue=Math.max(0,Math.min(H.y+O,H.y+H.height-50)),le=H.height-(ue-H.y);break;case"e":K=Math.max(50,Math.min(H.width+ae,B.width-H.x));break;case"s":le=Math.max(50,Math.min(H.height+O,B.height-H.y));break;case"w":fe=Math.max(0,Math.min(H.x+ae,H.x+H.width-50)),K=H.width-(fe-H.x);break}return{x:fe,y:ue,width:K,height:le}}),p({x:_,y:G})}},A=()=>{h(!1),m(!1),C("")},$=()=>{E(k=>Math.min(k+.1,3))},J=()=>{E(k=>Math.max(k-.1,.1))},F=()=>{v(k=>(k+90)%360)},Z=k=>{const B=parseFloat(k.target.value);x(re=>({...re,exposure:B}))},ee=()=>{x({exposure:0})},z=()=>{const k=s.current,B=k==null?void 0:k.getContext("2d");if(!k||!B||!i)return;const re=k.width,_=k.height,G=re/2,ae=_/2,O=i.width*b,H=i.height*b,fe=G-O/2,ue=ae-H/2,K=l.x-fe,le=l.y-ue,X=K/b,U=le/b,ce=l.width/b,me=l.height/b,Ie=Math.max(0,Math.min(X,i.width)),Le=Math.max(0,Math.min(U,i.height)),Ae=Math.min(ce,i.width-Ie),Ue=Math.min(me,i.height-Le),ne=document.createElement("canvas"),L=ne.getContext("2d");if(L){if(ne.width=Math.round(Ae),ne.height=Math.round(Ue),g!==0||j.exposure!==0){const te=document.createElement("canvas"),he=te.getContext("2d");if(!he)return;if(g!==0){const P=g*Math.PI/180,M=Math.abs(Math.cos(P)),Q=Math.abs(Math.sin(P));te.width=i.width*M+i.height*Q,te.height=i.width*Q+i.height*M,he.translate(te.width/2,te.height/2),he.rotate(P)}else te.width=i.width,te.height=i.height;he.drawImage(i,-i.width/2,-i.height/2),j.exposure!==0&&(j.exposure>0?(he.globalCompositeOperation="screen",he.fillStyle=`rgba(255, 255, 255, ${j.exposure/100})`,he.fillRect(0,0,te.width,te.height)):(he.globalCompositeOperation="multiply",he.fillStyle=`rgba(0, 0, 0, ${Math.abs(j.exposure)/100})`,he.fillRect(0,0,te.width,te.height)));let Se,Ke;if(g!==0){const P=g*Math.PI/180,M=Math.abs(Math.cos(P)),Q=Math.abs(Math.sin(P));Se=te.width/2+(X-i.width/2)*M-(U-i.height/2)*Q-Ae/2,Ke=te.height/2+(X-i.width/2)*Q+(U-i.height/2)*M-Ue/2}else Se=X,Ke=U;L.drawImage(te,Math.max(0,Se),Math.max(0,Ke),Ae,Ue,0,0,Ae,Ue)}else L.drawImage(i,Ie,Le,Ae,Ue,0,0,Ae,Ue);ne.toBlob(te=>{if(te){const he=new File([te],r.name,{type:r.type,lastModified:Date.now()});n(he)}},r.type,1)}};if(!e)return null;const Y=k=>{k.target===k.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:Y,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Crop Image"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("canvas",{ref:s,width:600,height:400,className:"border border-border-custom rounded-lg w-full block",style:{cursor:D},onMouseDown:T,onMouseMove:I,onMouseUp:A,onMouseLeave:A})}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("button",{onClick:J,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom Out",children:a.jsx(gv,{className:"w-4 h-4"})}),a.jsx("button",{onClick:$,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom In",children:a.jsx(pv,{className:"w-4 h-4"})}),a.jsx("button",{onClick:F,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Rotate",children:a.jsx(dv,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex items-center space-x-2 text-sm text-secondary-text",children:a.jsx("span",{children:"Drag crop area or resize handles to adjust selection"})})]}),a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-sm text-secondary-text",children:"Exposure"}),a.jsxs("span",{className:"text-sm text-secondary-text",children:[j.exposure>0?"+":"",j.exposure]})]}),a.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:j.exposure,onChange:Z,className:"w-full h-2 bg-border-custom rounded-lg appearance-none cursor-pointer slider"}),a.jsxs("div",{className:"flex justify-between text-xs text-secondary-text mt-1",children:[a.jsx("span",{children:"Darker"}),a.jsx("span",{children:"Brighter"})]})]}),a.jsx("button",{onClick:ee,className:"text-sm text-amber-600 hover:text-amber-700 transition-colors",children:"Reset Adjustments"})]})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:z,className:"btn-primary btn-flex",children:"Crop & Use"})]})]})})}function G1({isOpen:e,onClose:t,onSuccess:n,preselectedBoxId:r}){const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(""),[h,d]=N.useState(""),[m,f]=N.useState(""),[p,b]=N.useState(""),[E,g]=N.useState(""),[v,y]=N.useState(""),[C,j]=N.useState("1"),[x,S]=N.useState(null),[T,D]=N.useState(!1),[w,I]=N.useState(null),[A,$]=N.useState([]),[J,F]=N.useState([]),[Z,ee]=N.useState(!1),[z,Y]=N.useState(!1),[k,B]=N.useState(""),[re,_]=N.useState(""),[G,ae]=N.useState(""),{user:O}=rt(),{addRecentGame:H}=Bo();Ne.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{e&&(fe(),le(),r&&u(r))},[e]),N.useEffect(()=>{e&&le()},[e,O]);const fe=async()=>{try{const{data:ne,error:L}=await q.from("games").select("id, name, icon").order("name");if(L)throw L;$(ne||[])}catch(ne){console.error("Error fetching games:",ne)}},ue=()=>!(O!=null&&O.fav_games)||O.fav_games.length===0?[]:A.filter(ne=>{var L;return(L=O.fav_games)==null?void 0:L.includes(ne.id)}),K=ne=>{l(ne);const L=A.find(te=>te.id===ne);L&&H(L)},le=async()=>{if(O)try{const{data:ne,error:L}=await q.from("boxes").select(`
          id,
          name,
          game_id,
          purchase_date,
          created_at,
          game:games(
            name,
            icon
          )
        `).eq("user_id",O.id).order("created_at",{ascending:!1});if(L)throw L;const te=(ne||[]).map(he=>({...he,game:he.game&&Array.isArray(he.game)?he.game[0]:he.game}));F(te)}catch(ne){console.error("Error fetching boxes:",ne)}},X=()=>o?J.filter(ne=>ne.game_id===o):J,U=ne=>{const L=ne.target.files;if(_(""),ae(""),L&&L.length>0){const te=L[0];if(!Ss(te)){_("Please select a valid image file (JPEG, PNG, or WebP)"),S(null),ne.target.value="";return}const he=50*1024*1024;te.size>he?(_(`Your image must be 50MB or less. Current size: ${Pt(te.size)}`),S(null),ne.target.value=""):(S(L),L&&L.length>0&&(I(L[0]),D(!0)),te.size>1024*1024&&ae(`Original size: ${Pt(te.size)}. Image will be automatically compressed before upload.`))}else S(L)},ce=ne=>{const L=new DataTransfer;L.items.add(ne),S(L.files),D(!1),I(null),ae(`Cropped image ready for upload (${Pt(ne.size)})`)},me=()=>{D(!1),I(null);const ne=document.getElementById("image");ne&&(ne.value=""),S(null)},Ie=ne=>{const L=ne.target.value.replace(/[^0-9.]/g,"");if(g(L),L&&!isNaN(parseFloat(L))){const te=parseFloat(L);y(`$${te.toFixed(2)}`)}else y("")},Le=async ne=>{if(ne.preventDefault(),!(!s.trim()||!O)){ee(!0),B("");try{let L="";if(x&&x.length>0){const Se=x[0];if(G.includes("Cropped image ready")){Y(!0);try{const P=await Mn(Se,1200,1200,.8);console.log(`Cropped image compressed: ${Pt(Se.size)}  ${Pt(P.size)}`);const M=P.name.split(".").pop(),Q=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`,{data:oe,error:se}=await q.storage.from("model-images").upload(Q,P);if(se)throw console.error("Compressed cropped image upload error:",se),new Error(`Failed to upload image: ${se.message}`);{const{data:ve}=q.storage.from("model-images").getPublicUrl(oe.path);L=ve.publicUrl,console.log("Uploaded compressed cropped image URL:",L)}}catch(P){console.error("Cropped image compression error:",P);const M=Se.name.split(".").pop(),Q=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`,{data:oe,error:se}=await q.storage.from("model-images").upload(Q,Se);if(se)throw console.error("Fallback cropped image upload error:",se),new Error(`Failed to upload image: ${se.message}`);{const{data:ve}=q.storage.from("model-images").getPublicUrl(oe.path);L=ve.publicUrl,console.log("Uploaded uncompressed cropped image URL:",L)}}finally{Y(!1)}}else{Y(!0);try{const P=await Mn(Se,1200,1200,.8);console.log(`Image compressed: ${Pt(Se.size)}  ${Pt(P.size)}`);const M=P.name.split(".").pop(),Q=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`,{data:oe,error:se}=await q.storage.from("model-images").upload(Q,P);if(se)throw console.error("Image upload error:",se),new Error(`Failed to upload image: ${se.message}`);{const{data:ve}=q.storage.from("model-images").getPublicUrl(oe.path);L=ve.publicUrl,console.log("Uploaded compressed image URL:",L)}}catch(P){console.error("Image compression error:",P);try{const M=Se.name.split(".").pop(),Q=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`,{data:oe,error:se}=await q.storage.from("model-images").upload(Q,Se);if(se)throw console.error("Original image upload error:",se),new Error(`Failed to upload image: ${se.message}`);{const{data:ve}=q.storage.from("model-images").getPublicUrl(oe.path);L=ve.publicUrl,console.log("Uploaded original image URL:",L)}}catch(M){throw console.error("Fallback upload failed:",M),new Error("Failed to upload image after compression fallback")}}finally{Y(!1)}}}let te=o||null;if(c||r){const Se=c||r,Ke=J.find(P=>P.id===Se);Ke&&Ke.game_id&&(te=Ke.game_id)}const{error:he}=await q.from("models").insert({name:s.trim(),box_id:c||r||null,game_id:te,status:h||"None",count:parseInt(C)||1,user_id:O.id,image_url:L,purchase_date:m||null,painted_date:p||null});if(he)throw he;i(""),l(""),u(""),d(""),f(""),b(""),g(""),y(""),j("1"),S(null),ae("");try{localStorage.removeItem("mini-myths-temp-box-context")}catch(Se){console.error("Error clearing box context:",Se)}n(),t()}catch(L){B(L instanceof Error?L.message:"Failed to add model")}finally{ee(!1),Y(!1)}}},Ae=s.trim().length>0&&!re&&!z;if(!e)return null;const Ue=ne=>{ne.target===ne.currentTarget&&t()};return X(),a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Ue,children:[a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Model"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Don't worry- you can update any of these details later."}),a.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"modelName",className:"block text-sm font-medium text-input-label font-overpass",children:"Model Name"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),a.jsx("input",{type:"text",id:"modelName",value:s,onChange:ne=>i(ne.target.value),placeholder:'eg. "Space Marine Lieutenant", "Captain America", "US Ranger Squad", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"box",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection (Optional)"}),a.jsxs("select",{id:"box",value:c,onChange:ne=>{u(ne.target.value),ne.target.value&&l("")},className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"No Collection (Loose Model)"}),X().map(ne=>a.jsxs("option",{value:ne.id,children:[ne.name," ",ne.game&&`(${ne.game.name})`]},ne.id))]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"Choose an existing collection or leave as loose model."}),c&&(()=>{const ne=J.find(L=>L.id===c);return ne&&ne.game?a.jsxs("p",{className:"text-xs text-[var(--color-brand)] mt-1",children:["Game will be automatically set to: ",a.jsx("strong",{children:ne.game.name})]}):null})()]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(qi,{games:A,selectedGame:o,onGameSelect:K,placeholder:"Choose a Game",favoriteGames:ue()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paintedStatus",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Status"}),a.jsxs("select",{id:"paintedStatus",value:h,onChange:ne=>d(ne.target.value),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"Select Status"}),a.jsx("option",{value:"Assembled",children:"Assembled"}),a.jsx("option",{value:"Primed",children:"Primed"}),a.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),a.jsx("option",{value:"Painted",children:"Painted"})]})]}),h==="Painted"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paintedDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"paintedDate",value:p,onChange:ne=>b(ne.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"purchaseDate",value:m,onChange:ne=>f(ne.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"purchasePrice",value:E,onChange:Ie,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"numberOfModels",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Models"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"numberOfModels",value:C,onChange:ne=>j(ne.target.value),min:"1",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:U,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."})]}),G&&a.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:G}),re&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:re}),k&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:k}),a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{type:"submit",disabled:!Ae||Z,className:`${Ae&&!Z?"btn-primary":"btn-disabled"}`,children:z?"Compressing Image...":Z?"Adding...":"Add to Collection"})})]})]}),w&&a.jsx(Dr,{isOpen:T,onClose:me,onCrop:ce,imageFile:w})]})}function vx({isOpen:e,onClose:t,images:n,onImageSelect:r,searchQuery:s,onFindMoreImages:i,isLoadingMore:o}){if(!e)return null;const l=c=>{c.target===c.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:l,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Do,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Suggested Images"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:['Search results for: "',s,'"']})]})]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-base text-secondary-text mb-4",children:['No images found for "',s,'". Try uploading your own image instead.']}),a.jsx("button",{onClick:t,className:"btn-primary",children:"Upload My Own Image"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Click on an image to use it for your box. Images are sourced from Google Image Search."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:n.map((c,u)=>a.jsxs("button",{onClick:()=>r(c),className:"group relative aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border---color-brand transition-all duration-200",children:[a.jsx("img",{src:c,alt:`Suggested image ${u+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-overpass font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Select Image"})})]},u))}),i&&a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("button",{onClick:i,disabled:o,className:"btn-primary btn-with-icon",children:o?a.jsxs(a.Fragment,{children:[a.jsx(of,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Finding more images..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(of,{className:"w-4 h-4"}),a.jsx("span",{children:"Find more images"})]})})}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:t,className:"btn-ghost",children:"Upload My Own Image Instead"})})]})]})})}function Tl({variant:e="primary",size:t="default",width:n="default",withIcon:r=!1,className:s="",children:i,...o}){const l=`btn-${e}`,d=[t==="small"?`btn-${e}-sm`:l,n==="full"?"btn-full":n==="flex"?"btn-flex":"",r?t==="small"?"btn-with-icon-sm":"btn-with-icon":"",s].filter(Boolean).join(" ");return a.jsx("button",{className:d,...o,children:i})}function q1({isOpen:e,onClose:t,onSuccess:n}){var Ke;const[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(null),[b,E]=N.useState(!1),[g,v]=N.useState(null),[y,C]=N.useState([]),[j,x]=N.useState(!1),[S,T]=N.useState(!1),[D,w]=N.useState(""),[I,A]=N.useState(""),[$,J]=N.useState(""),{user:F}=rt(),{addRecentGame:Z}=Bo(),[ee,z]=N.useState(!1),[Y,k]=N.useState(!1),[B,re]=N.useState([]),[_,G]=N.useState(""),[ae,O]=N.useState([]),[H,fe]=N.useState(!1);let ue=null;Ne.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{e&&K()},[e]);const K=async()=>{try{const{data:P,error:M}=await q.from("games").select("id, name, icon").order("name");if(M)throw M;C(P||[])}catch(P){console.error("Error fetching games:",P)}},le=()=>!(F!=null&&F.fav_games)||F.fav_games.length===0?[]:y.filter(P=>{var M;return(M=F.fav_games)==null?void 0:M.includes(P.id)}),X=P=>{o(P);const M=y.find(Q=>Q.id===P);M&&Z(M)},U=P=>{const M=P.target.files;if(A(""),J(""),M&&M.length>0){const Q=M[0];if(!Ss(Q)){A("Please select a valid image file (JPEG, PNG, or WebP)"),p(null),P.target.value="";return}const oe=50*1024*1024;Q.size>oe?(A(`Your image must be 50MB or less. Current size: ${Pt(Q.size)}`),p(null),P.target.value=""):(p(M),M&&M.length>0&&(v(M[0]),E(!0)),Q.size>1024*1024&&J(`Original size: ${Pt(Q.size)}. Image will be automatically compressed before upload.`))}else p(M)},ce=P=>{const M=new DataTransfer;M.items.add(P),p(M.files),E(!1),v(null),J(`Cropped image ready for upload (${Pt(P.size)})`)},me=()=>{E(!1),v(null);const P=document.getElementById("boxImage");P&&(P.value=""),p(null)},Ie=P=>{const M=P.target.value.replace(/[^0-9.]/g,"");if(h(M),M&&!isNaN(parseFloat(M))){const Q=parseFloat(M);m(`$${Q.toFixed(2)}`)}else m("")},Le=async()=>{if(r.trim()){k(!0),re([]),O([]);try{const P=y.find(Ee=>Ee.id===i),M=(P==null?void 0:P.name)||"",Q=`${r.trim()} ${M}`.trim(),oe=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Q,count:6})});if(!oe.ok)throw new Error("Failed to search for images");const ve=(await oe.json()).images||[];re(ve),O(ve),z(!0)}catch(P){console.error("Error searching for images:",P),z(!1)}finally{k(!1)}}},Ae=async()=>{if(r.trim()){fe(!0);try{const P=y.find(De=>De.id===i),M=(P==null?void 0:P.name)||"",Q=`${r.trim()} ${M}`.trim();console.log("Finding more images with exclude:",ae);const oe=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Q,count:6,exclude:ae})});if(!oe.ok)throw new Error("Failed to search for more images");const ve=(await oe.json()).images||[];console.log("Received additional images:",ve),console.log("Previous results count:",ae.length),console.log("New results count:",ve.length);const Ee=ve.filter(De=>!ae.includes(De));console.log("Unique new images after filtering:",Ee),re(Ee),O([...ae,...Ee])}catch(P){console.error("Error searching for more images:",P)}finally{fe(!1)}}},Ue=P=>{p(null),J(`Selected image: ${P}`),z(!1),G(P)},ne=async P=>{if(P.preventDefault(),!(!r.trim()||!F)){x(!0),w("");try{let M="";if(_)M=_;else if(f&&f.length>0){const se=f[0];if($.includes("Cropped image ready")){T(!0);try{const Ee=await Mn(se,1200,1200,.8);console.log(`Cropped image compressed: ${Pt(se.size)}  ${Pt(Ee.size)}`);const De=Ee.name.split(".").pop(),at=`${F.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${De}`,{data:Je,error:Te}=await q.storage.from("model-images").upload(at,Ee);if(Te)throw console.error("Compressed cropped image upload error:",Te),new Error(`Failed to upload image: ${Te.message}`);{const{data:dt}=q.storage.from("model-images").getPublicUrl(Je.path);M=dt.publicUrl,console.log("Uploaded compressed cropped image URL:",M)}}catch(Ee){console.error("Cropped image compression error:",Ee);const De=se.name.split(".").pop(),at=`${F.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${De}`,{data:Je,error:Te}=await q.storage.from("model-images").upload(at,se);if(Te)throw console.error("Fallback cropped image upload error:",Te),new Error(`Failed to upload image: ${Te.message}`);{const{data:dt}=q.storage.from("model-images").getPublicUrl(Je.path);M=dt.publicUrl,console.log("Uploaded uncompressed cropped image URL:",M)}}finally{T(!1)}}else{T(!0);try{const Ee=await Mn(se,1200,1200,.8);console.log(`Image compressed: ${Pt(se.size)}  ${Pt(Ee.size)}`);const De=Ee.name.split(".").pop(),at=`${F.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${De}`,{data:Je,error:Te}=await q.storage.from("model-images").upload(at,Ee);if(Te)throw console.error("Image upload error:",Te),new Error(`Failed to upload image: ${Te.message}`);{const{data:dt}=q.storage.from("model-images").getPublicUrl(Je.path);M=dt.publicUrl,console.log("Uploaded compressed image URL:",M)}}catch(Ee){console.error("Image compression error:",Ee);try{const De=se.name.split(".").pop(),at=`${F.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${De}`,{data:Je,error:Te}=await q.storage.from("model-images").upload(at,se);if(Te)throw console.error("Original image upload error:",Te),new Error(`Failed to upload image: ${Te.message}`);{const{data:dt}=q.storage.from("model-images").getPublicUrl(Je.path);M=dt.publicUrl,console.log("Uploaded original image URL:",M)}}catch(De){throw console.error("Fallback upload failed:",De),new Error("Failed to upload image after compression fallback")}}finally{T(!1)}}}const{data:Q,error:oe}=await q.from("boxes").insert({name:r.trim(),game_id:i||null,purchase_date:l||null,user_id:F.id,image_url:M}).select().single();if(oe)throw oe;return ue=Q.id,s(""),o(""),c(""),h(""),m(""),p(null),J(""),G(""),z(!1),re([]),n(),Q}catch(M){throw w(M instanceof Error?M.message:"Failed to add box"),M}finally{x(!1),T(!1)}}},L=async P=>{try{await ne(P),t()}catch{}},te=async P=>{await ne(P),t()},he=r.trim().length>0&&!I&&!S;if(!e)return null;const Se=P=>{P.target===P.currentTarget&&t()};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Se,children:[a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Collection"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Collections are a way to sort your models into groups. You can use this to track boxes you've bought, squads you've assembled, or simply to organise your collection."}),a.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass",children:"Collection Name"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),a.jsx("input",{type:"text",id:"boxName",value:r,onChange:P=>s(P.target.value),placeholder:'eg. "Kill Team Collection", "Space Marine Heroes", "Warhammer 40k Elite Edition", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(qi,{games:y,selectedGame:i,onGameSelect:X,placeholder:"Choose a Game",favoriteGames:le()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"purchaseDate",value:l,onChange:P=>c(P.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"purchasePrice",value:u,onChange:Ie,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:U,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."}),r.trim()&&!f&&!_&&a.jsx("div",{className:"mt-3",children:a.jsx(Tl,{variant:"secondary",width:"full",size:"small",onClick:Le,disabled:Y,children:Y?"Searching for images...":"Find images for this collection"})})]}),$&&a.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:$}),I&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:I}),D&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:D}),a.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[a.jsx(Tl,{className:"btn-primary",variant:he&&!j?"primary":"disabled",width:"full",onClick:L,disabled:!he||j,children:S?"Compressing Image...":j?"Adding...":"Add Empty Collection"}),a.jsx(Tl,{variant:he&&!j?"primary":"disabled",width:"full",onClick:te,disabled:!he||j,children:S?"Compressing Image...":j?"Adding...":"Add Models to Collection"})]})]})]}),g&&a.jsx(Dr,{isOpen:b,onClose:me,onCrop:ce,imageFile:g}),ee&&a.jsx(vx,{isOpen:ee,onClose:()=>z(!1),images:B,onImageSelect:Ue,searchQuery:`${r} ${((Ke=y.find(P=>P.id===i))==null?void 0:Ke.name)||""}`.trim(),onFindMoreImages:Ae,isLoadingMore:H})]})}function W1({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await q.from("users").select("*").order("created_at",{ascending:!1});if(h)throw h;n(u||[])}catch(u){o(u instanceof Error?u.message:"Failed to fetch users")}finally{s(!1)}},c=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading users..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE USERS"})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),a.jsx("div",{className:"space-y-4",children:t.map(u=>a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[a.jsx(vn,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:u.email||"No email"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Joined ",c(u.created_at)]})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex-shrink-0 ${u.is_admin?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:u.is_admin?"Admin":"User"})]},u.id))}),t.length===0&&!r&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No users found."})})]})}function V1({isOpen:e,onClose:t,onGameUpdated:n,game:r}){const[s,i]=N.useState({name:"",manufacturer_id:"",image:"",icon:""}),[o,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(null),[m,f]=N.useState(!1),[p,b]=N.useState(!1),[E,g]=N.useState(null),[v,y]=N.useState(null),[C,j]=N.useState(null),[x,S]=N.useState(null),[T,D]=N.useState(!1),[w,I]=N.useState(!1),[A,$]=N.useState("");N.useEffect(()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""})},[r]),N.useEffect(()=>{e&&J()},[e]);const J=async()=>{try{const{data:_,error:G}=await q.from("manufacturers").select("id, name").order("name");if(G)throw G;l(_||[])}catch(_){console.error("Error fetching manufacturers:",_)}},F=_=>{var ae;const G=(ae=_.target.files)==null?void 0:ae[0];if(G){if(!Ss(G)){alert("Please select a valid image file");return}u(G),g(G),f(!0)}},Z=_=>{var ae;const G=(ae=_.target.files)==null?void 0:ae[0];if(G){if(!Ss(G)){alert("Please select a valid image file");return}d(G),y(G),b(!0)}},ee=_=>{j(_),f(!1),g(null)},z=_=>{S(_),b(!1),y(null)},Y=async(_,G,ae)=>{const O=(c==null?void 0:c.name.split(".").pop())||"jpg",H=`${ae}/${Date.now()}-${Math.random().toString(36).substring(2)}.${O}`,{data:fe,error:ue}=await q.storage.from(G).upload(H,_);if(ue)throw ue;const{data:K}=q.storage.from(G).getPublicUrl(fe.path);return K.publicUrl},k=async _=>{if(_.preventDefault(),!!r){D(!0),$("");try{let G=s.image,ae=s.icon;if(C){I(!0);const H=await Mn(C,1200,1200,.8);G=await Y(H,"game-assets","images")}if(x){I(!0);const H=await Mn(x,512,512,.9);ae=await Y(H,"game-assets","icons")}const{error:O}=await q.from("games").update({name:s.name,manufacturer_id:s.manufacturer_id||null,image:G,icon:ae}).eq("id",r.id);if(O)throw O;n()}catch(G){$(G instanceof Error?G.message:"Failed to update game")}finally{D(!1),I(!1)}}},B=()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""}),u(null),d(null),j(null),S(null),$("")};if(!e||!r)return null;const re=_=>{_.target===_.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:re,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Game"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"gameName",value:s.name,onChange:_=>i({...s,name:_.target.value}),placeholder:"Enter game name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"manufacturer",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Manufacturer"}),a.jsxs("div",{className:"relative",children:[a.jsx(rv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"manufacturer",value:s.manufacturer_id,onChange:_=>i({...s,manufacturer_id:_.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"Select a manufacturer..."}),o.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"gameImage",accept:"image/*",onChange:F,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),C&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Icon"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"gameIcon",accept:"image/*",onChange:Z,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),x&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),A&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:A}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:B,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:T||w,className:"btn-primary btn-flex",children:w?"Processing...":T?"Saving...":"Save Changes"})]})]})]})}),E&&a.jsx(Dr,{isOpen:m,onClose:()=>{f(!1),g(null),u(null)},onCrop:ee,imageFile:E}),v&&a.jsx(Dr,{isOpen:p,onClose:()=>{b(!1),y(null),d(null)},onCrop:z,imageFile:v})]})}function K1({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState({isOpen:!1,game:null});N.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:m,error:f}=await q.from("games").select(`
          *,
          manufacturer:manufacturers(name)
        `).order("name");if(f)throw f;n(m||[])}catch(m){o(m instanceof Error?m.message:"Failed to fetch games")}finally{s(!1)}},h=m=>{c({isOpen:!0,game:m})},d=()=>{u(),c({isOpen:!1,game:null})};return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading games..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE GAMES"})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),a.jsx("div",{className:"space-y-4",children:t.map(m=>{var f;return a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[m.icon?a.jsx("img",{src:m.icon,alt:`${m.name} icon`,className:"w-12 h-12 object-contain rounded",onError:p=>{const b=p.target;b.style.display="none";const E=b.nextElementSibling;E&&E.classList.contains("icon-fallback")&&(E.style.display="flex")}}):null,a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:m.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:m.name.charAt(0)})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:m.name}),a.jsx("p",{className:"text-sm text-secondary-text",children:((f=m.manufacturer)==null?void 0:f.name)||"No manufacturer"})]})]}),a.jsxs("button",{onClick:()=>h(m),className:"btn-secondary-sm btn-with-icon-sm",children:[a.jsx(Bi,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]})]},m.id)})}),t.length===0&&!r&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No games found."})}),a.jsx(V1,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,game:null}),onGameUpdated:d,game:l.game})]})}function J1({isOpen:e,onClose:t,location:n}){const[r,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(null),[f,p]=N.useState({name:"",start_time:"",end_time:"",availability:[]}),[b,E]=N.useState(!1),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];N.useEffect(()=>{e&&v()},[e,n.id]);const v=async()=>{try{o(!0);const{data:w,error:I}=await q.from("timeslots").select("*").eq("location_id",n.id).order("start_time");if(I)throw I;s(w||[])}catch(w){c(w instanceof Error?w.message:"Failed to fetch timeslots")}finally{o(!1)}},y=()=>{p({name:"",start_time:"",end_time:"",availability:[]}),m(null),h(!1)},C=w=>{p({name:w.name,start_time:w.start_time,end_time:w.end_time,availability:w.availability||[]}),m(w),h(!0)},j=async w=>{if(confirm("Are you sure you want to delete this timeslot?"))try{const{error:I}=await q.from("timeslots").delete().eq("id",w);if(I)throw I;await v()}catch(I){console.error("Error deleting timeslot:",I),alert("Failed to delete timeslot")}},x=w=>{p(I=>({...I,availability:I.availability.includes(w)?I.availability.filter(A=>A!==w):[...I.availability,w]}))},S=async w=>{if(w.preventDefault(),!(!f.name.trim()||!f.start_time||!f.end_time)){E(!0),c(null);try{if(d){const{error:I}=await q.from("timeslots").update({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,availability:f.availability}).eq("id",d.id);if(I)throw I}else{const{error:I}=await q.from("timeslots").insert({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,location_id:n.id,availability:f.availability});if(I)throw I}await v(),y()}catch(I){c(I instanceof Error?I.message:"Failed to save timeslot")}finally{E(!1)}}},T=w=>new Date(`2000-01-01T${w}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(!e)return null;const D=w=>{w.target===w.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:D,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Manage Timeslots - ",n.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),l&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:l})}),!u&&a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-with-icon",children:[a.jsx($i,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Timeslot"})]})}),u&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:d?"Edit Timeslot":"Add New Timeslot"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot Name"}),a.jsx("input",{type:"text",value:f.name,onChange:w=>p({...f,name:w.target.value}),placeholder:"e.g., Morning Session, Evening Games",className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Start Time"}),a.jsx("input",{type:"time",value:f.start_time,onChange:w=>p({...f,start_time:w.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"End Time"}),a.jsx("input",{type:"time",value:f.end_time,onChange:w=>p({...f,end_time:w.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Available Days"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:g.map(w=>a.jsx("button",{type:"button",onClick:()=>x(w),className:`px-3 py-2 rounded-lg text-sm font-overpass font-medium transition-colors ${f.availability.includes(w)?"bg-brand text-white":"bg-bg-primary border border-border-custom text-text hover:bg-bg-secondary"}`,children:w.slice(0,3)},w))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:y,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,className:"btn-primary btn-flex",children:b?"Saving...":d?"Update Timeslot":"Add Timeslot"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Current Timeslots"}),i?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading timeslots..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ps,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No timeslots configured for this location."})]}):r.map(w=>{var I;return a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-text",children:w.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:[T(w.start_time)," - ",T(w.end_time)]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(I=w.availability)==null?void 0:I.map(A=>a.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:A.slice(0,3)},A))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>C(w),className:"p-2 text-secondary-text hover:text-text transition-colors",children:a.jsx(Bi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>j(w.id),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:a.jsx(Fr,{className:"w-4 h-4"})})]})]},w.id)})]})]})})}function Q1({isOpen:e,onClose:t,location:n,onAdminsUpdated:r}){const[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(""),[h,d]=N.useState(!0),[m,f]=N.useState(!1),[p,b]=N.useState("");N.useEffect(()=>{e&&n&&(E(),g())},[e,n]);const E=async()=>{try{const{data:j,error:x}=await q.from("users").select("id, email").order("email");if(x)throw x;i(j||[])}catch(j){console.error("Error fetching users:",j),b("Failed to fetch users")}finally{d(!1)}},g=async()=>{if(!(n!=null&&n.admins)){l([]);return}try{const{data:j,error:x}=await q.from("users").select("id, email").in("id",n.admins).order("email");if(x)throw x;l(j||[])}catch(j){console.error("Error fetching admin users:",j)}},v=async()=>{if(!(!c.trim()||!n)){f(!0),b("");try{const j=s.find(T=>T.email.toLowerCase()===c.toLowerCase().trim());if(!j){b("User not found"),f(!1);return}if(n.admins.includes(j.id)){b("User is already an admin"),f(!1);return}const x=[...n.admins,j.id],{error:S}=await q.from("locations").update({admins:x}).eq("id",n.id);if(S)throw S;l([...o,j]),r(x),u("")}catch(j){b(j instanceof Error?j.message:"Failed to add admin")}finally{f(!1)}}},y=async j=>{if(n)try{const x=n.admins.filter(T=>T!==j),{error:S}=await q.from("locations").update({admins:x}).eq("id",n.id);if(S)throw S;l(o.filter(T=>T.id!==j)),r(x)}catch(x){b(x instanceof Error?x.message:"Failed to remove admin")}};if(!e||!n)return null;const C=j=>{j.target===j.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:C,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Edit Location Admins - ",n.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),p&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:p})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Add New Admin"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{type:"text",value:c,onChange:j=>u(j.target.value),placeholder:"Search users by email...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"})]}),a.jsxs("button",{onClick:v,disabled:!c.trim()||m,className:"btn-primary-sm btn-with-icon-sm",children:[a.jsx($i,{className:"w-4 h-4"}),a.jsx("span",{children:m?"Adding...":"Add"})]})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-2",children:"Enter the exact email address of the user you want to add as an admin."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Current Admins"}),h?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading admins..."})]}):o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ii,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No admins assigned to this location."})]}):a.jsx("div",{className:"space-y-3",children:o.map(j=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border border-border-custom",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ii,{className:"w-5 h-5 text-secondary-text"}),a.jsx("span",{className:"text-text font-medium",children:j.email})]}),a.jsx("button",{onClick:()=>y(j.id),className:"p-2 text-icon hover:text-icon-hover hover:bg-red-50 rounded-lg transition-colors",title:"Remove admin",children:a.jsx(Fr,{className:"w-4 h-4"})})]},j.id))})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-border-custom",children:a.jsx("button",{onClick:t,className:"btn-primary btn-full",children:"Done"})})]})})}function Y1({isOpen:e,onClose:t,onLocationUpdated:n,location:r}){const[s,i]=N.useState({name:"",address:"",icon:"",tables:1,admins:[]}),[o,l]=N.useState(null),[c,u]=N.useState(!1),[h,d]=N.useState(null),[m,f]=N.useState(null),[p,b]=N.useState(!1),[E,g]=N.useState(!1),[v,y]=N.useState(""),[C,j]=N.useState(!1),[x,S]=N.useState(!1);N.useEffect(()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]})},[r]);const T=F=>{var ee;const Z=(ee=F.target.files)==null?void 0:ee[0];if(Z){if(!Ss(Z)){alert("Please select a valid image file");return}l(Z),d(Z),u(!0)}},D=F=>{f(F),u(!1),d(null)},w=async(F,Z,ee)=>{const z=(o==null?void 0:o.name.split(".").pop())||"jpg",Y=`${ee}/${Date.now()}-${Math.random().toString(36).substring(2)}.${z}`,{data:k,error:B}=await q.storage.from(Z).upload(Y,F);if(B)throw B;const{data:re}=q.storage.from(Z).getPublicUrl(k.path);return re.publicUrl},I=async F=>{if(F.preventDefault(),!!r){b(!0),y("");try{let Z=s.icon;if(m){g(!0);const z=await Mn(m,512,512,.9);Z=await w(z,"location-assets","icons")}const{error:ee}=await q.from("locations").update({name:s.name,address:s.address,icon:Z,tables:s.tables,admins:s.admins}).eq("id",r.id);if(ee)throw ee;n()}catch(Z){y(Z instanceof Error?Z.message:"Failed to update location")}finally{b(!1),g(!1)}}},A=()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]}),l(null),f(null),y("")},$=F=>{i(Z=>({...Z,admins:F}))};if(!e||!r)return null;const J=F=>{F.target===F.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:J,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Location"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:I,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"locationName",value:s.name,onChange:F=>i({...s,name:F.target.value}),placeholder:"Enter location name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(av,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"address",value:s.address,onChange:F=>i({...s,address:F.target.value}),placeholder:"Enter full address...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tables",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Tables"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"tables",value:s.tables,onChange:F=>i({...s,tables:parseInt(F.target.value)||0}),min:"1",placeholder:"Enter number of tables...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"locationIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Icon"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"locationIcon",accept:"image/*",onChange:T,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),m&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),v&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:v}),a.jsxs("div",{className:"space-y-3 pt-4",children:[a.jsxs("button",{type:"button",onClick:()=>j(!0),className:"btn-secondary btn-with-icon",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Timeslots"})]}),a.jsxs("button",{type:"button",onClick:()=>S(!0),className:"btn-secondary btn-with-icon",children:[a.jsx(Ii,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Admins"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:A,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:p||E,className:"btn-primary btn-flex",children:E?"Processing...":p?"Saving...":"Save Changes"})]})]})]})]})}),h&&a.jsx(Dr,{isOpen:c,onClose:()=>{u(!1),d(null),l(null)},onCrop:D,imageFile:h}),a.jsx(J1,{isOpen:C,onClose:()=>j(!1),location:r}),a.jsx(Q1,{isOpen:x,onClose:()=>S(!1),location:r,onAdminsUpdated:$})]})}function X1({onBack:e,isLocationAdmin:t=!1}){const[n,r]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(null),{user:c}=rt(),[u,h]=N.useState({isOpen:!1,location:null});N.useEffect(()=>{d()},[]);const d=async()=>{try{let p=q.from("locations").select("*").order("name");t&&!(c!=null&&c.is_admin)&&(c!=null&&c.id)&&(p=p.contains("admins",[c.id]));const{data:b,error:E}=await p;if(E)throw E;r(b||[])}catch(p){l(p instanceof Error?p.message:"Failed to fetch locations")}finally{i(!1)}},m=p=>{h({isOpen:!0,location:p})},f=()=>{d(),h({isOpen:!1,location:null})};return s?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading locations..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE LOCATIONS"})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:o})}),a.jsx("div",{className:"space-y-4",children:n.map(p=>a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[p.icon?a.jsx("img",{src:p.icon,alt:`${p.name} icon`,className:"w-12 h-12 object-contain rounded",onError:b=>{const E=b.target;E.style.display="none";const g=E.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="flex")}}):null,a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center icon-fallback",style:{display:p.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:p.name.charAt(0)})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:p.name}),a.jsx("p",{className:"text-sm text-secondary-text truncate",children:p.address}),a.jsxs("p",{className:"text-xs text-secondary-text",children:[p.tables," table",p.tables!==1?"s":""]})]})]}),a.jsxs("button",{onClick:()=>m(p),className:"btn-secondary-sm btn-with-icon-sm",children:[a.jsx(Bi,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]})]},p.id))}),n.length===0&&!s&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No locations found."})}),a.jsx(Y1,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,location:null}),onLocationUpdated:f,location:u.location})]})}function Z1({onBack:e}){const[t,n]=N.useState("main"),{user:r}=rt();return t==="users"?a.jsx(W1,{onBack:()=>n("main")}):t==="games"?a.jsx(K1,{onBack:()=>n("main")}):t==="locations"?a.jsx(X1,{onBack:()=>n("main"),isLocationAdmin:(r==null?void 0:r.is_location_admin)||!1}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Collection"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"ADMIN PANEL"})]}),a.jsxs("div",{className:"space-y-4 max-w-md",children:[(r==null?void 0:r.is_admin)&&a.jsxs("button",{onClick:()=>n("users"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ii,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Users"})]}),a.jsx(ir,{className:"w-5 h-5 text-icon"})]}),(r==null?void 0:r.is_admin)&&a.jsxs("button",{onClick:()=>n("games"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ld,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Games"})]}),a.jsx(ir,{className:"w-5 h-5 text-icon"})]}),a.jsxs("button",{onClick:()=>n("locations"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Rr,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Locations"})]}),a.jsx(ir,{className:"w-5 h-5 text-icon"})]})]})]})}function ek({onBack:e}){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title text-center",children:"About this app"})]}),a.jsx("div",{children:a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-8",children:a.jsxs("div",{className:"space-y-6 text-base text-text leading-relaxed",children:[a.jsx("p",{children:"You're using a very, very early version of the Mini Myths app. Our hope is that one day you'll be able to use this app to manage your tabletop wargaming collection, and book a table at nearby gaming store."}),a.jsx("p",{children:"We're still in very early development, so make sure to let us know if you run into any issues along the way. You can flag issues in the Mini Myths Discord."})]})})})]})}function Ef({date:e,bookings:t,isExpanded:n,onToggle:r,onBookingClick:s,onCancelBooking:i}){const o=l=>{const c=new Date(l),u=new Date,h=new Date(u),d=new Date(u);return h.setDate(h.getDate()-1),d.setDate(d.getDate()+1),u.setHours(0,0,0,0),h.setHours(0,0,0,0),d.setHours(0,0,0,0),c.setHours(0,0,0,0),c.getTime()===u.getTime()?"Today":c.getTime()===d.getTime()?"Tomorrow":c.getTime()===h.getTime()?"Yesterday":c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:o(e)}),a.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-sm font-medium rounded-full",children:[t.length," booking",t.length!==1?"s":""]})]}),n?a.jsx(Io,{className:"w-5 h-5 text-icon"}):a.jsx(ir,{className:"w-5 h-5 text-icon"})]}),n&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>a.jsx(yx,{booking:l,onClick:()=>s(l),onCancelBooking:i,isPast:e==="past"},l.id))})]})}function tk({isOpen:e,onClose:t,onBookingCancelled:n,booking:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),c=async()=>{if(r){i(!0);try{const{error:d}=await q.from("bookings").delete().eq("id",r.id);if(d)throw d;n()}catch(d){console.error("Error cancelling booking:",d),alert("Failed to cancel booking. Please try again.")}finally{i(!1),l(!1)}}},u=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});if(!e||!r)return null;const h=d=>{d.target===d.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:"Booking Details"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(nt,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:F1(r.date)}),a.jsx("p",{className:"text-sm text-secondary-text",children:gd(r.date)})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ps,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.timeslot.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:[co(r.timeslot.start_time)," - ",co(r.timeslot.end_time)]})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Rr,{className:"w-5 h-5 text-secondary-text mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.location.name}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.location.address})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vn,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.user_name?r.user_name:"Booked by"}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.user_email||r.user.email})]})]}),r.game&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r.game.icon?a.jsx("img",{src:r.game.icon,alt:`${r.game.name} icon`,className:"w-5 h-5 object-contain rounded",onError:d=>{const m=d.target;m.style.display="none";const f=m.nextElementSibling;f&&f.classList.contains("icon-fallback")&&(f.style.display="flex")}}):null,a.jsx("div",{className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:r.game.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.game.name.charAt(0)})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:"Game"}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.game.name})]})]}),a.jsx("div",{className:"border-t border-border-custom pt-4",children:a.jsxs("p",{className:"text-sm text-secondary-text",children:["Booking created: ",u(r.created_at)]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-border-custom",children:o?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Are you sure?"}),a.jsx("p",{className:"text-red-700 text-sm",children:"This will permanently delete this booking and make the table available for others to book."})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>l(!1),disabled:s,className:"btn-ghost btn-flex",children:"Keep Booking"}),a.jsx("button",{onClick:c,disabled:s,className:"btn-danger btn-flex",children:s?"Cancelling...":"Yes, Cancel Booking"})]})]}):a.jsxs("button",{onClick:()=>l(!0),className:"btn-danger-outline btn-with-icon",children:[a.jsx(Fr,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel This Booking"})]})})]})})}function nk(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=rt(),l=async()=>{try{r(!0);let c=q.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `);if(o!=null&&o.is_location_admin&&!(o!=null&&o.is_admin)&&(o!=null&&o.id)){const{data:g,error:v}=await q.from("locations").select("id").contains("admins",[o.id]);if(v)throw v;const y=(g==null?void 0:g.map(C=>C.id))||[];if(y.length===0){t([]);return}c=c.in("location_id",y)}const{data:u,error:h}=await c;if(h)throw h;const d=[...new Set((u==null?void 0:u.map(g=>g.user_id))||[])],{data:m,error:f}=await q.from("users").select("id, email").in("id",d);if(f)throw f;const p=new Map((m==null?void 0:m.map(g=>[g.id,g]))||[]),E=((u==null?void 0:u.map(g=>({...g,user:p.get(g.user_id)||{id:g.user_id,email:"Unknown User"}})))||[]).sort((g,v)=>{const y=Zc(g.date),C=Zc(v.date);if(y&&!C)return 1;if(!y&&C)return-1;const j=new Date(v.date).getTime()-new Date(g.date).getTime();return j!==0?j:new Date(v.created_at).getTime()-new Date(g.created_at).getTime()});t(E)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return N.useEffect(()=>{l()},[]),{bookings:e,loading:n,error:s,refetch:l}}function rk({onBack:e}){const[t,n]=N.useState(new Set),[r,s]=N.useState(null),[i,o]=N.useState(!1),[l,c]=N.useState({isOpen:!1,bookingId:null}),[u,h]=N.useState(!1),{bookings:d,loading:m,error:f,refetch:p}=nk(),b=j=>{s(j),o(!0)},E=()=>{o(!1),s(null),p()},g=j=>{console.log("Attempting to cancel booking with ID:",j),c({isOpen:!0,bookingId:j})},v=async()=>{if(console.log("Confirming cancellation for booking ID:",l.bookingId),!!l.bookingId){h(!0);try{const{error:j}=await q.from("bookings").delete().eq("id",l.bookingId);if(j)throw j;console.log("Booking cancelled successfully"),await p(),c({isOpen:!1,bookingId:null})}catch(j){console.error("Error cancelling booking:",j),alert("Failed to cancel booking. Please try again.")}finally{h(!1)}}},y=Ne.useMemo(()=>{const j=[],x=[];d.forEach(A=>{Zc(A.date)?x.push(A):j.push(A)});const S={},T={};j.forEach(A=>{const $=A.date;S[$]||(S[$]=[]),S[$].push(A)}),x.forEach(A=>{const $=A.date;T[$]||(T[$]=[]),T[$].push(A)}),Object.keys(S).forEach(A=>{S[A].sort(($,J)=>$.timeslot.start_time.localeCompare(J.timeslot.start_time))}),Object.keys(T).forEach(A=>{T[A].sort(($,J)=>$.timeslot.start_time.localeCompare(J.timeslot.start_time))});const D=Object.keys(S).sort((A,$)=>A.localeCompare($)),w=Object.keys(T).sort((A,$)=>$.localeCompare(A)),I=D.map(A=>({date:A,bookings:S[A],isPast:!1}));return w.forEach(A=>{I.push({date:A,bookings:T[A],isPast:!0})}),I},[d]);Ne.useEffect(()=>{if(y.length>0){const j=new Set(y.slice(0,3).map(x=>x.date));n(j)}},[y]);const C=j=>{n(x=>{const S=new Set(x);return S.has(j)?S.delete(j):S.add(j),S})};return m?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading all bookings..."})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"ALL BOOKINGS"}),a.jsx("p",{className:"text-base text-secondary-text mt-2",children:"View and manage all table bookings across all locations"})]}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:f})}),d.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"No bookings found."})]}):a.jsxs("div",{className:"space-y-8",children:[y.filter(j=>!j.isPast).length>0&&a.jsx("div",{className:"space-y-6",children:y.filter(j=>!j.isPast).map(({date:j,bookings:x,isPast:S})=>a.jsx(Ef,{date:j,bookings:x,isExpanded:t.has(j),onToggle:()=>C(j),onBookingClick:b,onCancelBooking:g},j))}),y.filter(j=>j.isPast).length>0&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"border-t border-border-custom pt-8",children:a.jsx("h2",{className:"text-2xl font-bold text-title mb-6",children:"Past Bookings"})}),y.filter(j=>j.isPast).map(({date:j,bookings:x,isPast:S})=>a.jsx(Ef,{date:j,bookings:x,isExpanded:t.has(j),onToggle:()=>C(j),onBookingClick:b,onCancelBooking:g},j))]})]})]}),a.jsx(tk,{isOpen:i,onClose:()=>o(!1),onBookingCancelled:E,booking:r}),a.jsx(bx,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,bookingId:null}),onConfirm:v,loading:u})]})}function sk({isOpen:e,onClose:t,onBlockedDateCreated:n}){const[r,s]=N.useState([]),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,m]=N.useState(!1),[f,p]=N.useState(null),{user:b}=rt();N.useEffect(()=>{e&&(E(),g())},[e]);const E=async()=>{try{let C=q.from("locations").select("id, name, address").order("name");b!=null&&b.is_location_admin&&!(b!=null&&b.is_admin)&&(b!=null&&b.id)&&(C=C.contains("admins",[b.id]));const{data:j,error:x}=await C;if(x)throw x;s(j||[])}catch(C){console.error("Error fetching locations:",C),p("Failed to load locations")}},g=()=>{o(""),c(""),h(""),p(null)},v=async C=>{if(C.preventDefault(),!i||!l){p("Please fill in all required fields");return}const j=new Date(l),x=new Date;if(x.setHours(0,0,0,0),j<x){p("Date must be in the future");return}m(!0),p(null);try{console.log("Submitting blocked date:",{location_id:i,date:l,description:u||null});const{data:S,error:T}=await q.from("blocked_dates").insert({location_id:i,date:l,description:u||null}).select();if(T)throw console.error("Supabase error:",T),T;console.log("Blocked date created successfully:",S),g(),n(),t()}catch(S){console.error("Error creating blocked date:",S),p("Failed to create blocked date")}finally{m(!1)}},y=C=>{C.target===C.currentTarget&&t()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:y,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Add Blocked Date"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600",children:f})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Location ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),a.jsxs("select",{value:i,onChange:C=>o(C.target.value),disabled:d,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0,children:[a.jsx("option",{value:"",children:"Select a location"}),r.map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),a.jsx("input",{type:"date",value:l,onChange:C=>c(C.target.value),disabled:d,min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Description"}),a.jsxs("div",{className:"relative",children:[a.jsx(Pi,{className:"absolute left-3 top-3 w-5 h-5 text-icon"}),a.jsx("textarea",{value:u,onChange:C=>h(C.target.value),disabled:d,placeholder:"Optional description for this blocked date...",rows:3,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50 resize-none"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,disabled:d,className:"btn-ghost btn-flex flex-1",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d||!i||!l,className:"btn-primary btn-flex flex-1",children:d?"Creating...":"Create Blocked Date"})]})]})]})}):null}function ik(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=rt(),l=async()=>{try{r(!0),i(null);let c=q.from("blocked_dates").select("*, locations(*)").order("date",{ascending:!0});if(o!=null&&o.is_location_admin&&!(o!=null&&o.is_admin)){const{data:d,error:m}=await q.from("locations").select("id").contains("admins",[o.id]);if(m)throw console.error("Error fetching user locations:",m),m;if(d&&d.length>0){const f=d.map(p=>p.id);c=c.in("location_id",f)}else{t([]);return}}const{data:u,error:h}=await c;if(h)throw h;t(u||[])}catch(c){console.error("Error fetching blocked dates:",c),i("Failed to load blocked dates")}finally{r(!1)}};return N.useEffect(()=>{l()},[o]),{blockedDates:e,loading:n,error:s,refetch:l}}function ak({onBack:e}){const[t,n]=N.useState(!1),{blockedDates:r,loading:s,error:i,refetch:o}=ik(),l=async u=>{if(confirm("Are you sure you want to delete this blocked date?"))try{const{error:h}=await q.from("blocked_dates").delete().eq("id",u);if(h)throw h;o()}catch(h){console.error("Error deleting blocked date:",h),alert("Failed to delete blocked date")}},c=u=>new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",children:a.jsx(On,{className:"w-5 h-5 text-icon"})}),a.jsx("h1",{className:"text-2xl font-bold text-title",children:"Blocked Dates"})]}),a.jsxs("button",{onClick:()=>n(!0),className:"btn-primary btn-with-icon",children:[a.jsx($i,{className:"w-4 h-4"}),a.jsx("span",{children:"Add blocked date"})]})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading blocked dates..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Bg,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-title mb-2",children:"No blocked dates"}),a.jsx("p",{className:"text-secondary-text mb-6",children:r.length===0?"You haven't blocked any dates yet. Click 'Add blocked date' to get started.":"No blocked dates found for your locations."})]}):a.jsx("div",{className:"space-y-4",children:r.map(u=>{var h;return a.jsx("div",{className:"bg-bg-secondary border border-border-custom rounded-lg p-4 hover:bg-bg-tertiary transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Rr,{className:"w-4 h-4 text-icon"}),a.jsx("span",{className:"font-medium text-text",children:((h=u.locations)==null?void 0:h.name)||"Unknown Location"})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(nt,{className:"w-4 h-4 text-icon"}),a.jsx("span",{className:"text-text",children:c(u.date)})]}),u.description&&a.jsx("p",{className:"text-secondary-text text-sm",children:u.description})]}),a.jsx("button",{onClick:()=>l(u.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete blocked date",children:a.jsx(Fr,{className:"w-4 h-4"})})]})},u.id)})}),a.jsx(sk,{isOpen:t,onClose:()=>n(!1),onBlockedDateCreated:o})]})}function ok({isOpen:e,onClose:t,onConfirm:n,modelName:r,loading:s=!1}){if(!e)return null;const i=o=>{o.target===o.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Model"})]})]})})}function lk(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ck=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uk=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dk={};function Tf(e,t){return(dk.jsx?uk:ck).test(e)}const hk=/[ \t\n\f\r]/g;function fk(e){return typeof e=="object"?e.type==="text"?Pf(e.value):!1:Pf(e)}function Pf(e){return e.replace(hk,"")===""}class Wi{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Wi.prototype.normal={};Wi.prototype.property={};Wi.prototype.space=void 0;function wx(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Wi(n,r,t)}function eu(e){return e.toLowerCase()}class Rt{constructor(t,n){this.attribute=n,this.property=t}}Rt.prototype.attribute="";Rt.prototype.booleanish=!1;Rt.prototype.boolean=!1;Rt.prototype.commaOrSpaceSeparated=!1;Rt.prototype.commaSeparated=!1;Rt.prototype.defined=!1;Rt.prototype.mustUseProperty=!1;Rt.prototype.number=!1;Rt.prototype.overloadedBoolean=!1;Rt.prototype.property="";Rt.prototype.spaceSeparated=!1;Rt.prototype.space=void 0;let mk=0;const xe=$r(),Qe=$r(),tu=$r(),V=$r(),Re=$r(),gs=$r(),Ft=$r();function $r(){return 2**++mk}const nu=Object.freeze(Object.defineProperty({__proto__:null,boolean:xe,booleanish:Qe,commaOrSpaceSeparated:Ft,commaSeparated:gs,number:V,overloadedBoolean:tu,spaceSeparated:Re},Symbol.toStringTag,{value:"Module"})),Pl=Object.keys(nu);class xd extends Rt{constructor(t,n,r,s){let i=-1;if(super(t,n),If(this,"space",s),typeof r=="number")for(;++i<Pl.length;){const o=Pl[i];If(this,Pl[i],(r&nu[o])===nu[o])}}}xd.prototype.defined=!0;function If(e,t,n){n&&(e[t]=n)}function Ds(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new xd(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[eu(r)]=r,n[eu(i.attribute)]=r}return new Wi(t,n,e.space)}const kx=Ds({properties:{ariaActiveDescendant:null,ariaAtomic:Qe,ariaAutoComplete:null,ariaBusy:Qe,ariaChecked:Qe,ariaColCount:V,ariaColIndex:V,ariaColSpan:V,ariaControls:Re,ariaCurrent:null,ariaDescribedBy:Re,ariaDetails:null,ariaDisabled:Qe,ariaDropEffect:Re,ariaErrorMessage:null,ariaExpanded:Qe,ariaFlowTo:Re,ariaGrabbed:Qe,ariaHasPopup:null,ariaHidden:Qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Re,ariaLevel:V,ariaLive:null,ariaModal:Qe,ariaMultiLine:Qe,ariaMultiSelectable:Qe,ariaOrientation:null,ariaOwns:Re,ariaPlaceholder:null,ariaPosInSet:V,ariaPressed:Qe,ariaReadOnly:Qe,ariaRelevant:null,ariaRequired:Qe,ariaRoleDescription:Re,ariaRowCount:V,ariaRowIndex:V,ariaRowSpan:V,ariaSelected:Qe,ariaSetSize:V,ariaSort:null,ariaValueMax:V,ariaValueMin:V,ariaValueNow:V,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function jx(e,t){return t in e?e[t]:t}function Nx(e,t){return jx(e,t.toLowerCase())}const pk=Ds({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gs,acceptCharset:Re,accessKey:Re,action:null,allow:null,allowFullScreen:xe,allowPaymentRequest:xe,allowUserMedia:xe,alt:null,as:null,async:xe,autoCapitalize:null,autoComplete:Re,autoFocus:xe,autoPlay:xe,blocking:Re,capture:null,charSet:null,checked:xe,cite:null,className:Re,cols:V,colSpan:null,content:null,contentEditable:Qe,controls:xe,controlsList:Re,coords:V|gs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xe,defer:xe,dir:null,dirName:null,disabled:xe,download:tu,draggable:Qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xe,formTarget:null,headers:Re,height:V,hidden:tu,high:V,href:null,hrefLang:null,htmlFor:Re,httpEquiv:Re,id:null,imageSizes:null,imageSrcSet:null,inert:xe,inputMode:null,integrity:null,is:null,isMap:xe,itemId:null,itemProp:Re,itemRef:Re,itemScope:xe,itemType:Re,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xe,low:V,manifest:null,max:null,maxLength:V,media:null,method:null,min:null,minLength:V,multiple:xe,muted:xe,name:null,nonce:null,noModule:xe,noValidate:xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xe,optimum:V,pattern:null,ping:Re,placeholder:null,playsInline:xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xe,referrerPolicy:null,rel:Re,required:xe,reversed:xe,rows:V,rowSpan:V,sandbox:Re,scope:null,scoped:xe,seamless:xe,selected:xe,shadowRootClonable:xe,shadowRootDelegatesFocus:xe,shadowRootMode:null,shape:null,size:V,sizes:null,slot:null,span:V,spellCheck:Qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:V,step:null,style:null,tabIndex:V,target:null,title:null,translate:null,type:null,typeMustMatch:xe,useMap:null,value:Qe,width:V,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Re,axis:null,background:null,bgColor:null,border:V,borderColor:null,bottomMargin:V,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xe,declare:xe,event:null,face:null,frame:null,frameBorder:null,hSpace:V,leftMargin:V,link:null,longDesc:null,lowSrc:null,marginHeight:V,marginWidth:V,noResize:xe,noHref:xe,noShade:xe,noWrap:xe,object:null,profile:null,prompt:null,rev:null,rightMargin:V,rules:null,scheme:null,scrolling:Qe,standby:null,summary:null,text:null,topMargin:V,valueType:null,version:null,vAlign:null,vLink:null,vSpace:V,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xe,disableRemotePlayback:xe,prefix:null,property:null,results:V,security:null,unselectable:null},space:"html",transform:Nx}),gk=Ds({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ft,accentHeight:V,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:V,amplitude:V,arabicForm:null,ascent:V,attributeName:null,attributeType:null,azimuth:V,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:V,by:null,calcMode:null,capHeight:V,className:Re,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:V,diffuseConstant:V,direction:null,display:null,dur:null,divisor:V,dominantBaseline:null,download:xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:V,enableBackground:null,end:null,event:null,exponent:V,externalResourcesRequired:null,fill:null,fillOpacity:V,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gs,g2:gs,glyphName:gs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:V,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:V,horizOriginX:V,horizOriginY:V,id:null,ideographic:V,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:V,k:V,k1:V,k2:V,k3:V,k4:V,kernelMatrix:Ft,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:V,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:V,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:V,overlineThickness:V,paintOrder:null,panose1:null,path:null,pathLength:V,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Re,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:V,pointsAtY:V,pointsAtZ:V,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ft,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ft,rev:Ft,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ft,requiredFeatures:Ft,requiredFonts:Ft,requiredFormats:Ft,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:V,specularExponent:V,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:V,strikethroughThickness:V,string:null,stroke:null,strokeDashArray:Ft,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:V,strokeOpacity:V,strokeWidth:null,style:null,surfaceScale:V,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ft,tabIndex:V,tableValues:null,target:null,targetX:V,targetY:V,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ft,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:V,underlineThickness:V,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:V,values:null,vAlphabetic:V,vMathematical:V,vectorEffect:null,vHanging:V,vIdeographic:V,version:null,vertAdvY:V,vertOriginX:V,vertOriginY:V,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:V,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:jx}),Sx=Ds({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),_x=Ds({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Nx}),Cx=Ds({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),xk={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yk=/[A-Z]/g,Af=/-[a-z]/g,bk=/^data[-\w.:]+$/i;function vk(e,t){const n=eu(t);let r=t,s=Rt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&bk.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Af,kk);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Af.test(i)){let o=i.replace(yk,wk);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=xd}return new s(r,t)}function wk(e){return"-"+e.toLowerCase()}function kk(e){return e.charAt(1).toUpperCase()}const jk=wx([kx,pk,Sx,_x,Cx],"html"),yd=wx([kx,gk,Sx,_x,Cx],"svg");function Nk(e){return e.join(" ").trim()}var bd={},Df=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Sk=/\n/g,_k=/^\s*/,Ck=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ek=/^:\s*/,Tk=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Pk=/^[;\s]*/,Ik=/^\s+|\s+$/g,Ak=`
`,Mf="/",Lf="*",wr="",Dk="comment",Mk="declaration",Lk=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(p){var b=p.match(Sk);b&&(n+=b.length);var E=p.lastIndexOf(Ak);r=~E?p.length-E:r+p.length}function i(){var p={line:n,column:r};return function(b){return b.position=new o(p),u(),b}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(p){var b=new Error(t.source+":"+n+":"+r+": "+p);if(b.reason=p,b.filename=t.source,b.line=n,b.column=r,b.source=e,!t.silent)throw b}function c(p){var b=p.exec(e);if(b){var E=b[0];return s(E),e=e.slice(E.length),b}}function u(){c(_k)}function h(p){var b;for(p=p||[];b=d();)b!==!1&&p.push(b);return p}function d(){var p=i();if(!(Mf!=e.charAt(0)||Lf!=e.charAt(1))){for(var b=2;wr!=e.charAt(b)&&(Lf!=e.charAt(b)||Mf!=e.charAt(b+1));)++b;if(b+=2,wr===e.charAt(b-1))return l("End of comment missing");var E=e.slice(2,b-2);return r+=2,s(E),e=e.slice(b),r+=2,p({type:Dk,comment:E})}}function m(){var p=i(),b=c(Ck);if(b){if(d(),!c(Ek))return l("property missing ':'");var E=c(Tk),g=p({type:Mk,property:Of(b[0].replace(Df,wr)),value:E?Of(E[0].replace(Df,wr)):wr});return c(Pk),g}}function f(){var p=[];h(p);for(var b;b=m();)b!==!1&&(p.push(b),h(p));return p}return u(),f()};function Of(e){return e?e.replace(Ik,wr):wr}var Ok=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bd,"__esModule",{value:!0});bd.default=Fk;var Rk=Ok(Lk);function Fk(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Rk.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(n=n||{},n[o]=l)}}),n}var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.camelCase=void 0;var zk=/^--[a-zA-Z0-9_-]+$/,$k=/-([a-z])/g,Bk=/^[^-]+$/,Uk=/^-(webkit|moz|ms|o|khtml)-/,Hk=/^-(ms)-/,Gk=function(e){return!e||Bk.test(e)||zk.test(e)},qk=function(e,t){return t.toUpperCase()},Rf=function(e,t){return"".concat(t,"-")},Wk=function(e,t){return t===void 0&&(t={}),Gk(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Hk,Rf):e=e.replace(Uk,Rf),e.replace($k,qk))};Uo.camelCase=Wk;var Vk=xt&&xt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Kk=Vk(bd),Jk=Uo;function ru(e,t){var n={};return!e||typeof e!="string"||(0,Kk.default)(e,function(r,s){r&&s&&(n[(0,Jk.camelCase)(r,t)]=s)}),n}ru.default=ru;var Qk=ru;const Yk=fu(Qk),Ex=Tx("end"),vd=Tx("start");function Tx(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Xk(e){const t=vd(e),n=Ex(e);if(t&&n)return{start:t,end:n}}function ui(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ff(e.position):"start"in e||"end"in e?Ff(e):"line"in e||"column"in e?su(e):""}function su(e){return zf(e&&e.line)+":"+zf(e&&e.column)}function Ff(e){return su(e&&e.start)+"-"+su(e&&e.end)}function zf(e){return e&&typeof e=="number"?e:1}class bt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(o=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=ui(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}bt.prototype.file="";bt.prototype.name="";bt.prototype.reason="";bt.prototype.message="";bt.prototype.stack="";bt.prototype.column=void 0;bt.prototype.line=void 0;bt.prototype.ancestors=void 0;bt.prototype.cause=void 0;bt.prototype.fatal=void 0;bt.prototype.place=void 0;bt.prototype.ruleId=void 0;bt.prototype.source=void 0;const wd={}.hasOwnProperty,Zk=new Map,ej=/[A-Z]/g,tj=new Set(["table","tbody","thead","tfoot","tr"]),nj=new Set(["td","th"]),Px="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function rj(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=dj(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uj(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?yd:jk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Ix(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Ix(e,t,n){if(t.type==="element")return sj(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return ij(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return oj(e,t,n);if(t.type==="mdxjsEsm")return aj(e,t);if(t.type==="root")return lj(e,t,n);if(t.type==="text")return cj(e,t)}function sj(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=yd,e.schema=s),e.ancestors.push(t);const i=Dx(e,t.tagName,!1),o=hj(e,t);let l=jd(e,t);return tj.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!fk(c):!0})),Ax(e,o,i,t),kd(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function ij(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Di(e,t.position)}function aj(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Di(e,t.position)}function oj(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=yd,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Dx(e,t.name,!0),o=fj(e,t),l=jd(e,t);return Ax(e,o,i,t),kd(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function lj(e,t,n){const r={};return kd(r,jd(e,t)),e.create(t,e.Fragment,r,n)}function cj(e,t){return t.value}function Ax(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function kd(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function uj(e,t,n){return r;function r(s,i,o,l){const u=Array.isArray(o.children)?n:t;return l?u(i,o,l):u(i,o)}}function dj(e,t){return n;function n(r,s,i,o){const l=Array.isArray(i.children),c=vd(r);return t(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function hj(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&wd.call(t.properties,s)){const i=mj(e,s,t.properties[s]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&nj.has(t.tagName)?r=l:n[o]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function fj(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Di(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else Di(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function jd(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:Zk;for(;++r<t.children.length;){const i=t.children[r];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=Ix(e,i,o);l!==void 0&&n.push(l)}return n}function mj(e,t,n){const r=vk(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?lk(n):Nk(n)),r.property==="style"){let s=typeof n=="object"?n:pj(e,String(n));return e.stylePropertyNameCase==="css"&&(s=gj(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?xk[r.property]||r.property:r.attribute,n]}}function pj(e,t){try{return Yk(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new bt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Px+"#cannot-parse-style-attribute",s}}function Dx(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,o;for(;++i<s.length;){const l=Tf(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=o}else r=Tf(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return wd.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Di(e)}function Di(e,t){const n=new bt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Px+"#cannot-handle-mdx-estrees-without-createevaluater",n}function gj(e){const t={};let n;for(n in e)wd.call(e,n)&&(t[xj(n)]=e[n]);return t}function xj(e){let t=e.replace(ej,yj);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function yj(e){return"-"+e.toLowerCase()}const Il={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bj={};function Nd(e,t){const n=bj,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Mx(e,r,s)}function Mx(e,t,n){if(vj(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return $f(e.children,t,n)}return Array.isArray(e)?$f(e,t,n):""}function $f(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Mx(e[s],t,n);return r.join("")}function vj(e){return!!(e&&typeof e=="object")}const Bf=document.createElement("i");function Sd(e){const t="&"+e+";";Bf.innerHTML=t;const n=Bf.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ut(e,t,n,r){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Jt(e,t){return e.length>0?(Ut(e,e.length,0,t),e):t}const Uf={}.hasOwnProperty;function Lx(e){const t={};let n=-1;for(;++n<e.length;)wj(t,e[n]);return t}function wj(e,t){let n;for(n in t){const s=(Uf.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Uf.call(s,o)||(s[o]=[]);const l=i[o];kj(s[o],Array.isArray(l)?l:l?[l]:[])}}}function kj(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ut(e,0,0,r)}function Ox(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function dn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kt=hr(/[A-Za-z]/),gt=hr(/[\dA-Za-z]/),jj=hr(/[#-'*+\--9=?A-Z^-~]/);function uo(e){return e!==null&&(e<32||e===127)}const iu=hr(/\d/),Nj=hr(/[\dA-Fa-f]/),Sj=hr(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function Me(e){return e!==null&&(e<0||e===32)}function ke(e){return e===-2||e===-1||e===32}const Ho=hr(new RegExp("\\p{P}|\\p{S}","u")),Mr=hr(/\s/);function hr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ms(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&gt(e.charCodeAt(n+1))&&gt(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function _e(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return ke(c)?(e.enter(n),l(c)):t(c)}function l(c){return ke(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const _j={tokenize:Cj};function Cj(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),_e(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const Ej={tokenize:Tj},Hf={tokenize:Pj};function Tj(e){const t=this,n=[];let r=0,s,i,o;return l;function l(y){if(r<n.length){const C=n[r];return t.containerState=C[1],e.attempt(C[0].continuation,c,u)(y)}return u(y)}function c(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const C=t.events.length;let j=C,x;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){x=t.events[j][1].end;break}g(r);let S=C;for(;S<t.events.length;)t.events[S][1].end={...x},S++;return Ut(t.events,j+1,0,t.events.slice(C)),t.events.length=S,u(y)}return l(y)}function u(y){if(r===n.length){if(!s)return m(y);if(s.currentConstruct&&s.currentConstruct.concrete)return p(y);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hf,h,d)(y)}function h(y){return s&&v(),g(r),m(y)}function d(y){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(y)}function m(y){return t.containerState={},e.attempt(Hf,f,p)(y)}function f(y){return r++,n.push([t.currentConstruct,t.containerState]),m(y)}function p(y){if(y===null){s&&v(),g(0),e.consume(y);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),b(y)}function b(y){if(y===null){E(e.exit("chunkFlow"),!0),g(0),e.consume(y);return}return de(y)?(e.consume(y),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(y),b)}function E(y,C){const j=t.sliceStream(y);if(C&&j.push(null),y.previous=i,i&&(i.next=y),i=y,s.defineSkip(y.start),s.write(j),t.parser.lazy[y.start.line]){let x=s.events.length;for(;x--;)if(s.events[x][1].start.offset<o&&(!s.events[x][1].end||s.events[x][1].end.offset>o))return;const S=t.events.length;let T=S,D,w;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(D){w=t.events[T][1].end;break}D=!0}for(g(r),x=S;x<t.events.length;)t.events[x][1].end={...w},x++;Ut(t.events,T+1,0,t.events.slice(S)),t.events.length=x}}function g(y){let C=n.length;for(;C-- >y;){const j=n[C];t.containerState=j[1],j[0].exit.call(t,e)}n.length=y}function v(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Pj(e,t,n){return _e(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _s(e){if(e===null||Me(e)||Mr(e))return 1;if(Ho(e))return 2}function Go(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const au={name:"attention",resolveAll:Ij,tokenize:Aj};function Ij(e,t){let n=-1,r,s,i,o,l,c,u,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},m={...e[n][1].start};Gf(d,-c),Gf(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Jt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Jt(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=Jt(u,Go(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Jt(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,u=Jt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Ut(e,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Aj(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=_s(r);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),h=_s(c),d=!h||h===2&&s||n.includes(c),m=!s||s===2&&h||n.includes(r);return u._open=!!(i===42?d:d&&(s||!m)),u._close=!!(i===42?m:m&&(h||!d)),t(c)}}function Gf(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Dj={name:"autolink",tokenize:Mj};function Mj(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return kt(f)?(e.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||gt(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||gt(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||uo(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),h):jj(f)?(e.consume(f),u):n(f)}function h(f){return gt(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,h):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||gt(f))&&r++<63){const p=f===45?m:d;return e.consume(f),p}return n(f)}}const Vi={partial:!0,tokenize:Lj};function Lj(e,t,n){return r;function r(i){return ke(i)?_e(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||de(i)?t(i):n(i)}}const Rx={continuation:{tokenize:Rj},exit:Fj,name:"blockQuote",tokenize:Oj};function Oj(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return ke(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Rj(e,t,n){const r=this;return s;function s(o){return ke(o)?_e(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(Rx,t,n)(o)}}function Fj(e){e.exit("blockQuote")}const Fx={name:"characterEscape",tokenize:zj};function zj(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return Sj(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const zx={name:"characterReference",tokenize:$j};function $j(e,t,n){const r=this;let s=0,i,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=gt,h(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Nj,h):(e.enter("characterReferenceValue"),i=7,o=iu,h(d))}function h(d){if(d===59&&s){const m=e.exit("characterReferenceValue");return o===gt&&!Sd(r.sliceSerialize(m))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&s++<i?(e.consume(d),h):n(d)}}const qf={partial:!0,tokenize:Uj},Wf={concrete:!0,name:"codeFenced",tokenize:Bj};function Bj(e,t,n){const r=this,s={partial:!0,tokenize:j};let i=0,o=0,l;return c;function c(x){return u(x)}function u(x){const S=r.events[r.events.length-1];return i=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(x)}function h(x){return x===l?(o++,e.consume(x),h):o<3?n(x):(e.exit("codeFencedFenceSequence"),ke(x)?_e(e,d,"whitespace")(x):d(x))}function d(x){return x===null||de(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(qf,b,C)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===null||de(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(x)):ke(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),_e(e,f,"whitespace")(x)):x===96&&x===l?n(x):(e.consume(x),m)}function f(x){return x===null||de(x)?d(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||de(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(x)):x===96&&x===l?n(x):(e.consume(x),p)}function b(x){return e.attempt(s,C,E)(x)}function E(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),g}function g(x){return i>0&&ke(x)?_e(e,v,"linePrefix",i+1)(x):v(x)}function v(x){return x===null||de(x)?e.check(qf,b,C)(x):(e.enter("codeFlowValue"),y(x))}function y(x){return x===null||de(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),y)}function C(x){return e.exit("codeFenced"),t(x)}function j(x,S,T){let D=0;return w;function w(F){return x.enter("lineEnding"),x.consume(F),x.exit("lineEnding"),I}function I(F){return x.enter("codeFencedFence"),ke(F)?_e(x,A,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):A(F)}function A(F){return F===l?(x.enter("codeFencedFenceSequence"),$(F)):T(F)}function $(F){return F===l?(D++,x.consume(F),$):D>=o?(x.exit("codeFencedFenceSequence"),ke(F)?_e(x,J,"whitespace")(F):J(F)):T(F)}function J(F){return F===null||de(F)?(x.exit("codeFencedFence"),S(F)):T(F)}}}function Uj(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Al={name:"codeIndented",tokenize:Gj},Hj={partial:!0,tokenize:qj};function Gj(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),_e(e,i,"linePrefix",5)(u)}function i(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):de(u)?e.attempt(Hj,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||de(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function qj(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):_e(e,i,"linePrefix",5)(o)}function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):de(o)?s(o):n(o)}}const Wj={name:"codeText",previous:Kj,resolve:Vj,tokenize:Jj};function Vj(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function Kj(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Jj(e,t,n){let r=0,s,i;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(i=e.enter("codeTextSequence"),s=0,h(d)):de(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||de(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function h(d){return d===96?(e.consume(d),s++,h):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",u(d))}}class Qj{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Gs(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Gs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Gs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Gs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Gs(this.left,n.reverse())}}}function Gs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function $x(e){const t={};let n=-1,r,s,i,o,l,c,u;const h=new Qj(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Yj(h,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(o=h.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(h.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...h.get(s)[1].start},l=h.slice(s,n),l.unshift(r),h.splice(s,n-s+1,l))}}return Ut(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function Yj(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let h,d,m=-1,f=n,p=0,b=0;const E=[b];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(h=r.sliceStream(f),f.next||h.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(b=m+1,E.push(b),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):E.pop(),m=E.length;m--;){const g=l.slice(E[m],E[m+1]),v=i.pop();c.push([v,v+g.length-1]),e.splice(v,2,g)}for(c.reverse(),m=-1;++m<c.length;)u[p+c[m][0]]=p+c[m][1],p+=c[m][1]-c[m][0]-1;return u}const Xj={resolve:eN,tokenize:tN},Zj={partial:!0,tokenize:nN};function eN(e){return $x(e),e}function tN(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):de(l)?e.check(Zj,o,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function nN(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),_e(e,i,"linePrefix")}function i(o){if(o===null||de(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Bx(e,t,n,r,s,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let h=0;return d;function d(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),m):g===null||g===32||g===41||uo(g)?n(g):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),b(g))}function m(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(l),m(g)):g===null||g===60||de(g)?n(g):(e.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function b(g){return!h&&(g===null||g===41||Me(g))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(g)):h<u&&g===40?(e.consume(g),h++,b):g===41?(e.consume(g),h--,b):g===null||g===32||g===40||uo(g)?n(g):(e.consume(g),g===92?E:b)}function E(g){return g===40||g===41||g===92?(e.consume(g),b):b(g)}}function Ux(e,t,n,r,s,i){const o=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),h}function h(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||de(f)||l++>999?(e.exit("chunkString"),h(f)):(e.consume(f),c||(c=!ke(f)),f===92?m:d)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,d):d(f)}}function Hx(e,t,n,r,s,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(i),u(m))}function u(m){return m===o?(e.exit(i),c(o)):m===null?n(m):de(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),_e(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===o||m===null||de(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?d:h)}function d(m){return m===o||m===92?(e.consume(m),h):h(m)}}function di(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):ke(s)?_e(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const rN={name:"definition",tokenize:iN},sN={partial:!0,tokenize:aN};function iN(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),o(f)}function o(f){return Ux.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=dn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Me(f)?di(e,u)(f):u(f)}function u(f){return Bx(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function h(f){return e.attempt(sN,d,d)(f)}function d(f){return ke(f)?_e(e,m,"whitespace")(f):m(f)}function m(f){return f===null||de(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function aN(e,t,n){return r;function r(l){return Me(l)?di(e,s)(l):n(l)}function s(l){return Hx(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return ke(l)?_e(e,o,"whitespace")(l):o(l)}function o(l){return l===null||de(l)?t(l):n(l)}}const oN={name:"hardBreakEscape",tokenize:lN};function lN(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return de(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const cN={name:"headingAtx",resolve:uN,tokenize:dN};function uN(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ut(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function dN(e,t,n){let r=0;return s;function s(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(e.consume(h),o):h===null||Me(h)?(e.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||de(h)?(e.exit("atxHeading"),t(h)):ke(h)?_e(e,l,"whitespace")(h):(e.enter("atxHeadingText"),u(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),l(h))}function u(h){return h===null||h===35||Me(h)?(e.exit("atxHeadingText"),l(h)):(e.consume(h),u)}}const hN=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Vf=["pre","script","style","textarea"],fN={concrete:!0,name:"htmlFlow",resolveTo:gN,tokenize:xN},mN={partial:!0,tokenize:bN},pN={partial:!0,tokenize:yN};function gN(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xN(e,t,n){const r=this;let s,i,o,l,c;return u;function u(_){return h(_)}function h(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),d}function d(_){return _===33?(e.consume(_),m):_===47?(e.consume(_),i=!0,b):_===63?(e.consume(_),s=3,r.interrupt?t:k):kt(_)?(e.consume(_),o=String.fromCharCode(_),E):n(_)}function m(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,p):kt(_)?(e.consume(_),s=4,r.interrupt?t:k):n(_)}function f(_){return _===45?(e.consume(_),r.interrupt?t:k):n(_)}function p(_){const G="CDATA[";return _===G.charCodeAt(l++)?(e.consume(_),l===G.length?r.interrupt?t:A:p):n(_)}function b(_){return kt(_)?(e.consume(_),o=String.fromCharCode(_),E):n(_)}function E(_){if(_===null||_===47||_===62||Me(_)){const G=_===47,ae=o.toLowerCase();return!G&&!i&&Vf.includes(ae)?(s=1,r.interrupt?t(_):A(_)):hN.includes(o.toLowerCase())?(s=6,G?(e.consume(_),g):r.interrupt?t(_):A(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?v(_):y(_))}return _===45||gt(_)?(e.consume(_),o+=String.fromCharCode(_),E):n(_)}function g(_){return _===62?(e.consume(_),r.interrupt?t:A):n(_)}function v(_){return ke(_)?(e.consume(_),v):w(_)}function y(_){return _===47?(e.consume(_),w):_===58||_===95||kt(_)?(e.consume(_),C):ke(_)?(e.consume(_),y):w(_)}function C(_){return _===45||_===46||_===58||_===95||gt(_)?(e.consume(_),C):j(_)}function j(_){return _===61?(e.consume(_),x):ke(_)?(e.consume(_),j):y(_)}function x(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,S):ke(_)?(e.consume(_),x):T(_)}function S(_){return _===c?(e.consume(_),c=null,D):_===null||de(_)?n(_):(e.consume(_),S)}function T(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Me(_)?j(_):(e.consume(_),T)}function D(_){return _===47||_===62||ke(_)?y(_):n(_)}function w(_){return _===62?(e.consume(_),I):n(_)}function I(_){return _===null||de(_)?A(_):ke(_)?(e.consume(_),I):n(_)}function A(_){return _===45&&s===2?(e.consume(_),Z):_===60&&s===1?(e.consume(_),ee):_===62&&s===4?(e.consume(_),B):_===63&&s===3?(e.consume(_),k):_===93&&s===5?(e.consume(_),Y):de(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(mN,re,$)(_)):_===null||de(_)?(e.exit("htmlFlowData"),$(_)):(e.consume(_),A)}function $(_){return e.check(pN,J,re)(_)}function J(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),F}function F(_){return _===null||de(_)?$(_):(e.enter("htmlFlowData"),A(_))}function Z(_){return _===45?(e.consume(_),k):A(_)}function ee(_){return _===47?(e.consume(_),o="",z):A(_)}function z(_){if(_===62){const G=o.toLowerCase();return Vf.includes(G)?(e.consume(_),B):A(_)}return kt(_)&&o.length<8?(e.consume(_),o+=String.fromCharCode(_),z):A(_)}function Y(_){return _===93?(e.consume(_),k):A(_)}function k(_){return _===62?(e.consume(_),B):_===45&&s===2?(e.consume(_),k):A(_)}function B(_){return _===null||de(_)?(e.exit("htmlFlowData"),re(_)):(e.consume(_),B)}function re(_){return e.exit("htmlFlow"),t(_)}}function yN(e,t,n){const r=this;return s;function s(o){return de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function bN(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Vi,t,n)}}const vN={name:"htmlText",tokenize:wN};function wN(e,t,n){const r=this;let s,i,o;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),j):k===63?(e.consume(k),y):kt(k)?(e.consume(k),T):n(k)}function u(k){return k===45?(e.consume(k),h):k===91?(e.consume(k),i=0,p):kt(k)?(e.consume(k),v):n(k)}function h(k){return k===45?(e.consume(k),f):n(k)}function d(k){return k===null?n(k):k===45?(e.consume(k),m):de(k)?(o=d,ee(k)):(e.consume(k),d)}function m(k){return k===45?(e.consume(k),f):d(k)}function f(k){return k===62?Z(k):k===45?m(k):d(k)}function p(k){const B="CDATA[";return k===B.charCodeAt(i++)?(e.consume(k),i===B.length?b:p):n(k)}function b(k){return k===null?n(k):k===93?(e.consume(k),E):de(k)?(o=b,ee(k)):(e.consume(k),b)}function E(k){return k===93?(e.consume(k),g):b(k)}function g(k){return k===62?Z(k):k===93?(e.consume(k),g):b(k)}function v(k){return k===null||k===62?Z(k):de(k)?(o=v,ee(k)):(e.consume(k),v)}function y(k){return k===null?n(k):k===63?(e.consume(k),C):de(k)?(o=y,ee(k)):(e.consume(k),y)}function C(k){return k===62?Z(k):y(k)}function j(k){return kt(k)?(e.consume(k),x):n(k)}function x(k){return k===45||gt(k)?(e.consume(k),x):S(k)}function S(k){return de(k)?(o=S,ee(k)):ke(k)?(e.consume(k),S):Z(k)}function T(k){return k===45||gt(k)?(e.consume(k),T):k===47||k===62||Me(k)?D(k):n(k)}function D(k){return k===47?(e.consume(k),Z):k===58||k===95||kt(k)?(e.consume(k),w):de(k)?(o=D,ee(k)):ke(k)?(e.consume(k),D):Z(k)}function w(k){return k===45||k===46||k===58||k===95||gt(k)?(e.consume(k),w):I(k)}function I(k){return k===61?(e.consume(k),A):de(k)?(o=I,ee(k)):ke(k)?(e.consume(k),I):D(k)}function A(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,$):de(k)?(o=A,ee(k)):ke(k)?(e.consume(k),A):(e.consume(k),J)}function $(k){return k===s?(e.consume(k),s=void 0,F):k===null?n(k):de(k)?(o=$,ee(k)):(e.consume(k),$)}function J(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||Me(k)?D(k):(e.consume(k),J)}function F(k){return k===47||k===62||Me(k)?D(k):n(k)}function Z(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function ee(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),z}function z(k){return ke(k)?_e(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):Y(k)}function Y(k){return e.enter("htmlTextData"),o(k)}}const _d={name:"labelEnd",resolveAll:SN,resolveTo:_N,tokenize:CN},kN={tokenize:EN},jN={tokenize:TN},NN={tokenize:PN};function SN(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Ut(e,0,e.length,n),e}function _N(e,t){let n=e.length,r=0,s,i,o,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Jt(l,e.slice(i+1,i+r+3)),l=Jt(l,[["enter",h,t]]),l=Jt(l,Go(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),l=Jt(l,[["exit",h,t],e[o-2],e[o-1],["exit",u,t]]),l=Jt(l,e.slice(o+1)),l=Jt(l,[["exit",c,t]]),Ut(e,i,e.length,l),e}function CN(e,t,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(m){return i?i._inactive?d(m):(o=r.parser.defined.includes(dn(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(kN,h,o?h:d)(m):m===91?e.attempt(jN,h,o?u:d)(m):o?h(m):d(m)}function u(m){return e.attempt(NN,h,d)(m)}function h(m){return t(m)}function d(m){return i._balanced=!0,n(m)}}function EN(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),s}function s(d){return Me(d)?di(e,i)(d):i(d)}function i(d){return d===41?h(d):Bx(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Me(d)?di(e,c)(d):h(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?Hx(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):h(d)}function u(d){return Me(d)?di(e,h)(d):h(d)}function h(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function TN(e,t,n){const r=this;return s;function s(l){return Ux.call(r,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(dn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function PN(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const IN={name:"labelStartImage",resolveAll:_d.resolveAll,tokenize:AN};function AN(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const DN={name:"labelStartLink",resolveAll:_d.resolveAll,tokenize:MN};function MN(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Dl={name:"lineEnding",tokenize:LN};function LN(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),_e(e,t,"linePrefix")}}const Ma={name:"thematicBreak",tokenize:ON};function ON(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||de(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),ke(u)?_e(e,l,"whitespace")(u):l(u))}}const Tt={continuation:{tokenize:$N},exit:UN,name:"list",tokenize:zN},RN={partial:!0,tokenize:HN},FN={partial:!0,tokenize:BN};function zN(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:iu(f)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Ma,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return iu(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Vi,r.interrupt?n:h,e.attempt(RN,m,d))}function h(f){return r.containerState.initialBlankLine=!0,i++,m(f)}function d(f){return ke(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function $N(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Vi,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,_e(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!ke(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(FN,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,_e(e,e.attempt(Tt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function BN(e,t,n){const r=this;return _e(e,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function UN(e){e.exit(this.containerState.type)}function HN(e,t,n){const r=this;return _e(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!ke(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Kf={name:"setextUnderline",resolveTo:GN,tokenize:qN};function GN(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function qN(e,t,n){const r=this;let s;return i;function i(u){let h=r.events.length,d;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){d=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),s=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),ke(u)?_e(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||de(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const WN={tokenize:VN};function VN(e){const t=this,n=e.attempt(Vi,r,e.attempt(this.parser.constructs.flowInitial,s,_e(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Xj,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const KN={resolveAll:qx()},JN=Gx("string"),QN=Gx("text");function Gx(e){return{resolveAll:qx(e==="text"?YN:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,o,l);return o;function o(h){return u(h)?i(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return u(h)?(n.exit("data"),i(h)):(n.consume(h),c)}function u(h){if(h===null)return!0;const d=s[h];let m=-1;if(d)for(;++m<d.length;){const f=d[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function qx(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function YN(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,o=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const XN={42:Tt,43:Tt,45:Tt,48:Tt,49:Tt,50:Tt,51:Tt,52:Tt,53:Tt,54:Tt,55:Tt,56:Tt,57:Tt,62:Rx},ZN={91:rN},e2={[-2]:Al,[-1]:Al,32:Al},t2={35:cN,42:Ma,45:[Kf,Ma],60:fN,61:Kf,95:Ma,96:Wf,126:Wf},n2={38:zx,92:Fx},r2={[-5]:Dl,[-4]:Dl,[-3]:Dl,33:IN,38:zx,42:au,60:[Dj,vN],91:DN,92:[oN,Fx],93:_d,95:au,96:Wj},s2={null:[au,KN]},i2={null:[42,95]},a2={null:[]},o2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:i2,contentInitial:ZN,disable:a2,document:XN,flow:t2,flowInitial:e2,insideSpan:s2,string:n2,text:r2},Symbol.toStringTag,{value:"Module"}));function l2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:S(j),check:S(x),consume:v,enter:y,exit:C,interrupt:S(x,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:p,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:d};let h=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function d(I){return o=Jt(o,I),E(),o[o.length-1]!==null?[]:(T(t,0),u.events=Go(i,u.events,u),u.events)}function m(I,A){return u2(f(I),A)}function f(I){return c2(o,I)}function p(){const{_bufferIndex:I,_index:A,line:$,column:J,offset:F}=r;return{_bufferIndex:I,_index:A,line:$,column:J,offset:F}}function b(I){s[I.line]=I.column,w()}function E(){let I;for(;r._index<o.length;){const A=o[r._index];if(typeof A=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<A.length;)g(A.charCodeAt(r._bufferIndex));else g(A)}}function g(I){h=h(I)}function v(I){de(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,w()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=I}function y(I,A){const $=A||{};return $.type=I,$.start=p(),u.events.push(["enter",$,u]),l.push($),$}function C(I){const A=l.pop();return A.end=p(),u.events.push(["exit",A,u]),A}function j(I,A){T(I,A.from)}function x(I,A){A.restore()}function S(I,A){return $;function $(J,F,Z){let ee,z,Y,k;return Array.isArray(J)?re(J):"tokenize"in J?re([J]):B(J);function B(O){return H;function H(fe){const ue=fe!==null&&O[fe],K=fe!==null&&O.null,le=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(K)?K:K?[K]:[]];return re(le)(fe)}}function re(O){return ee=O,z=0,O.length===0?Z:_(O[z])}function _(O){return H;function H(fe){return k=D(),Y=O,O.partial||(u.currentConstruct=O),O.name&&u.parser.constructs.disable.null.includes(O.name)?ae():O.tokenize.call(A?Object.assign(Object.create(u),A):u,c,G,ae)(fe)}}function G(O){return I(Y,k),F}function ae(O){return k.restore(),++z<ee.length?_(ee[z]):Z}}}function T(I,A){I.resolveAll&&!i.includes(I)&&i.push(I),I.resolve&&Ut(u.events,A,u.events.length-A,I.resolve(u.events.slice(A),u)),I.resolveTo&&(u.events=I.resolveTo(u.events,u))}function D(){const I=p(),A=u.previous,$=u.currentConstruct,J=u.events.length,F=Array.from(l);return{from:J,restore:Z};function Z(){r=I,u.previous=A,u.currentConstruct=$,u.events.length=J,l=F,w()}}function w(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function c2(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,i)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function u2(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}function d2(e){const r={constructs:Lx([o2,...(e||{}).extensions||[]]),content:s(_j),defined:[],document:s(Ej),flow:s(WN),lazy:{},string:s(JN),text:s(QN)};return r;function s(i){return o;function o(l){return l2(r,i,l)}}}function h2(e){for(;!$x(e););return e}const Jf=/[\0\t\n\r]/g;function f2(){let e=1,t="",n=!0,r;return s;function s(i,o,l){const c=[];let u,h,d,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(Jf.lastIndex=d,u=Jf.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(d);break}if(f===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(i.slice(d,m)),e+=m-d),f){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const m2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function p2(e){return e.replace(m2,g2)}function g2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Ox(n.slice(i?2:1),i?16:10)}return Sd(n)||e}const Wx={}.hasOwnProperty;function x2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),y2(n)(h2(d2(n).document().write(f2()(e,t,!0))))}function y2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ue),autolinkProtocol:D,autolinkEmail:D,atxHeading:i(me),blockQuote:i(K),characterEscape:D,characterReference:D,codeFenced:i(le),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(le,o),codeText:i(X,o),codeTextData:D,data:D,codeFlowValue:D,definition:i(U),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(ce),hardBreakEscape:i(Ie),hardBreakTrailing:i(Ie),htmlFlow:i(Le,o),htmlFlowData:D,htmlText:i(Le,o),htmlTextData:D,image:i(Ae),label:o,link:i(Ue),listItem:i(L),listItemValue:m,listOrdered:i(ne,d),listUnordered:i(ne),paragraph:i(te),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(me),strong:i(he),thematicBreak:i(Ke)},exit:{atxHeading:c(),atxHeadingSequence:j,autolink:c(),autolinkEmail:ue,autolinkProtocol:fe,blockQuote:c(),characterEscapeValue:w,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:O,characterReference:H,codeFenced:c(E),codeFencedFence:b,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:w,codeIndented:c(g),codeText:c(F),codeTextData:w,data:w,definition:c(),definitionDestinationString:C,definitionLabelString:v,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(A),hardBreakTrailing:c(A),htmlFlow:c($),htmlFlowData:w,htmlText:c(J),htmlTextData:w,image:c(ee),label:Y,labelText:z,lineEnding:I,link:c(Z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:G,resourceDestinationString:k,resourceTitleString:B,resource:re,setextHeading:c(T),setextHeadingLineSequence:S,setextHeadingText:x,strong:c(),thematicBreak:c()}};Vx(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(P){let M={type:"root",children:[]};const Q={stack:[M],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:h,data:n},oe=[];let se=-1;for(;++se<P.length;)if(P[se][1].type==="listOrdered"||P[se][1].type==="listUnordered")if(P[se][0]==="enter")oe.push(se);else{const ve=oe.pop();se=s(P,ve,se)}for(se=-1;++se<P.length;){const ve=t[P[se][0]];Wx.call(ve,P[se][1].type)&&ve[P[se][1].type].call(Object.assign({sliceSerialize:P[se][2].sliceSerialize},Q),P[se][1])}if(Q.tokenStack.length>0){const ve=Q.tokenStack[Q.tokenStack.length-1];(ve[1]||Qf).call(Q,void 0,ve[0])}for(M.position={start:Un(P.length>0?P[0][1].start:{line:1,column:1,offset:0}),end:Un(P.length>0?P[P.length-2][1].end:{line:1,column:1,offset:0})},se=-1;++se<t.transforms.length;)M=t.transforms[se](M)||M;return M}function s(P,M,Q){let oe=M-1,se=-1,ve=!1,Ee,De,at,Je;for(;++oe<=Q;){const Te=P[oe];switch(Te[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Te[0]==="enter"?se++:se--,Je=void 0;break}case"lineEndingBlank":{Te[0]==="enter"&&(Ee&&!Je&&!se&&!at&&(at=oe),Je=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Je=void 0}if(!se&&Te[0]==="enter"&&Te[1].type==="listItemPrefix"||se===-1&&Te[0]==="exit"&&(Te[1].type==="listUnordered"||Te[1].type==="listOrdered")){if(Ee){let dt=oe;for(De=void 0;dt--;){const ht=P[dt];if(ht[1].type==="lineEnding"||ht[1].type==="lineEndingBlank"){if(ht[0]==="exit")continue;De&&(P[De][1].type="lineEndingBlank",ve=!0),ht[1].type="lineEnding",De=dt}else if(!(ht[1].type==="linePrefix"||ht[1].type==="blockQuotePrefix"||ht[1].type==="blockQuotePrefixWhitespace"||ht[1].type==="blockQuoteMarker"||ht[1].type==="listItemIndent"))break}at&&(!De||at<De)&&(Ee._spread=!0),Ee.end=Object.assign({},De?P[De][1].start:Te[1].end),P.splice(De||oe,0,["exit",Ee,Te[2]]),oe++,Q++}if(Te[1].type==="listItemPrefix"){const dt={type:"listItem",_spread:!1,start:Object.assign({},Te[1].start),end:void 0};Ee=dt,P.splice(oe,0,["enter",dt,Te[2]]),oe++,Q++,at=void 0,Je=!0}}}return P[M][1]._spread=ve,Q}function i(P,M){return Q;function Q(oe){l.call(this,P(oe),oe),M&&M.call(this,oe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(P,M,Q){this.stack[this.stack.length-1].children.push(P),this.stack.push(P),this.tokenStack.push([M,Q||void 0]),P.position={start:Un(M.start),end:void 0}}function c(P){return M;function M(Q){P&&P.call(this,Q),u.call(this,Q)}}function u(P,M){const Q=this.stack.pop(),oe=this.tokenStack.pop();if(oe)oe[0].type!==P.type&&(M?M.call(this,P,oe[0]):(oe[1]||Qf).call(this,P,oe[0]));else throw new Error("Cannot close `"+P.type+"` ("+ui({start:P.start,end:P.end})+"): its not open");Q.position.end=Un(P.end)}function h(){return Nd(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(P){if(this.data.expectingFirstListItemValue){const M=this.stack[this.stack.length-2];M.start=Number.parseInt(this.sliceSerialize(P),10),this.data.expectingFirstListItemValue=void 0}}function f(){const P=this.resume(),M=this.stack[this.stack.length-1];M.lang=P}function p(){const P=this.resume(),M=this.stack[this.stack.length-1];M.meta=P}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const P=this.resume(),M=this.stack[this.stack.length-1];M.value=P.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const P=this.resume(),M=this.stack[this.stack.length-1];M.value=P.replace(/(\r?\n|\r)$/g,"")}function v(P){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.label=M,Q.identifier=dn(this.sliceSerialize(P)).toLowerCase()}function y(){const P=this.resume(),M=this.stack[this.stack.length-1];M.title=P}function C(){const P=this.resume(),M=this.stack[this.stack.length-1];M.url=P}function j(P){const M=this.stack[this.stack.length-1];if(!M.depth){const Q=this.sliceSerialize(P).length;M.depth=Q}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(P){const M=this.stack[this.stack.length-1];M.depth=this.sliceSerialize(P).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function D(P){const Q=this.stack[this.stack.length-1].children;let oe=Q[Q.length-1];(!oe||oe.type!=="text")&&(oe=Se(),oe.position={start:Un(P.start),end:void 0},Q.push(oe)),this.stack.push(oe)}function w(P){const M=this.stack.pop();M.value+=this.sliceSerialize(P),M.position.end=Un(P.end)}function I(P){const M=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Q=M.children[M.children.length-1];Q.position.end=Un(P.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(M.type)&&(D.call(this,P),w.call(this,P))}function A(){this.data.atHardBreak=!0}function $(){const P=this.resume(),M=this.stack[this.stack.length-1];M.value=P}function J(){const P=this.resume(),M=this.stack[this.stack.length-1];M.value=P}function F(){const P=this.resume(),M=this.stack[this.stack.length-1];M.value=P}function Z(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=M,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function ee(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=M,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function z(P){const M=this.sliceSerialize(P),Q=this.stack[this.stack.length-2];Q.label=p2(M),Q.identifier=dn(M).toLowerCase()}function Y(){const P=this.stack[this.stack.length-1],M=this.resume(),Q=this.stack[this.stack.length-1];if(this.data.inReference=!0,Q.type==="link"){const oe=P.children;Q.children=oe}else Q.alt=M}function k(){const P=this.resume(),M=this.stack[this.stack.length-1];M.url=P}function B(){const P=this.resume(),M=this.stack[this.stack.length-1];M.title=P}function re(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function G(P){const M=this.resume(),Q=this.stack[this.stack.length-1];Q.label=M,Q.identifier=dn(this.sliceSerialize(P)).toLowerCase(),this.data.referenceType="full"}function ae(P){this.data.characterReferenceType=P.type}function O(P){const M=this.sliceSerialize(P),Q=this.data.characterReferenceType;let oe;Q?(oe=Ox(M,Q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):oe=Sd(M);const se=this.stack[this.stack.length-1];se.value+=oe}function H(P){const M=this.stack.pop();M.position.end=Un(P.end)}function fe(P){w.call(this,P);const M=this.stack[this.stack.length-1];M.url=this.sliceSerialize(P)}function ue(P){w.call(this,P);const M=this.stack[this.stack.length-1];M.url="mailto:"+this.sliceSerialize(P)}function K(){return{type:"blockquote",children:[]}}function le(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function U(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function Ie(){return{type:"break"}}function Le(){return{type:"html",value:""}}function Ae(){return{type:"image",title:null,url:"",alt:null}}function Ue(){return{type:"link",title:null,url:"",children:[]}}function ne(P){return{type:"list",ordered:P.type==="listOrdered",start:null,spread:P._spread,children:[]}}function L(P){return{type:"listItem",spread:P._spread,checked:null,children:[]}}function te(){return{type:"paragraph",children:[]}}function he(){return{type:"strong",children:[]}}function Se(){return{type:"text",value:""}}function Ke(){return{type:"thematicBreak"}}}function Un(e){return{line:e.line,column:e.column,offset:e.offset}}function Vx(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Vx(e,r):b2(e,r)}}function b2(e,t){let n;for(n in t)if(Wx.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Qf(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ui({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ui({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ui({start:t.start,end:t.end})+") is still open")}function v2(e){const t=this;t.parser=n;function n(r){return x2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function w2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function k2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function j2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function N2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function S2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Ms(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function C2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function E2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Kx(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function T2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Kx(e,t);const s={src:Ms(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function P2(e,t){const n={src:Ms(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function I2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function A2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Kx(e,t);const s={href:Ms(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function D2(e,t){const n={href:Ms(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function M2(e,t,n){const r=e.all(t),s=n?L2(n):Jx(t),i={},o=[];if(typeof t.checked=="boolean"){const h=r[0];let d;h&&h.type==="element"&&h.tagName==="p"?d=h:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const h=r[l];(s||l!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!s?o.push(...h.children):o.push(h)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function L2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Jx(n[r])}return t}function Jx(e){const t=e.spread;return t??e.children.length>1}function O2(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function R2(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function F2(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function z2(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $2(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=vd(t.children[1]),c=Ex(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function B2(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let p={type:"element",tagName:i,properties:m,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,h),e.applyData(t,h)}function U2(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Yf=9,Xf=32;function H2(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(Zf(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(Zf(t.slice(s),s>0,!1)),i.join("")}function Zf(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===Yf||i===Xf;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===Yf||i===Xf;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function G2(e,t){const n={type:"text",value:H2(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function q2(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const W2={blockquote:w2,break:k2,code:j2,delete:N2,emphasis:S2,footnoteReference:_2,heading:C2,html:E2,imageReference:T2,image:P2,inlineCode:I2,linkReference:A2,link:D2,listItem:M2,list:O2,paragraph:R2,root:F2,strong:z2,table:$2,tableCell:U2,tableRow:B2,text:G2,thematicBreak:q2,toml:ya,yaml:ya,definition:ya,footnoteDefinition:ya};function ya(){}const Qx=-1,qo=0,hi=1,ho=2,Cd=3,Ed=4,Td=5,Pd=6,Yx=7,Xx=8,em=typeof self=="object"?self:globalThis,V2=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case qo:case Qx:return n(o,s);case hi:{const l=n([],s);for(const c of o)l.push(r(c));return l}case ho:{const l=n({},s);for(const[c,u]of o)l[r(c)]=r(u);return l}case Cd:return n(new Date(o),s);case Ed:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Td:{const l=n(new Map,s);for(const[c,u]of o)l.set(r(c),r(u));return l}case Pd:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case Yx:{const{name:l,message:c}=o;return n(new em[l](c),s)}case Xx:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new em[i](o),s)};return r},tm=e=>V2(new Map,e)(0),Kr="",{toString:K2}={},{keys:J2}=Object,qs=e=>{const t=typeof e;if(t!=="object"||!e)return[qo,t];const n=K2.call(e).slice(8,-1);switch(n){case"Array":return[hi,Kr];case"Object":return[ho,Kr];case"Date":return[Cd,Kr];case"RegExp":return[Ed,Kr];case"Map":return[Td,Kr];case"Set":return[Pd,Kr];case"DataView":return[hi,n]}return n.includes("Array")?[hi,n]:n.includes("Error")?[Yx,n]:[ho,n]},ba=([e,t])=>e===qo&&(t==="function"||t==="symbol"),Q2=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},i=o=>{if(n.has(o))return n.get(o);let[l,c]=qs(o);switch(l){case qo:{let h=o;switch(c){case"bigint":l=Xx,h=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return s([Qx],o)}return s([l,h],o)}case hi:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const h=[],d=s([l,h],o);for(const m of o)h.push(i(m));return d}case ho:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const h=[],d=s([l,h],o);for(const m of J2(o))(e||!ba(qs(o[m])))&&h.push([i(m),i(o[m])]);return d}case Cd:return s([l,o.toISOString()],o);case Ed:{const{source:h,flags:d}=o;return s([l,{source:h,flags:d}],o)}case Td:{const h=[],d=s([l,h],o);for(const[m,f]of o)(e||!(ba(qs(m))||ba(qs(f))))&&h.push([i(m),i(f)]);return d}case Pd:{const h=[],d=s([l,h],o);for(const m of o)(e||!ba(qs(m)))&&h.push(i(m));return d}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return i},nm=(e,{json:t,lossy:n}={})=>{const r=[];return Q2(!(t||n),!!t,new Map,r)(e),r},fo=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?tm(nm(e,t)):structuredClone(e):(e,t)=>tm(nm(e,t));function Y2(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function X2(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Z2(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Y2,r=e.options.footnoteBackLabel||X2,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const h=e.all(u),d=String(u.identifier).toUpperCase(),m=Ms(d.toLowerCase());let f=0;const p=[],b=e.footnoteCounts.get(d);for(;b!==void 0&&++f<=b;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const v=E.children[E.children.length-1];v&&v.type==="text"?v.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...p)}else h.push(...p);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(u,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...fo(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Wo=function(e){if(e==null)return rS;if(typeof e=="function")return Vo(e);if(typeof e=="object")return Array.isArray(e)?eS(e):tS(e);if(typeof e=="string")return nS(e);throw new Error("Expected function, string, or object as test")};function eS(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wo(e[n]);return Vo(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function tS(e){const t=e;return Vo(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function nS(e){return Vo(t);function t(n){return n&&n.type===e}}function Vo(e){return t;function t(n,r,s){return!!(sS(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function rS(){return!0}function sS(e){return e!==null&&typeof e=="object"&&"type"in e}const Zx=[],iS=!0,ou=!1,aS="skip";function ey(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=Wo(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,h){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=Zx,p,b,E;if((!t||i(c,u,h[h.length-1]||void 0))&&(f=oS(n(c,h)),f[0]===ou))return f;if("children"in c&&c.children){const g=c;if(g.children&&f[0]!==aS)for(b=(r?g.children.length:-1)+o,E=h.concat(g);b>-1&&b<g.children.length;){const v=g.children[b];if(p=l(v,b,E)(),p[0]===ou)return p;b=typeof p[1]=="number"?p[1]:b+o}}return f}}}function oS(e){return Array.isArray(e)?e:typeof e=="number"?[iS,e]:e==null?Zx:[e]}function Id(e,t,n,r){let s,i,o;typeof t=="function"&&typeof n!="function"?(i=void 0,o=t,s=n):(i=t,o=n,s=r),ey(e,i,l,s);function l(c,u){const h=u[u.length-1],d=h?h.children.indexOf(c):void 0;return o(c,d,h)}}const lu={}.hasOwnProperty,lS={};function cS(e,t){const n=t||lS,r=new Map,s=new Map,i=new Map,o={...W2,...n.handlers},l={all:u,applyData:dS,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:n,patch:uS,wrap:fS};return Id(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const d=h.type==="definition"?r:s,m=String(h.identifier).toUpperCase();d.has(m)||d.set(m,h)}}),l;function c(h,d){const m=h.type,f=l.handlers[m];if(lu.call(l.handlers,m)&&f)return f(l,h,d);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:b,...E}=h,g=fo(E);return g.children=l.all(h),g}return fo(h)}return(l.options.unknownHandler||hS)(l,h,d)}function u(h){const d=[];if("children"in h){const m=h.children;let f=-1;for(;++f<m.length;){const p=l.one(m[f],h);if(p){if(f&&m[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=rm(p.value)),!Array.isArray(p)&&p.type==="element")){const b=p.children[0];b&&b.type==="text"&&(b.value=rm(b.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function uS(e,t){e.position&&(t.position=Xk(e))}function dS(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,fo(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function hS(e,t){const n=t.data||{},r="value"in t&&!(lu.call(n,"hProperties")||lu.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fS(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function rm(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function sm(e,t){const n=cS(e,t),r=n.one(e,void 0),s=Z2(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function mS(e,t){return e&&"run"in e?async function(n,r){const s=sm(n,{file:r,...t});await e.run(s,r)}:function(n,r){return sm(n,{file:r,...e||t})}}function im(e){if(e)throw e}var La=Object.prototype.hasOwnProperty,ty=Object.prototype.toString,am=Object.defineProperty,om=Object.getOwnPropertyDescriptor,lm=function(t){return typeof Array.isArray=="function"?Array.isArray(t):ty.call(t)==="[object Array]"},cm=function(t){if(!t||ty.call(t)!=="[object Object]")return!1;var n=La.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&La.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||La.call(t,s)},um=function(t,n){am&&n.name==="__proto__"?am(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},dm=function(t,n){if(n==="__proto__")if(La.call(t,n)){if(om)return om(t,n).value}else return;return t[n]},pS=function e(){var t,n,r,s,i,o,l=arguments[0],c=1,u=arguments.length,h=!1;for(typeof l=="boolean"&&(h=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=dm(l,n),s=dm(t,n),l!==s&&(h&&s&&(cm(s)||(i=lm(s)))?(i?(i=!1,o=r&&lm(r)?r:[]):o=r&&cm(r)?r:{},um(l,{name:n,newValue:e(h,o,s)})):typeof s<"u"&&um(l,{name:n,newValue:s}));return l};const Ml=fu(pS);function cu(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function gS(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const h=e[++i];let d=-1;if(c){o(c);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,h?xS(h,l)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function xS(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const h=u;if(l&&n)throw h;return s(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){n||(n=!0,t(o,...l))}function i(o){s(null,o)}}const gn={basename:yS,dirname:bS,extname:vS,join:wS,sep:"/"};function yS(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ki(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function bS(e){if(Ki(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function vS(e){Ki(e);let t=e.length,n=-1,r=0,s=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function wS(...e){let t=-1,n;for(;++t<e.length;)Ki(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":kS(n)}function kS(e){Ki(e);const t=e.codePointAt(0)===47;let n=jS(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function jS(e,t){let n="",r=0,s=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return n}function Ki(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const NS={cwd:SS};function SS(){return"/"}function uu(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function _S(e){if(typeof e=="string")e=new URL(e);else if(!uu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return CS(e)}function CS(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Ll=["history","path","basename","stem","extname","dirname"];class ny{constructor(t){let n;t?uu(t)?n={path:t}:typeof t=="string"||ES(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":NS.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ll.length;){const i=Ll[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Ll.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?gn.basename(this.path):void 0}set basename(t){Rl(t,"basename"),Ol(t,"basename"),this.path=gn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?gn.dirname(this.path):void 0}set dirname(t){hm(this.basename,"dirname"),this.path=gn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?gn.extname(this.path):void 0}set extname(t){if(Ol(t,"extname"),hm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){uu(t)&&(t=_S(t)),Rl(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?gn.basename(this.path,this.extname):void 0}set stem(t){Rl(t,"stem"),Ol(t,"stem"),this.path=gn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new bt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ol(e,t){if(e&&e.includes(gn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+gn.sep+"`")}function Rl(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function hm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ES(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const TS=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},PS={}.hasOwnProperty;class Ad extends TS{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=gS()}copy(){const t=new Ad;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ml(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?($l("data",this.frozen),this.namespace[t]=n,this):PS.call(this.namespace,t)&&this.namespace[t]||void 0:t?($l("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=va(t),r=this.parser||this.Parser;return Fl("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Fl("process",this.parser||this.Parser),zl("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,o){const l=va(t),c=r.parse(l);r.run(c,l,function(h,d,m){if(h||!d||!m)return u(h);const f=d,p=r.stringify(f,m);DS(p)?m.value=p:m.result=p,u(h,m)});function u(h,d){h||!d?o(h):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),Fl("processSync",this.parser||this.Parser),zl("processSync",this.compiler||this.Compiler),this.process(t,s),mm("processSync","process",n),r;function s(i,o){n=!0,im(i),r=o}}run(t,n,r){fm(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,l){const c=va(n);s.run(t,c,u);function u(h,d,m){const f=d||t;h?l(h):o?o(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),mm("runSync","run",r),s;function i(o,l){im(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=va(n),s=this.compiler||this.Compiler;return zl("stringify",s),fm(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if($l("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...d]=u;c(h,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Ml(!0,s.settings,u.settings))}function l(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const d=u[h];i(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,h){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===u){m=d;break}if(m===-1)r.push([u,...h]);else if(h.length>0){let[f,...p]=h;const b=r[m][1];cu(b)&&cu(f)&&(f=Ml(!0,b,f)),r[m]=[u,f,...p]}}}}const IS=new Ad().freeze();function Fl(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zl(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function $l(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fm(e){if(!cu(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mm(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function va(e){return AS(e)?e:new ny(e)}function AS(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function DS(e){return typeof e=="string"||MS(e)}function MS(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const LS="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pm=[],gm={allowDangerousHtml:!0},OS=/^(https?|ircs?|mailto|xmpp)$/i,RS=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Dd(e){const t=FS(e),n=zS(e);return $S(t.runSync(t.parse(n),n),e)}function FS(e){const t=e.rehypePlugins||pm,n=e.remarkPlugins||pm,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...gm}:gm;return IS().use(v2).use(n).use(mS,r).use(t)}function zS(e){const t=e.children||"",n=new ny;return typeof t=="string"&&(n.value=t),n}function $S(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||BS;for(const h of RS)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+LS+h.id,void 0);return Id(e,u),rj(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function u(h,d,m){if(h.type==="raw"&&m&&typeof d=="number")return o?m.children.splice(d,1):m.children[d]={type:"text",value:h.value},d;if(h.type==="element"){let f;for(f in Il)if(Object.hasOwn(Il,f)&&Object.hasOwn(h.properties,f)){const p=h.properties[f],b=Il[f];(b===null||b.includes(h.tagName))&&(h.properties[f]=c(String(p||""),f,h))}}if(h.type==="element"){let f=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(h,d,m)),f&&m&&typeof d=="number")return l&&h.children?m.children.splice(d,1,...h.children):m.children.splice(d,1),d}}}function BS(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||OS.test(e.slice(0,t))?e:""}function xm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function US(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function HS(e,t,n){const s=Wo((n||{}).ignore||[]),i=GS(t);let o=-1;for(;++o<i.length;)ey(e,"text",l);function l(u,h){let d=-1,m;for(;++d<h.length;){const f=h[d],p=m?m.children:void 0;if(s(f,p?p.indexOf(f):void 0,m))return;m=f}if(m)return c(u,h)}function c(u,h){const d=h[h.length-1],m=i[o][0],f=i[o][1];let p=0;const E=d.children.indexOf(u);let g=!1,v=[];m.lastIndex=0;let y=m.exec(u.value);for(;y;){const C=y.index,j={index:y.index,input:y.input,stack:[...h,u]};let x=f(...y,j);if(typeof x=="string"&&(x=x.length>0?{type:"text",value:x}:void 0),x===!1?m.lastIndex=C+1:(p!==C&&v.push({type:"text",value:u.value.slice(p,C)}),Array.isArray(x)?v.push(...x):x&&v.push(x),p=C+y[0].length,g=!0),!m.global)break;y=m.exec(u.value)}return g?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(E,1,...v)):v=[u],E+v.length}}function GS(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([qS(s[0]),WS(s[1])])}return t}function qS(e){return typeof e=="string"?new RegExp(US(e),"g"):e}function WS(e){return typeof e=="function"?e:function(){return e}}const Bl="phrasing",Ul=["autolink","link","image","label"];function VS(){return{transforms:[e_],enter:{literalAutolink:JS,literalAutolinkEmail:Hl,literalAutolinkHttp:Hl,literalAutolinkWww:Hl},exit:{literalAutolink:ZS,literalAutolinkEmail:XS,literalAutolinkHttp:QS,literalAutolinkWww:YS}}}function KS(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Bl,notInConstruct:Ul},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Bl,notInConstruct:Ul},{character:":",before:"[ps]",after:"\\/",inConstruct:Bl,notInConstruct:Ul}]}}function JS(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Hl(e){this.config.enter.autolinkProtocol.call(this,e)}function QS(e){this.config.exit.autolinkProtocol.call(this,e)}function YS(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function XS(e){this.config.exit.autolinkEmail.call(this,e)}function ZS(e){this.exit(e)}function e_(e){HS(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,t_],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),n_]],{ignore:["link","linkReference"]})}function t_(e,t,n,r,s){let i="";if(!ry(s)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!r_(n)))return!1;const o=s_(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function n_(e,t,n,r){return!ry(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function r_(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function s_(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=xm(e,"(");let i=xm(e,")");for(;r!==-1&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function ry(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Mr(n)||Ho(n))&&(!t||n!==47)}sy.peek=f_;function i_(){this.buffer()}function a_(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function o_(){this.buffer()}function l_(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function c_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=dn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function u_(e){this.exit(e)}function d_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=dn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function h_(e){this.exit(e)}function f_(){return"["}function sy(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),l(),o(),i+=s.move("]"),i}function m_(){return{enter:{gfmFootnoteCallString:i_,gfmFootnoteCall:a_,gfmFootnoteDefinitionLabelString:o_,gfmFootnoteDefinition:l_},exit:{gfmFootnoteCallString:c_,gfmFootnoteCall:u_,gfmFootnoteDefinitionLabelString:d_,gfmFootnoteDefinition:h_}}}function p_(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:sy},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,o){const l=i.createTracker(o);let c=l.move("[^");const u=i.enter("footnoteDefinition"),h=i.enter("label");return c+=l.move(i.safe(i.associationId(r),{before:c,after:"]"})),h(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),t?iy:g_))),u(),c}}function g_(e,t,n){return t===0?e:iy(e,t,n)}function iy(e,t,n){return(n?"":"    ")+e}const x_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ay.peek=k_;function y_(){return{canContainEols:["delete"],enter:{strikethrough:v_},exit:{strikethrough:w_}}}function b_(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:x_}],handlers:{delete:ay}}}function v_(e){this.enter({type:"delete",children:[]},e)}function w_(e){this.exit(e)}function ay(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(e,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function k_(){return"~"}function j_(e){return e.length}function N_(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||j_,i=[],o=[],l=[],c=[];let u=0,h=-1;for(;++h<e.length;){const b=[],E=[];let g=-1;for(e[h].length>u&&(u=e[h].length);++g<e[h].length;){const v=S_(e[h][g]);if(n.alignDelimiters!==!1){const y=s(v);E[g]=y,(c[g]===void 0||y>c[g])&&(c[g]=y)}b.push(v)}o[h]=b,l[h]=E}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)i[d]=ym(r[d]);else{const b=ym(r);for(;++d<u;)i[d]=b}d=-1;const m=[],f=[];for(;++d<u;){const b=i[d];let E="",g="";b===99?(E=":",g=":"):b===108?E=":":b===114&&(g=":");let v=n.alignDelimiters===!1?1:Math.max(1,c[d]-E.length-g.length);const y=E+"-".repeat(v)+g;n.alignDelimiters!==!1&&(v=E.length+v+g.length,v>c[d]&&(c[d]=v),f[d]=v),m[d]=y}o.splice(1,0,m),l.splice(1,0,f),h=-1;const p=[];for(;++h<o.length;){const b=o[h],E=l[h];d=-1;const g=[];for(;++d<u;){const v=b[d]||"";let y="",C="";if(n.alignDelimiters!==!1){const j=c[d]-(E[d]||0),x=i[d];x===114?y=" ".repeat(j):x===99?j%2?(y=" ".repeat(j/2+.5),C=" ".repeat(j/2-.5)):(y=" ".repeat(j/2),C=y):C=" ".repeat(j)}n.delimiterStart!==!1&&!d&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&g.push(" "),n.alignDelimiters!==!1&&g.push(y),g.push(v),n.alignDelimiters!==!1&&g.push(C),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function S_(e){return e==null?"":String(e)}function ym(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function __(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(e,i.current()),C_);return s(),o}function C_(e,t,n){return">"+(n?"":" ")+e}function E_(e,t){return bm(e,t.inConstruct,!0)&&!bm(e,t.notInConstruct,!1)}function bm(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function vm(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&E_(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function T_(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>o&&(o=i):i=1,s=r+t.length,r=n.indexOf(t,s);return o}function P_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function I_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function A_(e,t,n,r){const s=I_(n),i=e.value||"",o=s==="`"?"GraveAccent":"Tilde";if(P_(e,n)){const d=n.enter("codeIndented"),m=n.indentLines(i,D_);return d(),m}const l=n.createTracker(r),c=s.repeat(Math.max(T_(i,s)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),d()}return h+=l.move(`
`),i&&(h+=l.move(i+`
`)),h+=l.move(c),u(),h}function D_(e,t,n){return(n?"":"    ")+e}function Md(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function M_(e,t,n,r){const s=Md(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),o(),u}function L_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Mi(e){return"&#x"+e.toString(16).toUpperCase()+";"}function mo(e,t,n){const r=_s(e),s=_s(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}oy.peek=O_;function oy(e,t,n,r){const s=L_(n),i=n.enter("emphasis"),o=n.createTracker(r),l=o.move(s);let c=o.move(n.containerPhrasing(e,{after:s,before:l,...o.current()}));const u=c.charCodeAt(0),h=mo(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Mi(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=mo(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Mi(d));const f=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function O_(e,t,n){return n.options.emphasis||"*"}function R_(e,t){let n=!1;return Id(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,ou}),!!((!e.depth||e.depth<3)&&Nd(e)&&(t.options.setext||n))}function F_(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(R_(e,n)){const h=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),h(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");i.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=Mi(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}ly.peek=z_;function ly(e){return e.value||""}function z_(){return"<"}cy.peek=$_;function cy(e,t,n,r){const s=Md(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),o(),u}function $_(){return"!"}uy.peek=B_;function uy(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function B_(){return"!"}dy.peek=U_;function dy(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function U_(){return"`"}function hy(e,t){const n=Nd(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}fy.peek=H_;function fy(e,t,n,r){const s=Md(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(hy(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=h,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${i}`),u+=o.move(" "+s),u+=o.move(n.safe(e.title,{before:u,after:s,...o.current()})),u+=o.move(s),c()),u+=o.move(")"),l(),u}function H_(e,t,n){return hy(e,n)?"<":"["}my.peek=G_;function my(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function G_(){return"["}function Ld(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function q_(e){const t=Ld(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function W_(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function py(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function V_(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=e.ordered?W_(n):Ld(n);const l=e.ordered?o==="."?")":".":q_(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),py(n)===o&&h){let d=-1;for(;++d<e.children.length;){const m=e.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),u}function K_(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function J_(e,t,n,r){const s=K_(n);let i=n.bulletCurrent||Ld(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(o-i.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),h);return c(),u;function h(d,m,f){return m?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function Q_(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(e,r);return i(),s(),o}const Y_=Wo(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function X_(e,t,n,r){return(e.children.some(function(o){return Y_(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Z_(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}gy.peek=eC;function gy(e,t,n,r){const s=Z_(n),i=n.enter("strong"),o=n.createTracker(r),l=o.move(s+s);let c=o.move(n.containerPhrasing(e,{after:s,before:l,...o.current()}));const u=c.charCodeAt(0),h=mo(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Mi(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=mo(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Mi(d));const f=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function eC(e,t,n){return n.options.strong||"*"}function tC(e,t,n,r){return n.safe(e.value,r)}function nC(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function rC(e,t,n){const r=(py(n)+(n.options.ruleSpaces?" ":"")).repeat(nC(n));return n.options.ruleSpaces?r.slice(0,-1):r}const xy={blockquote:__,break:vm,code:A_,definition:M_,emphasis:oy,hardBreak:vm,heading:F_,html:ly,image:cy,imageReference:uy,inlineCode:dy,link:fy,linkReference:my,list:V_,listItem:J_,paragraph:Q_,root:X_,strong:gy,text:tC,thematicBreak:rC};function sC(){return{enter:{table:iC,tableData:wm,tableHeader:wm,tableRow:oC},exit:{codeText:lC,table:aC,tableData:Gl,tableHeader:Gl,tableRow:Gl}}}function iC(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function aC(e){this.exit(e),this.data.inTable=void 0}function oC(e){this.enter({type:"tableRow",children:[]},e)}function Gl(e){this.exit(e)}function wm(e){this.enter({type:"tableCell",children:[]},e)}function lC(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,cC));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function cC(e,t){return t==="|"?t:e}function uC(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:l}};function o(f,p,b,E){return u(h(f,b,E),f.align)}function l(f,p,b,E){const g=d(f,b,E),v=u([g]);return v.slice(0,v.indexOf(`
`))}function c(f,p,b,E){const g=b.enter("tableCell"),v=b.enter("phrasing"),y=b.containerPhrasing(f,{...E,before:i,after:i});return v(),g(),y}function u(f,p){return N_(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function h(f,p,b){const E=f.children;let g=-1;const v=[],y=p.enter("table");for(;++g<E.length;)v[g]=d(E[g],p,b);return y(),v}function d(f,p,b){const E=f.children;let g=-1;const v=[],y=p.enter("tableRow");for(;++g<E.length;)v[g]=c(E[g],f,p,b);return y(),v}function m(f,p,b){let E=xy.inlineCode(f,p,b);return b.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function dC(){return{exit:{taskListCheckValueChecked:km,taskListCheckValueUnchecked:km,paragraph:fC}}}function hC(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:mC}}}function km(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function fC(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let i=-1,o;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function mC(e,t,n,r){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(o);let c=xy.listItem(e,t,n,{...r,...l.current()});return i&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+o}}function pC(){return[VS(),m_(),y_(),sC(),dC()]}function gC(e){return{extensions:[KS(),p_(e),b_(),uC(e),hC()]}}const xC={tokenize:jC,partial:!0},yy={tokenize:NC,partial:!0},by={tokenize:SC,partial:!0},vy={tokenize:_C,partial:!0},yC={tokenize:CC,partial:!0},wy={name:"wwwAutolink",tokenize:wC,previous:jy},ky={name:"protocolAutolink",tokenize:kC,previous:Ny},Fn={name:"emailAutolink",tokenize:vC,previous:Sy},wn={};function bC(){return{text:wn}}let gr=48;for(;gr<123;)wn[gr]=Fn,gr++,gr===58?gr=65:gr===91&&(gr=97);wn[43]=Fn;wn[45]=Fn;wn[46]=Fn;wn[95]=Fn;wn[72]=[Fn,ky];wn[104]=[Fn,ky];wn[87]=[Fn,wy];wn[119]=[Fn,wy];function vC(e,t,n){const r=this;let s,i;return o;function o(d){return!du(d)||!Sy.call(r,r.previous)||Od(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return du(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(yC,h,u)(d):d===45||d===95||gt(d)?(i=!0,e.consume(d),c):h(d)}function u(d){return e.consume(d),s=!0,c}function h(d){return i&&s&&kt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function wC(e,t,n){const r=this;return s;function s(o){return o!==87&&o!==119||!jy.call(r,r.previous)||Od(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(xC,e.attempt(yy,e.attempt(by,i),n),n)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function kC(e,t,n){const r=this;let s="",i=!1;return o;function o(d){return(d===72||d===104)&&Ny.call(r,r.previous)&&!Od(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(kt(d)&&s.length<5)return s+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),i?u:(i=!0,c)):n(d)}function u(d){return d===null||uo(d)||Me(d)||Mr(d)||Ho(d)?n(d):e.attempt(yy,e.attempt(by,h),n)(d)}function h(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function jC(e,t,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),s):o===46&&r===3?(e.consume(o),i):n(o)}function i(o){return o===null?n(o):t(o)}}function NC(e,t,n){let r,s,i;return o;function o(u){return u===46||u===95?e.check(vy,c,l)(u):u===null||Me(u)||Mr(u)||u!==45&&Ho(u)?c(u):(i=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),o}function c(u){return s||r||!i?n(u):t(u)}}function SC(e,t){let n=0,r=0;return s;function s(o){return o===40?(n++,e.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(vy,t,i)(o):o===null||Me(o)||Mr(o)?t(o):(e.consume(o),s)}function i(o){return o===41&&r++,e.consume(o),s}}function _C(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),i):l===93?(e.consume(l),s):l===60||l===null||Me(l)||Mr(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||Me(l)||Mr(l)?t(l):r(l)}function i(l){return kt(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):kt(l)?(e.consume(l),o):n(l)}}function CC(e,t,n){return r;function r(i){return e.consume(i),s}function s(i){return gt(i)?n(i):t(i)}}function jy(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Me(e)}function Ny(e){return!kt(e)}function Sy(e){return!(e===47||du(e))}function du(e){return e===43||e===45||e===46||e===95||gt(e)}function Od(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const EC={tokenize:OC,partial:!0};function TC(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:DC,continuation:{tokenize:MC},exit:LC}},text:{91:{name:"gfmFootnoteCall",tokenize:AC},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:PC,resolveTo:IC}}}}function PC(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=dn(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function IC(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function AC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!o||d===null||d===91||Me(d))return n(d);if(d===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(dn(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Me(d)||(o=!0),i++,e.consume(d),d===92?h:u}function h(d){return d===91||d===92||d===93?(e.consume(d),i++,u):u(d)}}function DC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,l;return c;function c(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(p)}function h(p){if(o>999||p===93&&!l||p===null||p===91||Me(p))return n(p);if(p===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return i=dn(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Me(p)||(l=!0),o++,e.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}function m(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),s.includes(i)||s.push(i),_e(e,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return t(p)}}function MC(e,t,n){return e.check(Vi,t,e.attempt(EC,t,n))}function LC(e){e.exit("gfmFootnoteDefinition")}function OC(e,t,n){const r=this;return _e(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(i):n(i)}}function RC(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",h,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],f=l.parser.constructs.insideSpan.null;f&&Ut(m,m.length,0,Go(f,o.slice(u+1,c),l)),Ut(m,m.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",h,l]]),Ut(o,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function i(o,l,c){const u=this.previous,h=this.events;let d=0;return m;function m(p){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const b=_s(u);if(p===126)return d>1?c(p):(o.consume(p),d++,f);if(d<2&&!n)return c(p);const E=o.exit("strikethroughSequenceTemporary"),g=_s(p);return E._open=!g||g===2&&!!b,E._close=!b||b===2&&!!g,l(p)}}}class FC{constructor(){this.map=[]}add(t,n,r){zC(this,t,n,r)}consume(t){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const i of s)t.push(i);s=r.pop()}this.map.length=0}}function zC(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function $C(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function BC(){return{flow:{null:{name:"table",tokenize:UC,resolveAll:HC}}}}function UC(e,t,n){const r=this;let s=0,i=0,o;return l;function l(w){let I=r.events.length-1;for(;I>-1;){const J=r.events[I][1].type;if(J==="lineEnding"||J==="linePrefix")I--;else break}const A=I>-1?r.events[I][1].type:null,$=A==="tableHead"||A==="tableRow"?x:c;return $===x&&r.parser.lazy[r.now().line]?n(w):$(w)}function c(w){return e.enter("tableHead"),e.enter("tableRow"),u(w)}function u(w){return w===124||(o=!0,i+=1),h(w)}function h(w){return w===null?n(w):de(w)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),f):n(w):ke(w)?_e(e,h,"whitespace")(w):(i+=1,o&&(o=!1,s+=1),w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),o=!0,h):(e.enter("data"),d(w)))}function d(w){return w===null||w===124||Me(w)?(e.exit("data"),h(w)):(e.consume(w),w===92?m:d)}function m(w){return w===92||w===124?(e.consume(w),d):d(w)}function f(w){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(w):(e.enter("tableDelimiterRow"),o=!1,ke(w)?_e(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):p(w))}function p(w){return w===45||w===58?E(w):w===124?(o=!0,e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),b):j(w)}function b(w){return ke(w)?_e(e,E,"whitespace")(w):E(w)}function E(w){return w===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),g):w===45?(i+=1,g(w)):w===null||de(w)?C(w):j(w)}function g(w){return w===45?(e.enter("tableDelimiterFiller"),v(w)):j(w)}function v(w){return w===45?(e.consume(w),v):w===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(w))}function y(w){return ke(w)?_e(e,C,"whitespace")(w):C(w)}function C(w){return w===124?p(w):w===null||de(w)?!o||s!==i?j(w):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(w)):j(w)}function j(w){return n(w)}function x(w){return e.enter("tableRow"),S(w)}function S(w){return w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),S):w===null||de(w)?(e.exit("tableRow"),t(w)):ke(w)?_e(e,S,"whitespace")(w):(e.enter("data"),T(w))}function T(w){return w===null||w===124||Me(w)?(e.exit("data"),S(w)):(e.consume(w),w===92?D:T)}function D(w){return w===92||w===124?(e.consume(w),T):T(w)}}function HC(e,t){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,h,d;const m=new FC;for(;++n<e.length;){const f=e[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,c!==0&&(jm(m,t,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",h,t]])),s=p.type==="tableDelimiterRow"?2:h?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=wa(m,t,i,s,void 0,d),i=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],d=wa(m,t,i,s,void 0,d)),i=o,o=[i[1],n,0,0])):p.type==="tableHead"?(l=!0,c=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(c=n,i[1]!==0?(o[0]=o[1],d=wa(m,t,i,s,n,d)):o[1]!==0&&(d=wa(m,t,o,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&jm(m,t,c,u,h),m.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=$C(t.events,n))}return e}function wa(e,t,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},Yr(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const c=Yr(t.events,n[1]);if(i={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=Yr(t.events,n[2]),h=Yr(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const m=t.events[n[2]],f=t.events[n[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,b=n[3]-n[2]-1;e.add(p,b,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return s!==void 0&&(i.end=Object.assign({},Yr(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function jm(e,t,n,r,s){const i=[],o=Yr(t.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,t])),r.end=Object.assign({},o),i.push(["exit",r,t]),e.add(n+1,0,i)}function Yr(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const GC={name:"tasklistCheck",tokenize:WC};function qC(){return{text:{91:GC}}}function WC(e,t,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),i)}function i(c){return Me(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return de(c)?t(c):ke(c)?e.check({tokenize:VC},t,n)(c):n(c)}}function VC(e,t,n){return _e(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function KC(e){return Lx([bC(),TC(),RC(e),BC(),qC()])}const JC={};function Rd(e){const t=this,n=e||JC,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(KC(n)),i.push(pC()),o.push(gC(n))}function QC({value:e,onChange:t,placeholder:n="Enter markdown text...",label:r="Notes",rows:s=3}){const[i,o]=N.useState(!1);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2"}),r]}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:i?a.jsxs(a.Fragment,{children:[a.jsx(zc,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]}):a.jsxs(a.Fragment,{children:[a.jsx($c,{className:"w-4 h-4"}),a.jsx("span",{children:"Preview"})]})})]}),i?a.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 min-h-[80px] max-h-[200px] overflow-y-auto",children:e?a.jsx(Dd,{remarkPlugins:[Rd],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:l})=>a.jsx("p",{className:"mb-2 last:mb-0",children:l}),h1:({children:l})=>a.jsx("h1",{className:"text-lg font-bold mb-2",children:l}),h2:({children:l})=>a.jsx("h2",{className:"text-base font-bold mb-2",children:l}),h3:({children:l})=>a.jsx("h3",{className:"text-sm font-bold mb-1",children:l}),ul:({children:l})=>a.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:l}),ol:({children:l})=>a.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:l}),li:({children:l})=>a.jsx("li",{className:"text-sm",children:l}),strong:({children:l})=>a.jsx("strong",{className:"font-semibold",children:l}),em:({children:l})=>a.jsx("em",{className:"italic",children:l}),code:({children:l})=>a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:l}),pre:({children:l})=>a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:l}),blockquote:({children:l})=>a.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2",children:l})},children:e}):a.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"No content to preview"})}):a.jsx("textarea",{value:e,onChange:l=>t(l.target.value),rows:s,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white resize-none",placeholder:n}),!i&&a.jsx("div",{className:"mt-1 text-xs text-secondary-text",children:"Supports markdown formatting (**, *, `, #, -, 1., etc.)"})]})}function YC({isOpen:e,onClose:t,model:n,onModelUpdated:r}){var I;const{user:s}=rt(),[i,o]=N.useState({name:"",count:1,purchase_date:"",notes:"",game_id:"",status:"",painted_date:""}),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(!1),[f,p]=N.useState(!1),[b,E]=N.useState(null),[g,v]=N.useState(null),[y,C]=N.useState([]),[j,x]=N.useState(!1);N.useEffect(()=>{n&&o({name:n.name,count:n.count,purchase_date:n.purchase_date||"",notes:n.notes||"",game_id:n.game_id||"",status:n.status||"",painted_date:n.painted_date||""})},[n]),N.useEffect(()=>{e&&(async()=>{const{data:$,error:J}=await q.from("games").select("id, name, icon").order("name");J?console.error("Error fetching games:",J):C($||[])})()},[e]);const S=A=>{var J;const $=(J=A.target.files)==null?void 0:J[0];if($){if(!$.type.startsWith("image/")){alert("Please select an image file");return}c($),E($),p(!0)}},T=async A=>{try{m(!0),console.log("Original cropped size:",(A.size/1024).toFixed(2),"KB");const $=await Mn(A,1200,1200,.8);console.log("Compressed size:",($.size/1024).toFixed(2),"KB"),v($)}catch($){console.error("Compression failed, using original cropped image:",$),v(A)}finally{m(!1),p(!1)}},D=()=>{x(!0),v(null),c(null)},w=async A=>{if(A.preventDefault(),!!s){h(!0);try{let $=n.image_url;if(j){if(n.image_url&&n.image_url.includes("supabase"))try{const F=n.image_url.split("/"),Z=F.findIndex(ee=>ee==="model-images");if(Z!==-1){const ee=F.slice(Z+1).join("/");await q.storage.from("model-images").remove([ee])}}catch(F){console.warn("Failed to delete old image:",F)}$=null}else if(g){if(n.image_url&&n.image_url.includes("supabase"))try{const B=n.image_url.split("/"),re=B.findIndex(_=>_==="model-images");if(re!==-1){const _=B.slice(re+1).join("/");await q.storage.from("model-images").remove([_])}}catch(B){console.warn("Failed to delete old image:",B)}const F=(l==null?void 0:l.name.split(".").pop())||"jpg",Z=`${Date.now()}-${Math.random().toString(36).substring(2)}.${F}`,ee=`${s.id}/${Z}`,{data:z,error:Y}=await q.storage.from("model-images").upload(ee,g);if(Y)throw console.error("Upload error:",Y),new Error(`Failed to upload image: ${Y.message}`);const{data:k}=q.storage.from("model-images").getPublicUrl(z.path);$=k.publicUrl,console.log("New image uploaded:",$)}const{error:J}=await q.from("models").update({name:i.name,count:i.count,purchase_date:i.purchase_date||null,notes:i.notes||null,game_id:i.game_id||null,image_url:$,status:i.status||"None",painted_date:i.painted_date||null}).eq("id",n.id);if(J)throw J;r(),t(),c(null),v(null),E(null),x(!1)}catch($){console.error("Error updating model:",$),alert("Failed to update model. Please try again.")}finally{h(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Model"}),a.jsx("button",{onClick:t,className:"text-icon hover:text-icon-hover",children:a.jsx(be,{className:"w-6 h-6"})})]}),f&&b&&a.jsx(Dr,{isOpen:f,imageFile:b,onCrop:T,onClose:()=>{p(!1),E(null),c(null)}}),!f&&a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2"}),"Model Name"]}),a.jsx("input",{type:"text",value:i.name,onChange:A=>o({...i,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Box"]}),a.jsx("input",{type:"text",value:((I=n.box)==null?void 0:I.name)||"No Collection (Loose Model)",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Box assignment cannot be changed in edit mode."})]}),!n.box&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(ld,{className:"w-4 h-4 mr-2"}),"Game"]}),a.jsx(qi,{games:y,selectedGame:i.game_id,onGameSelect:A=>o({...i,game_id:A})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2"}),"Painted Status"]}),a.jsxs("select",{value:i.status,onChange:A=>o({...i,status:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"",children:"Select Status"}),a.jsx("option",{value:"Assembled",children:"Assembled"}),a.jsx("option",{value:"Primed",children:"Primed"}),a.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),a.jsx("option",{value:"Painted",children:"Painted"})]})]}),i.status==="Painted"&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(nt,{className:"w-4 h-4 mr-2"}),"Painted Date"]}),a.jsx("input",{type:"date",value:i.painted_date,onChange:A=>o({...i,painted_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring---color-brand dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),!n.box&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(nt,{className:"w-4 h-4 mr-2"}),"Purchase Date"]}),a.jsx("input",{type:"date",value:i.purchase_date,onChange:A=>o({...i,purchase_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Ao,{className:"w-4 h-4 mr-2"}),"Number of Models"]}),a.jsx("input",{type:"number",min:"1",value:i.count,onChange:A=>o({...i,count:parseInt(A.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Replace Image"]}),n.image_url&&!j&&a.jsx("div",{className:"mb-3 p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:n.image_url,alt:"Current model image",className:"w-12 h-12 object-cover rounded",onError:A=>{const $=A.target;$.style.display="none"}}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current image"})]}),a.jsx("button",{type:"button",onClick:D,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:a.jsx(Fr,{className:"w-4 h-4"})})]})}),j&&a.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-md bg-red-50 dark:bg-red-900/20",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:" Image will be deleted when you save changes"})}),a.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20"}),g&&a.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[" Cropped image ready for upload (",(g.size/1024).toFixed(1)," KB)"]}),d&&a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Compressing image..."})]}),a.jsx(QC,{value:i.notes,onChange:A=>o({...i,notes:A}),placeholder:"Optional notes about this model... (supports markdown formatting)",label:"Notes",rows:4}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||d,className:"btn-primary btn-flex",children:u?a.jsxs(a.Fragment,{children:[a.jsx(mv,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Model"})]})]})]})}):null}function XC({message:e,isVisible:t,onClose:n,duration:r=3e3}){return N.useEffect(()=>{if(t){const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)}},[t,r,n]),t?a.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-in slide-in-from-top-2 duration-300",children:a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 flex items-center space-x-3 max-w-sm",children:[a.jsx(sv,{className:"w-5 h-5 text-icon-active flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium text-green-800 flex-1",children:e}),a.jsx("button",{onClick:n,className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(be,{className:"w-4 h-4 text-icon"})})]})}):null}function ZC({isOpen:e,onClose:t,onModelDeleted:n,onModelUpdated:r,onViewBox:s,model:i}){var I,A,$,J,F,Z,ee,z,Y,k,B,re,_,G,ae,O,H,fe,ue;const[o,l]=Ne.useState(!1),[c,u]=Ne.useState(!1),[h,d]=Ne.useState(!1),[m,f]=Ne.useState(!1),[p,b]=Ne.useState(!1),[E,g]=Ne.useState(i);if(Ne.useEffect(()=>{g(i)},[i]),Ne.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e||!i)return null;const v=K=>{K.target===K.currentTarget&&t()},y=K=>new Date(K).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),C=(K,le)=>`${le} Model${le>1?"s":""}`,j=()=>(i==null?void 0:i.painted_date)||null,x=()=>(i==null?void 0:i.notes)||null,S=()=>{l(!0)},T=async()=>{if(i){d(!0);try{if(i.image_url&&typeof i.image_url=="string"&&i.image_url.includes("supabase")){const le=i.image_url.split("/"),X=le.findIndex(U=>U==="model-images");if(X!==-1){const U=le.slice(X+1).join("/");await q.storage.from("model-images").remove([U])}}const{error:K}=await q.from("models").delete().eq("id",i.id);if(K)throw K;l(!1),t(),n&&n()}catch(K){console.error("Error deleting model:",K)}finally{d(!1)}}},D=async()=>{if(i){f(!0);try{const K=lo(`/shared/model/${i.id}`);await navigator.clipboard.writeText(K),b(!0)}catch(K){console.error("Error sharing model:",K);const le=lo(`/shared/model/${i.id}`),X=document.createElement("textarea");X.value=le,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),b(!0)}finally{f(!1)}}},w=async()=>{u(!1),t(),r&&await r()};return!e||!E?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:v,children:a.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:(()=>{var le,X,U;if(i.image_url&&typeof i.image_url=="string"&&i.image_url.trim()!==""&&i.image_url!=="undefined"&&i.image_url!=="null"&&(i.image_url.startsWith("http")||i.image_url.startsWith("/")))return i.image_url;const K=((X=(le=i.box)==null?void 0:le.game)==null?void 0:X.image)||((U=i.game)==null?void 0:U.image);return K&&typeof K=="string"&&K.trim()!==""&&K!=="undefined"&&K!=="null"&&K.startsWith("http")?K:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:i.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:K=>{const le=K.target,X="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";le.src!==X&&(console.log("Modal image failed to load:",le.src,"Falling back to default"),le.src=X)}})}),a.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:a.jsx(be,{className:"w-6 h-6 text-icon"})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6 relative",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:i.name}),a.jsx("button",{onClick:()=>u(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:a.jsx(Bi,{className:"w-4 h-4"})})]}),i.box?a.jsx("button",{onClick:()=>{t(),s==null||s(i.box)},className:"text-base text-secondary-text mb-3 hover:text-amber-600 transition-colors",children:i.box.name}):null,a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(A=(I=i.box)==null?void 0:I.game)!=null&&A.icon||($=i.game)!=null&&$.icon?a.jsx("img",{src:((F=(J=i.box)==null?void 0:J.game)==null?void 0:F.icon)||((Z=i.game)==null?void 0:Z.icon),alt:`${((z=(ee=i.box)==null?void 0:ee.game)==null?void 0:z.name)||((Y=i.game)==null?void 0:Y.name)||"Unknown Game"} icon`,className:"object-cover rounded max-h-[32px]",onError:K=>{const le=K.target;console.warn("Game icon failed to load:",le.src,"Falling back to letter icon"),le.style.display="none";const X=le.nextElementSibling;X&&X.classList.contains("icon-fallback")&&(X.style.display="flex")},onLoad:K=>{const X=K.target.nextElementSibling;X&&X.classList.contains("icon-fallback")&&(X.style.display="none")}}):null,a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(B=(k=i.box)==null?void 0:k.game)!=null&&B.icon||(re=i.game)!=null&&re.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((G=(_=i.box)==null?void 0:_.game)==null?void 0:G.name)||((ae=i.game)==null?void 0:ae.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((H=(O=i.box)==null?void 0:O.game)==null?void 0:H.name)||((fe=i.game)==null?void 0:fe.name)||"Unknown Game"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(Ao,{className:"w-5 h-5 text-secondary-text"}),a.jsx("span",{className:"text-base text-text font-medium",children:C(i.status,i.count)})]}),((ue=i.box)==null?void 0:ue.purchase_date)&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(nt,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",y(i.box.purchase_date)]})]}),j()&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(uv,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",y(j())]})]}),x()&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-start space-x-3",children:[a.jsx(Pi,{className:"w-5 h-5 text-secondary-text mt-0.5"}),a.jsx("div",{className:"flex-1",children:a.jsx(Dd,{remarkPlugins:[Rd],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:K})=>a.jsx("p",{className:"mb-2 last:mb-0 text-base text-text",children:K}),h1:({children:K})=>a.jsx("h1",{className:"text-lg font-bold mb-2 text-text",children:K}),h2:({children:K})=>a.jsx("h2",{className:"text-base font-bold mb-2 text-text",children:K}),h3:({children:K})=>a.jsx("h3",{className:"text-sm font-bold mb-1 text-text",children:K}),ul:({children:K})=>a.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:K}),ol:({children:K})=>a.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:K}),li:({children:K})=>a.jsx("li",{className:"text-sm text-text",children:K}),strong:({children:K})=>a.jsx("strong",{className:"font-semibold text-text",children:K}),em:({children:K})=>a.jsx("em",{className:"italic text-text",children:K}),code:({children:K})=>a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:K}),pre:({children:K})=>a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:K}),blockquote:({children:K})=>a.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2 text-text",children:K})},children:x()})})]})]}),a.jsx("div",{className:"flex justify-center pt-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:D,disabled:m,className:"btn-primary btn-full btn-with-icon",children:[a.jsx(cd,{className:"w-4 h-4"}),a.jsx("span",{children:m?"Copying Link...":"Share Model"})]}),a.jsx("button",{onClick:S,className:"btn-danger-outline",children:"Delete this model"})]})})]})]})}),a.jsx(ok,{isOpen:o,onClose:()=>l(!1),onConfirm:T,modelName:i.name,loading:h}),a.jsx(YC,{isOpen:c,onClose:()=>u(!1),onModelUpdated:w,model:i}),a.jsx(XC,{message:"A share link has been copied to your clipboard",isVisible:p,onClose:()=>b(!1)})]})}function eE({isOpen:e,onClose:t,onConfirm:n,boxName:r,loading:s=!1}){if(!e)return null;const i=o=>{o.target===o.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Box"})]})]})})}function tE({isOpen:e,onClose:t,onModelsAdded:n,onAddNewModel:r,box:s}){var D;const[i,o]=N.useState([]),[l,c]=N.useState(new Set),[u,h]=N.useState(!0),[d,m]=N.useState(!1),[f,p]=N.useState(null),{user:b}=rt();N.useEffect(()=>{e&&b&&E()},[e,b]);const E=async()=>{try{h(!0);const{data:w,error:I}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          box_id,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("user_id",b==null?void 0:b.id).is("box_id",null).order("created_at",{ascending:!1});if(I)throw I;const A=(w||[]).sort(($,J)=>{var ee,z;const F=$.game_id===((ee=s.game)==null?void 0:ee.id),Z=J.game_id===((z=s.game)==null?void 0:z.id);return F&&!Z?-1:!F&&Z?1:$.name.localeCompare(J.name)});o(A)}catch(w){p(w instanceof Error?w.message:"Failed to fetch models")}finally{h(!1)}},g=w=>{c(I=>{const A=new Set(I);return A.has(w)?A.delete(w):A.add(w),A})},v=async()=>{if(l.size!==0){m(!0),p(null);try{const w=Array.from(l),{error:I}=await q.from("models").update({box_id:s.id}).in("id",w);if(I)throw I;n(),t(),c(new Set)}catch(w){p(w instanceof Error?w.message:"Failed to add models to box")}finally{m(!1)}}},y=()=>{try{localStorage.setItem("mini-myths-temp-box-context",JSON.stringify({id:s.id,name:s.name,game:s.game}))}catch(w){console.error("Error storing box context:",w)}r(),t()},C=w=>{switch(w){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},j=w=>{var A;if(w.image_url&&typeof w.image_url=="string"&&w.image_url.trim()!==""&&w.image_url!=="undefined"&&w.image_url!=="null"&&(w.image_url.startsWith("http")||w.image_url.startsWith("/")))return{src:w.image_url,isGameFallback:!1};const I=(A=w.game)==null?void 0:A.icon;return I&&typeof I=="string"&&I.trim()!==""&&I!=="undefined"&&I!=="null"&&I.startsWith("http")?{src:I,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},x=i.filter(w=>{var I;return w.game_id===((I=s.game)==null?void 0:I.id)}),S=i.filter(w=>{var I;return w.game_id!==((I=s.game)==null?void 0:I.id)});if(!e)return null;const T=w=>{w.target===w.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:T,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Add Models to Collection: ",s.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:f})}),u?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading models..."})]}):i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Rn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text mb-4",children:"No unboxed models found in your collection."}),a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"All your models are already assigned to collections."}),a.jsx("button",{onClick:y,className:"btn-primary-sm",children:"Add new model to collection"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Select models to add to this box. Models will be moved from their current unboxed state."}),a.jsxs("div",{className:"space-y-6 mb-6",children:[x.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:[((D=s.game)==null?void 0:D.name)||"Same Game"," Models"]}),a.jsx("div",{className:"space-y-2",children:x.map(w=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[a.jsx("button",{type:"button",onClick:()=>g(w.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(w.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(w.id)&&a.jsx(Fc,{className:"w-3 h-3"})}),(()=>{const I=j(w);return a.jsx("img",{src:I.src,alt:w.name,className:`w-12 h-12 object-cover rounded ${I.isGameFallback?"opacity-10":""}`,onError:A=>{const $=A.target;$.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:w.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:"text-xs text-secondary-text",children:[w.count," model",w.count!==1?"s":""]}),w.status!=="None"&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${C(w.status)}`,children:w.status})]})]})]},w.id))})]}),S.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:"Other Models"}),a.jsx("div",{className:"space-y-2",children:S.map(w=>{var I;return a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[a.jsx("button",{type:"button",onClick:()=>g(w.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(w.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(w.id)&&a.jsx(Fc,{className:"w-3 h-3"})}),(()=>{const A=j(w);return a.jsx("img",{src:A.src,alt:w.name,className:`w-12 h-12 object-cover rounded ${A.isGameFallback?"opacity-10":""}`,onError:$=>{const J=$.target;J.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:w.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"text-xs text-secondary-text",children:((I=w.game)==null?void 0:I.name)||"Unknown Game"}),a.jsx("span",{className:"text-xs text-secondary-text",children:""}),a.jsxs("span",{className:"text-xs text-secondary-text",children:[w.count," model",w.count!==1?"s":""]}),w.status!=="None"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-secondary-text",children:""}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${C(w.status)}`,children:w.status})]})]})]})]},w.id)})})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border-custom",children:[a.jsx("button",{onClick:t,disabled:d,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:v,disabled:l.size===0||d,className:"btn-primary btn-flex",children:d?"Adding...":`Add ${l.size} Model${l.size!==1?"s":""}`})]})]})]})})}function nE({isOpen:e,onClose:t,onBoxUpdated:n,box:r}){var le;const[s,i]=N.useState({name:"",game_id:"",purchase_date:"",image_url:""}),[o,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(!1),[m,f]=N.useState(null),[p,b]=N.useState(null),[E,g]=N.useState(!1),[v,y]=N.useState(!1),[C,j]=N.useState(""),[x,S]=N.useState(!1),[T,D]=N.useState(!1),[w,I]=N.useState(!1),[A,$]=N.useState([]),[J,F]=N.useState(""),[Z,ee]=N.useState([]),[z,Y]=N.useState(!1);N.useEffect(()=>{var X;r&&i({name:r.name,game_id:r.game_id||((X=r.game)==null?void 0:X.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""})},[r]),N.useEffect(()=>{e&&k()},[e]),N.useEffect(()=>{e&&r&&k()},[e,r]);const k=async()=>{try{const{data:X,error:U}=await q.from("games").select("id, name, icon").order("name");if(U)throw U;l(X||[])}catch(X){console.error("Error fetching games:",X)}},B=X=>{var ce;const U=(ce=X.target.files)==null?void 0:ce[0];if(U){if(!Ss(U)){alert("Please select a valid image file");return}u(U),f(U),d(!0)}},re=X=>{b(X),d(!1),f(null)},_=()=>{S(!0),b(null),u(null)},G=async()=>{if(s.name.trim()){I(!0),$([]),ee([]);try{const X=o.find(Ae=>Ae.id===s.game_id),U=(X==null?void 0:X.name)||"",ce=`${s.name.trim()} ${U}`.trim(),me=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:ce,count:6})});if(!me.ok)throw new Error("Failed to search for images");const Le=(await me.json()).images||[];$(Le),ee(Le),D(!0)}catch(X){console.error("Error searching for images:",X),D(!1)}finally{I(!1)}}},ae=X=>{F(X),D(!1)},O=async()=>{if(s.name.trim()){Y(!0);try{const X=o.find(Ue=>Ue.id===s.game_id),U=(X==null?void 0:X.name)||"",ce=`${s.name.trim()} ${U}`.trim();console.log("Finding more images with exclude:",Z);const me=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:ce,count:6,exclude:Z})});if(!me.ok)throw new Error("Failed to search for more images");const Le=(await me.json()).images||[];console.log("Received additional images:",Le),console.log("Previous results count:",Z.length),console.log("New results count:",Le.length);const Ae=Le.filter(Ue=>!Z.includes(Ue));console.log("Unique new images after filtering:",Ae),$(Ae),ee([...Z,...Ae])}catch(X){console.error("Error searching for more images:",X)}finally{Y(!1)}}},H=async(X,U,ce)=>{const me=(c==null?void 0:c.name.split(".").pop())||"jpg",Ie=`${ce}/${Date.now()}-${Math.random().toString(36).substring(2)}.${me}`,{data:Le,error:Ae}=await q.storage.from(U).upload(Ie,X);if(Ae)throw Ae;const{data:Ue}=q.storage.from(U).getPublicUrl(Le.path);return Ue.publicUrl},fe=async X=>{if(X.preventDefault(),!!r){g(!0),j("");try{let U=s.image_url;if(x){if(s.image_url&&s.image_url.includes("supabase"))try{const me=s.image_url.split("/"),Ie=me.findIndex(Le=>Le==="model-images");if(Ie!==-1){const Le=me.slice(Ie+1).join("/");await q.storage.from("model-images").remove([Le])}}catch(me){console.warn("Failed to delete old image:",me)}U=null}else if(J)U=J;else if(p){y(!0);const me=await Mn(p,1200,1200,.8);U=await H(me,"model-images","boxes")}const{error:ce}=await q.from("boxes").update({name:s.name,game_id:s.game_id||null,purchase_date:s.purchase_date||null,image_url:U}).eq("id",r.id);if(ce)throw ce;n()}catch(U){j(U instanceof Error?U.message:"Failed to update box")}finally{g(!1),y(!1)}}},ue=()=>{var X;r&&i({name:r.name,game_id:r.game_id||((X=r.game)==null?void 0:X.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""}),u(null),b(null),S(!1),F(""),D(!1),$([]),ee([]),j("")};if(!e||!r)return null;const K=X=>{X.target===X.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:K,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Collection"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"boxName",value:s.name,onChange:X=>i({...s,name:X.target.value}),placeholder:"Enter collection name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(qi,{games:o,selectedGame:s.game_id||"",onGameSelect:X=>i({...s,game_id:X}),placeholder:"Choose a Game"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"purchaseDate",value:s.purchase_date,onChange:X=>i({...s,purchase_date:X.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Box Image"}),s.image_url&&!x&&a.jsx("div",{className:"mb-3 p-3 border border-border-custom rounded-lg bg-bg-secondary",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:s.image_url,alt:"Current box image",className:"w-12 h-12 object-cover rounded",onError:X=>{const U=X.target;U.style.display="none"}}),a.jsx("span",{className:"text-sm text-secondary-text",children:"Current image"})]}),a.jsx("button",{type:"button",onClick:_,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:a.jsx(Fr,{className:"w-4 h-4"})})]})}),x&&a.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-lg bg-red-50",children:a.jsx("p",{className:"text-sm text-red-700",children:" Image will be deleted when you save changes"})}),a.jsxs("div",{className:"relative",children:[a.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:B,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),p&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"}),!s.image_url&&!p&&!J&&s.name.trim()&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{type:"button",onClick:G,disabled:w,className:"btn-secondary btn-full",children:w?"Searching for images...":"Find images for this box"})}),J&&a.jsx("div",{className:"mt-3 p-3 border border-green-300 rounded-lg bg-green-50",children:a.jsx("p",{className:"text-sm text-green-700",children:" Image selected from search results"})})]}),C&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:C}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:ue,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:E||v,className:"btn-primary btn-flex",children:v?"Processing...":E?"Saving...":"Save Changes"})]})]})]})}),m&&a.jsx(Dr,{isOpen:h,onClose:()=>{d(!1),f(null),u(null)},onCrop:re,imageFile:m}),T&&a.jsx(vx,{isOpen:T,onClose:()=>D(!1),images:A,onImageSelect:ae,searchQuery:`${s.name} ${((le=o.find(X=>X.id===s.game_id))==null?void 0:le.name)||""}`.trim(),onFindMoreImages:O,isLoadingMore:z})]})}function rE({isOpen:e,onClose:t,onConfirm:n,modelName:r,boxName:s,loading:i=!1}){if(!e)return null;const o=l=>{l.target===l.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:o,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Remove ",r," from ",s,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"Are you sure you want to remove this model from this box? This won't delete the model or the box from your collection."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:i,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:i,className:"btn-primary btn-flex",children:i?"Removing...":"Remove from Box"})]})]})})}function sE({isOpen:e,onClose:t,onCollectionUpdated:n,box:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState("");N.useEffect(()=>{r&&i(r.public??!1)},[r]);const m=async()=>{if(r){l(!0),d("");try{const{error:b}=await q.from("boxes").update({public:!s}).eq("id",r.id);if(b)throw b;i(!s),n==null||n()}catch(b){d(b instanceof Error?b.message:"Failed to update collection visibility")}finally{l(!1)}}},f=async()=>{if(r){u(!0),d("");try{const b=lo(`/shared/collection/${r.id}`);await navigator.clipboard.writeText(b),console.log("Collection share link copied to clipboard")}catch(b){console.error("Error copying URL:",b);const E=lo(`/shared/collection/${r.id}`),g=document.createElement("textarea");g.value=E,document.body.appendChild(g),g.select(),document.execCommand("copy"),document.body.removeChild(g),console.log("Collection share link copied to clipboard (fallback)")}finally{u(!1)}}},p=b=>{b.target===b.currentTarget&&t()};return!e||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:p,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Share this collection"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:a.jsx("h3",{className:"font-semibold text-text mb-2",children:r.name})}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(cd,{className:"w-5 h-5 text-icon"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-input-label",children:"Make Public"}),a.jsx("p",{className:"text-xs text-secondary-text",children:"Allow anyone to view this collection"})]})]}),a.jsx("button",{onClick:m,disabled:o,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 disabled:opacity-50 ${s?"bg-brand":"bg-secondary-text"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),s&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qg,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-800",children:"This collection is now public and can be viewed by anyone with the link."})]})}),!s&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lv,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-800",children:"This collection is private and only visible to you."})]})}),a.jsxs("button",{onClick:f,disabled:c,className:"btn-secondary btn-full btn-with-icon",children:[a.jsx(iv,{className:"w-4 h-4"}),a.jsx("span",{children:c?"Copying...":"Copy URL"})]}),h&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:h}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:t,className:"btn-secondary",children:"Done"})})]})]})})}function iE({isOpen:e,onClose:t,onBoxDeleted:n,onModelsUpdated:r,onViewModel:s,onAddNewModel:i,box:o}){var fe,ue,K,le,X;const[l,c]=Ne.useState(!1),[u,h]=Ne.useState(!1),[d,m]=Ne.useState(!1),[f,p]=Ne.useState(!1),[b,E]=Ne.useState({isOpen:!1,model:null}),[g,v]=Ne.useState(!1),[y,C]=Ne.useState(!1),[j,x]=Ne.useState(!1),[S,T]=Ne.useState([]),[D,w]=Ne.useState(!0),[I,A]=Ne.useState(null);Ne.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),Ne.useEffect(()=>{e&&o&&$()},[e,o]);const $=async()=>{if(o){w(!0),A(null);try{const{data:U,error:ce}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",o.id).order("created_at",{ascending:!1});if(ce)throw ce;T(U||[])}catch(U){A(U instanceof Error?U.message:"Failed to fetch models")}finally{w(!1)}}},J=()=>{h(!1),$(),r==null||r()},F=()=>{h(!1),v(!0),t()};Ne.useEffect(()=>{g&&!e&&(v(!1),i==null||i((o==null?void 0:o.id)||null))},[g,e,i,o==null?void 0:o.id]);const Z=U=>{E({isOpen:!0,model:U})},ee=async()=>{if(b.model){x(!0);try{const{error:U}=await q.from("models").update({box_id:null}).eq("id",b.model.id);if(U)throw U;$(),r==null||r(),E({isOpen:!1,model:null})}catch(U){console.error("Error removing model from box:",U)}finally{x(!1)}}},z=U=>{t(),s==null||s(U)},Y=()=>{m(!1),t(),r&&r()};if(!e||!o)return null;const k=U=>{U.target===U.currentTarget&&t()},B=U=>new Date(U).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),re=()=>{var ce;if(o.image_url&&typeof o.image_url=="string"&&o.image_url.trim()!==""&&o.image_url!=="undefined"&&o.image_url!=="null"&&(o.image_url.startsWith("http")||o.image_url.startsWith("/")))return o.image_url;const U=(ce=o.game)==null?void 0:ce.image;return U&&typeof U=="string"&&U.trim()!==""&&U!=="undefined"&&U!=="null"&&U.startsWith("http")?U:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},_=U=>{switch(U){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},G=U=>{var me;if(U.image_url&&typeof U.image_url=="string"&&U.image_url.trim()!==""&&U.image_url!=="undefined"&&U.image_url!=="null"&&(U.image_url.startsWith("http")||U.image_url.startsWith("/")))return{src:U.image_url,isGameFallback:!1};const ce=(me=U.game)==null?void 0:me.icon;return ce&&typeof ce=="string"&&ce.trim()!==""&&ce!=="undefined"&&ce!=="null"&&ce.startsWith("http")?{src:ce,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},ae=()=>{p(!0)},O=()=>{c(!0)},H=async()=>{if(o){C(!0);try{if(o.image_url&&typeof o.image_url=="string"&&o.image_url.includes("supabase")){const ce=o.image_url.split("/"),me=ce.findIndex(Ie=>Ie==="model-images");if(me!==-1){const Ie=ce.slice(me+1).join("/");await q.storage.from("model-images").remove([Ie])}}const{error:U}=await q.from("boxes").delete().eq("id",o.id);if(U)throw U;c(!1),t(),n&&n()}catch(U){console.error("Error deleting box:",U)}finally{C(!1)}}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:k,children:a.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:re(),alt:o.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:U=>{const ce=U.target,me="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";ce.src!==me&&(console.log("Box modal image failed to load:",ce.src,"Falling back to default"),ce.src=me)}})}),a.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:a.jsx(be,{className:"w-6 h-6 text-icon"})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6 relative",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:o.name}),a.jsx("button",{onClick:()=>m(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:a.jsx(Bi,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(fe=o.game)!=null&&fe.icon?a.jsx("img",{src:o.game.icon,alt:`${o.game.name} icon`,className:"object-cover rounded max-h-[32px]",onError:U=>{const ce=U.target;console.warn("Game icon failed to load:",ce.src,"Falling back to letter icon"),ce.style.display="none";const me=ce.nextElementSibling;me&&me.classList.contains("icon-fallback")&&(me.style.display="flex")},onLoad:U=>{const me=U.target.nextElementSibling;me&&me.classList.contains("icon-fallback")&&(me.style.display="none")}}):null,a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(ue=o.game)!=null&&ue.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((K=o.game)==null?void 0:K.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((le=o.game)==null?void 0:le.name)||"Unknown Game"})]})]}),a.jsx("div",{className:"space-y-3",children:o.purchase_date&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(nt,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",B(o.purchase_date)]})]})}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:"Models in this Collection"}),D?a.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((U,ce)=>a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]})},ce))}):I?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600",children:I})}):S.length===0?a.jsxs("div",{className:"text-center py-8 bg-bg-secondary rounded-lg",children:[a.jsx(Rn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No models in this collection yet."}),a.jsx("p",{className:"text-sm text-secondary-text mt-2",children:'Use the "Add Models to Collection" button to add some!'})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:S.map(U=>a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center justify-between hover:bg-bg-primary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(()=>{const ce=G(U);return a.jsx("img",{src:ce.src,alt:U.name,className:`w-12 h-12 object-cover rounded ${ce.isGameFallback?"opacity-10":""}`,onError:me=>{const Ie=me.target;Ie.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:U.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:"text-xs text-secondary-text",children:[U.count," model",U.count!==1?"s":""]}),U.status!=="None"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-secondary-text",children:""}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${_(U.status)}`,children:U.status})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>Z(U),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:a.jsx(Fr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>z(U),className:"p-2 text-secondary-text hover:text-text transition-colors",children:a.jsx(ir,{className:"w-4 h-4"})})]})]},U.id))})]}),a.jsx("div",{className:"flex justify-center pt-6",children:a.jsxs("div",{className:"space-y-3 w-full",children:[a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-full btn-with-icon",children:[a.jsx($i,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Models to Collection"})]}),a.jsxs("button",{onClick:ae,className:"btn-secondary btn-full btn-with-icon",children:[a.jsx(cd,{className:"w-4 h-4"}),a.jsx("span",{children:"Share Collection"})]}),a.jsx("button",{onClick:O,className:"btn-danger-outline btn-full",children:"Delete Collection"})]})})]})]})}),a.jsx(eE,{isOpen:l,onClose:()=>c(!1),onConfirm:H,boxName:o.name,loading:y}),a.jsx(tE,{isOpen:u,onClose:()=>h(!1),onModelsAdded:J,onAddNewModel:F,box:o}),a.jsx(nE,{isOpen:d,onClose:()=>m(!1),onBoxUpdated:Y,box:o}),a.jsx(rE,{isOpen:b.isOpen,onClose:()=>E({isOpen:!1,model:null}),onConfirm:ee,modelName:((X=b.model)==null?void 0:X.name)||"",boxName:(o==null?void 0:o.name)||"",loading:j}),a.jsx(sE,{isOpen:f,onClose:()=>p(!1),onCollectionUpdated:Y,box:o})]})}function aE({isOpen:e,onClose:t}){const[n,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState(!1),[m,f]=N.useState(""),[p,b]=N.useState(!1),{updatePassword:E}=rt(),g=async v=>{if(v.preventDefault(),d(!0),f(""),n.length<6){f("Password must be at least 6 characters long"),d(!1);return}if(n!==s){f("Passwords do not match"),d(!1);return}try{const{error:y}=await E(n);y?f(y.message):(b(!0),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{t(),r(""),i(""),b(!1)},2e3))}catch{f("An unexpected error occurred")}finally{d(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:"Set New Password"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),p?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-green-600 text-lg font-semibold mb-2",children:"Password updated successfully!"}),a.jsx("p",{className:"text-secondary-text",children:"You can now use your new password to log in."})]}):a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsx("p",{className:"text-secondary-text text-sm",children:"Please set a new password for your account."}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:o?"text":"password",id:"newPassword",value:n,onChange:v=>r(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:o?a.jsx(zc,{className:"w-4 h-4"}):a.jsx($c,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",id:"confirmPassword",value:s,onChange:v=>i(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),a.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:c?a.jsx(zc,{className:"w-4 h-4"}):a.jsx($c,{className:"w-4 h-4"})})]})]}),m&&a.jsx("div",{className:"text-red-600 text-sm",children:m}),a.jsx("button",{type:"submit",disabled:h,className:"btn-primary btn-full",children:h?"Updating Password...":"Update Password"})]})]})}):null}function oE({value:e,onChange:t,minDate:n=Xc(),placeholder:r="Select date",className:s="",disabled:i=!1}){const[o,l]=N.useState(!1),[c,u]=N.useState(new Date),[h,d]=N.useState(e?new Date(e):null),m=N.useRef(null);N.useEffect(()=>{const S=T=>{m.current&&!m.current.contains(T.target)&&l(!1)};return o&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[o]),N.useEffect(()=>{e&&(d(new Date(e)),u(new Date(e)))},[e]);const f=S=>{const T=S.getFullYear(),D=S.getMonth(),w=new Date(T,D,1),A=new Date(T,D+1,0).getDate(),$=w.getDay(),J=[];for(let F=0;F<$;F++)J.push(null);for(let F=1;F<=A;F++)J.push(new Date(T,D,F));return J},p=S=>z1(S),b=S=>{const T=new Date(n);return T.setHours(0,0,0,0),S.setHours(0,0,0,0),S<T},E=S=>h?p(S)===p(h):!1,g=S=>{b(S)||(d(S),t(p(S)),l(!1))},v=()=>{u(new Date(c.getFullYear(),c.getMonth()-1,1))},y=()=>{u(new Date(c.getFullYear(),c.getMonth()+1,1))},C=()=>{d(null),t(""),l(!1)},j=f(c),x=["January","February","March","April","May","June","July","August","September","October","November","December"];return a.jsxs("div",{className:`relative ${s}`,ref:m,children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",value:h?h.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"",placeholder:r,onClick:()=>!i&&l(!o),readOnly:!0,disabled:i,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-brand focus:border-brand bg-bg-primary text-text cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),h&&!i&&a.jsx("button",{onClick:C,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-4 h-4"})})]}),o&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg z-50 min-w-[280px]",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[a.jsx("button",{onClick:v,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:a.jsx(Ug,{className:"w-4 h-4"})}),a.jsxs("h3",{className:"text-sm font-semibold text-text",children:[x[c.getMonth()]," ",c.getFullYear()]}),a.jsx("button",{onClick:y,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:a.jsx(ir,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>a.jsx("div",{className:"text-xs text-secondary-text text-center py-1",children:S},S))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:j.map((S,T)=>a.jsx("div",{className:"text-center",children:S?a.jsx("button",{onClick:()=>g(S),disabled:b(S),className:`w-8 h-8 text-sm rounded-full transition-colors ${E(S)?"bg-brand text-white":b(S)?"text-secondary-text cursor-not-allowed":"hover:bg-bg-secondary text-text"}`,children:S.getDate()}):a.jsx("div",{className:"w-8 h-8"})},T))})]})]})]})}function Nm({isOpen:e,onClose:t,onBookingCreated:n,lastSelectedLocation:r="",onLocationSelected:s}){const[i,o]=N.useState([]),[l,c]=N.useState([]),[u,h]=N.useState([]),[d,m]=N.useState(r),[f,p]=N.useState(""),[b,E]=N.useState(""),[g,v]=N.useState(""),[y,C]=N.useState(""),[j,x]=N.useState(null),[S,T]=N.useState(!1),[D,w]=N.useState(0),[I,A]=N.useState(!1),[$,J]=N.useState(!1),[F,Z]=N.useState(""),[ee,z]=N.useState(null),[Y,k]=N.useState(!1),{user:B}=rt(),{recentGames:re,addRecentGame:_}=Bo(),G=()=>{try{return localStorage.getItem("mini-myths-last-location")||""}catch(L){return console.error("Error loading last selected location:",L),""}},ae=L=>{try{L&&localStorage.setItem("mini-myths-last-location",L)}catch(te){console.error("Error saving last selected location:",te)}};Ne.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{if(e){ue(),le(),fe();const L=G();m(L||r),B!=null&&B.user_name_public&&C(B.user_name_public)}},[e,r]),N.useEffect(()=>{d?(K(),ae(d),s==null||s(d)):(c([]),E(""))},[d,s]),N.useEffect(()=>{f&&(E(""),x(null))},[f]),N.useEffect(()=>{d&&f?O():z(null)},[d,f]),N.useEffect(()=>{ee&&E("")},[ee]),N.useEffect(()=>{d&&f&&b?H():x(null)},[d,f,b]);const O=async()=>{if(!(!d||!f)){k(!0);try{console.log("Checking blocked date for:",{selectedLocation:d,selectedDate:f});const{data:L,error:te}=await q.from("blocked_dates").select("description").eq("location_id",d).eq("date",f);if(console.log("Blocked date query result:",{data:L,error:te}),te){console.error("Error checking blocked date:",te),z(null);return}L&&L.length>0?(console.log("Found blocked date:",L[0]),z({description:L[0].description})):(console.log("No blocked date found for this location/date"),z(null))}catch(L){console.error("Error checking blocked date:",L),z(null)}finally{k(!1)}}},H=async()=>{if(!(!d||!f||!b)){T(!0);try{const{data:L,error:te}=await q.from("locations").select("tables").eq("id",d).single();if(te)throw te;const he=L.tables,Se=l.find(Q=>Q.id===b),Ke=(Se==null?void 0:Se.isAllDay)||!1;let P=0;if(Ke){const{data:Q,error:oe}=await q.from("bookings").select("timeslot_id").eq("location_id",d).eq("date",f);if(oe)throw oe;const se={};Q==null||Q.forEach(ve=>{const Ee=ve.timeslot_id;se[Ee]=(se[Ee]||0)+1}),P=Math.max(0,...Object.values(se))}else{const{data:Q,error:oe}=await q.from("bookings").select("id").eq("location_id",d).eq("date",f).eq("timeslot_id",b);if(oe)throw oe;const{data:se,error:ve}=await q.from("bookings").select("timeslot:timeslots(id, name, start_time, end_time)").eq("location_id",d).eq("date",f);if(ve)throw ve;const Ee=(Q==null?void 0:Q.length)||0,De=(se==null?void 0:se.filter(at=>{const Je=at.timeslot;return Je&&(Je.name==="All Day Booking"||Je.start_time==="00:00:00"&&Je.end_time==="23:59:59")}).length)||0;P=Ee+De}const M=he-P;x(Math.max(0,M))}catch(L){console.error("Error checking table availability:",L),x(null)}finally{T(!1)}}},fe=async()=>{if(B){A(!0);try{const L=Xc(),{data:te,error:he}=await q.from("bookings").select("id").eq("user_id",B.id).gte("date",L);if(he)throw he;w((te==null?void 0:te.length)||0)}catch(L){console.error("Error checking current bookings:",L),w(0)}finally{A(!1)}}},ue=async()=>{try{const{data:L,error:te}=await q.from("locations").select("*").order("name");if(te)throw te;o(L||[])}catch(L){console.error("Error fetching locations:",L)}},K=async()=>{try{const{data:L,error:te}=await q.from("timeslots").select("*").eq("location_id",d).order("start_time");if(te)throw te;const he=(L||[]).map(Se=>({...Se,isAllDay:Se.name==="All Day Booking"||Se.start_time==="00:00:00"&&Se.end_time==="23:59:59"}));c(he)}catch(L){console.error("Error fetching timeslots:",L)}},le=async()=>{try{const{data:L,error:te}=await q.from("games").select("id, name, icon").order("name");if(te)throw te;h(L||[])}catch(L){console.error("Error fetching games:",L)}},X=()=>!(B!=null&&B.fav_games)||B.fav_games.length===0?[]:u.filter(L=>{var te;return(te=B.fav_games)==null?void 0:te.includes(L.id)}),U=L=>{v(L);const te=u.find(he=>he.id===L);te&&_(te)},ce=()=>{if(!f)return null;const L=new Date(f);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][L.getDay()]},me=()=>{const L=ce();return L?l.filter(te=>te.availability&&te.availability.includes(L)):[]},Ie=L=>L==="00:00:00"?"All Day":new Date(`2000-01-01T${L}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),Le=async L=>{if(L.preventDefault(),!(!d||!f||!b||!B)){J(!0),Z("");try{y.trim()&&B.user_name_public!==y.trim()&&await q.from("users").update({user_name_public:y.trim()}).eq("id",B.id);const{error:te}=await q.from("bookings").insert({location_id:d,timeslot_id:b,game_id:g||null,date:f,user_id:B.id,user_name:y.trim(),user_email:B.email});if(te)throw te;if(g){const he=u.find(Se=>Se.id===g);he&&_(he)}m(""),p(""),E(""),v(""),C(""),z(null),n(),t(),w(he=>he+1)}catch(te){Z(te instanceof Error?te.message:"Failed to create booking")}finally{J(!1)}}},Ae=d&&f&&b&&y.trim()&&D<4&&!ee;if(!e)return null;const Ue=L=>{L.target===L.currentTarget&&t()},ne=me();return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Ue,children:a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-text font-overpass",children:"New Booking"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),I?a.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking booking limit..."})]})}):D>=4?a.jsx("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:a.jsx("span",{className:"text-red-700 text-sm font-medium",children:" You have reached the maximum of 4 active bookings. Cancel an existing booking to create a new one."})}):D>=3?a.jsx("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200",children:a.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" You have ",D," active booking",D!==1?"s":"",". You can create ",4-D," more."]})}):null,a.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Your Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"userName",value:y,onChange:L=>C(L.target.value),placeholder:"Enter your full name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"This will be shared with the store for your booking."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game (Optional)"}),a.jsx(qi,{games:u,selectedGame:g,onGameSelect:U,placeholder:"Choose a Game (Optional)",favoriteGames:X()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"location",value:d,onChange:L=>m(L.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0,children:[a.jsx("option",{value:"",children:"Select Location"}),i.map(L=>a.jsxs("option",{value:L.id,children:[L.name," - ",L.tables," table",L.tables!==1?"s":""]},L.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Date"}),a.jsx(oE,{value:f,onChange:p,minDate:Xc(),placeholder:"Select a date"})]}),!ee&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeslot",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"timeslot",value:b,onChange:L=>E(L.target.value),disabled:!d||!f,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text disabled:opacity-50 disabled:cursor-not-allowed",required:!0,children:[a.jsx("option",{value:"",children:d?f?ne.length===0?"No timeslots available for this day":"Select Timeslot":"Select date first":"Select location first"}),ne.map(L=>a.jsx("option",{value:L.id,children:L.isAllDay?`${L.name} (All Day)`:`${L.name} (${Ie(L.start_time)} - ${Ie(L.end_time)})`},L.id))]})]}),f&&ne.length===0&&d&&a.jsxs("p",{className:"text-sm text-secondary-text mt-1",children:["No timeslots available for ",ce()," at this location."]})]}),Y?a.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking date availability..."})]})}):ee?a.jsxs("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:[a.jsx("div",{className:"flex items-start space-x-2",children:a.jsx("span",{className:"text-red-700 text-sm font-medium",children:" Location Unavailable"})}),a.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["This location is blocked on the selected date.",ee.description&&a.jsxs("span",{className:"block mt-1",children:[a.jsx("strong",{children:"Reason:"})," ",ee.description]})]})]}):null,F&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:F}),!ee&&d&&f&&b&&a.jsx("div",{className:`p-4 rounded-lg border ${S?"bg-blue-50 border-blue-200":j===null?"bg-gray-50 border-gray-200":j===0?"bg-red-50 border-red-200":j<=2?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:S?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking table availability..."})]}):j===null?a.jsx("span",{className:"text-gray-700 text-sm font-medium",children:"Unable to check table availability"}):j===0?a.jsx("span",{className:"text-red-700 text-sm font-medium",children:" No tables available for this timeslot"}):j<=2?a.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" Only ",j," table",j!==1?"s":""," remaining"]}):a.jsxs("span",{className:"text-green-700 text-sm font-medium",children:[" ",j," table",j!==1?"s":""," available"]})}),a.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:!Ae||$||j===0||D>=4||ee,className:`btn-full ${Ae&&!$&&j!==0&&D<4&&!ee?"btn-primary":"btn-disabled"}`,children:$?"Creating Booking...":D>=4?"Booking Limit Reached":j===0?"No Tables Available":ee?"Location Unavailable":"Confirm Booking"}),a.jsx("button",{type:"button",onClick:t,className:"btn-danger-outline btn-full",children:"Cancel"})]})]})]})})}function lE(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),{user:s}=rt();return N.useEffect(()=>{(async()=>{try{const o=window.location.hash,l=new URLSearchParams(window.location.search);if(o.includes("access_token")||l.has("code"))setTimeout(()=>{r(!1),window.location.href=ci()},1e3);else if(o.includes("error")){const c=new URLSearchParams(o.substring(1)).get("error_description");t(c||"Authentication failed"),r(!1)}else t("Invalid authentication callback"),r(!1)}catch(o){console.error("Auth callback error:",o),t("Authentication failed"),r(!1)}})()},[]),N.useEffect(()=>{s&&!n&&(window.location.href=ci())},[s,n]),n?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),a.jsx("p",{className:"text-text",children:"Completing authentication..."})]})}):e?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-title mb-4",children:"Authentication Failed"}),a.jsx("p",{className:"text-red-500 mb-6",children:e}),a.jsx("button",{onClick:()=>window.location.href=ci(),className:"btn-primary",children:"Return to Home"})]})}):null}function _y({isExpanded:e,onClick:t}){return a.jsx("button",{onClick:t,className:`w-14 h-14 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 flex items-center justify-center ${e?"bg-brand-hover text-white":"bg-brand hover:bg-brand-hover text-white"}`,children:e?a.jsx(be,{className:"w-6 h-6 transition-transform duration-200"}):a.jsx($i,{className:"w-6 h-6 transition-transform duration-200"})})}function hu({icon:e,label:t,onClick:n,animationClass:r="animate-fab-slide-in"}){return a.jsxs("button",{onClick:n,className:`flex items-center space-x-3 bg-brand hover:bg-brand-hover text-white px-8 py-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 ${r}`,children:[a.jsx(e,{className:"w-8 h-8"}),a.jsx("span",{className:"text-sm font-medium",children:t})]})}function cE({onAddModel:e,onAddCollection:t}){const[n,r]=N.useState(!1),s=()=>{r(!n)},i=()=>{r(!1),e()},o=()=>{r(!1),t()};return a.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[n&&a.jsxs("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:[a.jsx(hu,{icon:vn,label:"Add Model",onClick:i,animationClass:"animate-fab-slide-in-delayed"}),a.jsx(hu,{icon:Rn,label:"Add Collection",onClick:o,animationClass:"animate-fab-slide-in"})]}),a.jsx(_y,{isExpanded:n,onClick:s})]})}function uE({onNewBooking:e}){const[t,n]=N.useState(!1),r=()=>{n(!t)},s=()=>{n(!1),e()};return a.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[t&&a.jsx("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:a.jsx(hu,{icon:nt,label:"New Table Booking",onClick:s,animationClass:"animate-fab-slide-in"})}),a.jsx(_y,{isExpanded:t,onClick:r})]})}function dE(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=rt();N.useEffect(()=>{if(!o){t([]),r(!1);return}l()},[o]);const l=async()=>{try{const{data:c,error:u}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          box:boxes(
            id,
            name,
            purchase_date,
            game:games(id, name, icon, image)
          ),
          game:games(id, name, icon, image)
        `).eq("user_id",o==null?void 0:o.id).order("created_at",{ascending:!1});if(u)throw u;const h=(c||[]).map(d=>({...d,box:d.box&&Array.isArray(d.box)?d.box[0]:d.box,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch models")}finally{r(!1)}};return{models:e,loading:n,error:s,refetch:l}}function hE(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=rt();N.useEffect(()=>{if(!o){t([]),r(!1);return}l()},[o]);const l=async()=>{try{const{data:c,error:u}=await q.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(id, name, icon, image)
        `).eq("user_id",o==null?void 0:o.id).order("created_at",{ascending:!1}).limit(10);if(u)throw u;const h=(c||[]).map(d=>({...d,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch boxes")}finally{r(!1)}};return{boxes:e,loading:n,error:s,refetch:l}}const ql="2025-08-26 02:57:44 UTC",Sm=()=>({timestamp:ql,date:new Date(ql).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:new Date(ql).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})});function fE({games:e,boxes:t,models:n,selectedBoxes:r,selectedGames:s,selectedStatuses:i,searchQuery:o,onBoxesChange:l,onGamesChange:c,onStatusesChange:u,onSearchChange:h,onClearFilters:d}){const m=r.length>0||s.length>0||i.length>0||o.length>0,f=()=>{const x=new Map;return n.forEach(S=>{if(S.box){const T=S.box.id,D=S.box.name,w=x.get(T)||{name:D,count:0};w.count++,x.set(T,w)}}),Array.from(x.entries()).map(([S,{name:T,count:D}])=>({id:S,name:T,count:D})).sort((S,T)=>T.count-S.count)},p=()=>{const x=new Map;return n.forEach(S=>{var w,I,A,$,J,F;const T=((I=(w=S.box)==null?void 0:w.game)==null?void 0:I.id)||((A=S.game)==null?void 0:A.id),D=((J=($=S.box)==null?void 0:$.game)==null?void 0:J.name)||((F=S.game)==null?void 0:F.name);if(T&&D){const Z=x.get(T)||{name:D,count:0};Z.count++,x.set(T,Z)}}),Array.from(x.entries()).map(([S,{name:T,count:D}])=>({id:S,name:T,count:D})).sort((S,T)=>T.count-S.count)},b=()=>{const x=new Map;return n.forEach(S=>{const T=x.get(S.status)||0;x.set(S.status,T+1)}),Array.from(x.entries()).map(([S,T])=>({status:S,count:T})).sort((S,T)=>T.count-S.count)},E=f(),g=p(),v=b(),y=x=>{const S=r.includes(x)?r.filter(T=>T!==x):[...r,x];l(S)},C=x=>{const S=s.includes(x)?s.filter(T=>T!==x):[...s,x];c(S)},j=x=>{const S=i.includes(x)?i.filter(T=>T!==x):[...i,x];u(S)};return a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gg,{className:"w-5 h-5 text-secondary-text"}),a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),m&&a.jsxs("button",{onClick:d,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[a.jsx(be,{className:"w-4 h-4 text-icon"}),a.jsx("span",{children:"Clear all"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Models"}),a.jsx("input",{type:"text",value:o,onChange:x=>h(x.target.value),placeholder:"Search by model name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collections"}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:E.map(x=>a.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.includes(x.id),onChange:()=>y(x.id),className:"rounded border-border-custom text---color-brand focus:ring---color-brand"}),a.jsx("span",{className:"text-sm text-text flex-1",children:x.name}),a.jsxs("span",{className:"text-xs text-secondary-text",children:["(",x.count,")"]})]},x.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:g.map(x=>a.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.includes(x.id),onChange:()=>C(x.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-text flex-1",children:x.name}),a.jsxs("span",{className:"text-xs text-secondary-text",children:["(",x.count,")"]})]},x.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Statuses"}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:v.map(({status:x,count:S})=>a.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.includes(x),onChange:()=>j(x),className:"rounded border-border-custom text-green-500 focus:ring-green-500"}),a.jsx("span",{className:"text-sm text-text flex-1",children:x}),a.jsxs("span",{className:"text-xs text-secondary-text",children:["(",S,")"]})]},x))})]})]}),m&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:['Search: "',o,'"']}),a.jsx("button",{onClick:()=>h(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]}),r.map(x=>{var T;const S=((T=E.find(D=>D.id===x))==null?void 0:T.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Collection: ",S]}),a.jsx("button",{onClick:()=>y(x),className:"text-amber-600 hover:text-amber-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},x)}),s.map(x=>{var T;const S=((T=g.find(D=>D.id===x))==null?void 0:T.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Game: ",S]}),a.jsx("button",{onClick:()=>C(x),className:"text-blue-600 hover:text-blue-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},x)}),i.map(x=>a.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Status: ",x]}),a.jsx("button",{onClick:()=>j(x),className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},x))]})})]})}function mE({games:e,boxes:t,selectedGames:n,searchQuery:r,onGamesChange:s,onSearchChange:i,onClearFilters:o}){const l=n.length>0||r.length>0,u=(()=>{const d=new Map;return t.forEach(m=>{if(m.game){const f=m.game.id,p=m.game.name,b=d.get(f)||{name:p,count:0};b.count++,d.set(f,b)}}),Array.from(d.entries()).map(([m,{name:f,count:p}])=>({id:m,name:f,count:p})).sort((m,f)=>f.count-m.count)})(),h=d=>{const m=n.includes(d)?n.filter(f=>f!==d):[...n,d];s(m)};return a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gg,{className:"w-5 h-5 text-secondary-text"}),a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),l&&a.jsxs("button",{onClick:o,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[a.jsx(be,{className:"w-4 h-4 text-icon"}),a.jsx("span",{children:"Clear all"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Collections"}),a.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"Search by collection name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:u.map(d=>a.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.includes(d.id),onChange:()=>h(d.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-text flex-1",children:d.name}),a.jsxs("span",{className:"text-xs text-secondary-text",children:["(",d.count,")"]})]},d.id))})]})}),l&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:['Search: "',r,'"']}),a.jsx("button",{onClick:()=>i(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]}),n.map(d=>{var f;const m=((f=u.find(p=>p.id===d))==null?void 0:f.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Game: ",m]}),a.jsx("button",{onClick:()=>h(d),className:"text-blue-600 hover:text-blue-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},d)})]})})]})}const pE="/battleplanapp/Battleplan-Logo-Purple.svg";function gE({collectionId:e}){var j,x,S,T;const[t,n]=N.useState(null),[r,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(!1),{isDarkMode:f,toggleDarkMode:p}=xx();N.useEffect(()=>{const D=w=>{const I=w.target;d&&!I.closest(".profile-dropdown")&&m(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[d]),N.useEffect(()=>{b()},[e]);const b=async()=>{try{o(!0),c(null);const{data:D,error:w}=await q.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("id",e).eq("public",!0).single();if(w){if(w.code==="PGRST116")h(!0);else throw w;return}n(D);const{data:I,error:A}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",e).order("created_at",{ascending:!1});if(A)throw A;s(I||[])}catch(D){c(D instanceof Error?D.message:"Failed to load collection")}finally{o(!1)}},E=D=>new Date(D).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),g=()=>{var w;if(!t)return"";if(t.image_url&&typeof t.image_url=="string"&&t.image_url.trim()!==""&&t.image_url!=="undefined"&&t.image_url!=="null"&&(t.image_url.startsWith("http")||t.image_url.startsWith("/")))return t.image_url;const D=(w=t.game)==null?void 0:w.image;return D&&typeof D=="string"&&D.trim()!==""&&D!=="undefined"&&D!=="null"&&D.startsWith("http")?D:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},v=D=>{var I;if(D.image_url&&typeof D.image_url=="string"&&D.image_url.trim()!==""&&D.image_url!=="undefined"&&D.image_url!=="null"&&(D.image_url.startsWith("http")||D.image_url.startsWith("/")))return{src:D.image_url,isGameFallback:!1};const w=(I=D.game)==null?void 0:I.icon;return w&&typeof w=="string"&&w.trim()!==""&&w!=="undefined"&&w!=="null"&&w.startsWith("http")?{src:w,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},y=D=>{switch(D){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=()=>{window.history.back()};return i?a.jsx("div",{className:"min-h-screen bg-bg-primary",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),a.jsx("div",{className:"h-64 bg-gray-200 rounded mb-8"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})}):u||l?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(qg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-title mb-2",children:u?"Collection Not Found":"Error Loading Collection"}),a.jsx("p",{className:"text-secondary-text mb-6",children:u?"This collection may be private or no longer exists.":l||"Something went wrong while loading the collection."}),a.jsx("button",{onClick:C,className:"btn-secondary",children:a.jsx("span",{children:"Go Back"})})]})}):t?a.jsxs("div",{className:"min-h-screen bg-bg-primary",children:[a.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center"}),a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsx("img",{src:pE,alt:"Battleplan",className:"max-h-[300px] w-auto"})}),a.jsxs("div",{className:"relative profile-dropdown",children:[a.jsx("button",{onClick:()=>m(!d),className:"text-secondary-text hover:text-text focus:outline-none p-2",children:a.jsx(vn,{className:"w-6 h-6 text-icon hover:text-icon-hover"})}),d&&a.jsxs("div",{className:"absolute right-0 top-12 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-[60] min-w-[200px]",children:[a.jsx("button",{onClick:()=>{m(!1),window.location.href="/"},className:"w-full px-4 py-2 text-left text-text hover:bg-bg-secondary transition-colors",children:a.jsx("span",{children:"Log In"})}),a.jsx("div",{className:"border-t border-border-custom my-1"}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[f?a.jsx(Wg,{className:"w-5 h-5 text-icon"}):a.jsx(Vg,{className:"w-5 h-5 text-icon"}),a.jsx("span",{className:"text-base font-semibold text-text",children:f?"Dark Mode":"Light Mode"})]}),a.jsx("button",{onClick:D=>{D.stopPropagation(),p()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 ${f?"bg-brand":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]})]})]})]})})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:t.name})}),a.jsx("div",{className:"mb-8",children:a.jsx("img",{src:g(),alt:t.name,className:"w-full h-64 object-contain rounded-lg bg-bg-secondary",loading:"lazy",onError:D=>{const w=D.target,I="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";w.src!==I&&(w.src=I)}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[(j=t.game)!=null&&j.icon?a.jsx("img",{src:t.game.icon,alt:`${t.game.name} icon`,className:"w-12 h-12 object-cover rounded",onError:D=>{const w=D.target;w.style.display="none";const I=w.nextElementSibling;I&&I.classList.contains("icon-fallback")&&(I.style.display="flex")},onLoad:D=>{const I=D.target.nextElementSibling;I&&I.classList.contains("icon-fallback")&&(I.style.display="none")}}):null,a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(x=t.game)!=null&&x.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:(((S=t.game)==null?void 0:S.name)||"Unknown Game").charAt(0)})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-text",children:"Game"}),a.jsx("p",{className:"text-secondary-text",children:((T=t.game)==null?void 0:T.name)||"Unknown Game"})]})]})}),t.purchase_date&&a.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(nt,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-text",children:"Purchase Date"}),a.jsx("p",{className:"text-secondary-text",children:E(t.purchase_date)})]})]})})]}),a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ii,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Models (",r.length,")"]})]})}),r.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Rn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No models in this collection."})]}):a.jsx("div",{className:"divide-y divide-border-custom",children:r.map(D=>a.jsx("div",{className:"p-6 hover:bg-bg-secondary transition-colors",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:(()=>{const w=v(D);return a.jsx("img",{src:w.src,alt:D.name,className:`w-16 h-16 object-cover rounded ${w.isGameFallback?"opacity-10":""}`,onError:I=>{const A=I.target;A.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-text mb-2",children:D.name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-text mb-2",children:[D.count&&a.jsxs("span",{children:[D.count," model",D.count!==1?"s":""]}),D.status&&D.status!=="None"&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y(D.status)}`,children:D.status})]}),D.notes&&a.jsx("div",{className:"text-sm text-secondary-text",children:a.jsx(Dd,{remarkPlugins:[Rd],className:"prose prose-sm max-w-none",components:{p:({children:w})=>a.jsx("p",{className:"mb-1 last:mb-0 text-sm text-secondary-text",children:w}),h1:({children:w})=>a.jsx("h1",{className:"text-sm font-bold mb-1 text-secondary-text",children:w}),h2:({children:w})=>a.jsx("h2",{className:"text-sm font-bold mb-1 text-secondary-text",children:w}),h3:({children:w})=>a.jsx("h3",{className:"text-xs font-bold mb-1 text-secondary-text",children:w}),ul:({children:w})=>a.jsx("ul",{className:"list-disc list-inside mb-1 space-y-0.5",children:w}),ol:({children:w})=>a.jsx("ol",{className:"list-decimal list-inside mb-1 space-y-0.5",children:w}),li:({children:w})=>a.jsx("li",{className:"text-sm text-secondary-text",children:w}),strong:({children:w})=>a.jsx("strong",{className:"font-semibold text-secondary-text",children:w}),em:({children:w})=>a.jsx("em",{className:"italic text-secondary-text",children:w}),code:({children:w})=>a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:w}),pre:({children:w})=>a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded text-xs font-mono overflow-x-auto mb-1",children:w}),blockquote:({children:w})=>a.jsx("blockquote",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-2 italic mb-1 text-secondary-text",children:w})},children:D.notes})})]})]})},D.id))})]})]})]}):null}function _m({options:e,selectedOptions:t,onSelectionChange:n,placeholder:r="Select options",maxSelections:s=5,searchable:i=!0,type:o="game"}){const[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState({top:0,left:0,width:0,maxHeight:400}),f=N.useRef(null),p=N.useRef(null),b=e.filter(j=>j.name.toLowerCase().includes(u.toLowerCase())||j.address&&j.address.toLowerCase().includes(u.toLowerCase()));N.useEffect(()=>{if(l&&f.current){const j=f.current.getBoundingClientRect(),x=window.innerHeight-j.bottom,S=j.top,T=20,D=Math.min(400,x-T),w=x<D+T&&S>x;m({top:w?j.top-Math.min(400,S-T):j.bottom,left:j.left,width:j.width,maxHeight:w?Math.min(400,S-T):D})}},[l]),N.useEffect(()=>{const j=x=>{f.current&&!f.current.contains(x.target)&&p.current&&!p.current.contains(x.target)&&(c(!1),h(""))};if(l)return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[l]);const E=j=>{const x=t.includes(j)?t.filter(S=>S!==j):t.length<s?[...t,j]:t;n(x)},g=j=>{n(t.filter(x=>x!==j))},v=()=>t.map(j=>{var x;return(x=e.find(S=>S.id===j))==null?void 0:x.name}).filter(Boolean),y=j=>j.icon?a.jsx("img",{src:j.icon,alt:`${j.name} icon`,className:"w-6 h-6 rounded object-cover"}):a.jsx("div",{className:"w-6 h-6 rounded bg-bg-secondary flex items-center justify-center text-xs",children:o==="game"?"":""}),C=()=>a.jsxs("div",{ref:p,className:"absolute z-[9999] bg-bg-primary border border-border-custom rounded-lg shadow-lg overflow-hidden",style:{top:`${d.top}px`,left:`${d.left}px`,width:`${d.width}px`,maxHeight:`${d.maxHeight}px`},children:[i&&a.jsx("div",{className:"p-3 border-b border-border-custom",children:a.jsxs("div",{className:"relative",children:[a.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{type:"text",value:u,onChange:j=>h(j.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text text-sm"})]})}),a.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${d.maxHeight-120}px`},children:b.length===0?a.jsx("div",{className:"p-4 text-center text-secondary-text text-sm",children:"No options found"}):b.map(j=>{const x=t.includes(j.id),S=!x&&t.length>=s;return a.jsxs("button",{type:"button",onClick:()=>E(j.id),disabled:S,className:`w-full p-3 flex items-center space-x-3 hover:bg-bg-secondary transition-colors ${x?"bg-bg-secondary":""} ${S?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[y(j),a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsx("div",{className:"text-text font-medium truncate",children:j.name}),j.address&&a.jsx("div",{className:"text-secondary-text text-sm truncate",children:j.address})]})]}),x&&a.jsx(Fc,{className:"w-4 h-4 text-[var(--color-brand)] flex-shrink-0"})]},j.id)})}),t.length>0&&a.jsx("div",{className:"p-3 border-t border-border-custom",children:a.jsxs("div",{className:"text-xs text-secondary-text",children:[t.length," of ",s," selected"]})})]});return a.jsxs("div",{ref:f,className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>c(!l),className:"w-full p-3 border border-border-custom rounded-lg bg-bg-primary text-left hover:border-[var(--color-brand)] transition-colors focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 min-w-0",children:t.length>0?a.jsx("div",{className:"flex flex-wrap gap-1",children:v().map((j,x)=>a.jsxs("span",{className:"inline-flex items-center space-x-1 bg-bg-secondary px-2 py-1 rounded text-sm",children:[a.jsx("span",{className:"truncate max-w-20",children:j}),a.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),g(t[x])},className:"hover:text-red-500 transition-colors",children:a.jsx(be,{className:"w-3 h-3"})})]},x))}):a.jsx("span",{className:"text-secondary-text",children:r})}),a.jsx(Io,{className:`w-4 h-4 text-icon transition-transform ${l?"rotate-180":""}`})]})}),l&&zg.createPortal(C(),document.body)]})}function xE({isOpen:e,onClose:t,onComplete:n}){const{user:r}=rt(),[s,i]=N.useState(1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,d]=N.useState(""),[m,f]=N.useState([]),[p,b]=N.useState([]),[E,g]=N.useState([]),[v,y]=N.useState([]),C=["fuck","shit","bitch","ass","damn","hell","crap","piss","dick","cock","pussy","cunt","bastard","whore","slut","faggot","nigger","nigga","fag","dyke","retard","spic","kike","fuk","fuq","sh1t","sh!t","b!tch","b1tch","a$$","a55","d!ck","d1ck","p!ss","p1ss","noob","n00b","nub","scrub","get gud","git gud","uninstall","kys","kys","kys","f*ck","f**k","f***","s**t","s***","b***h","a**","d**k","p**s","c**t"],j=F=>{const Z=F.toLowerCase();return C.some(ee=>new RegExp(`\\b${ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b|${ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"i").test(Z))},x=()=>h.length>=5&&h.length<=20&&!j(h)&&/^[a-zA-Z0-9\s]+$/.test(h);N.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const{data:F,error:Z}=await q.from("games").select("id, name, icon").order("name");if(Z)throw Z;g(F||[]);const{data:ee,error:z}=await q.from("locations").select("id, name, address, icon").order("name");if(z)throw z;y(ee||[])}catch(F){console.error("Error fetching data:",F),u("Failed to load data")}},T=()=>{s<3&&(i(s+1),u(null))},D=()=>{s>1&&(i(s-1),u(null))},w=async()=>{if(r){l(!0),u(null);try{const{error:F}=await q.from("users").update({user_name_public:h.trim(),fav_games:m.length>0?m:null,fav_locations:p.length>0?p:null,onboarded:!0}).eq("id",r.id);if(F)throw F;n()}catch(F){u(F instanceof Error?F.message:"Failed to save preferences")}finally{l(!1)}}},I=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Welcome to BattlePlan!"}),a.jsx("p",{className:"text-secondary-text",children:"Let's get you set up with your profile. First, let's set your display name."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label mb-2",children:"Display Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"userName",value:h,onChange:F=>d(F.target.value),placeholder:"Enter your display name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),a.jsxs("div",{className:"mt-2 text-sm text-secondary-text",children:[a.jsx("p",{children:" Must be 5-20 characters long"}),a.jsx("p",{children:" Can contain letters, numbers, and spaces"}),a.jsx("p",{children:" Cannot contain inappropriate language"})]}),h&&!x()&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:j(h)?"Display name contains inappropriate language":"Please enter a valid display name (5-20 characters, letters, numbers, and spaces only)"})]})]}),A=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Favorite Games"}),a.jsx("p",{className:"text-secondary-text",children:"Select up to 5 of your favorite games (optional)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Select Games"}),a.jsx(_m,{options:E,selectedOptions:m,onSelectionChange:f,placeholder:"Choose your favorite games",maxSelections:5,type:"game"})]})]}),$=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Favorite Locations"}),a.jsx("p",{className:"text-secondary-text",children:"Select up to 5 of your favorite gaming locations (optional)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Select Locations"}),a.jsx(_m,{options:v,selectedOptions:p,onSelectionChange:b,placeholder:"Choose your favorite locations",maxSelections:5,type:"location"})]})]}),J=()=>{switch(s){case 1:return I();case 2:return A();case 3:return $();default:return null}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-bg-primary rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"flex items-center justify-between p-6 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[s>1&&a.jsx("button",{type:"button",onClick:D,className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",children:a.jsx(On,{className:"w-5 h-5 text-icon"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-title",children:"Setup Profile"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Step ",s," of 3"]})]})]})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx("div",{className:"w-full bg-bg-secondary rounded-full h-2",children:a.jsx("div",{className:"bg-[var(--color-brand)] h-2 rounded-full transition-all duration-300",style:{width:`${s/3*100}%`}})})}),a.jsx("div",{className:"px-6 py-4 flex-1 overflow-y-auto",children:J()}),c&&a.jsx("div",{className:"px-6 py-3",children:a.jsx("p",{className:"text-sm text-red-500 text-center",children:c})}),a.jsx("div",{className:"p-6 border-t border-border-custom",children:a.jsx("div",{className:"flex justify-between",children:s<3?a.jsxs("button",{type:"button",onClick:T,disabled:s===1&&!x(),className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{children:"Next"}),a.jsx(af,{className:"w-4 h-4"})]}):a.jsx("button",{type:"button",onClick:w,disabled:o,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Complete Setup"}),a.jsx(af,{className:"w-4 h-4"})]})})})})]})}):null}function yE(){const e=window.location.pathname==="/auth/callback",t=window.location.pathname.match(/^\/shared\/collection\/(.+)$/),n=t?t[1]:null;if(e)return a.jsx(lE,{});if(n)return a.jsx(gE,{collectionId:n});const[r,s]=N.useState("collection"),[i,o]=N.useState("recent"),[l,c]=N.useState(1),[u,h]=N.useState(1),[d,m]=N.useState({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),[f,p]=N.useState({selectedGames:[],searchQuery:""}),[b,E]=N.useState([]),[g,v]=N.useState({isOpen:!1,mode:"login"}),[y,C]=N.useState(!1),[j,x]=N.useState(!1),[S,T]=N.useState(!1),[D,w]=N.useState(!1),[I,A]=N.useState(!1),[$,J]=N.useState(null),[F,Z]=N.useState({isOpen:!1,model:null}),[ee,z]=N.useState(0),[Y,k]=N.useState({isOpen:!1,box:null}),{user:B,loading:re,needsPasswordReset:_}=rt(),{models:G,loading:ae,refetch:O}=dE(),{boxes:H,loading:fe,refetch:ue}=hE();N.useEffect(()=>{B&&K()},[B]);const K=async()=>{try{const{data:R,error:ye}=await q.from("games").select("id, name, icon").order("name");if(ye)throw ye;E(R||[])}catch(R){console.error("Error fetching games:",R)}},le=6,X=R=>{m(ye=>({...ye,selectedBoxes:R})),c(1)},U=R=>{m(ye=>({...ye,selectedGames:R})),c(1)},ce=R=>{m(ye=>({...ye,selectedStatuses:R})),c(1)},me=()=>{m({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),c(1)},Ie=R=>{p(ye=>({...ye,selectedGames:R})),h(1)},Le=()=>{p({selectedGames:[],searchQuery:""}),h(1)},Ae=R=>{m(ye=>({...ye,searchQuery:R})),c(1)},Ue=R=>{p(ye=>({...ye,searchQuery:R})),h(1)},ne=G.filter(R=>{var ye,_t,Ct,en;return!(d.searchQuery&&!R.name.toLowerCase().includes(d.searchQuery.toLowerCase())||d.selectedBoxes.length>0&&!d.selectedBoxes.includes(((ye=R.box)==null?void 0:ye.id)||"")||d.selectedGames.length>0&&!d.selectedGames.includes(((Ct=(_t=R.box)==null?void 0:_t.game)==null?void 0:Ct.id)||"")&&!d.selectedGames.includes(((en=R.game)==null?void 0:en.id)||"")||d.selectedStatuses.length>0&&!d.selectedStatuses.includes(R.status))}),L=G.filter(R=>R.status==="Painted"),te=H.filter(R=>{var ye;return!(f.searchQuery&&!R.name.toLowerCase().includes(f.searchQuery.toLowerCase())||f.selectedGames.length>0&&!f.selectedGames.includes(((ye=R.game)==null?void 0:ye.id)||""))}),he=Math.ceil(ne.length/le),Se=Math.ceil(L.length/le),Ke=Math.ceil(te.length/le),P=ne.slice((l-1)*le,l*le),M=L.slice((l-1)*le,l*le),Q=te.slice((u-1)*le,u*le),oe=()=>{O(),ue(),J(null)},se=R=>{Z({isOpen:!0,model:R})},ve=R=>{k({isOpen:!0,box:R})},Ee=()=>{O(),ue()},De=async()=>{await O(),await ue()},at=()=>{ue(),O()},Je=()=>{ue(),O()},Te=R=>{J(R),C(!0)},dt=R=>{J(R),C(!0)},ht=()=>{w(!0)};N.useEffect(()=>{_&&A(!0)},[_]);const[Cy,Ko]=N.useState(!1);N.useEffect(()=>{B&&!re&&B.onboarded===!1&&Ko(!0)},[B,re]);const Ey=()=>{Ko(!1),window.location.reload()};return re?a.jsx("div",{className:"min-h-screen bg-bg-secondary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading..."})]})}):B?D?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),a.jsx(Z1,{onBack:()=>w(!1)}),a.jsx(Vr,{activeTab:r,onTabChange:R=>{w(!1),s(R)}})]}):r==="about"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),a.jsx(ek,{onBack:()=>s("collection")}),a.jsx(Vr,{activeTab:r,onTabChange:s})]}):r==="all-bookings"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),a.jsx(rk,{onBack:()=>s("collection")}),a.jsx(Vr,{activeTab:r,onTabChange:s})]}):r==="blocked-dates"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),a.jsx(ak,{onBack:()=>s("collection")}),a.jsx(Vr,{activeTab:r,onTabChange:s})]}):r==="battleplan"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),a.jsx(B1,{refreshTrigger:ee,onNewBooking:()=>T(!0)}),a.jsx(Vr,{activeTab:r,onTabChange:s}),a.jsx(uE,{onNewBooking:()=>T(!0)}),a.jsx(Nm,{isOpen:S,onClose:()=>T(!1),onBookingCreated:()=>{z(R=>R+1),T(!1)},lastSelectedLocation:"",onLocationSelected:R=>{console.log("Location selected:",R)}})]}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{onAddModel:()=>C(!0),onAdminClick:ht,activeTab:r,onTabChange:s}),r==="collection"&&a.jsx(R1,{activeView:i,onViewChange:o}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[i==="recent"&&a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"mb-16",children:[G.filter(R=>R.status==="Painted").length>0&&a.jsx("div",{className:"flex flex-col items-center mb-8",children:a.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT MODELS"})}),ae?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,ye)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[a.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),a.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ye))}):L.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(R=>{var ye,_t,Ct,en,ot,Et,Wt;return a.jsx(U1,{model:R,name:R.name,boxName:((ye=R.box)==null?void 0:ye.name)||"Unknown Collection",gameName:((Ct=(_t=R.box)==null?void 0:_t.game)==null?void 0:Ct.name)||((en=R.game)==null?void 0:en.name)||"Unknown Game",gameIcon:((Et=(ot=R.box)==null?void 0:ot.game)==null?void 0:Et.icon)||((Wt=R.game)==null?void 0:Wt.icon)||null,status:R.status,count:R.count,imageUrl:R.image_url,onViewModel:()=>se(R),onViewBox:ve},R.id)})}),Se>1&&a.jsx(ga,{currentPage:l,totalPages:Se,onPageChange:c})]})]}),a.jsxs("section",{children:[H.length>0&&a.jsx("div",{className:"flex flex-col items-center mb-8",children:a.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT COLLECTIONS"})}),fe?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,ye)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[a.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),a.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ye))}):H.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No collections in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(R=>{var ye,_t,Ct;return a.jsx(H1,{name:R.name,gameName:((ye=R.game)==null?void 0:ye.name)||"Unknown Game",purchaseDate:R.purchase_date,imageUrl:R.image_url,gameImage:(_t=R.game)==null?void 0:_t.image,gameIcon:(Ct=R.game)==null?void 0:Ct.icon,onViewBox:()=>ve(R)},R.id)})}),Ke>1&&a.jsx(ga,{currentPage:u,totalPages:Ke,onPageChange:h})]})]})]}),i==="collections"&&a.jsxs("section",{children:[H.length>0&&a.jsx(mE,{games:b,boxes:H,selectedGames:f.selectedGames,searchQuery:f.searchQuery,onGamesChange:Ie,onSearchChange:Ue,onClearFilters:Le}),fe?a.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((R,ye)=>a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),a.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ye))}):G.filter(R=>R.status==="Painted").length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:Q.map(R=>{var ye,_t,Ct,en;return a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>ve(R),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:(()=>{var Et;if(R.image_url&&typeof R.image_url=="string"&&R.image_url.trim()!==""&&R.image_url!=="undefined"&&R.image_url!=="null"&&(R.image_url.startsWith("http")||R.image_url.startsWith("/")))return R.image_url;const ot=(Et=R.game)==null?void 0:Et.image;return ot&&typeof ot=="string"&&ot.trim()!==""&&ot!=="undefined"&&ot!=="null"&&ot.startsWith("http")?ot:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:R.name,className:"w-16 h-16 object-cover rounded",onError:ot=>{const Et=ot.target,Wt="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";Et.src!==Wt&&(Et.src=Wt)}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:R.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(ye=R.game)!=null&&ye.icon?a.jsx("img",{src:R.game.icon,alt:`${R.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:ot=>{const Et=ot.target;Et.style.display="none";const Wt=Et.nextElementSibling;Wt&&Wt.classList.contains("icon-fallback")&&(Wt.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(_t=R.game)!=null&&_t.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((Ct=R.game)==null?void 0:Ct.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text",children:((en=R.game)==null?void 0:en.name)||"Unknown Game"})]}),R.purchase_date&&a.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Purchased: ",new Date(R.purchase_date).toLocaleDateString()]})]})]})},R.id)})}),Ke>1&&a.jsx(ga,{currentPage:u,totalPages:Ke,onPageChange:h})]})]}),i==="models"&&a.jsxs("section",{children:[G.length>0&&a.jsx(fE,{games:b,boxes:H,models:G,selectedBoxes:d.selectedBoxes,selectedGames:d.selectedGames,selectedStatuses:d.selectedStatuses,searchQuery:d.searchQuery,onBoxesChange:X,onGamesChange:U,onStatusesChange:ce,onSearchChange:Ae,onClearFilters:me}),ae?a.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((R,ye)=>a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),a.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ye))}):G.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No models in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:P.map(R=>{var ye,_t,Ct,en,ot,Et,Wt,Fd,zd,$d,Bd,Ud,Hd,Gd,qd,Wd,Vd,Kd;return a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>se(R),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:(()=>{var zn,kn,Jd;if(R.image_url&&typeof R.image_url=="string"&&R.image_url.trim()!==""&&R.image_url!=="undefined"&&R.image_url!=="null"&&(R.image_url.startsWith("http")||R.image_url.startsWith("/")))return R.image_url;const tn=((kn=(zn=R.box)==null?void 0:zn.game)==null?void 0:kn.image)||((Jd=R.game)==null?void 0:Jd.image);return tn&&typeof tn=="string"&&tn.trim()!==""&&tn!=="undefined"&&tn!=="null"&&tn.startsWith("http")?tn:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:R.name,className:"w-16 h-16 object-cover rounded",onError:tn=>{const zn=tn.target,kn="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";zn.src!==kn&&(zn.src=kn)}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:R.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(_t=(ye=R.box)==null?void 0:ye.game)!=null&&_t.icon||(Ct=R.game)!=null&&Ct.icon?a.jsx("img",{src:((ot=(en=R.box)==null?void 0:en.game)==null?void 0:ot.icon)||((Et=R.game)==null?void 0:Et.icon)||void 0,alt:`${((Fd=(Wt=R.box)==null?void 0:Wt.game)==null?void 0:Fd.name)||((zd=R.game)==null?void 0:zd.name)||"Unknown Game"} icon`,className:"w-4 h-4 object-contain rounded",onError:tn=>{const zn=tn.target;zn.style.display="none";const kn=zn.nextElementSibling;kn&&kn.classList.contains("icon-fallback")&&(kn.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Bd=($d=R.box)==null?void 0:$d.game)!=null&&Bd.icon||(Ud=R.game)!=null&&Ud.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((Gd=(Hd=R.box)==null?void 0:Hd.game)==null?void 0:Gd.name)||((qd=R.game)==null?void 0:qd.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text",children:((Vd=(Wd=R.box)==null?void 0:Wd.game)==null?void 0:Vd.name)||((Kd=R.game)==null?void 0:Kd.name)||"Unknown Game"})]}),R.status!=="None"&&a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${(()=>{switch(R.status){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:R.status})})]})]})},R.id)})}),he>1&&a.jsx(ga,{currentPage:l,totalPages:he,onPageChange:c})]})]})]}),a.jsx(Vr,{activeTab:r,onTabChange:s}),a.jsx(_f,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode}),a.jsx(G1,{isOpen:y,onClose:()=>C(!1),onSuccess:oe,preselectedBoxId:$}),a.jsx(q1,{isOpen:j,onClose:()=>x(!1),onSuccess:oe,onAddModelsToBox:Te}),a.jsx(ZC,{isOpen:F.isOpen,onClose:()=>Z({isOpen:!1,model:null}),onModelDeleted:Ee,onModelUpdated:De,onViewBox:ve,model:F.model}),a.jsx(iE,{isOpen:Y.isOpen,onClose:()=>k({isOpen:!1,box:null}),onBoxDeleted:at,onModelsUpdated:Je,onViewModel:se,onAddNewModel:dt,box:Y.box}),a.jsx(aE,{isOpen:I,onClose:()=>A(!1)}),a.jsx(Nm,{isOpen:S,onClose:()=>T(!1),onBookingCreated:()=>{z(R=>R+1),T(!1)},lastSelectedLocation:"",onLocationSelected:R=>{console.log("Location selected:",R)}}),r==="collection"&&a.jsx(cE,{onAddModel:()=>C(!0),onAddCollection:()=>x(!0)}),a.jsx(xE,{isOpen:Cy,onClose:()=>Ko(!1),onComplete:Ey})]}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(pr,{}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm p-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:"Welcome to the Mini Myths App Beta"}),a.jsxs("p",{className:"text-xs text-secondary-text mb-2",children:["Last updated: ",Sm().date," at ",Sm().time]}),a.jsxs("p",{className:"text-base text-secondary-text mb-8",children:["Track your miniatures and book a table at your favourite gaming store.",a.jsx("br",{}),a.jsx("br",{}),"Make sure to report any bugs and issues on the Discord!"]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>v({isOpen:!0,mode:"login"}),className:"btn-secondary",children:"Log In"}),a.jsx("button",{onClick:()=>v({isOpen:!0,mode:"signup"}),className:"btn-primary",children:"Sign Up"})]})]})}),a.jsx(_f,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode})]})}$g(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(yE,{})}));
