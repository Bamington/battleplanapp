(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Su(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Fm={exports:{}},Co={},$m={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wi=Symbol.for("react.element"),Zy=Symbol.for("react.portal"),eb=Symbol.for("react.fragment"),tb=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),sb=Symbol.for("react.context"),ib=Symbol.for("react.forward_ref"),ab=Symbol.for("react.suspense"),ob=Symbol.for("react.memo"),lb=Symbol.for("react.lazy"),ah=Symbol.iterator;function cb(e){return e===null||typeof e!="object"?null:(e=ah&&e[ah]||e["@@iterator"],typeof e=="function"?e:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bm=Object.assign,Um={};function As(e,t,n){this.props=e,this.context=t,this.refs=Um,this.updater=n||zm}As.prototype.isReactComponent={};As.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};As.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hm(){}Hm.prototype=As.prototype;function _u(e,t,n){this.props=e,this.context=t,this.refs=Um,this.updater=n||zm}var Cu=_u.prototype=new Hm;Cu.constructor=_u;Bm(Cu,As.prototype);Cu.isPureReactComponent=!0;var oh=Array.isArray,qm=Object.prototype.hasOwnProperty,Eu={current:null},Gm={key:!0,ref:!0,__self:!0,__source:!0};function Wm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qm.call(t,r)&&!Gm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Wi,type:e,key:i,ref:o,props:s,_owner:Eu.current}}function ub(e,t){return{$$typeof:Wi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wi}function db(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lh=/\/+/g;function ol(e,t){return typeof e=="object"&&e!==null&&e.key!=null?db(""+e.key):t.toString(36)}function Ma(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Wi:case Zy:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ol(o,0):r,oh(s)?(n="",e!=null&&(n=e.replace(lh,"$&/")+"/"),Ma(s,t,n,"",function(u){return u})):s!=null&&(Pu(s)&&(s=ub(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",oh(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+ol(i,l);o+=Ma(i,t,n,c,s)}else if(c=cb(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+ol(i,l++),o+=Ma(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function aa(e,t,n){if(e==null)return e;var r=[],s=0;return Ma(e,r,"","",function(i){return t.call(n,i,s++)}),r}function hb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},La={transition:null},fb={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:La,ReactCurrentOwner:Eu};function Vm(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:aa,forEach:function(e,t,n){aa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return aa(e,function(){t++}),t},toArray:function(e){return aa(e,function(t){return t})||[]},only:function(e){if(!Pu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=As;Se.Fragment=eb;Se.Profiler=nb;Se.PureComponent=_u;Se.StrictMode=tb;Se.Suspense=ab;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fb;Se.act=Vm;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Eu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)qm.call(t,c)&&!Gm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Wi,type:e.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(e){return e={$$typeof:sb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rb,_context:e},e.Consumer=e};Se.createElement=Wm;Se.createFactory=function(e){var t=Wm.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:ib,render:e}};Se.isValidElement=Pu;Se.lazy=function(e){return{$$typeof:lb,_payload:{_status:-1,_result:e},_init:hb}};Se.memo=function(e,t){return{$$typeof:ob,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=La.transition;La.transition={};try{e()}finally{La.transition=t}};Se.unstable_act=Vm;Se.useCallback=function(e,t){return _t.current.useCallback(e,t)};Se.useContext=function(e){return _t.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};Se.useEffect=function(e,t){return _t.current.useEffect(e,t)};Se.useId=function(){return _t.current.useId()};Se.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return _t.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};Se.useRef=function(e){return _t.current.useRef(e)};Se.useState=function(e){return _t.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return _t.current.useTransition()};Se.version="18.3.1";$m.exports=Se;var N=$m.exports;const we=Su(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=N,pb=Symbol.for("react.element"),gb=Symbol.for("react.fragment"),xb=Object.prototype.hasOwnProperty,yb=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bb={key:!0,ref:!0,__self:!0,__source:!0};function Km(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)xb.call(t,r)&&!bb.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:pb,type:e,key:i,ref:o,props:s,_owner:yb.current}}Co.Fragment=gb;Co.jsx=Km;Co.jsxs=Km;Fm.exports=Co;var a=Fm.exports,Ym={exports:{}},qt={},Jm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var _=R.length;R.push(z);e:for(;0<_;){var H=_-1>>>1,ee=R[H];if(0<s(ee,z))R[H]=z,R[_]=ee,_=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var z=R[0],_=R.pop();if(_!==z){R[0]=_;e:for(var H=0,ee=R.length,C=ee>>>1;H<C;){var Z=2*(H+1)-1,ne=R[Z],K=Z+1,he=R[K];if(0>s(ne,_))K<ee&&0>s(he,ne)?(R[H]=he,R[K]=_,H=K):(R[H]=ne,R[Z]=_,H=Z);else if(K<ee&&0>s(he,_))R[H]=he,R[K]=_,H=K;else break e}}return z}function s(R,z){var _=R.sortIndex-z.sortIndex;return _!==0?_:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,m=3,f=!1,p=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=R)r(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function j(R){if(y=!1,x(R),!p)if(n(c)!==null)p=!0,B(k);else{var z=n(u);z!==null&&G(j,z.startTime-R)}}function k(R,z){p=!1,y&&(y=!1,g(A),A=-1),f=!0;var _=m;try{for(x(z),d=n(c);d!==null&&(!(d.expirationTime>z)||R&&!P());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var ee=H(d.expirationTime<=z);z=e.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(c)&&r(c),x(z)}else r(c);d=n(c)}if(d!==null)var C=!0;else{var Z=n(u);Z!==null&&G(j,Z.startTime-z),C=!1}return C}finally{d=null,m=_,f=!1}}var w=!1,S=null,A=-1,M=5,b=-1;function P(){return!(e.unstable_now()-b<M)}function I(){if(S!==null){var R=e.unstable_now();b=R;var z=!0;try{z=S(!0,R)}finally{z?D():(w=!1,S=null)}}else w=!1}var D;if(typeof v=="function")D=function(){v(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,O=$.port2;$.port1.onmessage=I,D=function(){O.postMessage(null)}}else D=function(){E(I,0)};function B(R){S=R,w||(w=!0,D())}function G(R,z){A=E(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,B(k))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var _=m;m=z;try{return R()}finally{m=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var _=m;m=R;try{return z()}finally{m=_}},e.unstable_scheduleCallback=function(R,z,_){var H=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?H+_:H):_=H,R){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=_+ee,R={id:h++,callback:z,priorityLevel:R,startTime:_,expirationTime:ee,sortIndex:-1},_>H?(R.sortIndex=_,t(u,R),n(c)===null&&R===n(u)&&(y?(g(A),A=-1):y=!0,G(j,_-H))):(R.sortIndex=ee,t(c,R),p||f||(p=!0,B(k))),R},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(R){var z=m;return function(){var _=m;m=z;try{return R.apply(this,arguments)}finally{m=_}}}})(Qm);Jm.exports=Qm;var vb=Jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb=N,Ut=vb;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xm=new Set,Ni={};function zr(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Ni[e]=t,e=0;e<t.length;e++)Xm.add(t[e])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=Object.prototype.hasOwnProperty,kb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ch={},uh={};function jb(e){return rc.call(uh,e)?!0:rc.call(ch,e)?!1:kb.test(e)?uh[e]=!0:(ch[e]=!0,!1)}function Nb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sb(e,t,n,r){if(t===null||typeof t>"u"||Nb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ft[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ft[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ft[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tu=/[\-:]([a-z])/g;function Iu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tu,Iu);ft[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tu,Iu);ft[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tu,Iu);ft[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ft[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Au(e,t,n,r){var s=ft.hasOwnProperty(t)?ft[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sb(t,n,s,r)&&(n=null),r||s===null?jb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var zn=wb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oa=Symbol.for("react.element"),ss=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),Mu=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),Zm=Symbol.for("react.provider"),ep=Symbol.for("react.context"),Lu=Symbol.for("react.forward_ref"),ic=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Du=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),tp=Symbol.for("react.offscreen"),dh=Symbol.iterator;function Us(e){return e===null||typeof e!="object"?null:(e=dh&&e[dh]||e["@@iterator"],typeof e=="function"?e:null)}var Ge=Object.assign,ll;function Zs(e){if(ll===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ll=t&&t[1]||""}return`
`+ll+e}var cl=!1;function ul(e,t){if(!e||cl)return"";cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{cl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zs(e):""}function _b(e){switch(e.tag){case 5:return Zs(e.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return e=ul(e.type,!1),e;case 11:return e=ul(e.type.render,!1),e;case 1:return e=ul(e.type,!0),e;default:return""}}function oc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case is:return"Fragment";case ss:return"Portal";case sc:return"Profiler";case Mu:return"StrictMode";case ic:return"Suspense";case ac:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ep:return(e.displayName||"Context")+".Consumer";case Zm:return(e._context.displayName||"Context")+".Provider";case Lu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Du:return t=e.displayName||null,t!==null?t:oc(e.type)||"Memo";case Vn:t=e._payload,e=e._init;try{return oc(e(t))}catch{}}return null}function Cb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oc(t);case 8:return t===Mu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function np(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Eb(e){var t=np(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=Eb(e))}function rp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=np(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lc(e,t){var n=t.checked;return Ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sp(e,t){t=t.checked,t!=null&&Au(e,"checked",t,!1)}function cc(e,t){sp(e,t);var n=cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uc(e,t.type,n):t.hasOwnProperty("defaultValue")&&uc(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function uc(e,t,n){(t!=="number"||Va(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ei=Array.isArray;function gs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function dc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(ei(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function ip(e,t){var n=cr(t.value),r=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ph(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ap(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ap(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ca,op=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ca=ca||document.createElement("div"),ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Si(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pb=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(e){Pb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),si[t]=si[e]})});function lp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||si.hasOwnProperty(e)&&si[e]?(""+t).trim():t+"px"}function cp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=lp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Tb=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fc(e,t){if(t){if(Tb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function mc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=null;function Ou(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gc=null,xs=null,ys=null;function gh(e){if(e=Yi(e)){if(typeof gc!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Ao(t),gc(e.stateNode,e.type,t))}}function up(e){xs?ys?ys.push(e):ys=[e]:xs=e}function dp(){if(xs){var e=xs,t=ys;if(ys=xs=null,gh(e),t)for(e=0;e<t.length;e++)gh(t[e])}}function hp(e,t){return e(t)}function fp(){}var dl=!1;function mp(e,t,n){if(dl)return e(t,n);dl=!0;try{return hp(e,t,n)}finally{dl=!1,(xs!==null||ys!==null)&&(fp(),dp())}}function _i(e,t){var n=e.stateNode;if(n===null)return null;var r=Ao(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var xc=!1;if(Dn)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){xc=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{xc=!1}function Ib(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var ii=!1,Ka=null,Ya=!1,yc=null,Ab={onError:function(e){ii=!0,Ka=e}};function Mb(e,t,n,r,s,i,o,l,c){ii=!1,Ka=null,Ib.apply(Ab,arguments)}function Lb(e,t,n,r,s,i,o,l,c){if(Mb.apply(this,arguments),ii){if(ii){var u=Ka;ii=!1,Ka=null}else throw Error(Y(198));Ya||(Ya=!0,yc=u)}}function Br(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xh(e){if(Br(e)!==e)throw Error(Y(188))}function Db(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xh(s),e;if(i===r)return xh(s),t;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function gp(e){return e=Db(e),e!==null?xp(e):null}function xp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xp(e);if(t!==null)return t;e=e.sibling}return null}var yp=Ut.unstable_scheduleCallback,yh=Ut.unstable_cancelCallback,Ob=Ut.unstable_shouldYield,Rb=Ut.unstable_requestPaint,Ke=Ut.unstable_now,Fb=Ut.unstable_getCurrentPriorityLevel,Ru=Ut.unstable_ImmediatePriority,bp=Ut.unstable_UserBlockingPriority,Ja=Ut.unstable_NormalPriority,$b=Ut.unstable_LowPriority,vp=Ut.unstable_IdlePriority,Eo=null,jn=null;function zb(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Eo,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Hb,Bb=Math.log,Ub=Math.LN2;function Hb(e){return e>>>=0,e===0?32:31-(Bb(e)/Ub|0)|0}var ua=64,da=4194304;function ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ti(l):(i&=o,i!==0&&(r=ti(i)))}else o=n&~s,o!==0?r=ti(o):i!==0&&(r=ti(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hn(t),s=1<<n,r|=e[n],t&=~s;return r}function qb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-hn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=qb(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function bc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wp(){var e=ua;return ua<<=1,!(ua&4194240)&&(ua=64),e}function hl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=n}function Wb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Fu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Le=0;function kp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jp,$u,Np,Sp,_p,vc=!1,ha=[],er=null,tr=null,nr=null,Ci=new Map,Ei=new Map,Yn=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Ci.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(t.pointerId)}}function qs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Yi(t),t!==null&&$u(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Kb(e,t,n,r,s){switch(t){case"focusin":return er=qs(er,e,t,n,r,s),!0;case"dragenter":return tr=qs(tr,e,t,n,r,s),!0;case"mouseover":return nr=qs(nr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ci.set(i,qs(Ci.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ei.set(i,qs(Ei.get(i)||null,e,t,n,r,s)),!0}return!1}function Cp(e){var t=Sr(e.target);if(t!==null){var n=Br(t);if(n!==null){if(t=n.tag,t===13){if(t=pp(n),t!==null){e.blockedOn=t,_p(e.priority,function(){Np(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);pc=r,n.target.dispatchEvent(r),pc=null}else return t=Yi(n),t!==null&&$u(t),e.blockedOn=n,!1;t.shift()}return!0}function vh(e,t,n){Da(e)&&n.delete(t)}function Yb(){vc=!1,er!==null&&Da(er)&&(er=null),tr!==null&&Da(tr)&&(tr=null),nr!==null&&Da(nr)&&(nr=null),Ci.forEach(vh),Ei.forEach(vh)}function Gs(e,t){e.blockedOn===t&&(e.blockedOn=null,vc||(vc=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Yb)))}function Pi(e){function t(s){return Gs(s,e)}if(0<ha.length){Gs(ha[0],e);for(var n=1;n<ha.length;n++){var r=ha[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&Gs(er,e),tr!==null&&Gs(tr,e),nr!==null&&Gs(nr,e),Ci.forEach(t),Ei.forEach(t),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Cp(n),n.blockedOn===null&&Yn.shift()}var bs=zn.ReactCurrentBatchConfig,Xa=!0;function Jb(e,t,n,r){var s=Le,i=bs.transition;bs.transition=null;try{Le=1,zu(e,t,n,r)}finally{Le=s,bs.transition=i}}function Qb(e,t,n,r){var s=Le,i=bs.transition;bs.transition=null;try{Le=4,zu(e,t,n,r)}finally{Le=s,bs.transition=i}}function zu(e,t,n,r){if(Xa){var s=wc(e,t,n,r);if(s===null)kl(e,t,r,Za,n),bh(e,r);else if(Kb(s,e,t,n,r))r.stopPropagation();else if(bh(e,r),t&4&&-1<Vb.indexOf(e)){for(;s!==null;){var i=Yi(s);if(i!==null&&jp(i),i=wc(e,t,n,r),i===null&&kl(e,t,r,Za,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else kl(e,t,r,null,n)}}var Za=null;function wc(e,t,n,r){if(Za=null,e=Ou(r),e=Sr(e),e!==null)if(t=Br(e),t===null)e=null;else if(n=t.tag,n===13){if(e=pp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Za=e,null}function Ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fb()){case Ru:return 1;case bp:return 4;case Ja:case $b:return 16;case vp:return 536870912;default:return 16}default:return 16}}var Xn=null,Bu=null,Oa=null;function Pp(){if(Oa)return Oa;var e,t=Bu,n=t.length,r,s="value"in Xn?Xn.value:Xn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Oa=s.slice(e,1<r?1-r:void 0)}function Ra(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fa(){return!0}function wh(){return!1}function Gt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fa:wh,this.isPropagationStopped=wh,this}return Ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),t}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=Gt(Ms),Ki=Ge({},Ms,{view:0,detail:0}),Xb=Gt(Ki),fl,ml,Ws,Po=Ge({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ws&&(Ws&&e.type==="mousemove"?(fl=e.screenX-Ws.screenX,ml=e.screenY-Ws.screenY):ml=fl=0,Ws=e),fl)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),kh=Gt(Po),Zb=Ge({},Po,{dataTransfer:0}),e0=Gt(Zb),t0=Ge({},Ki,{relatedTarget:0}),pl=Gt(t0),n0=Ge({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=Gt(n0),s0=Ge({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),i0=Gt(s0),a0=Ge({},Ms,{data:0}),jh=Gt(a0),o0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c0[e])?!!t[e]:!1}function Hu(){return u0}var d0=Ge({},Ki,{key:function(e){if(e.key){var t=o0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?l0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(e){return e.type==="keypress"?Ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),h0=Gt(d0),f0=Ge({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=Gt(f0),m0=Ge({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),p0=Gt(m0),g0=Ge({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),x0=Gt(g0),y0=Ge({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=Gt(y0),v0=[9,13,27,32],qu=Dn&&"CompositionEvent"in window,ai=null;Dn&&"documentMode"in document&&(ai=document.documentMode);var w0=Dn&&"TextEvent"in window&&!ai,Tp=Dn&&(!qu||ai&&8<ai&&11>=ai),Sh=" ",_h=!1;function Ip(e,t){switch(e){case"keyup":return v0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var as=!1;function k0(e,t){switch(e){case"compositionend":return Ap(t);case"keypress":return t.which!==32?null:(_h=!0,Sh);case"textInput":return e=t.data,e===Sh&&_h?null:e;default:return null}}function j0(e,t){if(as)return e==="compositionend"||!qu&&Ip(e,t)?(e=Pp(),Oa=Bu=Xn=null,as=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tp&&t.locale!=="ko"?null:t.data;default:return null}}var N0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ch(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!N0[e.type]:t==="textarea"}function Mp(e,t,n,r){up(r),t=eo(t,"onChange"),0<t.length&&(n=new Uu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var oi=null,Ti=null;function S0(e){qp(e,0)}function To(e){var t=cs(e);if(rp(t))return e}function _0(e,t){if(e==="change")return t}var Lp=!1;if(Dn){var gl;if(Dn){var xl="oninput"in document;if(!xl){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),xl=typeof Eh.oninput=="function"}gl=xl}else gl=!1;Lp=gl&&(!document.documentMode||9<document.documentMode)}function Ph(){oi&&(oi.detachEvent("onpropertychange",Dp),Ti=oi=null)}function Dp(e){if(e.propertyName==="value"&&To(Ti)){var t=[];Mp(t,Ti,e,Ou(e)),mp(S0,t)}}function C0(e,t,n){e==="focusin"?(Ph(),oi=t,Ti=n,oi.attachEvent("onpropertychange",Dp)):e==="focusout"&&Ph()}function E0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return To(Ti)}function P0(e,t){if(e==="click")return To(t)}function T0(e,t){if(e==="input"||e==="change")return To(t)}function I0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:I0;function Ii(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rc.call(t,s)||!pn(e[s],t[s]))return!1}return!0}function Th(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ih(e,t){var n=Th(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Th(n)}}function Op(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Op(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rp(){for(var e=window,t=Va();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Va(e.document)}return t}function Gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function A0(e){var t=Rp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Op(n.ownerDocument.documentElement,n)){if(r!==null&&Gu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Ih(n,i);var o=Ih(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M0=Dn&&"documentMode"in document&&11>=document.documentMode,os=null,kc=null,li=null,jc=!1;function Ah(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jc||os==null||os!==Va(r)||(r=os,"selectionStart"in r&&Gu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),li&&Ii(li,r)||(li=r,r=eo(kc,"onSelect"),0<r.length&&(t=new Uu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=os)))}function ma(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ls={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},yl={},Fp={};Dn&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Io(e){if(yl[e])return yl[e];if(!ls[e])return e;var t=ls[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fp)return yl[e]=t[n];return e}var $p=Io("animationend"),zp=Io("animationiteration"),Bp=Io("animationstart"),Up=Io("transitionend"),Hp=new Map,Mh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){Hp.set(e,t),zr(t,[e])}for(var bl=0;bl<Mh.length;bl++){var vl=Mh[bl],L0=vl.toLowerCase(),D0=vl[0].toUpperCase()+vl.slice(1);dr(L0,"on"+D0)}dr($p,"onAnimationEnd");dr(zp,"onAnimationIteration");dr(Bp,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(Up,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function Lh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Lb(r,t,void 0,e),e.currentTarget=null}function qp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Lh(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Lh(s,l,u),i=c}}}if(Ya)throw e=yc,Ya=!1,yc=null,e}function ze(e,t){var n=t[Ec];n===void 0&&(n=t[Ec]=new Set);var r=e+"__bubble";n.has(r)||(Gp(t,e,2,!1),n.add(r))}function wl(e,t,n){var r=0;t&&(r|=4),Gp(n,e,r,t)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){if(!e[pa]){e[pa]=!0,Xm.forEach(function(n){n!=="selectionchange"&&(O0.has(n)||wl(n,!1,e),wl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pa]||(t[pa]=!0,wl("selectionchange",!1,t))}}function Gp(e,t,n,r){switch(Ep(t)){case 1:var s=Jb;break;case 4:s=Qb;break;default:s=zu}n=s.bind(null,t,n,e),s=void 0,!xc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function kl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Sr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}mp(function(){var u=i,h=Ou(n),d=[];e:{var m=Hp.get(e);if(m!==void 0){var f=Uu,p=e;switch(e){case"keypress":if(Ra(n)===0)break e;case"keydown":case"keyup":f=h0;break;case"focusin":p="focus",f=pl;break;case"focusout":p="blur",f=pl;break;case"beforeblur":case"afterblur":f=pl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=e0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=p0;break;case $p:case zp:case Bp:f=r0;break;case Up:f=x0;break;case"scroll":f=Xb;break;case"wheel":f=b0;break;case"copy":case"cut":case"paste":f=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Nh}var y=(t&4)!==0,E=!y&&e==="scroll",g=y?m!==null?m+"Capture":null:m;y=[];for(var v=u,x;v!==null;){x=v;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,g!==null&&(j=_i(v,g),j!=null&&y.push(Mi(v,j,x)))),E)break;v=v.return}0<y.length&&(m=new f(m,p,null,n,h),d.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==pc&&(p=n.relatedTarget||n.fromElement)&&(Sr(p)||p[On]))break e;if((f||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Sr(p):null,p!==null&&(E=Br(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=kh,j="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=Nh,j="onPointerLeave",g="onPointerEnter",v="pointer"),E=f==null?m:cs(f),x=p==null?m:cs(p),m=new y(j,v+"leave",f,n,h),m.target=E,m.relatedTarget=x,j=null,Sr(h)===u&&(y=new y(g,v+"enter",p,n,h),y.target=x,y.relatedTarget=E,j=y),E=j,f&&p)t:{for(y=f,g=p,v=0,x=y;x;x=Vr(x))v++;for(x=0,j=g;j;j=Vr(j))x++;for(;0<v-x;)y=Vr(y),v--;for(;0<x-v;)g=Vr(g),x--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Vr(y),g=Vr(g)}y=null}else y=null;f!==null&&Dh(d,m,f,y,!1),p!==null&&E!==null&&Dh(d,E,p,y,!0)}}e:{if(m=u?cs(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var k=_0;else if(Ch(m))if(Lp)k=T0;else{k=E0;var w=C0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=P0);if(k&&(k=k(e,u))){Mp(d,k,n,h);break e}w&&w(e,m,u),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&uc(m,"number",m.value)}switch(w=u?cs(u):window,e){case"focusin":(Ch(w)||w.contentEditable==="true")&&(os=w,kc=u,li=null);break;case"focusout":li=kc=os=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,Ah(d,n,h);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":Ah(d,n,h)}var S;if(qu)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else as?Ip(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Tp&&n.locale!=="ko"&&(as||A!=="onCompositionStart"?A==="onCompositionEnd"&&as&&(S=Pp()):(Xn=h,Bu="value"in Xn?Xn.value:Xn.textContent,as=!0)),w=eo(u,A),0<w.length&&(A=new jh(A,e,null,n,h),d.push({event:A,listeners:w}),S?A.data=S:(S=Ap(n),S!==null&&(A.data=S)))),(S=w0?k0(e,n):j0(e,n))&&(u=eo(u,"onBeforeInput"),0<u.length&&(h=new jh("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=S))}qp(d,t)})}function Mi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_i(e,n),i!=null&&r.unshift(Mi(e,i,s)),i=_i(e,t),i!=null&&r.push(Mi(e,i,s))),e=e.return}return r}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dh(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=_i(n,i),c!=null&&o.unshift(Mi(n,c,l))):s||(c=_i(n,i),c!=null&&o.push(Mi(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var R0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function Oh(e){return(typeof e=="string"?e:""+e).replace(R0,`
`).replace(F0,"")}function ga(e,t,n){if(t=Oh(t),Oh(e)!==t&&n)throw Error(Y(425))}function to(){}var Nc=null,Sc=null;function _c(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cc=typeof setTimeout=="function"?setTimeout:void 0,$0=typeof clearTimeout=="function"?clearTimeout:void 0,Rh=typeof Promise=="function"?Promise:void 0,z0=typeof queueMicrotask=="function"?queueMicrotask:typeof Rh<"u"?function(e){return Rh.resolve(null).then(e).catch(B0)}:Cc;function B0(e){setTimeout(function(){throw e})}function jl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Pi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pi(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),kn="__reactFiber$"+Ls,Li="__reactProps$"+Ls,On="__reactContainer$"+Ls,Ec="__reactEvents$"+Ls,U0="__reactListeners$"+Ls,H0="__reactHandles$"+Ls;function Sr(e){var t=e[kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[On]||n[kn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fh(e);e!==null;){if(n=e[kn])return n;e=Fh(e)}return t}e=n,n=e.parentNode}return null}function Yi(e){return e=e[kn]||e[On],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Ao(e){return e[Li]||null}var Pc=[],us=-1;function hr(e){return{current:e}}function Be(e){0>us||(e.current=Pc[us],Pc[us]=null,us--)}function $e(e,t){us++,Pc[us]=e.current,e.current=t}var ur={},vt=hr(ur),Mt=hr(!1),Tr=ur;function Ns(e,t){var n=e.type.contextTypes;if(!n)return ur;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(e){return e=e.childContextTypes,e!=null}function no(){Be(Mt),Be(vt)}function $h(e,t,n){if(vt.current!==ur)throw Error(Y(168));$e(vt,t),$e(Mt,n)}function Wp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,Cb(e)||"Unknown",s));return Ge({},n,r)}function ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,Tr=vt.current,$e(vt,e),$e(Mt,Mt.current),!0}function zh(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Wp(e,t,Tr),r.__reactInternalMemoizedMergedChildContext=e,Be(Mt),Be(vt),$e(vt,e)):Be(Mt),$e(Mt,n)}var In=null,Mo=!1,Nl=!1;function Vp(e){In===null?In=[e]:In.push(e)}function q0(e){Mo=!0,Vp(e)}function fr(){if(!Nl&&In!==null){Nl=!0;var e=0,t=Le;try{var n=In;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}In=null,Mo=!1}catch(s){throw In!==null&&(In=In.slice(e+1)),yp(Ru,fr),s}finally{Le=t,Nl=!1}}return null}var ds=[],hs=0,so=null,io=0,Kt=[],Yt=0,Ir=null,An=1,Mn="";function br(e,t){ds[hs++]=io,ds[hs++]=so,so=e,io=t}function Kp(e,t,n){Kt[Yt++]=An,Kt[Yt++]=Mn,Kt[Yt++]=Ir,Ir=e;var r=An;e=Mn;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,An=1<<32-hn(t)+s|n<<s|r,Mn=i+e}else An=1<<i|n<<s|r,Mn=e}function Wu(e){e.return!==null&&(br(e,1),Kp(e,1,0))}function Vu(e){for(;e===so;)so=ds[--hs],ds[hs]=null,io=ds[--hs],ds[hs]=null;for(;e===Ir;)Ir=Kt[--Yt],Kt[Yt]=null,Mn=Kt[--Yt],Kt[Yt]=null,An=Kt[--Yt],Kt[Yt]=null}var zt=null,$t=null,Ue=!1,un=null;function Yp(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,$t=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,$t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ir!==null?{id:An,overflow:Mn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zt=e,$t=null,!0):!1;default:return!1}}function Tc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ic(e){if(Ue){var t=$t;if(t){var n=t;if(!Bh(e,t)){if(Tc(e))throw Error(Y(418));t=rr(n.nextSibling);var r=zt;t&&Bh(e,t)?Yp(r,n):(e.flags=e.flags&-4097|2,Ue=!1,zt=e)}}else{if(Tc(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Ue=!1,zt=e}}}function Uh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function xa(e){if(e!==zt)return!1;if(!Ue)return Uh(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_c(e.type,e.memoizedProps)),t&&(t=$t)){if(Tc(e))throw Jp(),Error(Y(418));for(;t;)Yp(e,t),t=rr(t.nextSibling)}if(Uh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$t=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$t=null}}else $t=zt?rr(e.stateNode.nextSibling):null;return!0}function Jp(){for(var e=$t;e;)e=rr(e.nextSibling)}function Ss(){$t=zt=null,Ue=!1}function Ku(e){un===null?un=[e]:un.push(e)}var G0=zn.ReactCurrentBatchConfig;function Vs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hh(e){var t=e._init;return t(e._payload)}function Qp(e){function t(g,v){if(e){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=or(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,v,x,j){return v===null||v.tag!==6?(v=Il(x,g.mode,j),v.return=g,v):(v=s(v,x),v.return=g,v)}function c(g,v,x,j){var k=x.type;return k===is?h(g,v,x.props.children,j,x.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vn&&Hh(k)===v.type)?(j=s(v,x.props),j.ref=Vs(g,v,x),j.return=g,j):(j=qa(x.type,x.key,x.props,null,g.mode,j),j.ref=Vs(g,v,x),j.return=g,j)}function u(g,v,x,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Al(x,g.mode,j),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function h(g,v,x,j,k){return v===null||v.tag!==7?(v=Pr(x,g.mode,j,k),v.return=g,v):(v=s(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Il(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oa:return x=qa(v.type,v.key,v.props,null,g.mode,x),x.ref=Vs(g,null,v),x.return=g,x;case ss:return v=Al(v,g.mode,x),v.return=g,v;case Vn:var j=v._init;return d(g,j(v._payload),x)}if(ei(v)||Us(v))return v=Pr(v,g.mode,x,null),v.return=g,v;ya(g,v)}return null}function m(g,v,x,j){var k=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:l(g,v,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oa:return x.key===k?c(g,v,x,j):null;case ss:return x.key===k?u(g,v,x,j):null;case Vn:return k=x._init,m(g,v,k(x._payload),j)}if(ei(x)||Us(x))return k!==null?null:h(g,v,x,j,null);ya(g,x)}return null}function f(g,v,x,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(x)||null,l(v,g,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case oa:return g=g.get(j.key===null?x:j.key)||null,c(v,g,j,k);case ss:return g=g.get(j.key===null?x:j.key)||null,u(v,g,j,k);case Vn:var w=j._init;return f(g,v,x,w(j._payload),k)}if(ei(j)||Us(j))return g=g.get(x)||null,h(v,g,j,k,null);ya(v,j)}return null}function p(g,v,x,j){for(var k=null,w=null,S=v,A=v=0,M=null;S!==null&&A<x.length;A++){S.index>A?(M=S,S=null):M=S.sibling;var b=m(g,S,x[A],j);if(b===null){S===null&&(S=M);break}e&&S&&b.alternate===null&&t(g,S),v=i(b,v,A),w===null?k=b:w.sibling=b,w=b,S=M}if(A===x.length)return n(g,S),Ue&&br(g,A),k;if(S===null){for(;A<x.length;A++)S=d(g,x[A],j),S!==null&&(v=i(S,v,A),w===null?k=S:w.sibling=S,w=S);return Ue&&br(g,A),k}for(S=r(g,S);A<x.length;A++)M=f(S,g,A,x[A],j),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?A:M.key),v=i(M,v,A),w===null?k=M:w.sibling=M,w=M);return e&&S.forEach(function(P){return t(g,P)}),Ue&&br(g,A),k}function y(g,v,x,j){var k=Us(x);if(typeof k!="function")throw Error(Y(150));if(x=k.call(x),x==null)throw Error(Y(151));for(var w=k=null,S=v,A=v=0,M=null,b=x.next();S!==null&&!b.done;A++,b=x.next()){S.index>A?(M=S,S=null):M=S.sibling;var P=m(g,S,b.value,j);if(P===null){S===null&&(S=M);break}e&&S&&P.alternate===null&&t(g,S),v=i(P,v,A),w===null?k=P:w.sibling=P,w=P,S=M}if(b.done)return n(g,S),Ue&&br(g,A),k;if(S===null){for(;!b.done;A++,b=x.next())b=d(g,b.value,j),b!==null&&(v=i(b,v,A),w===null?k=b:w.sibling=b,w=b);return Ue&&br(g,A),k}for(S=r(g,S);!b.done;A++,b=x.next())b=f(S,g,A,b.value,j),b!==null&&(e&&b.alternate!==null&&S.delete(b.key===null?A:b.key),v=i(b,v,A),w===null?k=b:w.sibling=b,w=b);return e&&S.forEach(function(I){return t(g,I)}),Ue&&br(g,A),k}function E(g,v,x,j){if(typeof x=="object"&&x!==null&&x.type===is&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oa:e:{for(var k=x.key,w=v;w!==null;){if(w.key===k){if(k=x.type,k===is){if(w.tag===7){n(g,w.sibling),v=s(w,x.props.children),v.return=g,g=v;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vn&&Hh(k)===w.type){n(g,w.sibling),v=s(w,x.props),v.ref=Vs(g,w,x),v.return=g,g=v;break e}n(g,w);break}else t(g,w);w=w.sibling}x.type===is?(v=Pr(x.props.children,g.mode,j,x.key),v.return=g,g=v):(j=qa(x.type,x.key,x.props,null,g.mode,j),j.ref=Vs(g,v,x),j.return=g,g=j)}return o(g);case ss:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=Al(x,g.mode,j),v.return=g,g=v}return o(g);case Vn:return w=x._init,E(g,v,w(x._payload),j)}if(ei(x))return p(g,v,x,j);if(Us(x))return y(g,v,x,j);ya(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=Il(x,g.mode,j),v.return=g,g=v),o(g)):n(g,v)}return E}var _s=Qp(!0),Xp=Qp(!1),ao=hr(null),oo=null,fs=null,Yu=null;function Ju(){Yu=fs=oo=null}function Qu(e){var t=ao.current;Be(ao),e._currentValue=t}function Ac(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vs(e,t){oo=e,Yu=fs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(At=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(Yu!==e)if(e={context:e,memoizedValue:t,next:null},fs===null){if(oo===null)throw Error(Y(308));fs=e,oo.dependencies={lanes:0,firstContext:e}}else fs=fs.next=e;return t}var _r=null;function Xu(e){_r===null?_r=[e]:_r.push(e)}function Zp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xu(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rn(e,r)}function Rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kn=!1;function Zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Rn(e,n)}return s=r.interleaved,s===null?(t.next=t,Xu(r)):(t.next=s.next,s.next=t),r.interleaved=t,Rn(e,n)}function Fa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}function qh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var s=e.updateQueue;Kn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(f,d,m):p,m==null)break e;d=Ge({},d,m);break e;case 2:Kn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=f,c=d):h=h.next=f,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Mr|=o,e.lanes=o,e.memoizedState=d}}function Gh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Ji={},Nn=hr(Ji),Di=hr(Ji),Oi=hr(Ji);function Cr(e){if(e===Ji)throw Error(Y(174));return e}function ed(e,t){switch($e(Oi,t),$e(Di,e),$e(Nn,Ji),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hc(t,e)}Be(Nn),$e(Nn,t)}function Cs(){Be(Nn),Be(Di),Be(Oi)}function tg(e){Cr(Oi.current);var t=Cr(Nn.current),n=hc(t,e.type);t!==n&&($e(Di,e),$e(Nn,n))}function td(e){Di.current===e&&(Be(Nn),Be(Di))}var He=hr(0);function co(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sl=[];function nd(){for(var e=0;e<Sl.length;e++)Sl[e]._workInProgressVersionPrimary=null;Sl.length=0}var $a=zn.ReactCurrentDispatcher,_l=zn.ReactCurrentBatchConfig,Ar=0,qe=null,st=null,ot=null,uo=!1,ci=!1,Ri=0,W0=0;function mt(){throw Error(Y(321))}function rd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function sd(e,t,n,r,s,i){if(Ar=i,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=e===null||e.memoizedState===null?J0:Q0,e=n(r,s),ci){i=0;do{if(ci=!1,Ri=0,25<=i)throw Error(Y(301));i+=1,ot=st=null,t.updateQueue=null,$a.current=X0,e=n(r,s)}while(ci)}if($a.current=ho,t=st!==null&&st.next!==null,Ar=0,ot=st=qe=null,uo=!1,t)throw Error(Y(300));return e}function id(){var e=Ri!==0;return Ri=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?qe.memoizedState=ot=e:ot=ot.next=e,ot}function en(){if(st===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ot===null?qe.memoizedState:ot.next;if(t!==null)ot=t,st=e;else{if(e===null)throw Error(Y(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ot===null?qe.memoizedState=ot=e:ot=ot.next=e}return ot}function Fi(e,t){return typeof t=="function"?t(e):t}function Cl(e){var t=en(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=st,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Ar&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,qe.lanes|=h,Mr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,pn(r,t.memoizedState)||(At=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,qe.lanes|=i,Mr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function El(e){var t=en(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);pn(i,t.memoizedState)||(At=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ng(){}function rg(e,t){var n=qe,r=en(),s=t(),i=!pn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,ad(ag.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,$i(9,ig.bind(null,n,r,s,t),void 0,null),lt===null)throw Error(Y(349));Ar&30||sg(n,t,s)}return s}function sg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ig(e,t,n,r){t.value=n,t.getSnapshot=r,og(t)&&lg(e)}function ag(e,t,n){return n(function(){og(t)&&lg(e)})}function og(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function lg(e){var t=Rn(e,1);t!==null&&fn(t,e,1,-1)}function Wh(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},t.queue=e,e=e.dispatch=Y0.bind(null,qe,e),[t.memoizedState,e]}function $i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function cg(){return en().memoizedState}function za(e,t,n,r){var s=yn();qe.flags|=e,s.memoizedState=$i(1|t,n,void 0,r===void 0?null:r)}function Lo(e,t,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(st!==null){var o=st.memoizedState;if(i=o.destroy,r!==null&&rd(r,o.deps)){s.memoizedState=$i(t,n,i,r);return}}qe.flags|=e,s.memoizedState=$i(1|t,n,i,r)}function Vh(e,t){return za(8390656,8,e,t)}function ad(e,t){return Lo(2048,8,e,t)}function ug(e,t){return Lo(4,2,e,t)}function dg(e,t){return Lo(4,4,e,t)}function hg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fg(e,t,n){return n=n!=null?n.concat([e]):null,Lo(4,4,hg.bind(null,t,e),n)}function od(){}function mg(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pg(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gg(e,t,n){return Ar&21?(pn(n,t)||(n=wp(),qe.lanes|=n,Mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=n)}function V0(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=_l.transition;_l.transition={};try{e(!1),t()}finally{Le=n,_l.transition=r}}function xg(){return en().memoizedState}function K0(e,t,n){var r=ar(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yg(e))bg(t,n);else if(n=Zp(e,t,n,r),n!==null){var s=St();fn(n,e,r,s),vg(n,t,r)}}function Y0(e,t,n){var r=ar(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yg(e))bg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,pn(l,o)){var c=t.interleaved;c===null?(s.next=s,Xu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Zp(e,t,s,r),n!==null&&(s=St(),fn(n,e,r,s),vg(n,t,r))}}function yg(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function bg(e,t){ci=uo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}var ho={readContext:Zt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},J0={readContext:Zt,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:Vh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,za(4194308,4,hg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=K0.bind(null,qe,e),[r.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:Wh,useDebugValue:od,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=Wh(!1),t=e[0];return e=V0.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qe,s=yn();if(Ue){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),lt===null)throw Error(Y(349));Ar&30||sg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Vh(ag.bind(null,r,i,e),[e]),r.flags|=2048,$i(9,ig.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yn(),t=lt.identifierPrefix;if(Ue){var n=Mn,r=An;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ri++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=W0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Q0={readContext:Zt,useCallback:mg,useContext:Zt,useEffect:ad,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:dg,useMemo:pg,useReducer:Cl,useRef:cg,useState:function(){return Cl(Fi)},useDebugValue:od,useDeferredValue:function(e){var t=en();return gg(t,st.memoizedState,e)},useTransition:function(){var e=Cl(Fi)[0],t=en().memoizedState;return[e,t]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1},X0={readContext:Zt,useCallback:mg,useContext:Zt,useEffect:ad,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:dg,useMemo:pg,useReducer:El,useRef:cg,useState:function(){return El(Fi)},useDebugValue:od,useDeferredValue:function(e){var t=en();return st===null?t.memoizedState=e:gg(t,st.memoizedState,e)},useTransition:function(){var e=El(Fi)[0],t=en().memoizedState;return[e,t]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Mc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Do={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),s=ar(e),i=Ln(r,s);i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(fn(t,e,s,r),Fa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),s=ar(e),i=Ln(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(fn(t,e,s,r),Fa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=ar(e),s=Ln(n,r);s.tag=2,t!=null&&(s.callback=t),t=sr(e,s,r),t!==null&&(fn(t,e,r,n),Fa(t,e,r))}};function Kh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ii(n,r)||!Ii(s,i):!0}function wg(e,t,n){var r=!1,s=ur,i=t.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Lt(t)?Tr:vt.current,r=t.contextTypes,i=(r=r!=null)?Ns(e,s):ur),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Do,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Do.enqueueReplaceState(t,t.state,null)}function Lc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Zu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Lt(t)?Tr:vt.current,s.context=Ns(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Mc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Do.enqueueReplaceState(s,s.state,null),lo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Es(e,t){try{var n="",r=t;do n+=_b(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Pl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Z0=typeof WeakMap=="function"?WeakMap:Map;function kg(e,t,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mo||(mo=!0,Gc=r),Dc(e,t)},n}function jg(e,t,n){n=Ln(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Dc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dc(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Jh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Z0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=fv.bind(null,e,t,n),t.then(e,e))}function Qh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ln(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var ev=zn.ReactCurrentOwner,At=!1;function jt(e,t,n,r){t.child=e===null?Xp(t,null,n,r):_s(t,e.child,n,r)}function Zh(e,t,n,r,s){n=n.render;var i=t.ref;return vs(t,s),r=sd(e,t,n,r,i,s),n=id(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fn(e,t,s)):(Ue&&n&&Wu(t),t.flags|=1,jt(e,t,r,s),t.child)}function ef(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!pd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ng(e,t,i,r,s)):(e=qa(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ii,n(o,r)&&e.ref===t.ref)return Fn(e,t,s)}return t.flags|=1,e=or(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ng(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ii(i,r)&&e.ref===t.ref)if(At=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(At=!0);else return t.lanes=e.lanes,Fn(e,t,s)}return Oc(e,t,n,r,s)}function Sg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ps,Ft),Ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(ps,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(ps,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,$e(ps,Ft),Ft|=r;return jt(e,t,s,n),t.child}function _g(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oc(e,t,n,r,s){var i=Lt(n)?Tr:vt.current;return i=Ns(t,i),vs(t,s),n=sd(e,t,n,r,i,s),r=id(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fn(e,t,s)):(Ue&&r&&Wu(t),t.flags|=1,jt(e,t,n,s),t.child)}function tf(e,t,n,r,s){if(Lt(n)){var i=!0;ro(t)}else i=!1;if(vs(t,s),t.stateNode===null)Ba(e,t),wg(t,n,r),Lc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zt(u):(u=Lt(n)?Tr:vt.current,u=Ns(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Yh(t,o,r,u),Kn=!1;var m=t.memoizedState;o.state=m,lo(t,r,o,s),c=t.memoizedState,l!==r||m!==c||Mt.current||Kn?(typeof h=="function"&&(Mc(t,n,h,r),c=t.memoizedState),(l=Kn||Kh(t,n,l,r,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,eg(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:on(t.type,l),o.props=u,d=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Lt(n)?Tr:vt.current,c=Ns(t,c));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Yh(t,o,r,c),Kn=!1,m=t.memoizedState,o.state=m,lo(t,r,o,s);var p=t.memoizedState;l!==d||m!==p||Mt.current||Kn?(typeof f=="function"&&(Mc(t,n,f,r),p=t.memoizedState),(u=Kn||Kh(t,n,u,r,m,p,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Rc(e,t,n,r,i,s)}function Rc(e,t,n,r,s,i){_g(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&zh(t,n,!1),Fn(e,t,i);r=t.stateNode,ev.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=_s(t,e.child,null,i),t.child=_s(t,null,l,i)):jt(e,t,l,i),t.memoizedState=r.state,s&&zh(t,n,!0),t.child}function Cg(e){var t=e.stateNode;t.pendingContext?$h(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$h(e,t.context,!1),ed(e,t.containerInfo)}function nf(e,t,n,r,s){return Ss(),Ku(s),t.flags|=256,jt(e,t,n,r),t.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function $c(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eg(e,t,n){var r=t.pendingProps,s=He.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$e(He,s&1),e===null)return Ic(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fo(o,r,0,null),e=Pr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$c(n),t.memoizedState=Fc,e):ld(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tv(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=or(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=or(l,i):(i=Pr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?$c(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Fc,r}return i=e.child,e=i.sibling,r=or(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ld(e,t){return t=Fo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ba(e,t,n,r){return r!==null&&Ku(r),_s(t,e.child,null,n),e=ld(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Pl(Error(Y(422))),ba(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Fo({mode:"visible",children:r.children},s,0,null),i=Pr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&_s(t,e.child,null,o),t.child.memoizedState=$c(o),t.memoizedState=Fc,i);if(!(t.mode&1))return ba(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Y(419)),r=Pl(i,r,void 0),ba(e,t,o,r)}if(l=(o&e.childLanes)!==0,At||l){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rn(e,s),fn(r,e,s,-1))}return md(),r=Pl(Error(Y(421))),ba(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=mv.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,$t=rr(s.nextSibling),zt=t,Ue=!0,un=null,e!==null&&(Kt[Yt++]=An,Kt[Yt++]=Mn,Kt[Yt++]=Ir,An=e.id,Mn=e.overflow,Ir=t),t=ld(t,r.children),t.flags|=4096,t)}function rf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ac(e.return,t,n)}function Tl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Pg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(jt(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rf(e,n,t);else if(e.tag===19)rf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(He,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&co(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Tl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&co(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Tl(t,!0,n,null,i);break;case"together":Tl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nv(e,t,n){switch(t.tag){case 3:Cg(t),Ss();break;case 5:tg(t);break;case 1:Lt(t.type)&&ro(t);break;case 4:ed(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;$e(ao,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($e(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?Eg(e,t,n):($e(He,He.current&1),e=Fn(e,t,n),e!==null?e.sibling:null);$e(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Pg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,Sg(e,t,n)}return Fn(e,t,n)}var Tg,zc,Ig,Ag;Tg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zc=function(){};Ig=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Cr(Nn.current);var i=null;switch(n){case"input":s=lc(e,s),r=lc(e,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=dc(e,s),r=dc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=to)}fc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ni.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Ag=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ks(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rv(e,t,n){var r=t.pendingProps;switch(Vu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return Lt(t.type)&&no(),pt(t),null;case 3:return r=t.stateNode,Cs(),Be(Mt),Be(vt),nd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,un!==null&&(Kc(un),un=null))),zc(e,t),pt(t),null;case 5:td(t);var s=Cr(Oi.current);if(n=t.type,e!==null&&t.stateNode!=null)Ig(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return pt(t),null}if(e=Cr(Nn.current),xa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[kn]=t,r[Li]=i,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<ni.length;s++)ze(ni[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":hh(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":mh(r,i),ze("invalid",r)}fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,l,e),s=["children",""+l]):Ni.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":la(r),fh(r,i,!0);break;case"textarea":la(r),ph(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=to)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ap(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[kn]=t,e[Li]=r,Tg(e,t,!1,!1),t.stateNode=e;e:{switch(o=mc(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<ni.length;s++)ze(ni[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":hh(e,r),s=lc(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),ze("invalid",e);break;case"textarea":mh(e,r),s=dc(e,r),ze("invalid",e);break;default:s=r}fc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?cp(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&op(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Si(e,c):typeof c=="number"&&Si(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ni.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&Au(e,i,c,o))}switch(n){case"input":la(e),fh(e,r,!1);break;case"textarea":la(e),ph(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?gs(e,!!r.multiple,i,!1):r.defaultValue!=null&&gs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=to)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)Ag(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Cr(Oi.current),Cr(Nn.current),xa(t)){if(r=t.stateNode,n=t.memoizedProps,r[kn]=t,(i=r.nodeValue!==n)&&(e=zt,e!==null))switch(e.tag){case 3:ga(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ga(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=t,t.stateNode=r}return pt(t),null;case 13:if(Be(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&$t!==null&&t.mode&1&&!(t.flags&128))Jp(),Ss(),t.flags|=98560,i=!1;else if(i=xa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Y(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[kn]=t}else Ss(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),i=!1}else un!==null&&(Kc(un),un=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?it===0&&(it=3):md())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return Cs(),zc(e,t),e===null&&Ai(t.stateNode.containerInfo),pt(t),null;case 10:return Qu(t.type._context),pt(t),null;case 17:return Lt(t.type)&&no(),pt(t),null;case 19:if(Be(He),i=t.memoizedState,i===null)return pt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ks(i,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=co(e),o!==null){for(t.flags|=128,Ks(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ke()>Ps&&(t.flags|=128,r=!0,Ks(i,!1),t.lanes=4194304)}else{if(!r)if(e=co(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return pt(t),null}else 2*Ke()-i.renderingStartTime>Ps&&n!==1073741824&&(t.flags|=128,r=!0,Ks(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,n=He.current,$e(He,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return fd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function sv(e,t){switch(Vu(t),t.tag){case 1:return Lt(t.type)&&no(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cs(),Be(Mt),Be(vt),nd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return td(t),null;case 13:if(Be(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(He),null;case 4:return Cs(),null;case 10:return Qu(t.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var va=!1,xt=!1,iv=typeof WeakSet=="function"?WeakSet:Set,se=null;function ms(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(e,t,r)}else n.current=null}function Bc(e,t,n){try{n()}catch(r){Ve(e,t,r)}}var sf=!1;function av(e,t){if(Nc=Xa,e=Rp(),Gu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)m=d,d=f;for(;;){if(d===e)break t;if(m===n&&++u===s&&(l=o),m===i&&++h===r&&(c=o),(f=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sc={focusedElem:e,selectionRange:n},Xa=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,E=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:on(t.type,y),E);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){Ve(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return p=sf,sf=!1,p}function ui(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bc(t,n,i)}s=s.next}while(s!==r)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Uc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mg(e){var t=e.alternate;t!==null&&(e.alternate=null,Mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kn],delete t[Li],delete t[Ec],delete t[U0],delete t[H0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lg(e){return e.tag===5||e.tag===3||e.tag===4}function af(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=to));else if(r!==4&&(e=e.child,e!==null))for(Hc(e,t,n),e=e.sibling;e!==null;)Hc(e,t,n),e=e.sibling}function qc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qc(e,t,n),e=e.sibling;e!==null;)qc(e,t,n),e=e.sibling}var dt=null,ln=!1;function Hn(e,t,n){for(n=n.child;n!==null;)Dg(e,t,n),n=n.sibling}function Dg(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Eo,n)}catch{}switch(n.tag){case 5:xt||ms(n,t);case 6:var r=dt,s=ln;dt=null,Hn(e,t,n),dt=r,ln=s,dt!==null&&(ln?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(ln?(e=dt,n=n.stateNode,e.nodeType===8?jl(e.parentNode,n):e.nodeType===1&&jl(e,n),Pi(e)):jl(dt,n.stateNode));break;case 4:r=dt,s=ln,dt=n.stateNode.containerInfo,ln=!0,Hn(e,t,n),dt=r,ln=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bc(n,t,o),s=s.next}while(s!==r)}Hn(e,t,n);break;case 1:if(!xt&&(ms(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,t,l)}Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Hn(e,t,n),xt=r):Hn(e,t,n);break;default:Hn(e,t,n)}}function of(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iv),t.forEach(function(r){var s=pv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,ln=!1;break e;case 3:dt=l.stateNode.containerInfo,ln=!0;break e;case 4:dt=l.stateNode.containerInfo,ln=!0;break e}l=l.return}if(dt===null)throw Error(Y(160));Dg(i,o,s),dt=null,ln=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Og(t,e),t=t.sibling}function Og(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sn(t,e),xn(e),r&4){try{ui(3,e,e.return),Oo(3,e)}catch(y){Ve(e,e.return,y)}try{ui(5,e,e.return)}catch(y){Ve(e,e.return,y)}}break;case 1:sn(t,e),xn(e),r&512&&n!==null&&ms(n,n.return);break;case 5:if(sn(t,e),xn(e),r&512&&n!==null&&ms(n,n.return),e.flags&32){var s=e.stateNode;try{Si(s,"")}catch(y){Ve(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&sp(s,i),mc(l,o);var u=mc(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?cp(s,d):h==="dangerouslySetInnerHTML"?op(s,d):h==="children"?Si(s,d):Au(s,h,d,u)}switch(l){case"input":cc(s,i);break;case"textarea":ip(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?gs(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?gs(s,!!i.multiple,i.defaultValue,!0):gs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Li]=i}catch(y){Ve(e,e.return,y)}}break;case 6:if(sn(t,e),xn(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){Ve(e,e.return,y)}}break;case 3:if(sn(t,e),xn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pi(t.containerInfo)}catch(y){Ve(e,e.return,y)}break;case 4:sn(t,e),xn(e);break;case 13:sn(t,e),xn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dd=Ke())),r&4&&of(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(xt=(u=xt)||h,sn(t,e),xt=u):sn(t,e),xn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(se=e,h=e.child;h!==null;){for(d=se=h;se!==null;){switch(m=se,f=m.child,m.tag){case 0:case 11:case 14:case 15:ui(4,m,m.return);break;case 1:ms(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Ve(r,n,y)}}break;case 5:ms(m,m.return);break;case 22:if(m.memoizedState!==null){cf(d);continue}}f!==null?(f.return=m,se=f):cf(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lp("display",o))}catch(y){Ve(e,e.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Ve(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(t,e),xn(e),r&4&&of(e);break;case 21:break;default:sn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lg(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Si(s,""),r.flags&=-33);var i=af(e);qc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=af(e);Hc(e,l,o);break;default:throw Error(Y(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ov(e,t,n){se=e,Rg(e)}function Rg(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||va;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xt;l=va;var u=xt;if(va=o,(xt=c)&&!u)for(se=s;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?uf(s):c!==null?(c.return=o,se=c):uf(s);for(;i!==null;)se=i,Rg(i),i=i.sibling;se=s,va=l,xt=u}lf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):lf(e)}}function lf(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xt||Oo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gh(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Gh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Pi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}xt||t.flags&512&&Uc(t)}catch(m){Ve(t,t.return,m)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function cf(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function uf(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oo(4,t)}catch(c){Ve(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ve(t,s,c)}}var i=t.return;try{Uc(t)}catch(c){Ve(t,i,c)}break;case 5:var o=t.return;try{Uc(t)}catch(c){Ve(t,o,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var lv=Math.ceil,fo=zn.ReactCurrentDispatcher,cd=zn.ReactCurrentOwner,Xt=zn.ReactCurrentBatchConfig,Pe=0,lt=null,Xe=null,ht=0,Ft=0,ps=hr(0),it=0,zi=null,Mr=0,Ro=0,ud=0,di=null,Tt=null,dd=0,Ps=1/0,Pn=null,mo=!1,Gc=null,ir=null,wa=!1,Zn=null,po=0,hi=0,Wc=null,Ua=-1,Ha=0;function St(){return Pe&6?Ke():Ua!==-1?Ua:Ua=Ke()}function ar(e){return e.mode&1?Pe&2&&ht!==0?ht&-ht:G0.transition!==null?(Ha===0&&(Ha=wp()),Ha):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Ep(e.type)),e):1}function fn(e,t,n,r){if(50<hi)throw hi=0,Wc=null,Error(Y(185));Vi(e,n,r),(!(Pe&2)||e!==lt)&&(e===lt&&(!(Pe&2)&&(Ro|=n),it===4&&Jn(e,ht)),Dt(e,r),n===1&&Pe===0&&!(t.mode&1)&&(Ps=Ke()+500,Mo&&fr()))}function Dt(e,t){var n=e.callbackNode;Gb(e,t);var r=Qa(e,e===lt?ht:0);if(r===0)n!==null&&yh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yh(n),t===1)e.tag===0?q0(df.bind(null,e)):Vp(df.bind(null,e)),z0(function(){!(Pe&6)&&fr()}),n=null;else{switch(kp(r)){case 1:n=Ru;break;case 4:n=bp;break;case 16:n=Ja;break;case 536870912:n=vp;break;default:n=Ja}n=Gg(n,Fg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fg(e,t){if(Ua=-1,Ha=0,Pe&6)throw Error(Y(327));var n=e.callbackNode;if(ws()&&e.callbackNode!==n)return null;var r=Qa(e,e===lt?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=go(e,r);else{t=r;var s=Pe;Pe|=2;var i=zg();(lt!==e||ht!==t)&&(Pn=null,Ps=Ke()+500,Er(e,t));do try{dv();break}catch(l){$g(e,l)}while(!0);Ju(),fo.current=i,Pe=s,Xe!==null?t=0:(lt=null,ht=0,t=it)}if(t!==0){if(t===2&&(s=bc(e),s!==0&&(r=s,t=Vc(e,s))),t===1)throw n=zi,Er(e,0),Jn(e,r),Dt(e,Ke()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!cv(s)&&(t=go(e,r),t===2&&(i=bc(e),i!==0&&(r=i,t=Vc(e,i))),t===1))throw n=zi,Er(e,0),Jn(e,r),Dt(e,Ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:vr(e,Tt,Pn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=dd+500-Ke(),10<t)){if(Qa(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Cc(vr.bind(null,e,Tt,Pn),t);break}vr(e,Tt,Pn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lv(r/1960))-r,10<r){e.timeoutHandle=Cc(vr.bind(null,e,Tt,Pn),r);break}vr(e,Tt,Pn);break;case 5:vr(e,Tt,Pn);break;default:throw Error(Y(329))}}}return Dt(e,Ke()),e.callbackNode===n?Fg.bind(null,e):null}function Vc(e,t){var n=di;return e.current.memoizedState.isDehydrated&&(Er(e,t).flags|=256),e=go(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Kc(t)),e}function Kc(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function cv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~ud,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function df(e){if(Pe&6)throw Error(Y(327));ws();var t=Qa(e,0);if(!(t&1))return Dt(e,Ke()),null;var n=go(e,t);if(e.tag!==0&&n===2){var r=bc(e);r!==0&&(t=r,n=Vc(e,r))}if(n===1)throw n=zi,Er(e,0),Jn(e,t),Dt(e,Ke()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vr(e,Tt,Pn),Dt(e,Ke()),null}function hd(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(Ps=Ke()+500,Mo&&fr())}}function Lr(e){Zn!==null&&Zn.tag===0&&!(Pe&6)&&ws();var t=Pe;Pe|=1;var n=Xt.transition,r=Le;try{if(Xt.transition=null,Le=1,e)return e()}finally{Le=r,Xt.transition=n,Pe=t,!(Pe&6)&&fr()}}function fd(){Ft=ps.current,Be(ps)}function Er(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$0(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Vu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&no();break;case 3:Cs(),Be(Mt),Be(vt),nd();break;case 5:td(r);break;case 4:Cs();break;case 13:Be(He);break;case 19:Be(He);break;case 10:Qu(r.type._context);break;case 22:case 23:fd()}n=n.return}if(lt=e,Xe=e=or(e.current,null),ht=Ft=t,it=0,zi=null,ud=Ro=Mr=0,Tt=di=null,_r!==null){for(t=0;t<_r.length;t++)if(n=_r[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_r=null}return e}function $g(e,t){do{var n=Xe;try{if(Ju(),$a.current=ho,uo){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uo=!1}if(Ar=0,ot=st=qe=null,ci=!1,Ri=0,cd.current=null,n===null||n.return===null){it=1,zi=t,Xe=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=ht,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Qh(o);if(f!==null){f.flags&=-257,Xh(f,o,l,i,t),f.mode&1&&Jh(i,u,t),t=f,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Jh(i,u,t),md();break e}c=Error(Y(426))}}else if(Ue&&l.mode&1){var E=Qh(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Xh(E,o,l,i,t),Ku(Es(c,l));break e}}i=c=Es(c,l),it!==4&&(it=2),di===null?di=[i]:di.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=kg(i,c,t);qh(i,g);break e;case 1:l=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ir===null||!ir.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=jg(i,l,t);qh(i,j);break e}}i=i.return}while(i!==null)}Ug(n)}catch(k){t=k,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function zg(){var e=fo.current;return fo.current=ho,e===null?ho:e}function md(){(it===0||it===3||it===2)&&(it=4),lt===null||!(Mr&268435455)&&!(Ro&268435455)||Jn(lt,ht)}function go(e,t){var n=Pe;Pe|=2;var r=zg();(lt!==e||ht!==t)&&(Pn=null,Er(e,t));do try{uv();break}catch(s){$g(e,s)}while(!0);if(Ju(),Pe=n,fo.current=r,Xe!==null)throw Error(Y(261));return lt=null,ht=0,it}function uv(){for(;Xe!==null;)Bg(Xe)}function dv(){for(;Xe!==null&&!Ob();)Bg(Xe)}function Bg(e){var t=qg(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?Ug(e):Xe=t,cd.current=null}function Ug(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sv(n,t),n!==null){n.flags&=32767,Xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,Xe=null;return}}else if(n=rv(n,t,Ft),n!==null){Xe=n;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);it===0&&(it=5)}function vr(e,t,n){var r=Le,s=Xt.transition;try{Xt.transition=null,Le=1,hv(e,t,n,r)}finally{Xt.transition=s,Le=r}return null}function hv(e,t,n,r){do ws();while(Zn!==null);if(Pe&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Wb(e,i),e===lt&&(Xe=lt=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wa||(wa=!0,Gg(Ja,function(){return ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=Le;Le=1;var l=Pe;Pe|=4,cd.current=null,av(e,n),Og(n,e),A0(Sc),Xa=!!Nc,Sc=Nc=null,e.current=n,ov(n),Rb(),Pe=l,Le=o,Xt.transition=i}else e.current=n;if(wa&&(wa=!1,Zn=e,po=s),i=e.pendingLanes,i===0&&(ir=null),zb(n.stateNode),Dt(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mo)throw mo=!1,e=Gc,Gc=null,e;return po&1&&e.tag!==0&&ws(),i=e.pendingLanes,i&1?e===Wc?hi++:(hi=0,Wc=e):hi=0,fr(),null}function ws(){if(Zn!==null){var e=kp(po),t=Xt.transition,n=Le;try{if(Xt.transition=null,Le=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,po=0,Pe&6)throw Error(Y(331));var s=Pe;for(Pe|=4,se=e.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var h=se;switch(h.tag){case 0:case 11:case 15:ui(8,h,i)}var d=h.child;if(d!==null)d.return=h,se=d;else for(;se!==null;){h=se;var m=h.sibling,f=h.return;if(Mg(h),h===u){se=null;break}if(m!==null){m.return=f,se=m;break}se=f}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ui(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,se=g;break e}se=i.return}}var v=e.current;for(se=v;se!==null;){o=se;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,se=x;else e:for(o=v;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oo(9,l)}}catch(k){Ve(l,l.return,k)}if(l===o){se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,se=j;break e}se=l.return}}if(Pe=s,fr(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Eo,e)}catch{}r=!0}return r}finally{Le=n,Xt.transition=t}}return!1}function hf(e,t,n){t=Es(n,t),t=kg(e,t,1),e=sr(e,t,1),t=St(),e!==null&&(Vi(e,1,t),Dt(e,t))}function Ve(e,t,n){if(e.tag===3)hf(e,e,n);else for(;t!==null;){if(t.tag===3){hf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=Es(n,e),e=jg(t,e,1),t=sr(t,e,1),e=St(),t!==null&&(Vi(t,1,e),Dt(t,e));break}}t=t.return}}function fv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ht&n)===n&&(it===4||it===3&&(ht&130023424)===ht&&500>Ke()-dd?Er(e,0):ud|=n),Dt(e,t)}function Hg(e,t){t===0&&(e.mode&1?(t=da,da<<=1,!(da&130023424)&&(da=4194304)):t=1);var n=St();e=Rn(e,t),e!==null&&(Vi(e,t,n),Dt(e,n))}function mv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hg(e,n)}function pv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Hg(e,n)}var qg;qg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)At=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return At=!1,nv(e,t,n);At=!!(e.flags&131072)}else At=!1,Ue&&t.flags&1048576&&Kp(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var s=Ns(t,vt.current);vs(t,n),s=sd(null,t,r,e,s,n);var i=id();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(i=!0,ro(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zu(t),s.updater=Do,t.stateNode=s,s._reactInternals=t,Lc(t,r,e,n),t=Rc(null,t,r,!0,i,n)):(t.tag=0,Ue&&i&&Wu(t),jt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=xv(r),e=on(r,e),s){case 0:t=Oc(null,t,r,e,n);break e;case 1:t=tf(null,t,r,e,n);break e;case 11:t=Zh(null,t,r,e,n);break e;case 14:t=ef(null,t,r,on(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:on(r,s),Oc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:on(r,s),tf(e,t,r,s,n);case 3:e:{if(Cg(t),e===null)throw Error(Y(387));r=t.pendingProps,i=t.memoizedState,s=i.element,eg(e,t),lo(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Es(Error(Y(423)),t),t=nf(e,t,r,n,s);break e}else if(r!==s){s=Es(Error(Y(424)),t),t=nf(e,t,r,n,s);break e}else for($t=rr(t.stateNode.containerInfo.firstChild),zt=t,Ue=!0,un=null,n=Xp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===s){t=Fn(e,t,n);break e}jt(e,t,r,n)}t=t.child}return t;case 5:return tg(t),e===null&&Ic(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,_c(r,s)?o=null:i!==null&&_c(r,i)&&(t.flags|=32),_g(e,t),jt(e,t,o,n),t.child;case 6:return e===null&&Ic(t),null;case 13:return Eg(e,t,n);case 4:return ed(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_s(t,null,r,n):jt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:on(r,s),Zh(e,t,r,s,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,$e(ao,r._currentValue),r._currentValue=o,i!==null)if(pn(i.value,o)){if(i.children===s.children&&!Mt.current){t=Fn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ln(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ac(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ac(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,vs(t,n),s=Zt(s),r=r(s),t.flags|=1,jt(e,t,r,n),t.child;case 14:return r=t.type,s=on(r,t.pendingProps),s=on(r.type,s),ef(e,t,r,s,n);case 15:return Ng(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:on(r,s),Ba(e,t),t.tag=1,Lt(r)?(e=!0,ro(t)):e=!1,vs(t,n),wg(t,r,s),Lc(t,r,s,n),Rc(null,t,r,!0,e,n);case 19:return Pg(e,t,n);case 22:return Sg(e,t,n)}throw Error(Y(156,t.tag))};function Gg(e,t){return yp(e,t)}function gv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new gv(e,t,n,r)}function pd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xv(e){if(typeof e=="function")return pd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Lu)return 11;if(e===Du)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qa(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")pd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case is:return Pr(n.children,s,i,t);case Mu:o=8,s|=8;break;case sc:return e=Qt(12,n,t,s|2),e.elementType=sc,e.lanes=i,e;case ic:return e=Qt(13,n,t,s),e.elementType=ic,e.lanes=i,e;case ac:return e=Qt(19,n,t,s),e.elementType=ac,e.lanes=i,e;case tp:return Fo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zm:o=10;break e;case ep:o=9;break e;case Lu:o=11;break e;case Du:o=14;break e;case Vn:o=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Qt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Pr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function Fo(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=tp,e.lanes=n,e.stateNode={isHidden:!1},e}function Il(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function Al(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gd(e,t,n,r,s,i,o,l,c){return e=new yv(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(i),e}function bv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Wg(e){if(!e)return ur;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Wp(e,n,t)}return t}function Vg(e,t,n,r,s,i,o,l,c){return e=gd(n,r,!0,e,s,i,o,l,c),e.context=Wg(null),n=e.current,r=St(),s=ar(n),i=Ln(r,s),i.callback=t??null,sr(n,i,s),e.current.lanes=s,Vi(e,s,r),Dt(e,r),e}function $o(e,t,n,r){var s=t.current,i=St(),o=ar(s);return n=Wg(n),t.context===null?t.context=n:t.pendingContext=n,t=Ln(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(s,t,o),e!==null&&(fn(e,s,o,i),Fa(e,s,o)),o}function xo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xd(e,t){ff(e,t),(e=e.alternate)&&ff(e,t)}function vv(){return null}var Kg=typeof reportError=="function"?reportError:function(e){console.error(e)};function yd(e){this._internalRoot=e}zo.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));$o(e,t,null,null)};zo.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lr(function(){$o(null,e,null,null)}),t[On]=null}};function zo(e){this._internalRoot=e}zo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yn.length&&t!==0&&t<Yn[n].priority;n++);Yn.splice(n,0,e),n===0&&Cp(e)}};function bd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mf(){}function wv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=xo(o);i.call(u)}}var o=Vg(t,r,e,0,null,!1,!1,"",mf);return e._reactRootContainer=o,e[On]=o.current,Ai(e.nodeType===8?e.parentNode:e),Lr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=xo(c);l.call(u)}}var c=gd(e,0,!1,null,null,!1,!1,"",mf);return e._reactRootContainer=c,e[On]=c.current,Ai(e.nodeType===8?e.parentNode:e),Lr(function(){$o(t,c,n,r)}),c}function Uo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=xo(o);l.call(c)}}$o(t,o,e,s)}else o=wv(n,t,e,s,r);return xo(o)}jp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ti(t.pendingLanes);n!==0&&(Fu(t,n|1),Dt(t,Ke()),!(Pe&6)&&(Ps=Ke()+500,fr()))}break;case 13:Lr(function(){var r=Rn(e,1);if(r!==null){var s=St();fn(r,e,1,s)}}),xd(e,1)}};$u=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var n=St();fn(t,e,134217728,n)}xd(e,134217728)}};Np=function(e){if(e.tag===13){var t=ar(e),n=Rn(e,t);if(n!==null){var r=St();fn(n,e,t,r)}xd(e,t)}};Sp=function(){return Le};_p=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};gc=function(e,t,n){switch(t){case"input":if(cc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ao(r);if(!s)throw Error(Y(90));rp(r),cc(r,s)}}}break;case"textarea":ip(e,n);break;case"select":t=n.value,t!=null&&gs(e,!!n.multiple,t,!1)}};hp=hd;fp=Lr;var kv={usingClientEntryPoint:!1,Events:[Yi,cs,Ao,up,dp,hd]},Ys={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jv={bundleType:Ys.bundleType,version:Ys.version,rendererPackageName:Ys.rendererPackageName,rendererConfig:Ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ys.findFiberByHostInstance||vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{Eo=ka.inject(jv),jn=ka}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kv;qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bd(t))throw Error(Y(200));return bv(e,t,null,n)};qt.createRoot=function(e,t){if(!bd(e))throw Error(Y(299));var n=!1,r="",s=Kg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=gd(e,1,!1,null,null,n,!1,r,s),e[On]=t.current,Ai(e.nodeType===8?e.parentNode:e),new yd(t)};qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=gp(t),e=e===null?null:e.stateNode,e};qt.flushSync=function(e){return Lr(e)};qt.hydrate=function(e,t,n){if(!Bo(t))throw Error(Y(200));return Uo(null,e,t,!0,n)};qt.hydrateRoot=function(e,t,n){if(!bd(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Kg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Vg(t,null,e,1,n??null,s,!1,i,o),e[On]=t.current,Ai(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new zo(t)};qt.render=function(e,t,n){if(!Bo(t))throw Error(Y(200));return Uo(null,e,t,!1,n)};qt.unmountComponentAtNode=function(e){if(!Bo(e))throw Error(Y(40));return e._reactRootContainer?(Lr(function(){Uo(null,null,e,!1,function(){e._reactRootContainer=null,e[On]=null})}),!0):!1};qt.unstable_batchedUpdates=hd;qt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bo(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Uo(e,t,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function Yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yg)}catch(e){console.error(e)}}Yg(),Ym.exports=qt;var Jg=Ym.exports,Qg,pf=Jg;Qg=pf.createRoot,pf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>N.createElement("svg",{ref:h,...Nv,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Sv(e)}`,l].join(" "),...u},[...t.map(([d,m])=>N.createElement(d,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=le("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=le("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=le("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=le("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=le("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=le("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=le("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=le("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=le("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=le("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=le("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=le("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bv="modulepreload",Uv=function(e){return"/battleplanapp/"+e},vf={},Zi=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Uv(c),c in vf)return;vf[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Bv,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Hv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zi(async()=>{const{default:r}=await Promise.resolve().then(()=>Rs);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class kd extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class qv extends kd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class wf extends kd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kf extends kd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xc||(Xc={}));var Gv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Wv{constructor(t,{headers:n={},customFetch:r,region:s=Xc.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Hv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Gv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(y=>{throw new qv(y)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new wf(d);if(!d.ok)throw new kf(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof kf||s instanceof wf?s.context:void 0}}})}}var It={},jd={},Go={},ea={},Wo={},Vo={},Vv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ts=Vv();const Kv=Ts.fetch,lx=Ts.fetch.bind(Ts),cx=Ts.Headers,Yv=Ts.Request,Jv=Ts.Response,Rs=Object.freeze(Object.defineProperty({__proto__:null,Headers:cx,Request:Yv,Response:Jv,default:lx,fetch:Kv},Symbol.toStringTag,{value:"Module"})),Qv=Xy(Rs);var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});let Xv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ko.default=Xv;var ux=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vo,"__esModule",{value:!0});const Zv=ux(Qv),ew=ux(Ko);let tw=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Zv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,h=null,d=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=g:h=JSON.parse(g))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,f="OK")}catch{i.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new ew.default(u)}return{error:u,data:h,count:d,status:m,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Vo.default=tw;var nw=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wo,"__esModule",{value:!0});const rw=nw(Vo);let sw=class extends rw.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wo.default=sw;var iw=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ea,"__esModule",{value:!0});const aw=iw(Wo);let ow=class extends aw.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ea.default=ow;var lw=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Go,"__esModule",{value:!0});const Js=lw(ea);let cw=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Js.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Js.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Js.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Go.default=cw;var Yo={},Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.version=void 0;Jo.version="0.0.0-automated";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.DEFAULT_HEADERS=void 0;const uw=Jo;Yo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${uw.version}`};var dx=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jd,"__esModule",{value:!0});const dw=dx(Go),hw=dx(ea),fw=Yo;let mw=class hx{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},fw.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new dw.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new hx(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new hw.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};jd.default=mw;var Fs=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(It,"__esModule",{value:!0});It.PostgrestError=It.PostgrestBuilder=It.PostgrestTransformBuilder=It.PostgrestFilterBuilder=It.PostgrestQueryBuilder=It.PostgrestClient=void 0;const fx=Fs(jd);It.PostgrestClient=fx.default;const mx=Fs(Go);It.PostgrestQueryBuilder=mx.default;const px=Fs(ea);It.PostgrestFilterBuilder=px.default;const gx=Fs(Wo);It.PostgrestTransformBuilder=gx.default;const xx=Fs(Vo);It.PostgrestBuilder=xx.default;const yx=Fs(Ko);It.PostgrestError=yx.default;var pw=It.default={PostgrestClient:fx.default,PostgrestQueryBuilder:mx.default,PostgrestFilterBuilder:px.default,PostgrestTransformBuilder:gx.default,PostgrestBuilder:xx.default,PostgrestError:yx.default};const{PostgrestClient:gw,PostgrestQueryBuilder:qE,PostgrestFilterBuilder:GE,PostgrestTransformBuilder:WE,PostgrestBuilder:VE,PostgrestError:KE}=pw;class xw{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const yw="2.15.1",bw=`realtime-js/${yw}`,vw="1.0.0",Zc=1e4,ww=1e3,kw=100;var mi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mi||(mi={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var cn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(cn||(cn={}));var eu;(function(e){e.websocket="websocket"})(eu||(eu={}));var jr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(jr||(jr={}));class jw{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class bx{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Re||(Re={}));const jf=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Nw(o,e,t,s),i),{})},Nw=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?vx(i,o):tu(o)},vx=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Ew(t,n)}switch(e){case Re.bool:return Sw(t);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return _w(t);case Re.json:case Re.jsonb:return Cw(t);case Re.timestamp:return Pw(t);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return tu(t);default:return tu(t)}},tu=e=>e,Sw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_w=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Cw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Ew=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>vx(t,l))}return e},Pw=e=>typeof e=="string"?e.replace(" ","T"):e,wx=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ml{constructor(t,n,r={},s=Zc){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nf||(Nf={}));class pi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pi.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=pi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=pi.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const m=h.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),p=h.filter(E=>f.indexOf(E.presence_ref)<0),y=d.filter(E=>m.indexOf(E.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(f=>f.presence_ref),m=h.filter(f=>d.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sf||(Sf={}));var gi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gi||(gi={}));var Tn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Tn||(Tn={}));class Nd{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ml(this,cn.join,this.params,this.timeout),this.rejoinTimer=new bx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new pi(this),this.broadcastEndpointURL=wx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0,h={},d={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Tn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Tn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){t==null||t(Tn.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,E=[];for(let g=0;g<y;g++){const v=p[g],{filter:{event:x,schema:j,table:k,filter:w}}=v,S=m&&m[g];if(S&&S.event===x&&S.schema===j&&S.table===k&&S.filter===w)E.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(Tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Tn.SUBSCRIBED);return}}).receive("error",m=>{this.state=nt.errored,t==null||t(Tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===nt.joined&&t===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ml(this,cn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ml(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>kw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=cn;if(r&&[l,c,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,y,E;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(y=f.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,y,E,g,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,k=(p=f.filter)===null||p===void 0?void 0:p.event;return j&&((y=n.ids)===null||y===void 0?void 0:y.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const j=(v=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:E,commit_timestamp:g,type:v,errors:x}=p;m=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:g,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}f.callback(m,r)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Nd.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(cn.close,{},t)}_onError(t){this._on(cn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=jf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=jf(t.columns,t.old_record)),n}}const _f=()=>{},ja={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Tw=[1e3,2e3,5e3,1e4],Iw=1e4,Aw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Mw{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zc,this.transport=null,this.heartbeatIntervalMs=ja.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_f,this.ref=0,this.reconnectTimer=null,this.logger=_f,this.conn=null,this.sendBuffer=[],this.serializer=new jw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Zi(async()=>{const{default:l}=await Promise.resolve().then(()=>Rs);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${eu.websocket}`,this.httpEndpoint=wx(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xw.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:vw}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mi.connecting:return jr.Connecting;case mi.open:return jr.Open;case mi.closing:return jr.Closing;default:return jr.Closed}}isConnected(){return this.connectionState()===jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Nd(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ww,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ja.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(cn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Aw],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:bw};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(cn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new bx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ja.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Zc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ja.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>Tw[h-1]||Iw,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Sd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function rt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Lw extends Sd{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nu extends Sd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Dw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const kx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zi(async()=>{const{default:r}=await Promise.resolve().then(()=>Rs);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Ow=()=>Dw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zi(()=>Promise.resolve().then(()=>Rs),void 0)).Response:Response}),ru=e=>{if(Array.isArray(e))return e.map(n=>ru(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ru(r)}),t},Rw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var qr=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Ll=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fw=(e,t,n)=>qr(void 0,void 0,void 0,function*(){const r=yield Ow();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Lw(Ll(s),i,o))}).catch(s=>{t(new nu(Ll(s),s))}):t(new nu(Ll(e),e))}),$w=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Rw(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function ta(e,t,n,r,s,i){return qr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,$w(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Fw(c,l,r))})})}function bo(e,t,n,r){return qr(this,void 0,void 0,function*(){return ta(e,"GET",t,n,r)})}function bn(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return ta(e,"POST",t,r,s,n)})}function su(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return ta(e,"PUT",t,r,s,n)})}function zw(e,t,n,r){return qr(this,void 0,void 0,function*(){return ta(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jx(e,t,n,r,s){return qr(this,void 0,void 0,function*(){return ta(e,"DELETE",t,r,s,n)})}var kt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Bw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uw{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=kx(s)}uploadOrUpdate(t,n,r,s){return kt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),d=yield(t=="PUT"?su:bn)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(rt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return kt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Cf.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield su(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return kt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield bn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Sd("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}update(t,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return kt(this,void 0,void 0,function*(){try{return{data:yield bn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield bn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return kt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield bn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return kt(this,void 0,void 0,function*(){try{const s=yield bn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}download(t,n){return kt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield bo(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(rt(l))return{data:null,error:l};throw l}})}info(t){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield bo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ru(r),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}exists(t){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield zw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rt(r)&&r instanceof nu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return kt(this,void 0,void 0,function*(){try{return{data:yield jx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}list(t,n,r){return kt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Bw),n),{prefix:t||""});return{data:yield bn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}listV2(t,n){return kt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield bn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Hw="2.11.0",qw={"X-Client-Info":`storage-js/${Hw}`};var Kr=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Gw{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},qw),n),this.fetch=kx(r)}listBuckets(){return Kr(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}getBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Kr(this,void 0,void 0,function*(){try{return{data:yield bn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Kr(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield bn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield jx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}}class Ww extends Gw{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new Uw(this.url,this.headers,t,this.fetch)}}const Vw="2.55.0";let ri="";typeof Deno<"u"?ri="deno":typeof document<"u"?ri="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ri="react-native":ri="node";const Kw={"X-Client-Info":`supabase-js-${ri}/${Vw}`},Yw={headers:Kw},Jw={schema:"public"},Qw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xw={};var Zw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const e1=e=>{let t;return e?t=e:typeof fetch>"u"?t=lx:t=fetch,(...n)=>t(...n)},t1=()=>typeof Headers>"u"?cx:Headers,n1=(e,t,n)=>{const r=e1(n),s=t1();return(i,o)=>Zw(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var r1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function s1(e){return e.endsWith("/")?e:e+"/"}function i1(e,t){var n,r;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>r1(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Nx="2.71.1",es=30*1e3,iu=3,Dl=iu*es,a1="http://localhost:9999",o1="supabase.auth.token",l1={"X-Client-Info":`gotrue-js/${Nx}`},au="X-Supabase-Api-Version",Sx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u1=10*60*1e3;class _d extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ge(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class d1 extends _d{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function h1(e){return ge(e)&&e.name==="AuthApiError"}class _x extends _d{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class mr extends _d{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Wn extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function f1(e){return ge(e)&&e.name==="AuthSessionMissingError"}class Na extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sa extends mr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _a extends mr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m1(e){return ge(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ef extends mr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ou extends mr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Ol(e){return ge(e)&&e.name==="AuthRetryableFetchError"}class Pf extends mr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class lu extends mr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const vo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tf=` 	
\r=`.split(""),p1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Tf.length;t+=1)e[Tf[t].charCodeAt(0)]=-2;for(let t=0;t<vo.length;t+=1)e[vo[t].charCodeAt(0)]=t;return e})();function If(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vo[r]),t.queuedBits-=6}}function Cx(e,t,n){const r=p1[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Af(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{y1(o,r,n)};for(let o=0;o<e.length;o+=1)Cx(e.charCodeAt(o),s,i);return t.join("")}function g1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function x1(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}g1(r,t)}}function y1(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function b1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Cx(e.charCodeAt(s),n,r);return new Uint8Array(t)}function v1(e){const t=[];return x1(e,n=>t.push(n)),new Uint8Array(t)}function w1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>If(s,n,r)),If(null,n,r),t.join("")}function k1(e){return Math.round(Date.now()/1e3)+e}function j1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const an=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},Ex=()=>{if(!an())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function N1(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Px=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Zi(async()=>{const{default:r}=await Promise.resolve().then(()=>Rs);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},S1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ts=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},xr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qn=async(e,t)=>{await e.removeItem(t)};class Qo{constructor(){this.promise=new Qo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Qo.promiseConstructor=Promise;function Rl(e){const t=e.split(".");if(t.length!==3)throw new lu("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!c1.test(t[r]))throw new lu("JWT not in base64url format");return{header:JSON.parse(Af(t[0])),payload:JSON.parse(Af(t[1])),signature:b1(t[2]),raw:{header:t[0],payload:t[1]}}}async function _1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function C1(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function E1(e){return("0"+e.toString(16)).substr(-2)}function P1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,E1).join("")}async function T1(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function I1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await T1(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yr(e,t,n=!1){const r=P1();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ts(e,`${t}-code-verifier`,s);const i=await I1(r);return[i,r===i?"plain":"s256"]}const A1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M1(e){const t=e.headers.get(au);if(!t||!t.match(A1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function L1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function D1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const O1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jr(e){if(!O1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fl(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mf(e){return JSON.parse(JSON.stringify(e))}var R1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const wr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F1=[502,503,504];async function Lf(e){var t;if(!S1(e))throw new ou(wr(e),0);if(F1.includes(e.status))throw new ou(wr(e),e.status);let n;try{n=await e.json()}catch(i){throw new _x(wr(i),i)}let r;const s=M1(e);if(s&&s.getTime()>=Sx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pf(wr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Wn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Pf(wr(n),e.status,n.weak_password.reasons);throw new d1(wr(n),e.status||500,r)}const $1=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function je(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[au]||(i[au]=Sx["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await z1(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function z1(e,t,n,r,s,i){const o=$1(t,r,s,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new ou(wr(c),0)}if(l.ok||await Lf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Lf(c)}}function En(e){var t;let n=null;q1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=k1(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Df(e){const t=En(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function B1(e){return{data:e,error:null}}function U1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=R1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function H1(e){return e}function q1(e){return e.access_token&&e.refresh_token&&e.expires_in}const $l=["global","local","others"];var G1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class W1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Px(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=$l[0]){if($l.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$l.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=G1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:U1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qn})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:H1});if(h.error)throw h.error;const d=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ge(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Jr(t);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qn})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Jr(t);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Qn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Jr(t);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qn})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Jr(t.userId);try{const{data:n,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Jr(t.userId),Jr(t.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}}function Of(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function V1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qr={debug:!!(globalThis&&Ex()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class K1 extends Tx{}async function Y1(e,t,n){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new K1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}V1();const J1={url:a1,storageKey:o1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:l1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rf(e,t,n){return await n()}const Xr={};class Ui{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ui.nextInstanceID,Ui.nextInstanceID+=1,this.instanceID>0&&an()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},J1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new W1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Px(s.fetch),this.lock=s.lock||Rf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:an()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Y1:this.lock=Rf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ex()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Of(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Of(this.memoryStorage)),an()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Xr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Xr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Nx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=N1(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),an()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),m1(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ge(n)?{error:n}:{error:new _x("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:En}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:h,password:d,options:m}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Yr(this.storage,this.storageKey)),i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:p},xform:En})}else if("phone"in t){const{phone:h,password:d,options:m}=t;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:En})}else throw new Sa("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Df})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Df})}else throw new Sa("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Na}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,l,c,u,h,d,m,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:E,wallet:g,statement:v,options:x}=t;let j;if(an())if(typeof g=="object")j=g;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))j=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const k=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const w=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),v?{statement:v}:null));let S;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")S=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)S=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const w=await j.signMessage(new TextEncoder().encode(p),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=w}}try{const{data:E,error:g}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:w1(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:En});if(g)throw g;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Na}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:g})}catch(E){if(ge(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await xr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:En});if(await qn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Na}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ge(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:En}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Na}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Yr(this.storage,this.storageKey));const{error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Sa("You must provide either an email or phone number.")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:En});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ge(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Yr(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:B1})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Wn;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:l}=await je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Sa("You must provide either an email or phone number and a type")}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Dl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await xr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Fl()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Qn})})}catch(n){if(ge(n))return f1(n)&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Wn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Yr(this.storage,this.storageKey));const{data:u,error:h}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qn});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Rl(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ge(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Wn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ge(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!an())throw new _a("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _a(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _a("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ef("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new _a("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let m=h+d;c&&(m=parseInt(c));const f=m-h;f*1e3<=es&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=m-d;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,h);const{data:y,error:E}=await this._getUser(i);if(E)throw E;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await xr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(h1(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=j1(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Yr(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:d,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return an()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ge(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await C1(async s=>(s>0&&await _1(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:En})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ol(i)&&Date.now()+o-r<es})}catch(r){if(this._debug(n,"error",r),ge(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),an()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await xr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await xr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ts(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Fl()}else if(s&&!s.user&&!s.user){const o=await xr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await qn(this.storage,this.storageKey+"-user"),await ts(this.storage,this.storageKey,s)):s.user=Fl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Dl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Dl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ol(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Wn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ge(i)){const o={session:null,error:i};return Ol(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ts(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Mf(s);await ts(this.storage,this.storageKey,i)}else{const s=Mf(n);await ts(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await qn(this.storage,this.storageKey),await qn(this.storage,this.storageKey+"-code-verifier"),await qn(this.storage,this.storageKey+"-user"),this.userStorage&&await qn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&an()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),es);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/es);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${es}ms, refresh threshold is ${iu} ticks`),s<=iu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Tx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!an()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ge(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Rl(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+u1>s)return r;const{data:i,error:o}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Rl(r);n!=null&&n.allowExpired||L1(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const h=D1(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,v1(`${l}.${c}`)))throw new lu("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}}Ui.nextInstanceID=0;const Q1=Ui;class X1 extends Q1{constructor(t){super(t)}}var Z1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{u(r.next(h))}catch(d){o(d)}}function c(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class ek{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=s1(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:Jw,realtime:Xw,auth:Object.assign(Object.assign({},Qw),{storageKey:u}),global:Yw},d=i1(r??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=n1(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new gw(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Ww(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Wv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Z1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new X1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Mw(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tk=(e,t,n)=>new ek(e,t,n);function nk(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}nk()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rk="https://dthxptbozocrbvmhwvao.supabase.co",sk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg",q=tk(rk,sk,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),ik=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",xi=()=>ik()?"http://localhost:5173":`${window.location.origin}/battleplanapp/`,zl=()=>{const e=xi();return`${e.endsWith("/")?e.slice(0,-1):e}/auth/callback`},wo=e=>{const t=xi(),n=t.endsWith("/")?t.slice(0,-1):t,r=e.startsWith("/")?e:`/${e}`;return`${n}${r}`};function Ye(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),s=async m=>{if(console.log("fetchUserProfile called with session:",m?"exists":"null"),!(m!=null&&m.user)){console.log("No session or user, setting user to null"),t(null);return}try{const{data:f,error:p}=await q.from("users").select("is_admin, user_name_public, onboarded, fav_games, fav_locations").eq("id",m.user.id).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user profile:",p);const{data:y,error:E}=await q.from("locations").select("id").contains("admins",[m.user.id]).limit(1),g=!E&&y&&y.length>0;t({...m.user,is_admin:(f==null?void 0:f.is_admin)||!1,is_location_admin:g,user_name_public:(f==null?void 0:f.user_name_public)||null,onboarded:(f==null?void 0:f.onboarded)||!1,fav_games:(f==null?void 0:f.fav_games)||null,fav_locations:(f==null?void 0:f.fav_locations)||null})}catch(f){console.error("Error fetching user profile:",f),t(m.user)}};N.useEffect(()=>{q.auth.getSession().then(({data:{session:f}})=>{s(f),r(!1)});const{data:{subscription:m}}=q.auth.onAuthStateChange((f,p)=>{console.log("Auth state change:",{event:f,session:p?"exists":"null"}),s(p),r(!1)});return()=>m.unsubscribe()},[]);const i=async(m,f)=>{const{data:p,error:y}=await q.auth.signInWithPassword({email:m,password:f});return{data:p,error:y}},o=async(m,f)=>{const{data:p,error:y}=await q.auth.signUp({email:m,password:f,options:{emailRedirectTo:zl()}});return{data:p,error:y}},l=async()=>{const{data:m,error:f}=await q.auth.signInWithOAuth({provider:"google",options:{redirectTo:zl(),queryParams:{hd:"",prompt:"select_account"}}});return{data:m,error:f}},c=async()=>{try{console.log("Calling Supabase auth.signOut()...");const{data:{session:m}}=await q.auth.getSession();if(!m)return console.log("No active session found, clearing user state directly"),t(null),localStorage.removeItem("supabase.auth.token"),sessionStorage.removeItem("supabase.auth.token"),Object.keys(localStorage).forEach(p=>{p.startsWith("supabase.")&&localStorage.removeItem(p)}),Object.keys(sessionStorage).forEach(p=>{p.startsWith("supabase.")&&sessionStorage.removeItem(p)}),{error:null};const{error:f}=await q.auth.signOut();return console.log("Supabase signOut response:",{error:f}),f?console.error("Supabase sign out error:",f):console.log("Supabase signOut successful"),{error:f}}catch(m){return console.error("Sign out error:",m),t(null),localStorage.removeItem("supabase.auth.token"),sessionStorage.removeItem("supabase.auth.token"),Object.keys(localStorage).forEach(f=>{f.startsWith("supabase.")&&localStorage.removeItem(f)}),Object.keys(sessionStorage).forEach(f=>{f.startsWith("supabase.")&&sessionStorage.removeItem(f)}),{error:m}}},u=async m=>{const{data:f,error:p}=await q.auth.resetPasswordForEmail(m,{redirectTo:zl()});return{data:f,error:p}},h=async m=>{const{data:f,error:p}=await q.auth.updateUser({password:m});return{data:f,error:p}},d=e&&window.location.hash.includes("type=recovery");return{user:e,loading:n,signIn:i,signUp:o,signInWithGoogle:l,signOut:c,resetPassword:u,updatePassword:h,needsPasswordReset:d}}function Cd(){const[e,t]=N.useState(()=>{const r=localStorage.getItem("darkMode");return r!==null?JSON.parse(r):window.matchMedia("(prefers-color-scheme: dark)").matches});return N.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),{isDarkMode:e,toggleDarkMode:()=>{t(!e)}}}function Xo({message:e,isVisible:t,onClose:n,duration:r=3e3}){return N.useEffect(()=>{if(t){const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)}},[t,r,n]),t?a.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-in slide-in-from-top-2 duration-300",children:a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 flex items-center space-x-3 max-w-sm",children:[a.jsx(Pv,{className:"w-5 h-5 text-icon-active flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium text-green-800 flex-1",children:e}),a.jsx("button",{onClick:n,className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(be,{className:"w-4 h-4 text-icon"})})]})}):null}function kr({onAddModel:e,onAdminClick:t,onSettingsClick:n,activeTab:r,onTabChange:s}){const[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState(!1),{isDarkMode:f,toggleDarkMode:p}=Cd(),{user:y,signOut:E}=Ye(),g=async()=>{try{console.log("Starting sign out process..."),o(!1);const{error:j}=await E();console.log("Sign out result:",{error:j}),j?(console.error("Sign out error:",j),h("Failed to sign out. Please try again."),m(!0)):(console.log("Sign out successful"),h("Successfully signed out"),m(!0))}catch(j){console.error("Sign out error:",j),h("Failed to sign out. Please try again."),m(!0)}},v=[{id:"collection",name:"Collection",icon:gn},{id:"battleplan",name:"Battleplan",icon:ct}],x=j=>{c(!1),s==null||s(j)};return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:y&&a.jsx("button",{onClick:()=>c(!l),className:"text-secondary-text hover:text-text focus:outline-none mr-4",children:l?a.jsx(be,{className:"w-6 h-6 text-icon"}):a.jsx(Dv,{className:"w-6 h-6 text-icon"})})}),a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsx("button",{onClick:()=>s==null?void 0:s("collection"),className:"hover:opacity-80 transition-opacity focus:outline-none",children:a.jsx("img",{src:"Battleplan-Logo-Purple.svg",alt:"Mini Myths Logo",className:"max-h-[300px] w-auto"})})}),a.jsx("div",{className:"flex items-center space-x-4",children:y?a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>o(!i),className:"text-secondary-text hover:text-text focus:outline-none",children:a.jsx(Sn,{className:"w-6 h-6 text-icon hover:text-icon-hover"})})}):null})]}),y&&a.jsxs("div",{className:`absolute right-4 top-16 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-50 min-w-[200px] transition-all duration-200 ease-in-out ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}`,children:[a.jsx("div",{className:"px-4 py-2 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Sn,{className:"w-5 h-5 text-icon"}),a.jsx("span",{className:"text-base text-text",children:y.email})]})}),a.jsxs("button",{onClick:()=>{o(!1),t==null||t()},className:`flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors ${y!=null&&y.is_admin||y!=null&&y.is_location_admin?"":"hidden"}`,children:[a.jsx(Fv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{children:"Admin"})]}),a.jsxs("button",{onClick:()=>{o(!1),n==null||n()},className:"flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:[a.jsx(Rv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{children:"Settings"})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-bg-secondary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[f?a.jsx(ax,{className:"w-5 h-5 text-icon hover:text-icon-hover"}):a.jsx(ox,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{className:"text-base font-semibold text-text",children:f?"Dark Mode":"Light Mode"})]}),a.jsx("button",{onClick:p,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring---color-brand focus:ring-offset-2 ${f?"bg-brand":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("button",{onClick:g,className:"block w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:"Sign Out"})]})]})}),y&&a.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-bg-primary border-r border-border-custom shadow-lg transform transition-transform duration-300 ease-in-out ${l?"translate-x-0":"-translate-x-full"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[a.jsx("h2",{className:"text-lg font-semibold text-title",children:"Navigation"}),a.jsx("button",{onClick:()=>c(!1),className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("nav",{className:"flex-1 p-4",children:a.jsxs("div",{className:"space-y-2",children:[v.map(j=>{const k=j.icon,w=r===j.id;return a.jsxs("button",{onClick:()=>x(j.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${w?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(k,{className:`w-5 h-5 ${w?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${w?"text-brand":""}`,children:j.name})]},j.id)}),a.jsx("div",{className:"border-t border-border-custom my-4"}),a.jsxs("button",{onClick:()=>{c(!1),s==null||s("about")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-secondary-text hover:text-text hover:bg-bg-secondary",children:[a.jsx(Sn,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),a.jsx("span",{className:"font-medium",children:"About"})]}),((y==null?void 0:y.is_admin)||(y==null?void 0:y.is_location_admin))&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t border-border-custom my-4"}),a.jsx("div",{className:"px-4 py-2",children:a.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"Admin Tools"})}),a.jsxs("button",{onClick:()=>{c(!1),s==null||s("all-bookings")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${r==="all-bookings"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(ct,{className:`w-5 h-5 ${r==="all-bookings"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${r==="all-bookings"?"text-brand":""}`,children:"All Bookings"})]}),a.jsxs("button",{onClick:()=>{c(!1),s==null||s("blocked-dates")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${r==="blocked-dates"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[a.jsx(Xg,{className:`w-5 h-5 ${r==="blocked-dates"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),a.jsx("span",{className:`font-medium ${r==="blocked-dates"?"text-brand":""}`,children:"Blocked Dates"})]})]})]})})]})}),y&&a.jsx("div",{className:`fixed inset-0 bg-black z-30 transition-opacity duration-300 ease-in-out ${l?"bg-opacity-50 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>c(!1)}),y&&a.jsx("div",{className:`fixed inset-0 bg-black z-40 transition-opacity duration-200 ease-in-out ${i?"bg-opacity-25 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>{o(!1)}}),a.jsx(Xo,{message:u,isVisible:d,onClose:()=>m(!1)})]})}function ak({icon:e,label:t,isActive:n,onClick:r}){return a.jsxs("button",{onClick:r,className:`flex items-center space-x-2 py-4 px-6 border-b-2 font-medium text-sm transition-colors ${n?"!border-brand !text-brand":"border-transparent text-secondary-text hover:text-text hover:border-border-custom"}`,children:[a.jsx(e,{className:`w-5 h-5 ${n?"text-brand":"text-secondary-text hover:text-text"}`}),a.jsx("span",{children:t})]})}function ns({activeTab:e,onTabChange:t}){const n=[{id:"collection",name:"Collection",icon:gn},{id:"battleplan",name:"Bookings",icon:ct}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black/75 backdrop-blur-md border-t border-border-custom/30",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("nav",{className:"flex justify-center items-center space-x-8","aria-label":"Tabs",children:n.map(r=>a.jsx(ak,{icon:r.icon,label:r.name,isActive:e===r.id,onClick:()=>t(r.id)},r.id))})})})}function ok({activeView:e,onViewChange:t}){const n=[{id:"recent",label:"Recent",icon:Os},{id:"models",label:"Models",icon:sx},{id:"collections",label:"Collections",icon:gn}];return a.jsx("div",{className:"bg-bg-secondary shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center items-center py-3",children:a.jsx("div",{className:"grid grid-cols-3 gap-8 w-full max-w-md",children:n.map(r=>{const s=r.icon,i=e===r.id;return a.jsxs("button",{onClick:()=>t(r.id),className:"flex flex-col items-center space-y-2 px-4 py-2 rounded-lg transition-all duration-300 ease-in-out w-full group",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ease-in-out ${i?"bg-[var(--color-brand)]/20 scale-110 opacity-100 shadow-[0_0px_16px_rgba(114,77,221,0.44)]":"bg-border-custom opacity-75 group-hover:opacity-90 group-hover:scale-105"}`,children:a.jsx(s,{className:`w-4 h-4 transition-all duration-300 ease-in-out ${i?"text-icon-active opacity-100 scale-110":"text-icon opacity-75 group-hover:opacity-90"}`})}),a.jsx("span",{className:`text-lg font-medium transition-all duration-300 ease-in-out text-center ${i?"text-text opacity-100 scale-105":"text-secondary-text opacity-75 group-hover:opacity-90"}`,children:r.label})]},r.id)})})})})})}function Ed(e){return new Date(e)}function Ht(e,t={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return Ed(e).toLocaleDateString("en-US",t)}function ko(e,t={hour:"numeric",minute:"2-digit",hour12:!0}){const n=new Date,[r,s,i="00"]=e.split(":");return new Date(n.getFullYear(),n.getMonth(),n.getDate(),parseInt(r),parseInt(s),parseInt(i)).toLocaleTimeString("en-US",t)}function cu(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function uu(e){const t=Ed(e),n=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<n}function Ix(e){const t=Ed(e),n=new Date,r=new Date(n),s=new Date(n);return r.setDate(r.getDate()-1),s.setDate(s.getDate()+1),n.setHours(0,0,0,0),r.setHours(0,0,0,0),s.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime()?"Today":t.getTime()===r.getTime()?"Yesterday":t.getTime()===s.getTime()?"Tomorrow":Ht(e,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function lk(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Ax({booking:e,onClick:t,onCancelBooking:n,isPast:r=!1}){return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 w-full",children:[a.jsxs("div",{onClick:t,className:"cursor-pointer hover:bg-bg-secondary transition-colors text-left rounded p-2 -m-2 mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Os,{className:"w-4 h-4 text-secondary-text"}),a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium text-text text-sm",children:[Ht(e.date)," - ",e.timeslot.name]}),a.jsxs("p",{className:"text-xs text-secondary-text",children:[ko(e.timeslot.start_time)," - ",ko(e.timeslot.end_time)]})]})]}),a.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[a.jsx(Ur,{className:"w-4 h-4 text-secondary-text mt-0.5"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-text text-sm truncate",children:e.location.name}),a.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.location.address})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Sn,{className:"w-4 h-4 text-secondary-text"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[e.user_name&&a.jsx("p",{className:"text-sm text-text truncate font-medium",children:e.user_name}),a.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.user_email||e.user.email})]})]}),e.game&&a.jsxs("div",{className:"flex items-center space-x-2",children:[e.game.icon?a.jsx("img",{src:e.game.icon,alt:`${e.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:s=>{const i=s.target;i.style.display="none";const o=i.nextElementSibling;o&&o.classList.contains("icon-fallback")&&(o.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:e.game.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:e.game.name.charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text truncate",children:e.game.name})]})]}),n&&!r&&a.jsx("div",{className:"flex justify-end pt-2 border-t border-border-custom",children:a.jsxs("button",{onClick:()=>n(e.id),className:"btn-danger-outline-sm btn-with-icon-sm",children:[a.jsx(be,{className:"w-3 h-3"}),a.jsx("span",{children:"Cancel"})]})})]})}function Mx({isOpen:e,onClose:t,onConfirm:n,loading:r=!1}){if(!e)return null;const s=i=>{i.target===i.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:"Are you sure you want to cancel this booking?"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"We'll delete this booking and make the table available for someone else."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:r,className:"btn-ghost btn-flex",children:"No, I'll keep my booking"}),a.jsx("button",{onClick:n,disabled:r,className:"btn-danger btn-flex",children:r?"Deleting...":"Yes, Delete my booking"})]})]})})}function ck(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(!1),{user:c,loading:u}=Ye();N.useEffect(()=>{if(u){r(!0),l(!1);return}if(!u){if(!c){t([]),r(!1),l(!0);return}r(!0),h()}},[c,u]);const h=async()=>{const d=Date.now(),m=500;try{const{data:f,error:p}=await q.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `).eq("user_id",c==null?void 0:c.id).order("date",{ascending:!0});if(p)throw p;if(!f){t([]);return}const y=[...new Set(f.map(j=>j.user_id))],{data:E,error:g}=await q.from("users").select("id, email").in("id",y);if(g)throw g;const v=new Map((E||[]).map(j=>[j.id,j])),x=f.map(j=>({...j,user:v.get(j.user_id)||{id:j.user_id,email:"Unknown User"}}));t(x)}catch(f){i(f instanceof Error?f.message:"Failed to fetch bookings")}finally{const f=Date.now()-d,p=Math.max(0,m-f);setTimeout(()=>{r(!1),l(!0)},p)}};return{bookings:e,loading:n,error:s,hasInitialized:o,refetch:h}}function uk({refreshTrigger:e=0,onNewBooking:t}){const[n,r]=we.useState(new Set);we.useState("");const[s,i]=we.useState({isOpen:!1,bookingId:null}),[o,l]=we.useState(!1),{bookings:c,loading:u,hasInitialized:h,refetch:d}=ck();we.useEffect(()=>{e>0&&d()},[e,d]);const m=g=>{i({isOpen:!0,bookingId:g})},f=async()=>{if(s.bookingId){l(!0);try{const{error:g}=await q.from("bookings").delete().eq("id",s.bookingId);if(g)throw g;await d(),i({isOpen:!1,bookingId:null})}catch(g){console.error("Error cancelling booking:",g)}finally{l(!1)}}},p=we.useMemo(()=>{const g=new Date;g.setHours(0,0,0,0);const v={},x=[];c.forEach(w=>{if(new Date(w.date)>=g){const A=w.date;v[A]||(v[A]=[]),v[A].push(w)}else x.push(w)}),Object.keys(v).forEach(w=>{v[w].sort((S,A)=>S.timeslot.start_time.localeCompare(A.timeslot.start_time))}),x.sort((w,S)=>{const A=S.date.localeCompare(w.date);return A!==0?A:S.timeslot.start_time.localeCompare(w.timeslot.start_time)});const k=Object.keys(v).sort((w,S)=>w.localeCompare(S)).map(w=>({date:w,bookings:v[w],isPast:!1}));return x.length>0&&k.push({date:"past",bookings:x,isPast:!0}),k},[c]);we.useEffect(()=>{p.length>0&&r(new Set([p[0].date]))},[p]);const y=g=>{r(v=>{const x=new Set(v);return x.has(g)?x.delete(g):x.add(g),x})},E=g=>g==="past"?"Past Bookings":Ht(g,{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsx("div",{className:"text-center mb-12",children:a.jsx("h1",{className:"text-4xl font-bold text-title mb-4",children:"YOUR TABLE BOOKINGS"})}),a.jsx("div",{className:"mb-8",children:u?a.jsx("div",{className:"space-y-8",children:Array.from({length:2}).map((g,v)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-full border-b border-border-custom pb-2 animate-pulse",children:a.jsx("div",{className:"h-6 bg-secondary-text opacity-20 rounded w-48"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:v===0?3:2}).map((x,j)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 animate-pulse",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]}),a.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-2/3 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-full"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-3/4"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/3"})]})]},j))})]},v))}):h&&c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ct,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No table bookings yet."}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:t,className:"btn-primary",children:"Book Your First Table"})})]}):a.jsx("div",{className:"space-y-8",children:p.map(({date:g,bookings:v,isPast:x})=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>y(g),className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:E(g)}),n.has(g)?a.jsx(Ds,{className:"w-5 h-5 text-icon"}):a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),n.has(g)&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(j=>a.jsx(Ax,{booking:j,onClick:()=>{},onCancelBooking:m,isPast:x},j.id))})]},g))})})]}),a.jsx(Mx,{isOpen:s.isOpen,onClose:()=>i({isOpen:!1,bookingId:null}),onConfirm:f,loading:o})]})}function dk({model:e,name:t,boxName:n,gameName:r,gameIcon:s,status:i,count:o,imageUrl:l,paintedDate:c,onViewModel:u,onViewBox:h}){console.log("ModelCard Debug:",{name:t,gameName:r,gameIcon:s,hasGameIcon:!!s,gameIconType:typeof s,gameIconTrimmed:s==null?void 0:s.trim()});const d=y=>{switch(y){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=(y,E)=>y==="Painted"&&E?`Painted ${Ht(E,{day:"2-digit",month:"2-digit",year:"2-digit"})}`:y,f=()=>{var E,g,v;if(l&&typeof l=="string"&&l.trim()!==""&&l!=="undefined"&&l!=="null"&&!l.includes("undefined")&&!l.includes("null")&&(l.startsWith("http")||l.startsWith("/")))return{src:l,isGameFallback:!1};const y=((g=(E=e==null?void 0:e.box)==null?void 0:E.game)==null?void 0:g.icon)||((v=e==null?void 0:e.game)==null?void 0:v.icon);return y&&typeof y=="string"&&y.trim()!==""&&y!=="undefined"&&y!=="null"&&y.startsWith("http")?{src:y,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},p=y=>!!(y&&typeof y=="string"&&y.trim()!==""&&y!=="undefined"&&y!=="null"&&y.startsWith("http")&&y.includes("game-assets"));return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col h-full hover:shadow-[0_4px_12px_rgba(114,77,221,0.2)] transition-shadow duration-200",children:[a.jsxs("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:[(()=>{const y=f();return a.jsx("img",{src:y.src,alt:t,className:`w-full h-48 min-h-[400px] object-cover ${y.isGameFallback?"opacity-10":""}`,loading:"lazy",onError:E=>{const g=E.target,v="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";g.src!==v&&(console.log("Image failed to load:",g.src,"Falling back to default"),g.src=v)}})})(),i!=="None"&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(i)}`,children:m(i,c)})})]}),a.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4 max-w-full",children:[a.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3 flex-shrink-0 min-w-[50%]",children:[a.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:t}),(e==null?void 0:e.box)&&a.jsx("button",{onClick:()=>h==null?void 0:h(e.box),className:"text-sm text-secondary-text hover:text-brand transition-colors text-left",children:n})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink min-w-0 justify-end",children:[a.jsx("span",{className:"text-xs text-secondary-text font-bold leading-tight break-words line-clamp-2 text-right",children:r.toUpperCase()}),p(s)?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s||"",alt:`${r} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:y=>{const E=y.target;console.warn("Game icon failed to load (bucket not found):",s,"Falling back to letter icon"),E.style.display="none";const g=E.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="flex")},onLoad:y=>{const g=y.target.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="none")}}),a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]}):a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]})]}),a.jsx("div",{className:"flex justify-center mt-auto",children:a.jsx("button",{onClick:u,className:"btn-secondary btn-flex",children:"View Model"})})]})]})}function hk({name:e,gameName:t,modelCount:n,imageUrl:r,gameImage:s,gameIcon:i,onViewBox:o}){const l=h=>`${h} Model${h!==1?"s":""}`,c=()=>r&&typeof r=="string"&&r.trim()!==""&&r!=="undefined"&&r!=="null"&&!r.includes("undefined")&&!r.includes("null")&&(r.startsWith("http")||r.startsWith("/"))?r:s&&typeof s=="string"&&s.trim()!==""&&s!=="undefined"&&s!=="null"&&s.startsWith("http")?s:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",u=h=>!!(h&&typeof h=="string"&&h.trim()!==""&&h!=="undefined"&&h!=="null"&&h.startsWith("http")&&h.includes("game-assets"));return a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col hover:shadow-[0_4px_12px_rgba(114,77,221,0.2)] transition-shadow duration-200",children:[a.jsx("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:a.jsx("img",{src:c(),alt:e,className:"w-full h-48 min-h-[400px] bg-bg-card-secondary object-cover"})}),a.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4 max-w-full",children:[a.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3 flex-shrink-0 min-w-[50%]",children:[a.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:e}),a.jsx("p",{className:"text-sm text-secondary-text",children:l(n)})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink min-w-0 justify-end",children:[a.jsx("span",{className:"text-xs text-secondary-text font-bold leading-tight break-words line-clamp-2 text-right",children:t.toUpperCase()}),u(i)?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:i||"",alt:`${t} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:h=>{const d=h.target;console.warn("Game icon failed to load (bucket not found):",i,"Falling back to letter icon"),d.style.display="none";const m=d.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="flex")},onLoad:h=>{const m=h.target.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="none")}}),a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]}):a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:a.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]})]}),a.jsx("div",{className:"flex justify-center mt-auto",children:a.jsx("button",{onClick:o,className:"btn-secondary btn-flex",children:"View Collection"})})]})]})}function Ca({currentPage:e,totalPages:t,onPageChange:n}){const r=[];if(t>7)if(e<=4){for(let i=1;i<=5;i++)r.push(i);r.push("..."),r.push(t)}else if(e>=t-3){r.push(1),r.push("...");for(let i=t-4;i<=t;i++)r.push(i)}else{r.push(1),r.push("...");for(let i=e-1;i<=e+1;i++)r.push(i);r.push("..."),r.push(t)}else for(let i=1;i<=t;i++)r.push(i);return a.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-8",children:[a.jsx("button",{onClick:()=>n(e-1),disabled:e===1,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:a.jsx(Zg,{className:"w-5 h-5"})}),r.map((i,o)=>a.jsx("button",{onClick:()=>typeof i=="number"&&n(i),disabled:i==="...",className:`px-3 py-2 rounded-lg text-sm font-medium ${i===e?"bg-title text-bg-primary":i==="..."?"cursor-default text-secondary-text":"hover:bg-bg-secondary text-text"}`,children:i},o)),a.jsx("button",{onClick:()=>n(e+1),disabled:e===t,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:a.jsx(dn,{className:"w-5 h-5"})})]})}function Ff({isOpen:e,onClose:t,mode:n}){const[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(n),{signIn:y,signUp:E,signInWithGoogle:g,resetPassword:v}=Ye();we.useEffect(()=>{p(n),s(""),o(""),h(""),m("")},[n]);const x=async()=>{c(!0),h("");try{const{error:S}=await g();S&&h(S.message)}catch{h("An unexpected error occurred")}finally{c(!1)}},j=async S=>{S.preventDefault(),c(!0),h(""),m("");try{if(f==="forgot-password"){const{error:A}=await v(r);A?h(A.message):(m("Password reset email sent! Check your inbox."),s(""))}else{const{error:A}=f==="login"?await y(r,i):await E(r,i);A?h(A.message):(t(),s(""),o(""))}}catch{h("An unexpected error occurred")}finally{c(!1)}},k=()=>{p("login"),s(""),o(""),h(""),m("")};if(!e)return null;const w=S=>{S.target===S.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:w,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f==="forgot-password"&&a.jsx("button",{onClick:k,className:"text-secondary-text hover:text-text p-1",children:a.jsx(Wt,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-2xl font-bold text-title flex-1 text-center",children:f==="login"?"Log In":f==="signup"?"Sign Up":"Reset Password"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),f!=="forgot-password"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{type:"button",onClick:x,disabled:l,className:"btn-secondary btn-full btn-with-icon",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{className:"font-medium",children:f==="login"?"Sign in with Google":"Sign up with Google"})]})}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-border-custom"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-modal-bg text-secondary-text",children:"Or continue with email"})})]})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:S=>s(S.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f!=="forgot-password"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:i,onChange:S=>o(S.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f==="login"&&a.jsx("div",{className:"text-right",children:a.jsx("button",{type:"button",onClick:()=>p("forgot-password"),className:"text-sm text-[var(--color-brand)] hover:text-[var(--color-brand)]/80 transition-colors",children:"Forgot your password?"})}),u&&a.jsx("div",{className:"text-red-600 text-sm",children:u}),d&&a.jsx("div",{className:"text-green-600 text-sm",children:d}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{type:"submit",disabled:l,className:"btn-primary btn-full",children:l?"Processing...":f==="login"?"Log In":f==="signup"?"Sign Up":"Send Reset Email"})})]}),f!=="forgot-password"&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-sm text-secondary-text",children:[f==="login"?"Don't have an account? ":"Already have an account? ",a.jsx("button",{type:"button",onClick:()=>p(f==="login"?"signup":"login"),className:"btn-ghost btn-ghost-sm",children:f==="login"?"Sign Up":"Log In"})]})})]})})}const Ea="mini-myths-recent-games",$f=3;function Zo(){const[e,t]=N.useState([]);N.useEffect(()=>{n()},[]);const n=()=>{try{const i=localStorage.getItem(Ea);if(i){const l=JSON.parse(i).sort((c,u)=>u.lastUsed-c.lastUsed).slice(0,$f);t(l)}}catch(i){console.error("Error loading recent games:",i),t([])}};return{recentGames:e,addRecentGame:i=>{try{const o=Date.now(),l={id:i.id,name:i.name,icon:i.icon,lastUsed:o},c=localStorage.getItem(Ea);let u=[];c&&(u=JSON.parse(c)),u=u.filter(h=>h.id!==i.id),u.unshift(l),u=u.slice(0,$f),localStorage.setItem(Ea,JSON.stringify(u)),t(u)}catch(o){console.error("Error saving recent game:",o)}},clearRecentGames:()=>{try{localStorage.removeItem(Ea),t([])}catch(i){console.error("Error clearing recent games:",i)}}}}function na({games:e,selectedGame:t,onGameSelect:n,placeholder:r="Choose a Game",favoriteGames:s=[]}){const[i,o]=N.useState(!1),[l,c]=N.useState(""),u=N.useRef(null),h=N.useRef(null),{recentGames:d}=Zo(),m=e.find(w=>w.id===t),f=e.filter(w=>w.name.toLowerCase().includes(l.toLowerCase())),p=new Set(s.map(w=>w.id)),y=d.find(w=>!p.has(w.id)&&f.some(S=>S.id===w.id)),E=y?f.filter(w=>w.id===y.id):[],g=s.filter(w=>w.name.toLowerCase().includes(l.toLowerCase())),v=f.filter(w=>w.id!==(y==null?void 0:y.id)&&!p.has(w.id));N.useEffect(()=>{const w=S=>{u.current&&!u.current.contains(S.target)&&o(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),N.useEffect(()=>{i&&h.current&&h.current.focus()},[i]);const x=w=>{n(w),c(""),o(!1)},j=w=>{c(w.target.value)},k=()=>{o(!i),i||c("")};return a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{type:"button",onClick:k,className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-left bg-bg-primary flex items-center justify-between hover:bg-bg-secondary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[m!=null&&m.icon?a.jsx("img",{src:m.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:w=>{const S=w.target;console.warn("Dropdown game icon failed to load:",m.icon),S.style.display="none"},onLoad:()=>{console.warn("Dropdown game icon loaded successfully:",m.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:m?"text-text":"text-secondary-text",children:m?m.name:r})]}),a.jsx(Ds,{className:`w-5 h-5 text-icon transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg max-h-60 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-border-custom",children:a.jsxs("div",{className:"relative",children:[a.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{ref:h,type:"text",value:l,onChange:j,placeholder:"Search games...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-sm bg-bg-primary text-text"})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0&&g.length===0&&v.length===0?a.jsxs("div",{className:"px-4 py-3 text-secondary-text text-sm",children:['No games found matching "',l,'"']}):a.jsxs(a.Fragment,{children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-4 py-2 bg-blue-50 border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-blue-800 uppercase tracking-wide",children:"Recent Games"})}),E.map(w=>a.jsxs("button",{type:"button",onClick:()=>x(w.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-blue-25",children:[w.icon?a.jsx("img",{src:w.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const A=S.target;console.warn("Game list icon failed to load:",w.icon),A.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",w.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:w.name})]},`recent-${w.id}`))]}),g.length>0&&a.jsxs(a.Fragment,{children:[E.length>0&&a.jsx("div",{className:"px-4 py-2 bg-amber-50 border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-amber-800 uppercase tracking-wide",children:"Favorite Games"})}),g.map(w=>a.jsxs("button",{type:"button",onClick:()=>x(w.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-amber-25",children:[w.icon?a.jsx("img",{src:w.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const A=S.target;console.warn("Game list icon failed to load:",w.icon),A.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",w.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:w.name})]},`favorite-${w.id}`))]}),v.length>0&&a.jsxs(a.Fragment,{children:[(E.length>0||g.length>0)&&a.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-custom",children:a.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"All Games"})}),v.map(w=>a.jsxs("button",{type:"button",onClick:()=>x(w.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors",children:[w.icon?a.jsx("img",{src:w.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const A=S.target;console.warn("Game list icon failed to load:",w.icon),A.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",w.icon)}}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-text",children:w.name})]},w.id))]})]})})]})]})}async function $n(e,t=1200,n=1200,r=.8){return new Promise((s,i)=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:h}=c;u>h?u>t&&(h=h*t/u,u=t):h>n&&(u=u*n/h,h=n),o.width=u,o.height=h,l?(l.drawImage(c,0,0,u,h),o.toBlob(d=>{if(d){const m=new File([d],e.name,{type:e.type,lastModified:Date.now()});s(m)}else i(new Error("Failed to compress image"))},e.type,r)):i(new Error("Failed to get canvas context"))},c.onerror=()=>{i(new Error("Failed to load image"))},c.src=URL.createObjectURL(e)})}function Rr(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type.toLowerCase())}function gt(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function Fr({isOpen:e,onClose:t,onCrop:n,imageFile:r}){const s=N.useRef(null),[i,o]=N.useState(null),[l,c]=N.useState({x:100,y:100,width:200,height:200}),[u,h]=N.useState(1),[d,m]=N.useState(0),[f,p]=N.useState(0),y=window.innerWidth<=768;N.useEffect(()=>{if(!e||!y)return;const x=k=>{k.preventDefault()},j=s.current;if(j)return j.addEventListener("touchmove",x,{passive:!1}),()=>{j.removeEventListener("touchmove",x)}},[e,y]),N.useEffect(()=>(e?(document.body.style.overflow="hidden",document.body.style.touchAction="none",document.body.style.overscrollBehavior="none"):(document.body.style.overflow="",document.body.style.touchAction="",document.body.style.overscrollBehavior=""),()=>{document.body.style.overflow="",document.body.style.touchAction="",document.body.style.overscrollBehavior=""}),[e]),N.useEffect(()=>{if(!e)return;const x=j=>{switch(j.key){case"=":case"+":j.preventDefault(),h(k=>Math.min(5,k+.1));break;case"-":j.preventDefault(),h(k=>Math.max(.1,k-.1));break;case"r":j.preventDefault(),m(k=>k+90);break;case"l":j.preventDefault(),m(k=>k-90);break;case"e":j.preventDefault(),p(k=>Math.max(-100,k-10));break;case"d":j.preventDefault(),p(k=>Math.min(100,k+10));break;case"0":j.preventDefault(),h(1),m(0),p(0);break}};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[e]),N.useEffect(()=>{if(e&&r){const x=new Image;return x.onload=()=>{o(x),c({x:100,y:100,width:200,height:200}),h(1),m(0),p(0)},x.src=URL.createObjectURL(r),()=>URL.revokeObjectURL(x.src)}},[e,r]),N.useEffect(()=>{const x=s.current,j=x==null?void 0:x.getContext("2d");if(!x||!j||!i)return;j.clearRect(0,0,x.width,x.height),j.save(),j.translate(x.width/2,x.height/2),j.rotate(d*Math.PI/180),j.scale(u,u);const k=i.width*u,w=i.height*u;if(j.drawImage(i,-k/2,-w/2,k,w),f!==0){const A=j.getImageData(-k/2,-w/2,k,w),M=A.data,b=1+f/100;for(let P=0;P<M.length;P+=4)M[P]=Math.min(255,Math.max(0,M[P]*b)),M[P+1]=Math.min(255,Math.max(0,M[P+1]*b)),M[P+2]=Math.min(255,Math.max(0,M[P+2]*b));j.putImageData(A,-k/2,-w/2)}j.restore(),j.strokeStyle="#F59E0B",j.lineWidth=2,j.strokeRect(l.x,l.y,l.width,l.height);const S=y?20:16;j.fillStyle="#F59E0B",j.fillRect(l.x-S/2,l.y-S/2,S,S),j.fillRect(l.x+l.width-S/2,l.y-S/2,S,S),j.fillRect(l.x-S/2,l.y+l.height-S/2,S,S),j.fillRect(l.x+l.width-S/2,l.y+l.height-S/2,S,S),j.strokeStyle="#FFFFFF",j.lineWidth=2,j.strokeRect(l.x-S/2,l.y-S/2,S,S),j.strokeRect(l.x+l.width-S/2,l.y-S/2,S,S),j.strokeRect(l.x-S/2,l.y+l.height-S/2,S,S),j.strokeRect(l.x+l.width-S/2,l.y+l.height-S/2,S,S)},[i,l,y,u,d,f]);const E=x=>{console.log("handleTouchStart called with touch:",x);const j=s.current;if(!j){console.log("Canvas ref not available");return}const k=j.getBoundingClientRect(),w=j.width/k.width,S=j.height/k.height;let A=(x.clientX-k.left)*w,M=(x.clientY-k.top)*S;const b=j.width/2,P=j.height/2;if(d!==0){const D=Math.cos(-d*Math.PI/180),$=Math.sin(-d*Math.PI/180),O=A-b,B=M-P;A=b+O*D-B*$,M=P+O*$+B*D}A=(A-b)/u+b,M=(M-P)/u+P,console.log("Touch detected:",{touchX:x.clientX,touchY:x.clientY,canvasX:A,canvasY:M,cropArea:l,isMobile:y,handleHitSize:y?60:32,canvasWidth:j.width,canvasHeight:j.height,scaleX:w,scaleY:S});const I=y?120:64;if(console.log("Checking touch position:",{x:A,y:M,handleHitSize:I,cropArea:l}),A>=l.x-I/2&&A<=l.x+I/2&&M>=l.y-I/2&&M<=l.y+I/2){console.log("Top-left handle touched!");const D=A,$=M,O={...l},B=R=>{const z=R.touches[0];let _=(z.clientX-k.left)*w,H=(z.clientY-k.top)*S;const ee=_-b,C=H-P;if(d!==0){const K=Math.cos(-d*Math.PI/180),he=Math.sin(-d*Math.PI/180);_=b+ee*K-C*he,H=P+ee*he+C*K}_=(_-b)/u+b,H=(H-P)/u+P;const Z=_-D,ne=H-$;c({x:Math.max(0,O.x+Z),y:Math.max(0,O.y+ne),width:Math.max(50,O.width-Z),height:Math.max(50,O.height-ne)})},G=()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",G)};document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",G,{passive:!1});return}if(A>=l.x+l.width-I/2&&A<=l.x+l.width+I/2&&M>=l.y-I/2&&M<=l.y+I/2){console.log("Top-right handle touched!");const D=A,$=M,O={...l},B=R=>{const z=R.touches[0];let _=(z.clientX-k.left)*w,H=(z.clientY-k.top)*S;const ee=_-b,C=H-P;if(d!==0){const K=Math.cos(-d*Math.PI/180),he=Math.sin(-d*Math.PI/180);_=b+ee*K-C*he,H=P+ee*he+C*K}_=(_-b)/u+b,H=(H-P)/u+P;const Z=_-D,ne=H-$;c({x:O.x,y:Math.max(0,O.y+ne),width:Math.max(50,O.width+Z),height:Math.max(50,O.height-ne)})},G=()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",G)};document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",G,{passive:!1});return}if(A>=l.x-I/2&&A<=l.x+I/2&&M>=l.y+l.height-I/2&&M<=l.y+l.height+I/2){console.log("Bottom-left handle touched!");const D=A,$=M,O={...l},B=R=>{const z=R.touches[0];let _=(z.clientX-k.left)*w,H=(z.clientY-k.top)*S;const ee=_-b,C=H-P;if(d!==0){const K=Math.cos(-d*Math.PI/180),he=Math.sin(-d*Math.PI/180);_=b+ee*K-C*he,H=P+ee*he+C*K}_=(_-b)/u+b,H=(H-P)/u+P;const Z=_-D,ne=H-$;c({x:Math.max(0,O.x+Z),y:O.y,width:Math.max(50,O.width-Z),height:Math.max(50,O.height+ne)})},G=()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",G)};document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",G,{passive:!1});return}if(A>=l.x+l.width-I/2&&A<=l.x+l.width+I/2&&M>=l.y+l.height-I/2&&M<=l.y+l.height+I/2){console.log("Bottom-right handle touched!");const D=A,$=M,O={...l},B=R=>{const z=R.touches[0];let _=(z.clientX-k.left)*w,H=(z.clientY-k.top)*S;const ee=_-b,C=H-P;if(d!==0){const K=Math.cos(-d*Math.PI/180),he=Math.sin(-d*Math.PI/180);_=b+ee*K-C*he,H=P+ee*he+C*K}_=(_-b)/u+b,H=(H-P)/u+P;const Z=_-D,ne=H-$;c({x:O.x,y:O.y,width:Math.max(50,O.width+Z),height:Math.max(50,O.height+ne)})},G=()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",G)};document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",G,{passive:!1});return}},g=x=>{const j=s.current;if(!j)return;const k=j.getBoundingClientRect(),w=j.width/k.width,S=j.height/k.height;let A=(x.clientX-k.left)*w,M=(x.clientY-k.top)*S;const b=j.width/2,P=j.height/2;if(d!==0){const D=Math.cos(-d*Math.PI/180),$=Math.sin(-d*Math.PI/180),O=A-b,B=M-P;A=b+O*D-B*$,M=P+O*$+B*D}A=(A-b)/u+b,M=(M-P)/u+P;const I=y?120:64;if(A>=l.x-I/2&&A<=l.x+I/2&&M>=l.y-I/2&&M<=l.y+I/2){const D=A,$=M,O={...l},B=R=>{let z=(R.clientX-k.left)*w,_=(R.clientY-k.top)*S;const H=z-b,ee=_-P;if(d!==0){const ne=Math.cos(-d*Math.PI/180),K=Math.sin(-d*Math.PI/180);z=b+H*ne-ee*K,_=P+H*K+ee*ne}z=(z-b)/u+b,_=(_-P)/u+P;const C=z-D,Z=_-$;c({x:Math.max(0,O.x+C),y:Math.max(0,O.y+Z),width:Math.max(50,O.width-C),height:Math.max(50,O.height-Z)})},G=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",G)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",G);return}if(A>=l.x+l.width-I/2&&A<=l.x+l.width+I/2&&M>=l.y-I/2&&M<=l.y+I/2){const D=A,$=M,O={...l},B=R=>{let z=(R.clientX-k.left)*w,_=(R.clientY-k.top)*S;const H=z-b,ee=_-P;if(d!==0){const ne=Math.cos(-d*Math.PI/180),K=Math.sin(-d*Math.PI/180);z=b+H*ne-ee*K,_=P+H*K+ee*ne}z=(z-b)/u+b,_=(_-P)/u+P;const C=z-D,Z=_-$;c({x:O.x,y:Math.max(0,O.y+Z),width:Math.max(50,O.width+C),height:Math.max(50,O.height-Z)})},G=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",G)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",G);return}if(A>=l.x-I/2&&A<=l.x+I/2&&M>=l.y+l.height-I/2&&M<=l.y+l.height+I/2){const D=A,$=M,O={...l},B=R=>{let z=(R.clientX-k.left)*w,_=(R.clientY-k.top)*S;const H=z-b,ee=_-P;if(d!==0){const ne=Math.cos(-d*Math.PI/180),K=Math.sin(-d*Math.PI/180);z=b+H*ne-ee*K,_=P+H*K+ee*ne}z=(z-b)/u+b,_=(_-P)/u+P;const C=z-D,Z=_-$;c({x:Math.max(0,O.x+C),y:O.y,width:Math.max(50,O.width-C),height:Math.max(50,O.height+Z)})},G=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",G)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",G);return}if(A>=l.x+l.width-I/2&&A<=l.x+l.width+I/2&&M>=l.y+l.height-I/2&&M<=l.y+l.height+I/2){const D=A,$=M,O={...l},B=R=>{let z=(R.clientX-k.left)*w,_=(R.clientY-k.top)*S;const H=z-b,ee=_-P;if(d!==0){const ne=Math.cos(-d*Math.PI/180),K=Math.sin(-d*Math.PI/180);z=b+H*ne-ee*K,_=P+H*K+ee*ne}z=(z-b)/u+b,_=(_-P)/u+P;const C=z-D,Z=_-$;c({x:O.x,y:O.y,width:Math.max(50,O.width+C),height:Math.max(50,O.height+Z)})},G=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",G)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",G);return}},v=()=>{if(!s.current||!i)return;const j=document.createElement("canvas"),k=j.getContext("2d");if(!k)return;j.width=l.width,j.height=l.height;const w=document.createElement("canvas"),S=w.getContext("2d");if(!S)return;w.width=i.width,w.height=i.height,S.save(),S.translate(w.width/2,w.height/2),S.rotate(d*Math.PI/180),S.scale(u,u),S.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),S.restore();const A=600,M=400,b=i.width/A,P=i.height/M;let I=l.x*b,D=l.y*P,$=l.width*b,O=l.height*P;if(u!==1||d!==0){const B=i.width/2,G=i.height/2,R=Math.cos(d*Math.PI/180),z=Math.sin(d*Math.PI/180),H=[{x:I,y:D},{x:I+$,y:D},{x:I,y:D+O},{x:I+$,y:D+O}].map(K=>{const he=K.x-B,Ee=K.y-G,De=B+he*R-Ee*z,Ae=G+he*z+Ee*R,Me=B+(De-B)*u,ie=G+(Ae-G)*u;return{x:Me,y:ie}}),ee=Math.min(...H.map(K=>K.x)),C=Math.max(...H.map(K=>K.x)),Z=Math.min(...H.map(K=>K.y)),ne=Math.max(...H.map(K=>K.y));I=ee,D=Z,$=C-ee,O=ne-Z}k.drawImage(w,I,D,$,O,0,0,l.width,l.height),j.toBlob(B=>{if(B){const G=new File([B],r.name,{type:r.type,lastModified:Date.now()});n(G)}},r.type,1)};return e?a.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[70] ${y?"p-0":"p-4"}`,onClick:x=>{x.target===x.currentTarget&&t()},children:a.jsxs("div",{className:`bg-modal-bg w-full ${y?"h-full rounded-none flex flex-col":"rounded-lg max-w-2xl p-6"}`,children:[a.jsxs("div",{className:`flex items-center justify-between ${y?"p-4 border-b border-border-custom":"mb-4"}`,children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Crop Image"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors p-2",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:`${y?"flex-1 p-4":"mb-4"}`,children:[a.jsx("div",{className:"relative select-none",style:{touchAction:"none",overscrollBehavior:"none",WebkitOverflowScrolling:"touch"},children:a.jsx("canvas",{ref:s,width:600,height:400,className:`border border-border-custom w-full block ${y?"h-full object-contain":"rounded-lg"}`,style:{cursor:"crosshair",touchAction:"none",maxHeight:y?"calc(100vh - 200px)":"400px",position:"relative",zIndex:10,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",overscrollBehavior:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent"},onMouseDown:g,onTouchStart:x=>{console.log("Canvas touch start event:",x.type,"passive:",x.defaultPrevented);const j=x.touches[0];E(j)}})}),a.jsxs("div",{className:`mt-4 ${y?"space-y-4":"space-y-3"}`,children:[a.jsx("div",{className:"text-xs text-secondary-text text-center",children:a.jsx("span",{className:"hidden sm:inline",children:"Keyboard shortcuts: +/- zoom, r/l rotate, e/d exposure, 0 reset"})}),a.jsxs("div",{className:`${y?"space-y-4":"space-y-3"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>h(Math.max(.1,u-.1)),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",disabled:u<=.1,children:"-"}),a.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:u,onChange:x=>h(parseFloat(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsx("button",{onClick:()=>h(Math.min(5,u+.1)),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",disabled:u>=5,children:"+"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>m(d-90),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",children:"↺"}),a.jsx("input",{type:"range",min:"-180",max:"180",step:"1",value:d,onChange:x=>m(parseInt(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsx("button",{onClick:()=>m(d+90),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",children:"↻"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>p(Math.max(-100,f-10)),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",disabled:f<=-100,children:a.jsx(ax,{className:"w-4 h-4"})}),a.jsx("input",{type:"range",min:"-100",max:"100",step:"1",value:f,onChange:x=>p(parseInt(x.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsx("button",{onClick:()=>p(Math.min(100,f+10)),className:"btn-ghost btn-sm w-8 h-8 p-0 flex-shrink-0",disabled:f>=100,children:a.jsx(ox,{className:"w-4 h-4"})})]}),(u!==1||d!==0||f!==0||l.x!==100||l.y!==100||l.width!==200||l.height!==200)&&a.jsx("button",{onClick:()=>{h(1),m(0),p(0),c({x:100,y:100,width:200,height:200})},className:"btn-secondary w-full",children:"Reset"})]})]})]}),a.jsxs("div",{className:`flex space-x-3 ${y?"p-4 border-t border-border-custom":""}`,children:[a.jsx("button",{onClick:t,className:`btn-ghost btn-flex ${y?"flex-1 py-3":""}`,children:"Cancel"}),a.jsx("button",{onClick:v,className:`btn-primary btn-flex ${y?"flex-1 py-3":""}`,children:"Crop & Use"})]})]})}):null}function Hi({value:e,onChange:t,minDate:n=cu(),placeholder:r="Select date",className:s="",disabled:i=!1}){const[o,l]=N.useState(!1),[c,u]=N.useState(new Date),[h,d]=N.useState(e?new Date(e):null),m=N.useRef(null);N.useEffect(()=>{const S=A=>{m.current&&!m.current.contains(A.target)&&setTimeout(()=>{l(!1)},10)};return o&&document.addEventListener("click",S),()=>{document.removeEventListener("click",S)}},[o]),N.useEffect(()=>{e&&(d(new Date(e)),u(new Date(e)))},[e]);const f=S=>{const A=S.getFullYear(),M=S.getMonth(),b=new Date(A,M,1),I=new Date(A,M+1,0).getDate(),D=b.getDay(),$=[];for(let O=0;O<D;O++)$.push(null);for(let O=1;O<=I;O++)$.push(new Date(A,M,O));return $},p=S=>lk(S),y=S=>{const A=new Date(n);return A.setHours(0,0,0,0),S.setHours(0,0,0,0),S<A},E=S=>h?p(S)===p(h):!1,g=(S,A)=>{A.stopPropagation(),!y(S)&&(d(S),t(p(S)),l(!1))},v=S=>{S.stopPropagation(),S.preventDefault(),console.log("Previous month clicked"),u(new Date(c.getFullYear(),c.getMonth()-1,1))},x=S=>{S.stopPropagation(),S.preventDefault(),console.log("Next month clicked"),u(new Date(c.getFullYear(),c.getMonth()+1,1))},j=S=>{S.stopPropagation(),d(null),t(""),l(!1)},k=f(c),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return a.jsxs("div",{className:`relative ${s}`,ref:m,children:[a.jsxs("div",{className:"relative",children:[a.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",value:h?h.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"",placeholder:r,onClick:S=>{S.stopPropagation(),i||l(!o)},readOnly:!0,disabled:i,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-brand focus:border-brand bg-bg-primary text-text cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),h&&!i&&a.jsx("button",{onClick:j,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-4 h-4"})})]}),o&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg z-[70] min-w-[280px]",onClick:S=>S.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[a.jsx("button",{onClick:v,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:a.jsx(Zg,{className:"w-4 h-4"})}),a.jsxs("h3",{className:"text-sm font-semibold text-text",children:[w[c.getMonth()]," ",c.getFullYear()]}),a.jsx("button",{onClick:x,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:a.jsx(dn,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>a.jsx("div",{className:"text-xs text-secondary-text text-center py-1",children:S},S))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:k.map((S,A)=>a.jsx("div",{className:"text-center",children:S?a.jsx("button",{onClick:M=>g(S,M),disabled:y(S),className:`w-8 h-8 text-sm rounded-full transition-colors ${E(S)?"bg-brand text-white":y(S)?"text-secondary-text cursor-not-allowed":"hover:bg-bg-secondary text-text"}`,children:S.getDate()}):a.jsx("div",{className:"w-8 h-8"})},A))})]})]})]})}function fk({isOpen:e,onClose:t,onSuccess:n,preselectedBoxId:r}){const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(""),[h,d]=N.useState(""),[m,f]=N.useState(""),[p,y]=N.useState(""),[E,g]=N.useState(""),[v,x]=N.useState(""),[j,k]=N.useState("1"),[w,S]=N.useState(null),[A,M]=N.useState(!1),[b,P]=N.useState(null),[I,D]=N.useState([]),[$,O]=N.useState([]),[B,G]=N.useState(!1),[R,z]=N.useState(!1),[_,H]=N.useState(""),[ee,C]=N.useState(""),[Z,ne]=N.useState(""),{user:K}=Ye(),{addRecentGame:he}=Zo(),Ee=window.innerWidth<=768;we.useEffect(()=>{if(e)document.body.style.overflow="hidden";else{document.body.style.overflow="unset";try{localStorage.removeItem("mini-myths-temp-box-context")}catch(W){console.error("Error clearing box context:",W)}}return()=>{document.body.style.overflow="unset"}},[e]),N.useEffect(()=>{if(e)if(De(),ie(),r)u(r);else try{const W=localStorage.getItem("mini-myths-temp-box-context");if(W){const Q=JSON.parse(W);u(Q.id)}}catch(W){console.error("Error reading box context from localStorage:",W)}},[e]),N.useEffect(()=>{e&&ie()},[e,K]);const De=async()=>{try{const{data:W,error:Q}=await q.from("games").select("id, name, icon").order("name");if(Q)throw Q;D(W||[])}catch(W){console.error("Error fetching games:",W)}},Ae=()=>!(K!=null&&K.fav_games)||K.fav_games.length===0?[]:I.filter(W=>{var Q;return(Q=K.fav_games)==null?void 0:Q.includes(W.id)}),Me=W=>{l(W);const Q=I.find(ae=>ae.id===W);Q&&he(Q)},ie=async()=>{if(K)try{const{data:W,error:Q}=await q.from("boxes").select(`
          id,
          name,
          game_id,
          purchase_date,
          public,
          created_at,
          game:games(
            name,
            icon
          )
        `).eq("user_id",K.id).order("created_at",{ascending:!1});if(Q)throw Q;const ae=(W||[]).map(Ie=>({...Ie,game:Ie.game&&Array.isArray(Ie.game)?Ie.game[0]:Ie.game}));O(ae)}catch(W){console.error("Error fetching boxes:",W)}},fe=()=>o?$.filter(W=>W.game_id===o):$,X=W=>{const Q=W.target.files;if(C(""),ne(""),Q&&Q.length>0){const ae=Q[0];if(!Rr(ae)){C("Please select a valid image file (JPEG, PNG, or WebP)"),S(null),W.target.value="";return}const Ie=50*1024*1024;ae.size>Ie?(C(`Your image must be 50MB or less. Current size: ${gt(ae.size)}`),S(null),W.target.value=""):(S(Q),Q&&Q.length>0&&(P(Q[0]),M(!0)),ae.size>1024*1024&&ne(`Original size: ${gt(ae.size)}. Image will be automatically compressed before upload.`))}else S(Q)},re=async()=>{var W;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){C("Camera is not available on this device");return}C("");let Q;try{Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280,max:1920},height:{ideal:720,max:1080}}})}catch(me){console.log("Back camera failed, trying front camera:",me);try{Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280,max:1920},height:{ideal:720,max:1080}}})}catch(xe){console.log("Front camera failed, trying any available camera:",xe),Q=await navigator.mediaDevices.getUserMedia({video:!0})}}const ae=document.createElement("video");ae.srcObject=Q,ae.autoplay=!0,ae.playsInline=!0,ae.muted=!0,ae.style.position="fixed",ae.style.top="0",ae.style.left="0",ae.style.width="100%",ae.style.height="100%",ae.style.zIndex="9999",ae.style.objectFit="cover",ae.style.backgroundColor="#000";const Ie=document.createElement("canvas"),T=Ie.getContext("2d");if(!T)throw new Error("Could not get canvas context");const L=document.createElement("button");L.textContent="📸 Take Photo",L.style.position="fixed",L.style.bottom="20px",L.style.left="50%",L.style.transform="translateX(-50%)",L.style.zIndex="10000",L.style.padding="12px 24px",L.style.backgroundColor="#007bff",L.style.color="white",L.style.border="none",L.style.borderRadius="8px",L.style.fontSize="16px",L.style.fontWeight="bold",L.style.touchAction="manipulation";const U=document.createElement("button");U.textContent="❌ Cancel",U.style.position="fixed",U.style.top="20px",U.style.right="20px",U.style.zIndex="10000",U.style.padding="8px 16px",U.style.backgroundColor="#dc3545",U.style.color="white",U.style.border="none",U.style.borderRadius="6px",U.style.fontSize="14px",U.style.touchAction="manipulation";const V=document.createElement("button");V.textContent="🔄 Switch Camera",V.style.position="fixed",V.style.top="20px",V.style.left="20px",V.style.zIndex="10000",V.style.padding="8px 16px",V.style.backgroundColor="#6c757d",V.style.color="white",V.style.border="none",V.style.borderRadius="6px",V.style.fontSize="14px",V.style.touchAction="manipulation";let oe=((W=Q.getVideoTracks()[0])==null?void 0:W.getSettings().facingMode)||"environment";const _e=async()=>{try{Q.getTracks().forEach(ke=>ke.stop());const me=oe==="environment"?"user":"environment";oe=me;const xe=await navigator.mediaDevices.getUserMedia({video:{facingMode:me,width:{ideal:1280,max:1920},height:{ideal:720,max:1080}}});ae.srcObject=xe,Q=xe}catch(me){console.error("Error switching camera:",me);try{const xe=await navigator.mediaDevices.getUserMedia({video:!0});Q.getTracks().forEach(ke=>ke.stop()),ae.srcObject=xe,Q=xe}catch(xe){console.error("Fallback camera also failed:",xe)}}},pe=()=>{try{if(ae.videoWidth===0||ae.videoHeight===0){console.log("Video not ready yet, waiting..."),setTimeout(pe,100);return}Ie.width=ae.videoWidth,Ie.height=ae.videoHeight,T.drawImage(ae,0,0,Ie.width,Ie.height),Ie.toBlob(me=>{if(me){const xe=new File([me],`camera-capture-${Date.now()}.jpg`,{type:"image/jpeg"});if(!Rr(xe)){C("Please select a valid image file (JPEG, PNG, or WebP)");return}const ke=50*1024*1024;if(xe.size>ke)C(`Your image must be 50MB or less. Current size: ${gt(xe.size)}`);else{const et=new DataTransfer;et.items.add(xe),S(et.files),C(""),ne(""),P(xe),M(!0),xe.size>1024*1024&&ne(`Original size: ${gt(xe.size)}. Image will be automatically compressed before upload.`)}}de()},"image/jpeg",.9)}catch(me){console.error("Error capturing photo:",me),C("Error capturing photo. Please try again."),de()}},de=()=>{try{Q&&Q.getTracks().forEach(me=>me.stop()),document.body.contains(ae)&&document.body.removeChild(ae),document.body.contains(L)&&document.body.removeChild(L),document.body.contains(U)&&document.body.removeChild(U),document.body.contains(V)&&document.body.removeChild(V)}catch(me){console.error("Error during cleanup:",me)}};L.addEventListener("click",pe),U.addEventListener("click",de),V.addEventListener("click",_e),document.body.appendChild(ae),document.body.appendChild(L),document.body.appendChild(U),document.body.appendChild(V),ae.addEventListener("loadedmetadata",()=>{console.log("Video ready, dimensions:",ae.videoWidth,"x",ae.videoHeight)}),ae.addEventListener("error",me=>{console.error("Video error:",me),C("Error loading camera feed. Please try again."),de()})}catch(Q){console.error("Error accessing camera:",Q),Q instanceof DOMException?Q.name==="NotAllowedError"?C("Camera access denied. Please allow camera permissions and try again."):Q.name==="NotFoundError"?C("No camera found on this device."):Q.name==="NotReadableError"?C("Camera is already in use by another application."):C(`Camera error: ${Q.message}`):C("Unable to access camera. Please try again or use the file upload option.")}},ve=W=>{const Q=new DataTransfer;Q.items.add(W),S(Q.files),M(!1),P(null),ne(`Cropped image ready for upload (${gt(W.size)})`)},Te=()=>{M(!1),P(null);const W=document.getElementById("image");W&&(W.value=""),S(null)},We=W=>{const Q=W.target.value.replace(/[^0-9.]/g,"");if(g(Q),Q&&!isNaN(parseFloat(Q))){const ae=parseFloat(Q);x(`$${ae.toFixed(2)}`)}else x("")},Ze=async W=>{if(W.preventDefault(),!(!s.trim()||!K)){G(!0),H("");try{let Q="";if(w&&w.length>0){const L=w[0];if(Z.includes("Cropped image ready")){z(!0);try{const V=await $n(L,1200,1200,.8);console.log(`Cropped image compressed: ${gt(L.size)} → ${gt(V.size)}`);const oe=V.name.split(".").pop(),_e=`${K.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:pe,error:de}=await q.storage.from("model-images").upload(_e,V);if(de)throw console.error("Compressed cropped image upload error:",de),new Error(`Failed to upload image: ${de.message}`);{const{data:me}=q.storage.from("model-images").getPublicUrl(pe.path);Q=me.publicUrl,console.log("Uploaded compressed cropped image URL:",Q)}}catch(V){console.error("Cropped image compression error:",V);const oe=L.name.split(".").pop(),_e=`${K.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:pe,error:de}=await q.storage.from("model-images").upload(_e,L);if(de)throw console.error("Fallback cropped image upload error:",de),new Error(`Failed to upload image: ${de.message}`);{const{data:me}=q.storage.from("model-images").getPublicUrl(pe.path);Q=me.publicUrl,console.log("Uploaded uncompressed cropped image URL:",Q)}}finally{z(!1)}}else{z(!0);try{const V=await $n(L,1200,1200,.8);console.log(`Image compressed: ${gt(L.size)} → ${gt(V.size)}`);const oe=V.name.split(".").pop(),_e=`${K.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:pe,error:de}=await q.storage.from("model-images").upload(_e,V);if(de)throw console.error("Image upload error:",de),new Error(`Failed to upload image: ${de.message}`);{const{data:me}=q.storage.from("model-images").getPublicUrl(pe.path);Q=me.publicUrl,console.log("Uploaded compressed image URL:",Q)}}catch(V){console.error("Image compression error:",V);try{const oe=L.name.split(".").pop(),_e=`${K.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${oe}`,{data:pe,error:de}=await q.storage.from("model-images").upload(_e,L);if(de)throw console.error("Original image upload error:",de),new Error(`Failed to upload image: ${de.message}`);{const{data:me}=q.storage.from("model-images").getPublicUrl(pe.path);Q=me.publicUrl,console.log("Uploaded original image URL:",Q)}}catch(oe){throw console.error("Fallback upload failed:",oe),new Error("Failed to upload image after compression fallback")}}finally{z(!1)}}}let ae=o||null;if(c||r){const L=c||r,U=$.find(V=>V.id===L);U&&U.game_id&&(ae=U.game_id)}let Ie=!1;if(c||r){const L=c||r,U=$.find(V=>V.id===L);U&&(Ie=U.public)}const{error:T}=await q.from("models").insert({name:s.trim(),box_id:c||r||null,game_id:ae,status:h||"None",count:parseInt(j)||1,user_id:K.id,image_url:Q,purchase_date:m||null,painted_date:p||null,public:Ie});if(T)throw T;i(""),l(""),u(""),d(""),f(""),y(""),g(""),x(""),k("1"),S(null),ne(""),n(),t()}catch(Q){H(Q instanceof Error?Q.message:"Failed to add model")}finally{G(!1),z(!1)}}},at=s.trim().length>0&&!ee&&!R;if(!e)return null;const te=W=>{W.target===W.currentTarget&&t()};return fe(),a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:te,children:[a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Model"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Don't worry- you can update any of these details later."}),a.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"modelName",className:"block text-sm font-medium text-input-label font-overpass",children:"Model Name"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),a.jsx("input",{type:"text",id:"modelName",value:s,onChange:W=>i(W.target.value),placeholder:'eg. "Space Marine Lieutenant", "Captain America", "US Ranger Squad", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"box",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection (Optional)"}),a.jsxs("select",{id:"box",value:c,onChange:W=>{u(W.target.value),W.target.value&&l("")},className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"No Collection (Loose Model)"}),fe().map(W=>a.jsxs("option",{value:W.id,children:[W.name," ",W.game&&`(${W.game.name})`]},W.id))]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"Choose an existing collection or leave as loose model."}),c&&(()=>{const W=$.find(Q=>Q.id===c);return W&&W.game?a.jsxs("p",{className:"text-xs text-[var(--color-brand)] mt-1",children:["Game will be automatically set to: ",a.jsx("strong",{children:W.game.name})]}):null})()]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(na,{games:I,selectedGame:o,onGameSelect:Me,placeholder:"Choose a Game",favoriteGames:Ae()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paintedStatus",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Status"}),a.jsxs("select",{id:"paintedStatus",value:h,onChange:W=>d(W.target.value),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"Select Status"}),a.jsx("option",{value:"Assembled",children:"Assembled"}),a.jsx("option",{value:"Primed",children:"Primed"}),a.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),a.jsx("option",{value:"Painted",children:"Painted"})]})]}),h==="Painted"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paintedDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Date"}),a.jsx(Hi,{value:p,onChange:y,placeholder:"Select painted date",minDate:""})]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsx(Hi,{value:m,onChange:f,placeholder:"Select purchase date",minDate:""})]}),!c&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),a.jsxs("div",{className:"relative",children:[a.jsx(tx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"purchasePrice",value:E,onChange:We,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"numberOfModels",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Models"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"numberOfModels",value:j,onChange:W=>k(W.target.value),min:"1",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:X,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),Ee&&a.jsx("div",{className:"mt-3",children:a.jsxs("button",{type:"button",onClick:re,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 border border-border-custom rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors bg-bg-primary text-text",children:[a.jsx(Ev,{className:"w-5 h-5 text-icon"}),a.jsx("span",{children:"Take Photo with Camera"})]})}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."})]}),Z&&a.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:Z}),ee&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:ee}),_&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:_}),a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{type:"submit",disabled:!at||B,className:`${at&&!B?"btn-primary":"btn-disabled"}`,children:R?"Compressing Image...":B?"Adding...":"Add to Collection"})})]})]}),b&&a.jsx(Fr,{isOpen:A,onClose:Te,onCrop:ve,imageFile:b})]})}function Lx({isOpen:e,onClose:t,images:n,onImageSelect:r,searchQuery:s,onFindMoreImages:i,isLoadingMore:o}){if(!e)return null;const l=c=>{c.target===c.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:l,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qo,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Suggested Images"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:['Search results for: "',s,'"']})]})]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-base text-secondary-text mb-4",children:['No images found for "',s,'". Try uploading your own image instead.']}),a.jsx("button",{onClick:t,className:"btn-primary",children:"Upload My Own Image"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Click on an image to use it for your box. Images are sourced from Google Image Search."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:n.map((c,u)=>a.jsxs("button",{onClick:()=>r(c),className:"group relative aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border---color-brand transition-all duration-200",children:[a.jsx("img",{src:c,alt:`Suggested image ${u+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-overpass font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Select Image"})})]},u))}),i&&a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("button",{onClick:i,disabled:o,className:"btn-primary btn-with-icon",children:o?a.jsxs(a.Fragment,{children:[a.jsx(bf,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Finding more images..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(bf,{className:"w-4 h-4"}),a.jsx("span",{children:"Find more images"})]})})}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:t,className:"btn-ghost",children:"Upload My Own Image Instead"})})]})]})})}function yi({variant:e="primary",size:t="default",width:n="default",withIcon:r=!1,className:s="",children:i,...o}){const l=`btn-${e}`,d=[t==="small"?`btn-${e}-sm`:l,n==="full"?"btn-full":n==="flex"?"btn-flex":"",r?t==="small"?"btn-with-icon-sm":"btn-with-icon":"",s].filter(Boolean).join(" ");return a.jsx("button",{className:d,...o,children:i})}function mk({isOpen:e,onClose:t,onSuccess:n}){var Ie;const[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,m]=N.useState(""),[f,p]=N.useState(null),[y,E]=N.useState(!1),[g,v]=N.useState(null),[x,j]=N.useState([]),[k,w]=N.useState(!1),[S,A]=N.useState(!1),[M,b]=N.useState(""),[P,I]=N.useState(""),[D,$]=N.useState(""),{user:O}=Ye(),{addRecentGame:B}=Zo(),[G,R]=N.useState(!1),[z,_]=N.useState(!1),[H,ee]=N.useState([]),[C,Z]=N.useState(""),[ne,K]=N.useState([]),[he,Ee]=N.useState(!1);let De=null;we.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{e&&Ae()},[e]);const Ae=async()=>{try{const{data:T,error:L}=await q.from("games").select("id, name, icon").order("name");if(L)throw L;j(T||[])}catch(T){console.error("Error fetching games:",T)}},Me=()=>!(O!=null&&O.fav_games)||O.fav_games.length===0?[]:x.filter(T=>{var L;return(L=O.fav_games)==null?void 0:L.includes(T.id)}),ie=T=>{o(T);const L=x.find(U=>U.id===T);L&&B(L)},fe=T=>{const L=T.target.files;if(I(""),$(""),L&&L.length>0){const U=L[0];if(!Rr(U)){I("Please select a valid image file (JPEG, PNG, or WebP)"),p(null),T.target.value="";return}const V=50*1024*1024;U.size>V?(I(`Your image must be 50MB or less. Current size: ${gt(U.size)}`),p(null),T.target.value=""):(p(L),L&&L.length>0&&(v(L[0]),E(!0)),U.size>1024*1024&&$(`Original size: ${gt(U.size)}. Image will be automatically compressed before upload.`))}else p(L)},X=T=>{const L=new DataTransfer;L.items.add(T),p(L.files),E(!1),v(null),$(`Cropped image ready for upload (${gt(T.size)})`)},re=()=>{E(!1),v(null);const T=document.getElementById("boxImage");T&&(T.value=""),p(null)},ve=T=>{const L=T.target.value.replace(/[^0-9.]/g,"");if(h(L),L&&!isNaN(parseFloat(L))){const U=parseFloat(L);m(`$${U.toFixed(2)}`)}else m("")},Te=async()=>{if(r.trim()){_(!0),ee([]),K([]);try{const T=x.find(pe=>pe.id===i),L=(T==null?void 0:T.name)||"",U=`${r.trim()} ${L}`.trim(),V=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:U,count:6})});if(!V.ok)throw new Error("Failed to search for images");const _e=(await V.json()).images||[];ee(_e),K(_e),R(!0)}catch(T){console.error("Error searching for images:",T),R(!1)}finally{_(!1)}}},We=async()=>{if(r.trim()){Ee(!0);try{const T=x.find(de=>de.id===i),L=(T==null?void 0:T.name)||"",U=`${r.trim()} ${L}`.trim();console.log("Finding more images with exclude:",ne);const V=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:U,count:6,exclude:ne})});if(!V.ok)throw new Error("Failed to search for more images");const _e=(await V.json()).images||[];console.log("Received additional images:",_e),console.log("Previous results count:",ne.length),console.log("New results count:",_e.length);const pe=_e.filter(de=>!ne.includes(de));console.log("Unique new images after filtering:",pe),ee(pe),K([...ne,...pe])}catch(T){console.error("Error searching for more images:",T)}finally{Ee(!1)}}},Ze=T=>{p(null),$(`Selected image: ${T}`),R(!1),Z(T)},at=async T=>{if(T.preventDefault(),!(!r.trim()||!O)){w(!0),b("");try{let L="";if(C)L=C;else if(f&&f.length>0){const oe=f[0];if(D.includes("Cropped image ready")){A(!0);try{const pe=await $n(oe,1200,1200,.8);console.log(`Cropped image compressed: ${gt(oe.size)} → ${gt(pe.size)}`);const de=pe.name.split(".").pop(),me=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${de}`,{data:xe,error:ke}=await q.storage.from("model-images").upload(me,pe);if(ke)throw console.error("Compressed cropped image upload error:",ke),new Error(`Failed to upload image: ${ke.message}`);{const{data:et}=q.storage.from("model-images").getPublicUrl(xe.path);L=et.publicUrl,console.log("Uploaded compressed cropped image URL:",L)}}catch(pe){console.error("Cropped image compression error:",pe);const de=oe.name.split(".").pop(),me=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${de}`,{data:xe,error:ke}=await q.storage.from("model-images").upload(me,oe);if(ke)throw console.error("Fallback cropped image upload error:",ke),new Error(`Failed to upload image: ${ke.message}`);{const{data:et}=q.storage.from("model-images").getPublicUrl(xe.path);L=et.publicUrl,console.log("Uploaded uncompressed cropped image URL:",L)}}finally{A(!1)}}else{A(!0);try{const pe=await $n(oe,1200,1200,.8);console.log(`Image compressed: ${gt(oe.size)} → ${gt(pe.size)}`);const de=pe.name.split(".").pop(),me=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${de}`,{data:xe,error:ke}=await q.storage.from("model-images").upload(me,pe);if(ke)throw console.error("Image upload error:",ke),new Error(`Failed to upload image: ${ke.message}`);{const{data:et}=q.storage.from("model-images").getPublicUrl(xe.path);L=et.publicUrl,console.log("Uploaded compressed image URL:",L)}}catch(pe){console.error("Image compression error:",pe);try{const de=oe.name.split(".").pop(),me=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${de}`,{data:xe,error:ke}=await q.storage.from("model-images").upload(me,oe);if(ke)throw console.error("Original image upload error:",ke),new Error(`Failed to upload image: ${ke.message}`);{const{data:et}=q.storage.from("model-images").getPublicUrl(xe.path);L=et.publicUrl,console.log("Uploaded original image URL:",L)}}catch(de){throw console.error("Fallback upload failed:",de),new Error("Failed to upload image after compression fallback")}}finally{A(!1)}}}const{data:U,error:V}=await q.from("boxes").insert({name:r.trim(),game_id:i||null,purchase_date:l||null,user_id:O.id,image_url:L}).select().single();if(V)throw V;return De=U.id,s(""),o(""),c(""),h(""),m(""),p(null),$(""),Z(""),R(!1),ee([]),n(),U}catch(L){throw b(L instanceof Error?L.message:"Failed to add box"),L}finally{w(!1),A(!1)}}},te=async T=>{try{await at(T),t()}catch{}},W=async T=>{await at(T),t()},Q=r.trim().length>0&&!P&&!S;if(!e)return null;const ae=T=>{T.target===T.currentTarget&&t()};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:ae,children:[a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Collection"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Collections are a way to sort your models into groups. You can use this to track boxes you've bought, squads you've assembled, or simply to organise your collection."}),a.jsxs("form",{onSubmit:at,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass",children:"Collection Name"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),a.jsx("input",{type:"text",id:"boxName",value:r,onChange:T=>s(T.target.value),placeholder:'eg. "Kill Team Collection", "Space Marine Heroes", "Warhammer 40k Elite Edition", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(na,{games:x,selectedGame:i,onGameSelect:ie,placeholder:"Choose a Game",favoriteGames:Me()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"purchaseDate",value:l,onChange:T=>c(T.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),a.jsxs("div",{className:"relative",children:[a.jsx(tx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"purchasePrice",value:u,onChange:ve,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:fe,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."}),r.trim()&&!f&&!C&&a.jsx("div",{className:"mt-3",children:a.jsx(yi,{variant:"secondary",width:"full",size:"small",onClick:Te,disabled:z,children:z?"Searching for images...":"Find images for this collection"})})]}),D&&a.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:D}),P&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:P}),M&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:M}),a.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[a.jsx(yi,{className:"btn-primary",variant:Q&&!k?"primary":"disabled",width:"full",onClick:te,disabled:!Q||k,children:S?"Compressing Image...":k?"Adding...":"Add Empty Collection"}),a.jsx(yi,{variant:Q&&!k?"primary":"disabled",width:"full",onClick:W,disabled:!Q||k,children:S?"Compressing Image...":k?"Adding...":"Add Models to Collection"})]})]})]}),g&&a.jsx(Fr,{isOpen:y,onClose:re,onCrop:X,imageFile:g}),G&&a.jsx(Lx,{isOpen:G,onClose:()=>R(!1),images:H,onImageSelect:Ze,searchQuery:`${r} ${((Ie=x.find(T=>T.id===i))==null?void 0:Ie.name)||""}`.trim(),onFindMoreImages:We,isLoadingMore:he})]})}function pk({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await q.from("users").select("*").order("created_at",{ascending:!1});if(h)throw h;n(u||[])}catch(u){o(u instanceof Error?u.message:"Failed to fetch users")}finally{s(!1)}},c=u=>Ht(u,{year:"numeric",month:"short",day:"numeric"});return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading users..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE USERS"})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),a.jsx("div",{className:"space-y-4",children:t.map(u=>a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[a.jsx(Sn,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:u.email||"No email"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Joined ",c(u.created_at)]})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex-shrink-0 ${u.is_admin?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:u.is_admin?"Admin":"User"})]},u.id))}),t.length===0&&!r&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No users found."})})]})}function gk({isOpen:e,onClose:t,onGameUpdated:n,game:r}){const[s,i]=N.useState({name:"",manufacturer_id:"",image:"",icon:""}),[o,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(null),[m,f]=N.useState(!1),[p,y]=N.useState(!1),[E,g]=N.useState(null),[v,x]=N.useState(null),[j,k]=N.useState(null),[w,S]=N.useState(null),[A,M]=N.useState(!1),[b,P]=N.useState(!1),[I,D]=N.useState("");N.useEffect(()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""})},[r]),N.useEffect(()=>{e&&$()},[e]);const $=async()=>{try{const{data:C,error:Z}=await q.from("manufacturers").select("id, name").order("name");if(Z)throw Z;l(C||[])}catch(C){console.error("Error fetching manufacturers:",C)}},O=C=>{var ne;const Z=(ne=C.target.files)==null?void 0:ne[0];if(Z){if(!Rr(Z)){alert("Please select a valid image file");return}u(Z),g(Z),f(!0)}},B=C=>{var ne;const Z=(ne=C.target.files)==null?void 0:ne[0];if(Z){if(!Rr(Z)){alert("Please select a valid image file");return}d(Z),x(Z),y(!0)}},G=C=>{k(C),f(!1),g(null)},R=C=>{S(C),y(!1),x(null)},z=async(C,Z,ne)=>{const K=(c==null?void 0:c.name.split(".").pop())||"jpg",he=`${ne}/${Date.now()}-${Math.random().toString(36).substring(2)}.${K}`,{data:Ee,error:De}=await q.storage.from(Z).upload(he,C);if(De)throw De;const{data:Ae}=q.storage.from(Z).getPublicUrl(Ee.path);return Ae.publicUrl},_=async C=>{if(C.preventDefault(),!!r){M(!0),D("");try{let Z=s.image,ne=s.icon;if(j){P(!0);const he=await $n(j,1200,1200,.8);Z=await z(he,"game-assets","images")}if(w){P(!0);const he=await $n(w,512,512,.9);ne=await z(he,"game-assets","icons")}const{error:K}=await q.from("games").update({name:s.name,manufacturer_id:s.manufacturer_id||null,image:Z,icon:ne}).eq("id",r.id);if(K)throw K;n()}catch(Z){D(Z instanceof Error?Z.message:"Failed to update game")}finally{M(!1),P(!1)}}},H=()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""}),u(null),d(null),k(null),S(null),D("")};if(!e||!r)return null;const ee=C=>{C.target===C.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:ee,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Game"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(vd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"gameName",value:s.name,onChange:C=>i({...s,name:C.target.value}),placeholder:"Enter game name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"manufacturer",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Manufacturer"}),a.jsxs("div",{className:"relative",children:[a.jsx(Cv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"manufacturer",value:s.manufacturer_id,onChange:C=>i({...s,manufacturer_id:C.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",children:[a.jsx("option",{value:"",children:"Select a manufacturer..."}),o.map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Image"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"gameImage",accept:"image/*",onChange:O,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),j&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✓ New image ready for upload"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gameIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Icon"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"gameIcon",accept:"image/*",onChange:B,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),w&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✓ New icon ready for upload"})]}),I&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:I}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:H,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:A||b,className:"btn-primary btn-flex",children:b?"Processing...":A?"Saving...":"Save Changes"})]})]})]})}),E&&a.jsx(Fr,{isOpen:m,onClose:()=>{f(!1),g(null),u(null)},onCrop:G,imageFile:E}),v&&a.jsx(Fr,{isOpen:p,onClose:()=>{y(!1),x(null),d(null)},onCrop:R,imageFile:v})]})}function xk({onBack:e}){const[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState({isOpen:!1,game:null});N.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:m,error:f}=await q.from("games").select(`
          *,
          manufacturer:manufacturers(name)
        `).order("name");if(f)throw f;n(m||[])}catch(m){o(m instanceof Error?m.message:"Failed to fetch games")}finally{s(!1)}},h=m=>{c({isOpen:!0,game:m})},d=()=>{u(),c({isOpen:!1,game:null})};return r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading games..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE GAMES"})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),a.jsx("div",{className:"space-y-4",children:t.map(m=>{var f;return a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[m.icon?a.jsx("img",{src:m.icon,alt:`${m.name} icon`,className:"w-12 h-12 object-contain rounded",onError:p=>{const y=p.target;y.style.display="none";const E=y.nextElementSibling;E&&E.classList.contains("icon-fallback")&&(E.style.display="flex")}}):null,a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:m.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:m.name.charAt(0)})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:m.name}),a.jsx("p",{className:"text-sm text-secondary-text",children:((f=m.manufacturer)==null?void 0:f.name)||"No manufacturer"})]})]}),a.jsxs("button",{onClick:()=>h(m),className:"btn-secondary-sm btn-with-icon-sm",children:[a.jsx(Xi,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]})]},m.id)})}),t.length===0&&!r&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No games found."})}),a.jsx(gk,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,game:null}),onGameUpdated:d,game:l.game})]})}function yk({isOpen:e,onClose:t,location:n}){const[r,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(null),[f,p]=N.useState({name:"",start_time:"",end_time:"",availability:[]}),[y,E]=N.useState(!1),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];N.useEffect(()=>{e&&v()},[e,n.id]);const v=async()=>{try{o(!0);const{data:b,error:P}=await q.from("timeslots").select("*").eq("location_id",n.id).order("start_time");if(P)throw P;s(b||[])}catch(b){c(b instanceof Error?b.message:"Failed to fetch timeslots")}finally{o(!1)}},x=()=>{p({name:"",start_time:"",end_time:"",availability:[]}),m(null),h(!1)},j=b=>{p({name:b.name,start_time:b.start_time,end_time:b.end_time,availability:b.availability||[]}),m(b),h(!0)},k=async b=>{if(confirm("Are you sure you want to delete this timeslot?"))try{const{error:P}=await q.from("timeslots").delete().eq("id",b);if(P)throw P;await v()}catch(P){console.error("Error deleting timeslot:",P),alert("Failed to delete timeslot")}},w=b=>{p(P=>({...P,availability:P.availability.includes(b)?P.availability.filter(I=>I!==b):[...P.availability,b]}))},S=async b=>{if(b.preventDefault(),!(!f.name.trim()||!f.start_time||!f.end_time)){E(!0),c(null);try{if(d){const{error:P}=await q.from("timeslots").update({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,availability:f.availability}).eq("id",d.id);if(P)throw P}else{const{error:P}=await q.from("timeslots").insert({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,location_id:n.id,availability:f.availability});if(P)throw P}await v(),x()}catch(P){c(P instanceof Error?P.message:"Failed to save timeslot")}finally{E(!1)}}},A=b=>new Date(`2000-01-01T${b}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(!e)return null;const M=b=>{b.target===b.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:M,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Manage Timeslots - ",n.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),l&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:l})}),!u&&a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-with-icon",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Timeslot"})]})}),u&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:d?"Edit Timeslot":"Add New Timeslot"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot Name"}),a.jsx("input",{type:"text",value:f.name,onChange:b=>p({...f,name:b.target.value}),placeholder:"e.g., Morning Session, Evening Games",className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Start Time"}),a.jsx("input",{type:"time",value:f.start_time,onChange:b=>p({...f,start_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"End Time"}),a.jsx("input",{type:"time",value:f.end_time,onChange:b=>p({...f,end_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Available Days"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:g.map(b=>a.jsx("button",{type:"button",onClick:()=>w(b),className:`px-3 py-2 rounded-lg text-sm font-overpass font-medium transition-colors ${f.availability.includes(b)?"bg-brand text-white":"bg-bg-primary border border-border-custom text-text hover:bg-bg-secondary"}`,children:b.slice(0,3)},b))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:x,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y,className:"btn-primary btn-flex",children:y?"Saving...":d?"Update Timeslot":"Add Timeslot"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Current Timeslots"}),i?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading timeslots..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Os,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No timeslots configured for this location."})]}):r.map(b=>{var P;return a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-text",children:b.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:[A(b.start_time)," - ",A(b.end_time)]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(P=b.availability)==null?void 0:P.map(I=>a.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:I.slice(0,3)},I))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(b),className:"p-2 text-secondary-text hover:text-text transition-colors",children:a.jsx(Xi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>k(b.id),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:a.jsx(Hr,{className:"w-4 h-4"})})]})]},b.id)})]})]})})}function bk({isOpen:e,onClose:t,location:n,onAdminsUpdated:r}){const[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(""),[h,d]=N.useState(!0),[m,f]=N.useState(!1),[p,y]=N.useState("");N.useEffect(()=>{e&&n&&(E(),g())},[e,n]);const E=async()=>{try{const{data:k,error:w}=await q.from("users").select("id, email").order("email");if(w)throw w;i(k||[])}catch(k){console.error("Error fetching users:",k),y("Failed to fetch users")}finally{d(!1)}},g=async()=>{if(!(n!=null&&n.admins)){l([]);return}try{const{data:k,error:w}=await q.from("users").select("id, email").in("id",n.admins).order("email");if(w)throw w;l(k||[])}catch(k){console.error("Error fetching admin users:",k)}},v=async()=>{if(!(!c.trim()||!n)){f(!0),y("");try{const k=s.find(A=>A.email.toLowerCase()===c.toLowerCase().trim());if(!k){y("User not found"),f(!1);return}if(n.admins.includes(k.id)){y("User is already an admin"),f(!1);return}const w=[...n.admins,k.id],{error:S}=await q.from("locations").update({admins:w}).eq("id",n.id);if(S)throw S;l([...o,k]),r(w),u("")}catch(k){y(k instanceof Error?k.message:"Failed to add admin")}finally{f(!1)}}},x=async k=>{if(n)try{const w=n.admins.filter(A=>A!==k),{error:S}=await q.from("locations").update({admins:w}).eq("id",n.id);if(S)throw S;l(o.filter(A=>A.id!==k)),r(w)}catch(w){y(w instanceof Error?w.message:"Failed to remove admin")}};if(!e||!n)return null;const j=k=>{k.target===k.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:j,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Edit Location Admins - ",n.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),p&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:p})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Add New Admin"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{type:"text",value:c,onChange:k=>u(k.target.value),placeholder:"Search users by email...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"})]}),a.jsxs("button",{onClick:v,disabled:!c.trim()||m,className:"btn-primary-sm btn-with-icon-sm",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:m?"Adding...":"Add"})]})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-2",children:"Enter the exact email address of the user you want to add as an admin."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Current Admins"}),h?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading admins..."})]}):o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Bi,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No admins assigned to this location."})]}):a.jsx("div",{className:"space-y-3",children:o.map(k=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border border-border-custom",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bi,{className:"w-5 h-5 text-secondary-text"}),a.jsx("span",{className:"text-text font-medium",children:k.email})]}),a.jsx("button",{onClick:()=>x(k.id),className:"p-2 text-icon hover:text-icon-hover hover:bg-red-50 rounded-lg transition-colors",title:"Remove admin",children:a.jsx(Hr,{className:"w-4 h-4"})})]},k.id))})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-border-custom",children:a.jsx("button",{onClick:t,className:"btn-primary btn-full",children:"Done"})})]})})}function vk({isOpen:e,onClose:t,onLocationUpdated:n,location:r}){const[s,i]=N.useState({name:"",address:"",icon:"",tables:1,admins:[]}),[o,l]=N.useState(null),[c,u]=N.useState(!1),[h,d]=N.useState(null),[m,f]=N.useState(null),[p,y]=N.useState(!1),[E,g]=N.useState(!1),[v,x]=N.useState(""),[j,k]=N.useState(!1),[w,S]=N.useState(!1);N.useEffect(()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]})},[r]);const A=O=>{var G;const B=(G=O.target.files)==null?void 0:G[0];if(B){if(!Rr(B)){alert("Please select a valid image file");return}l(B),d(B),u(!0)}},M=O=>{f(O),u(!1),d(null)},b=async(O,B,G)=>{const R=(o==null?void 0:o.name.split(".").pop())||"jpg",z=`${G}/${Date.now()}-${Math.random().toString(36).substring(2)}.${R}`,{data:_,error:H}=await q.storage.from(B).upload(z,O);if(H)throw H;const{data:ee}=q.storage.from(B).getPublicUrl(_.path);return ee.publicUrl},P=async O=>{if(O.preventDefault(),!!r){y(!0),x("");try{let B=s.icon;if(m){g(!0);const R=await $n(m,512,512,.9);B=await b(R,"location-assets","icons")}const{error:G}=await q.from("locations").update({name:s.name,address:s.address,icon:B,tables:s.tables,admins:s.admins}).eq("id",r.id);if(G)throw G;n()}catch(B){x(B instanceof Error?B.message:"Failed to update location")}finally{y(!1),g(!1)}}},I=()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]}),l(null),f(null),x("")},D=O=>{i(B=>({...B,admins:O}))};if(!e||!r)return null;const $=O=>{O.target===O.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:$,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Location"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:P,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"locationName",value:s.name,onChange:O=>i({...s,name:O.target.value}),placeholder:"Enter location name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(Iv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"address",value:s.address,onChange:O=>i({...s,address:O.target.value}),placeholder:"Enter full address...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tables",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Tables"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"number",id:"tables",value:s.tables,onChange:O=>i({...s,tables:parseInt(O.target.value)||0}),min:"1",placeholder:"Enter number of tables...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"locationIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Icon"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"locationIcon",accept:"image/*",onChange:A,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),m&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✓ New icon ready for upload"})]}),v&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:v}),a.jsxs("div",{className:"space-y-3 pt-4",children:[a.jsxs("button",{type:"button",onClick:()=>k(!0),className:"btn-secondary btn-with-icon",children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Timeslots"})]}),a.jsxs("button",{type:"button",onClick:()=>S(!0),className:"btn-secondary btn-with-icon",children:[a.jsx(Bi,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Admins"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:I,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:p||E,className:"btn-primary btn-flex",children:E?"Processing...":p?"Saving...":"Save Changes"})]})]})]})]})}),h&&a.jsx(Fr,{isOpen:c,onClose:()=>{u(!1),d(null),l(null)},onCrop:M,imageFile:h}),a.jsx(yk,{isOpen:j,onClose:()=>k(!1),location:r}),a.jsx(bk,{isOpen:w,onClose:()=>S(!1),location:r,onAdminsUpdated:D})]})}function wk({onBack:e,isLocationAdmin:t=!1}){const[n,r]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(null),{user:c}=Ye(),[u,h]=N.useState({isOpen:!1,location:null});N.useEffect(()=>{d()},[]);const d=async()=>{try{let p=q.from("locations").select("*").order("name");t&&!(c!=null&&c.is_admin)&&(c!=null&&c.id)&&(p=p.contains("admins",[c.id]));const{data:y,error:E}=await p;if(E)throw E;r(y||[])}catch(p){l(p instanceof Error?p.message:"Failed to fetch locations")}finally{i(!1)}},m=p=>{h({isOpen:!0,location:p})},f=()=>{d(),h({isOpen:!1,location:null})};return s?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading locations..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE LOCATIONS"})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:o})}),a.jsx("div",{className:"space-y-4",children:n.map(p=>a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[p.icon?a.jsx("img",{src:p.icon,alt:`${p.name} icon`,className:"w-12 h-12 object-contain rounded",onError:y=>{const E=y.target;E.style.display="none";const g=E.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="flex")}}):null,a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center icon-fallback",style:{display:p.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:p.name.charAt(0)})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:p.name}),a.jsx("p",{className:"text-sm text-secondary-text truncate",children:p.address}),a.jsxs("p",{className:"text-xs text-secondary-text",children:[p.tables," table",p.tables!==1?"s":""]})]})]}),a.jsxs("button",{onClick:()=>m(p),className:"btn-secondary-sm btn-with-icon-sm",children:[a.jsx(Xi,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]})]},p.id))}),n.length===0&&!s&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text",children:"No locations found."})}),a.jsx(vk,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,location:null}),onLocationUpdated:f,location:u.location})]})}function Dx(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=Ye();N.useEffect(()=>{if(!o){t([]),r(!1);return}l()},[o]);const l=async()=>{try{const{data:c,error:u}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          painted_date,
          purchase_date,
          created_at,
          lore_name,
          lore_description,
          painting_notes,
          box:boxes(
            id,
            name,
            purchase_date,
            game:games(id, name, icon, image)
          ),
          game:games(id, name, icon, image)
        `).eq("user_id",o==null?void 0:o.id).order("created_at",{ascending:!1});if(u)throw u;const h=(c||[]).map(d=>({...d,box:d.box&&Array.isArray(d.box)?d.box[0]:d.box,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch models")}finally{r(!1)}};return{models:e,loading:n,error:s,refetch:l}}function Ox(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=Ye();N.useEffect(()=>{if(!o){t([]),r(!1);return}l()},[o]);const l=async()=>{try{if(!(o!=null&&o.id)){t([]);return}const{data:c,error:u}=await q.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(id, name, icon, image)
        `).eq("user_id",o.id).order("created_at",{ascending:!1}).limit(10);if(u)throw u;const h=(c||[]).map(m=>({...m,game:m.game&&Array.isArray(m.game)?m.game[0]:m.game})),d=await Promise.all(h.map(async m=>{const{data:f,error:p}=await q.from("models").select("count").eq("box_id",m.id);if(p)return console.error(`Error fetching models for box ${m.id}:`,p),{...m,models_count:0};const y=(f||[]).reduce((E,g)=>E+(g.count||0),0);return{...m,models_count:y}}));t(d)}catch(c){i(c instanceof Error?c.message:"Failed to fetch boxes")}finally{r(!1)}};return{boxes:e,loading:n,error:s,refetch:l}}function kk(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const jk=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Nk=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Sk={};function zf(e,t){return(Sk.jsx?Nk:jk).test(e)}const _k=/[ \t\n\f\r]/g;function Ck(e){return typeof e=="object"?e.type==="text"?Bf(e.value):!1:Bf(e)}function Bf(e){return e.replace(_k,"")===""}class ra{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ra.prototype.normal={};ra.prototype.property={};ra.prototype.space=void 0;function Rx(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new ra(n,r,t)}function du(e){return e.toLowerCase()}class Ot{constructor(t,n){this.attribute=n,this.property=t}}Ot.prototype.attribute="";Ot.prototype.booleanish=!1;Ot.prototype.boolean=!1;Ot.prototype.commaOrSpaceSeparated=!1;Ot.prototype.commaSeparated=!1;Ot.prototype.defined=!1;Ot.prototype.mustUseProperty=!1;Ot.prototype.number=!1;Ot.prototype.overloadedBoolean=!1;Ot.prototype.property="";Ot.prototype.spaceSeparated=!1;Ot.prototype.space=void 0;let Ek=0;const ye=Gr(),Qe=Gr(),hu=Gr(),J=Gr(),Fe=Gr(),ks=Gr(),Rt=Gr();function Gr(){return 2**++Ek}const fu=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:Qe,commaOrSpaceSeparated:Rt,commaSeparated:ks,number:J,overloadedBoolean:hu,spaceSeparated:Fe},Symbol.toStringTag,{value:"Module"})),Bl=Object.keys(fu);class Pd extends Ot{constructor(t,n,r,s){let i=-1;if(super(t,n),Uf(this,"space",s),typeof r=="number")for(;++i<Bl.length;){const o=Bl[i];Uf(this,Bl[i],(r&fu[o])===fu[o])}}}Pd.prototype.defined=!0;function Uf(e,t,n){n&&(e[t]=n)}function $s(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Pd(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[du(r)]=r,n[du(i.attribute)]=r}return new ra(t,n,e.space)}const Fx=$s({properties:{ariaActiveDescendant:null,ariaAtomic:Qe,ariaAutoComplete:null,ariaBusy:Qe,ariaChecked:Qe,ariaColCount:J,ariaColIndex:J,ariaColSpan:J,ariaControls:Fe,ariaCurrent:null,ariaDescribedBy:Fe,ariaDetails:null,ariaDisabled:Qe,ariaDropEffect:Fe,ariaErrorMessage:null,ariaExpanded:Qe,ariaFlowTo:Fe,ariaGrabbed:Qe,ariaHasPopup:null,ariaHidden:Qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Fe,ariaLevel:J,ariaLive:null,ariaModal:Qe,ariaMultiLine:Qe,ariaMultiSelectable:Qe,ariaOrientation:null,ariaOwns:Fe,ariaPlaceholder:null,ariaPosInSet:J,ariaPressed:Qe,ariaReadOnly:Qe,ariaRelevant:null,ariaRequired:Qe,ariaRoleDescription:Fe,ariaRowCount:J,ariaRowIndex:J,ariaRowSpan:J,ariaSelected:Qe,ariaSetSize:J,ariaSort:null,ariaValueMax:J,ariaValueMin:J,ariaValueNow:J,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function $x(e,t){return t in e?e[t]:t}function zx(e,t){return $x(e,t.toLowerCase())}const Pk=$s({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ks,acceptCharset:Fe,accessKey:Fe,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:Fe,autoFocus:ye,autoPlay:ye,blocking:Fe,capture:null,charSet:null,checked:ye,cite:null,className:Fe,cols:J,colSpan:null,content:null,contentEditable:Qe,controls:ye,controlsList:Fe,coords:J|ks,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:hu,draggable:Qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:Fe,height:J,hidden:hu,high:J,href:null,hrefLang:null,htmlFor:Fe,httpEquiv:Fe,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:Fe,itemRef:Fe,itemScope:ye,itemType:Fe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:J,manifest:null,max:null,maxLength:J,media:null,method:null,min:null,minLength:J,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:J,pattern:null,ping:Fe,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:Fe,required:ye,reversed:ye,rows:J,rowSpan:J,sandbox:Fe,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:J,sizes:null,slot:null,span:J,spellCheck:Qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:J,step:null,style:null,tabIndex:J,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:Qe,width:J,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Fe,axis:null,background:null,bgColor:null,border:J,borderColor:null,bottomMargin:J,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:J,leftMargin:J,link:null,longDesc:null,lowSrc:null,marginHeight:J,marginWidth:J,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:J,rules:null,scheme:null,scrolling:Qe,standby:null,summary:null,text:null,topMargin:J,valueType:null,version:null,vAlign:null,vLink:null,vSpace:J,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:J,security:null,unselectable:null},space:"html",transform:zx}),Tk=$s({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Rt,accentHeight:J,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:J,amplitude:J,arabicForm:null,ascent:J,attributeName:null,attributeType:null,azimuth:J,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:J,by:null,calcMode:null,capHeight:J,className:Fe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:J,diffuseConstant:J,direction:null,display:null,dur:null,divisor:J,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:J,enableBackground:null,end:null,event:null,exponent:J,externalResourcesRequired:null,fill:null,fillOpacity:J,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ks,g2:ks,glyphName:ks,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:J,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:J,horizOriginX:J,horizOriginY:J,id:null,ideographic:J,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:J,k:J,k1:J,k2:J,k3:J,k4:J,kernelMatrix:Rt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:J,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:J,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:J,overlineThickness:J,paintOrder:null,panose1:null,path:null,pathLength:J,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Fe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:J,pointsAtY:J,pointsAtZ:J,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rt,rev:Rt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rt,requiredFeatures:Rt,requiredFonts:Rt,requiredFormats:Rt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:J,specularExponent:J,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:J,strikethroughThickness:J,string:null,stroke:null,strokeDashArray:Rt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:J,strokeOpacity:J,strokeWidth:null,style:null,surfaceScale:J,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rt,tabIndex:J,tableValues:null,target:null,targetX:J,targetY:J,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:J,underlineThickness:J,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:J,values:null,vAlphabetic:J,vMathematical:J,vectorEffect:null,vHanging:J,vIdeographic:J,version:null,vertAdvY:J,vertOriginX:J,vertOriginY:J,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:J,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$x}),Bx=$s({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ux=$s({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:zx}),Hx=$s({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Ik={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ak=/[A-Z]/g,Hf=/-[a-z]/g,Mk=/^data[-\w.:]+$/i;function Lk(e,t){const n=du(t);let r=t,s=Ot;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Mk.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Hf,Ok);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Hf.test(i)){let o=i.replace(Ak,Dk);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Pd}return new s(r,t)}function Dk(e){return"-"+e.toLowerCase()}function Ok(e){return e.charAt(1).toUpperCase()}const Rk=Rx([Fx,Pk,Bx,Ux,Hx],"html"),Td=Rx([Fx,Tk,Bx,Ux,Hx],"svg");function Fk(e){return e.join(" ").trim()}var Id={},qf=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$k=/\n/g,zk=/^\s*/,Bk=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Uk=/^:\s*/,Hk=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,qk=/^[;\s]*/,Gk=/^\s+|\s+$/g,Wk=`
`,Gf="/",Wf="*",Nr="",Vk="comment",Kk="declaration",Yk=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(p){var y=p.match($k);y&&(n+=y.length);var E=p.lastIndexOf(Wk);r=~E?p.length-E:r+p.length}function i(){var p={line:n,column:r};return function(y){return y.position=new o(p),u(),y}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(p){var y=new Error(t.source+":"+n+":"+r+": "+p);if(y.reason=p,y.filename=t.source,y.line=n,y.column=r,y.source=e,!t.silent)throw y}function c(p){var y=p.exec(e);if(y){var E=y[0];return s(E),e=e.slice(E.length),y}}function u(){c(zk)}function h(p){var y;for(p=p||[];y=d();)y!==!1&&p.push(y);return p}function d(){var p=i();if(!(Gf!=e.charAt(0)||Wf!=e.charAt(1))){for(var y=2;Nr!=e.charAt(y)&&(Wf!=e.charAt(y)||Gf!=e.charAt(y+1));)++y;if(y+=2,Nr===e.charAt(y-1))return l("End of comment missing");var E=e.slice(2,y-2);return r+=2,s(E),e=e.slice(y),r+=2,p({type:Vk,comment:E})}}function m(){var p=i(),y=c(Bk);if(y){if(d(),!c(Uk))return l("property missing ':'");var E=c(Hk),g=p({type:Kk,property:Vf(y[0].replace(qf,Nr)),value:E?Vf(E[0].replace(qf,Nr)):Nr});return c(qk),g}}function f(){var p=[];h(p);for(var y;y=m();)y!==!1&&(p.push(y),h(p));return p}return u(),f()};function Vf(e){return e?e.replace(Gk,Nr):Nr}var Jk=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Id,"__esModule",{value:!0});Id.default=Xk;var Qk=Jk(Yk);function Xk(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Qk.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(n=n||{},n[o]=l)}}),n}var el={};Object.defineProperty(el,"__esModule",{value:!0});el.camelCase=void 0;var Zk=/^--[a-zA-Z0-9_-]+$/,ej=/-([a-z])/g,tj=/^[^-]+$/,nj=/^-(webkit|moz|ms|o|khtml)-/,rj=/^-(ms)-/,sj=function(e){return!e||tj.test(e)||Zk.test(e)},ij=function(e,t){return t.toUpperCase()},Kf=function(e,t){return"".concat(t,"-")},aj=function(e,t){return t===void 0&&(t={}),sj(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(rj,Kf):e=e.replace(nj,Kf),e.replace(ej,ij))};el.camelCase=aj;var oj=bt&&bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},lj=oj(Id),cj=el;function mu(e,t){var n={};return!e||typeof e!="string"||(0,lj.default)(e,function(r,s){r&&s&&(n[(0,cj.camelCase)(r,t)]=s)}),n}mu.default=mu;var uj=mu;const dj=Su(uj),qx=Gx("end"),Ad=Gx("start");function Gx(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hj(e){const t=Ad(e),n=qx(e);if(t&&n)return{start:t,end:n}}function bi(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Yf(e.position):"start"in e||"end"in e?Yf(e):"line"in e||"column"in e?pu(e):""}function pu(e){return Jf(e&&e.line)+":"+Jf(e&&e.column)}function Yf(e){return pu(e&&e.start)+"-"+pu(e&&e.end)}function Jf(e){return e&&typeof e=="number"?e:1}class wt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(o=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=bi(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}wt.prototype.file="";wt.prototype.name="";wt.prototype.reason="";wt.prototype.message="";wt.prototype.stack="";wt.prototype.column=void 0;wt.prototype.line=void 0;wt.prototype.ancestors=void 0;wt.prototype.cause=void 0;wt.prototype.fatal=void 0;wt.prototype.place=void 0;wt.prototype.ruleId=void 0;wt.prototype.source=void 0;const Md={}.hasOwnProperty,fj=new Map,mj=/[A-Z]/g,pj=new Set(["table","tbody","thead","tfoot","tr"]),gj=new Set(["td","th"]),Wx="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xj(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Sj(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Nj(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Td:Rk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Vx(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Vx(e,t,n){if(t.type==="element")return yj(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return bj(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return wj(e,t,n);if(t.type==="mdxjsEsm")return vj(e,t);if(t.type==="root")return kj(e,t,n);if(t.type==="text")return jj(e,t)}function yj(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Td,e.schema=s),e.ancestors.push(t);const i=Yx(e,t.tagName,!1),o=_j(e,t);let l=Dd(e,t);return pj.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Ck(c):!0})),Kx(e,o,i,t),Ld(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function bj(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}qi(e,t.position)}function vj(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);qi(e,t.position)}function wj(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Td,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Yx(e,t.name,!0),o=Cj(e,t),l=Dd(e,t);return Kx(e,o,i,t),Ld(o,l),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function kj(e,t,n){const r={};return Ld(r,Dd(e,t)),e.create(t,e.Fragment,r,n)}function jj(e,t){return t.value}function Kx(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Ld(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Nj(e,t,n){return r;function r(s,i,o,l){const u=Array.isArray(o.children)?n:t;return l?u(i,o,l):u(i,o)}}function Sj(e,t){return n;function n(r,s,i,o){const l=Array.isArray(i.children),c=Ad(r);return t(s,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function _j(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&Md.call(t.properties,s)){const i=Ej(e,s,t.properties[s]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&gj.has(t.tagName)?r=l:n[o]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Cj(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else qi(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else qi(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function Dd(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:fj;for(;++r<t.children.length;){const i=t.children[r];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=Vx(e,i,o);l!==void 0&&n.push(l)}return n}function Ej(e,t,n){const r=Lk(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?kk(n):Fk(n)),r.property==="style"){let s=typeof n=="object"?n:Pj(e,String(n));return e.stylePropertyNameCase==="css"&&(s=Tj(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?Ik[r.property]||r.property:r.attribute,n]}}function Pj(e,t){try{return dj(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new wt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Wx+"#cannot-parse-style-attribute",s}}function Yx(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,o;for(;++i<s.length;){const l=zf(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=o}else r=zf(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return Md.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);qi(e)}function qi(e,t){const n=new wt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Wx+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Tj(e){const t={};let n;for(n in e)Md.call(e,n)&&(t[Ij(n)]=e[n]);return t}function Ij(e){let t=e.replace(mj,Aj);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Aj(e){return"-"+e.toLowerCase()}const Ul={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Mj={};function Od(e,t){const n=Mj,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jx(e,r,s)}function Jx(e,t,n){if(Lj(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Qf(e.children,t,n)}return Array.isArray(e)?Qf(e,t,n):""}function Qf(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Jx(e[s],t,n);return r.join("")}function Lj(e){return!!(e&&typeof e=="object")}const Xf=document.createElement("i");function Rd(e){const t="&"+e+";";Xf.innerHTML=t;const n=Xf.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Bt(e,t,n,r){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Jt(e,t){return e.length>0?(Bt(e,e.length,0,t),e):t}const Zf={}.hasOwnProperty;function Qx(e){const t={};let n=-1;for(;++n<e.length;)Dj(t,e[n]);return t}function Dj(e,t){let n;for(n in t){const s=(Zf.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Zf.call(s,o)||(s[o]=[]);const l=i[o];Oj(s[o],Array.isArray(l)?l:l?[l]:[])}}}function Oj(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Bt(e,0,0,r)}function Xx(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function mn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Nt=pr(/[A-Za-z]/),yt=pr(/[\dA-Za-z]/),Rj=pr(/[#-'*+\--9=?A-Z^-~]/);function jo(e){return e!==null&&(e<32||e===127)}const gu=pr(/\d/),Fj=pr(/[\dA-Fa-f]/),$j=pr(/[!-/:-@[-`{-~]/);function ce(e){return e!==null&&e<-2}function Oe(e){return e!==null&&(e<0||e===32)}function Ne(e){return e===-2||e===-1||e===32}const tl=pr(new RegExp("\\p{P}|\\p{S}","u")),$r=pr(/\s/);function pr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function zs(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&yt(e.charCodeAt(n+1))&&yt(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),s=1):o="�"}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ce(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return Ne(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ne(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const zj={tokenize:Bj};function Bj(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ce(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return ce(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const Uj={tokenize:Hj},em={tokenize:qj};function Hj(e){const t=this,n=[];let r=0,s,i,o;return l;function l(x){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(x)}return u(x)}function c(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const j=t.events.length;let k=j,w;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){w=t.events[k][1].end;break}g(r);let S=j;for(;S<t.events.length;)t.events[S][1].end={...w},S++;return Bt(t.events,k+1,0,t.events.slice(j)),t.events.length=S,u(x)}return l(x)}function u(x){if(r===n.length){if(!s)return m(x);if(s.currentConstruct&&s.currentConstruct.concrete)return p(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(em,h,d)(x)}function h(x){return s&&v(),g(r),m(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function m(x){return t.containerState={},e.attempt(em,f,p)(x)}function f(x){return r++,n.push([t.currentConstruct,t.containerState]),m(x)}function p(x){if(x===null){s&&v(),g(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),y(x)}function y(x){if(x===null){E(e.exit("chunkFlow"),!0),g(0),e.consume(x);return}return ce(x)?(e.consume(x),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(x),y)}function E(x,j){const k=t.sliceStream(x);if(j&&k.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(k),t.parser.lazy[x.start.line]){let w=s.events.length;for(;w--;)if(s.events[w][1].start.offset<o&&(!s.events[w][1].end||s.events[w][1].end.offset>o))return;const S=t.events.length;let A=S,M,b;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(M){b=t.events[A][1].end;break}M=!0}for(g(r),w=S;w<t.events.length;)t.events[w][1].end={...b},w++;Bt(t.events,A+1,0,t.events.slice(S)),t.events.length=w}}function g(x){let j=n.length;for(;j-- >x;){const k=n[j];t.containerState=k[1],k[0].exit.call(t,e)}n.length=x}function v(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function qj(e,t,n){return Ce(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Is(e){if(e===null||Oe(e)||$r(e))return 1;if(tl(e))return 2}function nl(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const xu={name:"attention",resolveAll:Gj,tokenize:Wj};function Gj(e,t){let n=-1,r,s,i,o,l,c,u,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},m={...e[n][1].start};tm(d,-c),tm(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Jt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Jt(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=Jt(u,nl(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Jt(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,u=Jt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Bt(e,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Wj(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Is(r);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),h=Is(c),d=!h||h===2&&s||n.includes(c),m=!s||s===2&&h||n.includes(r);return u._open=!!(i===42?d:d&&(s||!m)),u._close=!!(i===42?m:m&&(h||!d)),t(c)}}function tm(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Vj={name:"autolink",tokenize:Kj};function Kj(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Nt(f)?(e.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||yt(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||yt(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||jo(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),h):Rj(f)?(e.consume(f),u):n(f)}function h(f){return yt(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,h):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||yt(f))&&r++<63){const p=f===45?m:d;return e.consume(f),p}return n(f)}}const sa={partial:!0,tokenize:Yj};function Yj(e,t,n){return r;function r(i){return Ne(i)?Ce(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||ce(i)?t(i):n(i)}}const Zx={continuation:{tokenize:Qj},exit:Xj,name:"blockQuote",tokenize:Jj};function Jj(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return Ne(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Qj(e,t,n){const r=this;return s;function s(o){return Ne(o)?Ce(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(Zx,t,n)(o)}}function Xj(e){e.exit("blockQuote")}const ey={name:"characterEscape",tokenize:Zj};function Zj(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return $j(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const ty={name:"characterReference",tokenize:eN};function eN(e,t,n){const r=this;let s=0,i,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=yt,h(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Fj,h):(e.enter("characterReferenceValue"),i=7,o=gu,h(d))}function h(d){if(d===59&&s){const m=e.exit("characterReferenceValue");return o===yt&&!Rd(r.sliceSerialize(m))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&s++<i?(e.consume(d),h):n(d)}}const nm={partial:!0,tokenize:nN},rm={concrete:!0,name:"codeFenced",tokenize:tN};function tN(e,t,n){const r=this,s={partial:!0,tokenize:k};let i=0,o=0,l;return c;function c(w){return u(w)}function u(w){const S=r.events[r.events.length-1];return i=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(w)}function h(w){return w===l?(o++,e.consume(w),h):o<3?n(w):(e.exit("codeFencedFenceSequence"),Ne(w)?Ce(e,d,"whitespace")(w):d(w))}function d(w){return w===null||ce(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(nm,y,j)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||ce(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):Ne(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ce(e,f,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),m)}function f(w){return w===null||ce(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||ce(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===l?n(w):(e.consume(w),p)}function y(w){return e.attempt(s,j,E)(w)}function E(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),g}function g(w){return i>0&&Ne(w)?Ce(e,v,"linePrefix",i+1)(w):v(w)}function v(w){return w===null||ce(w)?e.check(nm,y,j)(w):(e.enter("codeFlowValue"),x(w))}function x(w){return w===null||ce(w)?(e.exit("codeFlowValue"),v(w)):(e.consume(w),x)}function j(w){return e.exit("codeFenced"),t(w)}function k(w,S,A){let M=0;return b;function b(O){return w.enter("lineEnding"),w.consume(O),w.exit("lineEnding"),P}function P(O){return w.enter("codeFencedFence"),Ne(O)?Ce(w,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):I(O)}function I(O){return O===l?(w.enter("codeFencedFenceSequence"),D(O)):A(O)}function D(O){return O===l?(M++,w.consume(O),D):M>=o?(w.exit("codeFencedFenceSequence"),Ne(O)?Ce(w,$,"whitespace")(O):$(O)):A(O)}function $(O){return O===null||ce(O)?(w.exit("codeFencedFence"),S(O)):A(O)}}}function nN(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Hl={name:"codeIndented",tokenize:sN},rN={partial:!0,tokenize:iN};function sN(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ce(e,i,"linePrefix",5)(u)}function i(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):ce(u)?e.attempt(rN,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||ce(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function iN(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):ce(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ce(e,i,"linePrefix",5)(o)}function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):ce(o)?s(o):n(o)}}const aN={name:"codeText",previous:lN,resolve:oN,tokenize:cN};function oN(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function lN(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cN(e,t,n){let r=0,s,i;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(i=e.enter("codeTextSequence"),s=0,h(d)):ce(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||ce(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function h(d){return d===96?(e.consume(d),s++,h):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",u(d))}}class uN{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Qs(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Qs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Qs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Qs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Qs(this.left,n.reverse())}}}function Qs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ny(e){const t={};let n=-1,r,s,i,o,l,c,u;const h=new uN(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,dN(h,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(o=h.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(h.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...h.get(s)[1].start},l=h.slice(s,n),l.unshift(r),h.splice(s,n-s+1,l))}}return Bt(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function dN(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let h,d,m=-1,f=n,p=0,y=0;const E=[y];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(h=r.sliceStream(f),f.next||h.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(y=m+1,E.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):E.pop(),m=E.length;m--;){const g=l.slice(E[m],E[m+1]),v=i.pop();c.push([v,v+g.length-1]),e.splice(v,2,g)}for(c.reverse(),m=-1;++m<c.length;)u[p+c[m][0]]=p+c[m][1],p+=c[m][1]-c[m][0]-1;return u}const hN={resolve:mN,tokenize:pN},fN={partial:!0,tokenize:gN};function mN(e){return ny(e),e}function pN(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):ce(l)?e.check(fN,o,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function gN(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ce(e,i,"linePrefix")}function i(o){if(o===null||ce(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function ry(e,t,n,r,s,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let h=0;return d;function d(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),m):g===null||g===32||g===41||jo(g)?n(g):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(g))}function m(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(l),m(g)):g===null||g===60||ce(g)?n(g):(e.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function y(g){return!h&&(g===null||g===41||Oe(g))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(g)):h<u&&g===40?(e.consume(g),h++,y):g===41?(e.consume(g),h--,y):g===null||g===32||g===40||jo(g)?n(g):(e.consume(g),g===92?E:y)}function E(g){return g===40||g===41||g===92?(e.consume(g),y):y(g)}}function sy(e,t,n,r,s,i){const o=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),h}function h(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):ce(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||ce(f)||l++>999?(e.exit("chunkString"),h(f)):(e.consume(f),c||(c=!Ne(f)),f===92?m:d)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,d):d(f)}}function iy(e,t,n,r,s,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(i),u(m))}function u(m){return m===o?(e.exit(i),c(o)):m===null?n(m):ce(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Ce(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===o||m===null||ce(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?d:h)}function d(m){return m===o||m===92?(e.consume(m),h):h(m)}}function vi(e,t){let n;return r;function r(s){return ce(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ne(s)?Ce(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const xN={name:"definition",tokenize:bN},yN={partial:!0,tokenize:vN};function bN(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),o(f)}function o(f){return sy.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=mn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Oe(f)?vi(e,u)(f):u(f)}function u(f){return ry(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function h(f){return e.attempt(yN,d,d)(f)}function d(f){return Ne(f)?Ce(e,m,"whitespace")(f):m(f)}function m(f){return f===null||ce(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function vN(e,t,n){return r;function r(l){return Oe(l)?vi(e,s)(l):n(l)}function s(l){return iy(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Ne(l)?Ce(e,o,"whitespace")(l):o(l)}function o(l){return l===null||ce(l)?t(l):n(l)}}const wN={name:"hardBreakEscape",tokenize:kN};function kN(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return ce(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const jN={name:"headingAtx",resolve:NN,tokenize:SN};function NN(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Bt(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function SN(e,t,n){let r=0;return s;function s(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(e.consume(h),o):h===null||Oe(h)?(e.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||ce(h)?(e.exit("atxHeading"),t(h)):Ne(h)?Ce(e,l,"whitespace")(h):(e.enter("atxHeadingText"),u(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),l(h))}function u(h){return h===null||h===35||Oe(h)?(e.exit("atxHeadingText"),l(h)):(e.consume(h),u)}}const _N=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sm=["pre","script","style","textarea"],CN={concrete:!0,name:"htmlFlow",resolveTo:TN,tokenize:IN},EN={partial:!0,tokenize:MN},PN={partial:!0,tokenize:AN};function TN(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function IN(e,t,n){const r=this;let s,i,o,l,c;return u;function u(C){return h(C)}function h(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),d}function d(C){return C===33?(e.consume(C),m):C===47?(e.consume(C),i=!0,y):C===63?(e.consume(C),s=3,r.interrupt?t:_):Nt(C)?(e.consume(C),o=String.fromCharCode(C),E):n(C)}function m(C){return C===45?(e.consume(C),s=2,f):C===91?(e.consume(C),s=5,l=0,p):Nt(C)?(e.consume(C),s=4,r.interrupt?t:_):n(C)}function f(C){return C===45?(e.consume(C),r.interrupt?t:_):n(C)}function p(C){const Z="CDATA[";return C===Z.charCodeAt(l++)?(e.consume(C),l===Z.length?r.interrupt?t:I:p):n(C)}function y(C){return Nt(C)?(e.consume(C),o=String.fromCharCode(C),E):n(C)}function E(C){if(C===null||C===47||C===62||Oe(C)){const Z=C===47,ne=o.toLowerCase();return!Z&&!i&&sm.includes(ne)?(s=1,r.interrupt?t(C):I(C)):_N.includes(o.toLowerCase())?(s=6,Z?(e.consume(C),g):r.interrupt?t(C):I(C)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(C):i?v(C):x(C))}return C===45||yt(C)?(e.consume(C),o+=String.fromCharCode(C),E):n(C)}function g(C){return C===62?(e.consume(C),r.interrupt?t:I):n(C)}function v(C){return Ne(C)?(e.consume(C),v):b(C)}function x(C){return C===47?(e.consume(C),b):C===58||C===95||Nt(C)?(e.consume(C),j):Ne(C)?(e.consume(C),x):b(C)}function j(C){return C===45||C===46||C===58||C===95||yt(C)?(e.consume(C),j):k(C)}function k(C){return C===61?(e.consume(C),w):Ne(C)?(e.consume(C),k):x(C)}function w(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),c=C,S):Ne(C)?(e.consume(C),w):A(C)}function S(C){return C===c?(e.consume(C),c=null,M):C===null||ce(C)?n(C):(e.consume(C),S)}function A(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||Oe(C)?k(C):(e.consume(C),A)}function M(C){return C===47||C===62||Ne(C)?x(C):n(C)}function b(C){return C===62?(e.consume(C),P):n(C)}function P(C){return C===null||ce(C)?I(C):Ne(C)?(e.consume(C),P):n(C)}function I(C){return C===45&&s===2?(e.consume(C),B):C===60&&s===1?(e.consume(C),G):C===62&&s===4?(e.consume(C),H):C===63&&s===3?(e.consume(C),_):C===93&&s===5?(e.consume(C),z):ce(C)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(EN,ee,D)(C)):C===null||ce(C)?(e.exit("htmlFlowData"),D(C)):(e.consume(C),I)}function D(C){return e.check(PN,$,ee)(C)}function $(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),O}function O(C){return C===null||ce(C)?D(C):(e.enter("htmlFlowData"),I(C))}function B(C){return C===45?(e.consume(C),_):I(C)}function G(C){return C===47?(e.consume(C),o="",R):I(C)}function R(C){if(C===62){const Z=o.toLowerCase();return sm.includes(Z)?(e.consume(C),H):I(C)}return Nt(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),R):I(C)}function z(C){return C===93?(e.consume(C),_):I(C)}function _(C){return C===62?(e.consume(C),H):C===45&&s===2?(e.consume(C),_):I(C)}function H(C){return C===null||ce(C)?(e.exit("htmlFlowData"),ee(C)):(e.consume(C),H)}function ee(C){return e.exit("htmlFlow"),t(C)}}function AN(e,t,n){const r=this;return s;function s(o){return ce(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function MN(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(sa,t,n)}}const LN={name:"htmlText",tokenize:DN};function DN(e,t,n){const r=this;let s,i,o;return l;function l(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),c}function c(_){return _===33?(e.consume(_),u):_===47?(e.consume(_),k):_===63?(e.consume(_),x):Nt(_)?(e.consume(_),A):n(_)}function u(_){return _===45?(e.consume(_),h):_===91?(e.consume(_),i=0,p):Nt(_)?(e.consume(_),v):n(_)}function h(_){return _===45?(e.consume(_),f):n(_)}function d(_){return _===null?n(_):_===45?(e.consume(_),m):ce(_)?(o=d,G(_)):(e.consume(_),d)}function m(_){return _===45?(e.consume(_),f):d(_)}function f(_){return _===62?B(_):_===45?m(_):d(_)}function p(_){const H="CDATA[";return _===H.charCodeAt(i++)?(e.consume(_),i===H.length?y:p):n(_)}function y(_){return _===null?n(_):_===93?(e.consume(_),E):ce(_)?(o=y,G(_)):(e.consume(_),y)}function E(_){return _===93?(e.consume(_),g):y(_)}function g(_){return _===62?B(_):_===93?(e.consume(_),g):y(_)}function v(_){return _===null||_===62?B(_):ce(_)?(o=v,G(_)):(e.consume(_),v)}function x(_){return _===null?n(_):_===63?(e.consume(_),j):ce(_)?(o=x,G(_)):(e.consume(_),x)}function j(_){return _===62?B(_):x(_)}function k(_){return Nt(_)?(e.consume(_),w):n(_)}function w(_){return _===45||yt(_)?(e.consume(_),w):S(_)}function S(_){return ce(_)?(o=S,G(_)):Ne(_)?(e.consume(_),S):B(_)}function A(_){return _===45||yt(_)?(e.consume(_),A):_===47||_===62||Oe(_)?M(_):n(_)}function M(_){return _===47?(e.consume(_),B):_===58||_===95||Nt(_)?(e.consume(_),b):ce(_)?(o=M,G(_)):Ne(_)?(e.consume(_),M):B(_)}function b(_){return _===45||_===46||_===58||_===95||yt(_)?(e.consume(_),b):P(_)}function P(_){return _===61?(e.consume(_),I):ce(_)?(o=P,G(_)):Ne(_)?(e.consume(_),P):M(_)}function I(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),s=_,D):ce(_)?(o=I,G(_)):Ne(_)?(e.consume(_),I):(e.consume(_),$)}function D(_){return _===s?(e.consume(_),s=void 0,O):_===null?n(_):ce(_)?(o=D,G(_)):(e.consume(_),D)}function $(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||Oe(_)?M(_):(e.consume(_),$)}function O(_){return _===47||_===62||Oe(_)?M(_):n(_)}function B(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):n(_)}function G(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),R}function R(_){return Ne(_)?Ce(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):z(_)}function z(_){return e.enter("htmlTextData"),o(_)}}const Fd={name:"labelEnd",resolveAll:$N,resolveTo:zN,tokenize:BN},ON={tokenize:UN},RN={tokenize:HN},FN={tokenize:qN};function $N(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Bt(e,0,e.length,n),e}function zN(e,t){let n=e.length,r=0,s,i,o,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Jt(l,e.slice(i+1,i+r+3)),l=Jt(l,[["enter",h,t]]),l=Jt(l,nl(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),l=Jt(l,[["exit",h,t],e[o-2],e[o-1],["exit",u,t]]),l=Jt(l,e.slice(o+1)),l=Jt(l,[["exit",c,t]]),Bt(e,i,e.length,l),e}function BN(e,t,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(m){return i?i._inactive?d(m):(o=r.parser.defined.includes(mn(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(ON,h,o?h:d)(m):m===91?e.attempt(RN,h,o?u:d)(m):o?h(m):d(m)}function u(m){return e.attempt(FN,h,d)(m)}function h(m){return t(m)}function d(m){return i._balanced=!0,n(m)}}function UN(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),s}function s(d){return Oe(d)?vi(e,i)(d):i(d)}function i(d){return d===41?h(d):ry(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Oe(d)?vi(e,c)(d):h(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?iy(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):h(d)}function u(d){return Oe(d)?vi(e,h)(d):h(d)}function h(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function HN(e,t,n){const r=this;return s;function s(l){return sy.call(r,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(mn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function qN(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const GN={name:"labelStartImage",resolveAll:Fd.resolveAll,tokenize:WN};function WN(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const VN={name:"labelStartLink",resolveAll:Fd.resolveAll,tokenize:KN};function KN(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const ql={name:"lineEnding",tokenize:YN};function YN(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ce(e,t,"linePrefix")}}const Ga={name:"thematicBreak",tokenize:JN};function JN(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||ce(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ne(u)?Ce(e,l,"whitespace")(u):l(u))}}const Pt={continuation:{tokenize:e2},exit:n2,name:"list",tokenize:ZN},QN={partial:!0,tokenize:r2},XN={partial:!0,tokenize:t2};function ZN(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:gu(f)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Ga,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return gu(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(sa,r.interrupt?n:h,e.attempt(QN,m,d))}function h(f){return r.containerState.initialBlankLine=!0,i++,m(f)}function d(f){return Ne(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function e2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(sa,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ce(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!Ne(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(XN,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ce(e,e.attempt(Pt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function t2(e,t,n){const r=this;return Ce(e,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function n2(e){e.exit(this.containerState.type)}function r2(e,t,n){const r=this;return Ce(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!Ne(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const im={name:"setextUnderline",resolveTo:s2,tokenize:i2};function s2(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function i2(e,t,n){const r=this;let s;return i;function i(u){let h=r.events.length,d;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){d=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),s=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ne(u)?Ce(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ce(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const a2={tokenize:o2};function o2(e){const t=this,n=e.attempt(sa,r,e.attempt(this.parser.constructs.flowInitial,s,Ce(e,e.attempt(this.parser.constructs.flow,s,e.attempt(hN,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const l2={resolveAll:oy()},c2=ay("string"),u2=ay("text");function ay(e){return{resolveAll:oy(e==="text"?d2:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,o,l);return o;function o(h){return u(h)?i(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return u(h)?(n.exit("data"),i(h)):(n.consume(h),c)}function u(h){if(h===null)return!0;const d=s[h];let m=-1;if(d)for(;++m<d.length;){const f=d[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function oy(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function d2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,o=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const h2={42:Pt,43:Pt,45:Pt,48:Pt,49:Pt,50:Pt,51:Pt,52:Pt,53:Pt,54:Pt,55:Pt,56:Pt,57:Pt,62:Zx},f2={91:xN},m2={[-2]:Hl,[-1]:Hl,32:Hl},p2={35:jN,42:Ga,45:[im,Ga],60:CN,61:im,95:Ga,96:rm,126:rm},g2={38:ty,92:ey},x2={[-5]:ql,[-4]:ql,[-3]:ql,33:GN,38:ty,42:xu,60:[Vj,LN],91:VN,92:[wN,ey],93:Fd,95:xu,96:aN},y2={null:[xu,l2]},b2={null:[42,95]},v2={null:[]},w2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:b2,contentInitial:f2,disable:v2,document:h2,flow:p2,flowInitial:m2,insideSpan:y2,string:g2,text:x2},Symbol.toStringTag,{value:"Module"}));function k2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let o=[],l=[];const c={attempt:S(k),check:S(w),consume:v,enter:x,exit:j,interrupt:S(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:p,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:d};let h=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function d(P){return o=Jt(o,P),E(),o[o.length-1]!==null?[]:(A(t,0),u.events=nl(i,u.events,u),u.events)}function m(P,I){return N2(f(P),I)}function f(P){return j2(o,P)}function p(){const{_bufferIndex:P,_index:I,line:D,column:$,offset:O}=r;return{_bufferIndex:P,_index:I,line:D,column:$,offset:O}}function y(P){s[P.line]=P.column,b()}function E(){let P;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<I.length;)g(I.charCodeAt(r._bufferIndex));else g(I)}}function g(P){h=h(P)}function v(P){ce(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,b()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function x(P,I){const D=I||{};return D.type=P,D.start=p(),u.events.push(["enter",D,u]),l.push(D),D}function j(P){const I=l.pop();return I.end=p(),u.events.push(["exit",I,u]),I}function k(P,I){A(P,I.from)}function w(P,I){I.restore()}function S(P,I){return D;function D($,O,B){let G,R,z,_;return Array.isArray($)?ee($):"tokenize"in $?ee([$]):H($);function H(K){return he;function he(Ee){const De=Ee!==null&&K[Ee],Ae=Ee!==null&&K.null,Me=[...Array.isArray(De)?De:De?[De]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return ee(Me)(Ee)}}function ee(K){return G=K,R=0,K.length===0?B:C(K[R])}function C(K){return he;function he(Ee){return _=M(),z=K,K.partial||(u.currentConstruct=K),K.name&&u.parser.constructs.disable.null.includes(K.name)?ne():K.tokenize.call(I?Object.assign(Object.create(u),I):u,c,Z,ne)(Ee)}}function Z(K){return P(z,_),O}function ne(K){return _.restore(),++R<G.length?C(G[R]):B}}}function A(P,I){P.resolveAll&&!i.includes(P)&&i.push(P),P.resolve&&Bt(u.events,I,u.events.length-I,P.resolve(u.events.slice(I),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function M(){const P=p(),I=u.previous,D=u.currentConstruct,$=u.events.length,O=Array.from(l);return{from:$,restore:B};function B(){r=P,u.previous=I,u.currentConstruct=D,u.events.length=$,l=O,b()}}function b(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function j2(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,i)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function N2(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}function S2(e){const r={constructs:Qx([w2,...(e||{}).extensions||[]]),content:s(zj),defined:[],document:s(Uj),flow:s(a2),lazy:{},string:s(c2),text:s(u2)};return r;function s(i){return o;function o(l){return k2(r,i,l)}}}function _2(e){for(;!ny(e););return e}const am=/[\0\t\n\r]/g;function C2(){let e=1,t="",n=!0,r;return s;function s(i,o,l){const c=[];let u,h,d,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(am.lastIndex=d,u=am.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(d);break}if(f===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(i.slice(d,m)),e+=m-d),f){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const E2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function P2(e){return e.replace(E2,T2)}function T2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Xx(n.slice(i?2:1),i?16:10)}return Rd(n)||e}const ly={}.hasOwnProperty;function I2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),A2(n)(_2(S2(n).document().write(C2()(e,t,!0))))}function A2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ze),autolinkProtocol:M,autolinkEmail:M,atxHeading:i(re),blockQuote:i(Ae),characterEscape:M,characterReference:M,codeFenced:i(Me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Me,o),codeText:i(ie,o),codeTextData:M,data:M,codeFlowValue:M,definition:i(fe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(X),hardBreakEscape:i(ve),hardBreakTrailing:i(ve),htmlFlow:i(Te,o),htmlFlowData:M,htmlText:i(Te,o),htmlTextData:M,image:i(We),label:o,link:i(Ze),listItem:i(te),listItemValue:m,listOrdered:i(at,d),listUnordered:i(at),paragraph:i(W),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(re),strong:i(Q),thematicBreak:i(Ie)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:De,autolinkProtocol:Ee,blockQuote:c(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:ne,characterReferenceMarkerNumeric:ne,characterReferenceValue:K,characterReference:he,codeFenced:c(E),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:b,codeIndented:c(g),codeText:c(O),codeTextData:b,data:b,definition:c(),definitionDestinationString:j,definitionLabelString:v,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(I),hardBreakTrailing:c(I),htmlFlow:c(D),htmlFlowData:b,htmlText:c($),htmlTextData:b,image:c(G),label:z,labelText:R,lineEnding:P,link:c(B),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:_,resourceTitleString:H,resource:ee,setextHeading:c(A),setextHeadingLineSequence:S,setextHeadingText:w,strong:c(),thematicBreak:c()}};cy(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(T){let L={type:"root",children:[]};const U={stack:[L],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:h,data:n},V=[];let oe=-1;for(;++oe<T.length;)if(T[oe][1].type==="listOrdered"||T[oe][1].type==="listUnordered")if(T[oe][0]==="enter")V.push(oe);else{const _e=V.pop();oe=s(T,_e,oe)}for(oe=-1;++oe<T.length;){const _e=t[T[oe][0]];ly.call(_e,T[oe][1].type)&&_e[T[oe][1].type].call(Object.assign({sliceSerialize:T[oe][2].sliceSerialize},U),T[oe][1])}if(U.tokenStack.length>0){const _e=U.tokenStack[U.tokenStack.length-1];(_e[1]||om).call(U,void 0,_e[0])}for(L.position={start:Gn(T.length>0?T[0][1].start:{line:1,column:1,offset:0}),end:Gn(T.length>0?T[T.length-2][1].end:{line:1,column:1,offset:0})},oe=-1;++oe<t.transforms.length;)L=t.transforms[oe](L)||L;return L}function s(T,L,U){let V=L-1,oe=-1,_e=!1,pe,de,me,xe;for(;++V<=U;){const ke=T[V];switch(ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ke[0]==="enter"?oe++:oe--,xe=void 0;break}case"lineEndingBlank":{ke[0]==="enter"&&(pe&&!xe&&!oe&&!me&&(me=V),xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xe=void 0}if(!oe&&ke[0]==="enter"&&ke[1].type==="listItemPrefix"||oe===-1&&ke[0]==="exit"&&(ke[1].type==="listUnordered"||ke[1].type==="listOrdered")){if(pe){let et=V;for(de=void 0;et--;){const tn=T[et];if(tn[1].type==="lineEnding"||tn[1].type==="lineEndingBlank"){if(tn[0]==="exit")continue;de&&(T[de][1].type="lineEndingBlank",_e=!0),tn[1].type="lineEnding",de=et}else if(!(tn[1].type==="linePrefix"||tn[1].type==="blockQuotePrefix"||tn[1].type==="blockQuotePrefixWhitespace"||tn[1].type==="blockQuoteMarker"||tn[1].type==="listItemIndent"))break}me&&(!de||me<de)&&(pe._spread=!0),pe.end=Object.assign({},de?T[de][1].start:ke[1].end),T.splice(de||V,0,["exit",pe,ke[2]]),V++,U++}if(ke[1].type==="listItemPrefix"){const et={type:"listItem",_spread:!1,start:Object.assign({},ke[1].start),end:void 0};pe=et,T.splice(V,0,["enter",et,ke[2]]),V++,U++,me=void 0,xe=!0}}}return T[L][1]._spread=_e,U}function i(T,L){return U;function U(V){l.call(this,T(V),V),L&&L.call(this,V)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(T,L,U){this.stack[this.stack.length-1].children.push(T),this.stack.push(T),this.tokenStack.push([L,U||void 0]),T.position={start:Gn(L.start),end:void 0}}function c(T){return L;function L(U){T&&T.call(this,U),u.call(this,U)}}function u(T,L){const U=this.stack.pop(),V=this.tokenStack.pop();if(V)V[0].type!==T.type&&(L?L.call(this,T,V[0]):(V[1]||om).call(this,T,V[0]));else throw new Error("Cannot close `"+T.type+"` ("+bi({start:T.start,end:T.end})+"): it’s not open");U.position.end=Gn(T.end)}function h(){return Od(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(T){if(this.data.expectingFirstListItemValue){const L=this.stack[this.stack.length-2];L.start=Number.parseInt(this.sliceSerialize(T),10),this.data.expectingFirstListItemValue=void 0}}function f(){const T=this.resume(),L=this.stack[this.stack.length-1];L.lang=T}function p(){const T=this.resume(),L=this.stack[this.stack.length-1];L.meta=T}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const T=this.resume(),L=this.stack[this.stack.length-1];L.value=T.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const T=this.resume(),L=this.stack[this.stack.length-1];L.value=T.replace(/(\r?\n|\r)$/g,"")}function v(T){const L=this.resume(),U=this.stack[this.stack.length-1];U.label=L,U.identifier=mn(this.sliceSerialize(T)).toLowerCase()}function x(){const T=this.resume(),L=this.stack[this.stack.length-1];L.title=T}function j(){const T=this.resume(),L=this.stack[this.stack.length-1];L.url=T}function k(T){const L=this.stack[this.stack.length-1];if(!L.depth){const U=this.sliceSerialize(T).length;L.depth=U}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function S(T){const L=this.stack[this.stack.length-1];L.depth=this.sliceSerialize(T).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function M(T){const U=this.stack[this.stack.length-1].children;let V=U[U.length-1];(!V||V.type!=="text")&&(V=ae(),V.position={start:Gn(T.start),end:void 0},U.push(V)),this.stack.push(V)}function b(T){const L=this.stack.pop();L.value+=this.sliceSerialize(T),L.position.end=Gn(T.end)}function P(T){const L=this.stack[this.stack.length-1];if(this.data.atHardBreak){const U=L.children[L.children.length-1];U.position.end=Gn(T.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(L.type)&&(M.call(this,T),b.call(this,T))}function I(){this.data.atHardBreak=!0}function D(){const T=this.resume(),L=this.stack[this.stack.length-1];L.value=T}function $(){const T=this.resume(),L=this.stack[this.stack.length-1];L.value=T}function O(){const T=this.resume(),L=this.stack[this.stack.length-1];L.value=T}function B(){const T=this.stack[this.stack.length-1];if(this.data.inReference){const L=this.data.referenceType||"shortcut";T.type+="Reference",T.referenceType=L,delete T.url,delete T.title}else delete T.identifier,delete T.label;this.data.referenceType=void 0}function G(){const T=this.stack[this.stack.length-1];if(this.data.inReference){const L=this.data.referenceType||"shortcut";T.type+="Reference",T.referenceType=L,delete T.url,delete T.title}else delete T.identifier,delete T.label;this.data.referenceType=void 0}function R(T){const L=this.sliceSerialize(T),U=this.stack[this.stack.length-2];U.label=P2(L),U.identifier=mn(L).toLowerCase()}function z(){const T=this.stack[this.stack.length-1],L=this.resume(),U=this.stack[this.stack.length-1];if(this.data.inReference=!0,U.type==="link"){const V=T.children;U.children=V}else U.alt=L}function _(){const T=this.resume(),L=this.stack[this.stack.length-1];L.url=T}function H(){const T=this.resume(),L=this.stack[this.stack.length-1];L.title=T}function ee(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function Z(T){const L=this.resume(),U=this.stack[this.stack.length-1];U.label=L,U.identifier=mn(this.sliceSerialize(T)).toLowerCase(),this.data.referenceType="full"}function ne(T){this.data.characterReferenceType=T.type}function K(T){const L=this.sliceSerialize(T),U=this.data.characterReferenceType;let V;U?(V=Xx(L,U==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):V=Rd(L);const oe=this.stack[this.stack.length-1];oe.value+=V}function he(T){const L=this.stack.pop();L.position.end=Gn(T.end)}function Ee(T){b.call(this,T);const L=this.stack[this.stack.length-1];L.url=this.sliceSerialize(T)}function De(T){b.call(this,T);const L=this.stack[this.stack.length-1];L.url="mailto:"+this.sliceSerialize(T)}function Ae(){return{type:"blockquote",children:[]}}function Me(){return{type:"code",lang:null,meta:null,value:""}}function ie(){return{type:"inlineCode",value:""}}function fe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function re(){return{type:"heading",depth:0,children:[]}}function ve(){return{type:"break"}}function Te(){return{type:"html",value:""}}function We(){return{type:"image",title:null,url:"",alt:null}}function Ze(){return{type:"link",title:null,url:"",children:[]}}function at(T){return{type:"list",ordered:T.type==="listOrdered",start:null,spread:T._spread,children:[]}}function te(T){return{type:"listItem",spread:T._spread,checked:null,children:[]}}function W(){return{type:"paragraph",children:[]}}function Q(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function Ie(){return{type:"thematicBreak"}}}function Gn(e){return{line:e.line,column:e.column,offset:e.offset}}function cy(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?cy(e,r):M2(e,r)}}function M2(e,t){let n;for(n in t)if(ly.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function om(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+bi({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+bi({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+bi({start:t.start,end:t.end})+") is still open")}function L2(e){const t=this;t.parser=n;function n(r){return I2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function D2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function O2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function R2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function F2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function z2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=zs(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function B2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function U2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function uy(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function H2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uy(e,t);const s={src:zs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function q2(e,t){const n={src:zs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function G2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function W2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uy(e,t);const s={href:zs(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function V2(e,t){const n={href:zs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function K2(e,t,n){const r=e.all(t),s=n?Y2(n):dy(t),i={},o=[];if(typeof t.checked=="boolean"){const h=r[0];let d;h&&h.type==="element"&&h.tagName==="p"?d=h:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const h=r[l];(s||l!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!s?o.push(...h.children):o.push(h)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function Y2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=dy(n[r])}return t}function dy(e){const t=e.spread;return t??e.children.length>1}function J2(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function Q2(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function X2(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Z2(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eS(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Ad(t.children[1]),c=qx(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function tS(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let p={type:"element",tagName:i,properties:m,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,h),e.applyData(t,h)}function nS(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const lm=9,cm=32;function rS(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(um(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(um(t.slice(s),s>0,!1)),i.join("")}function um(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===lm||i===cm;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===lm||i===cm;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function sS(e,t){const n={type:"text",value:rS(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function iS(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aS={blockquote:D2,break:O2,code:R2,delete:F2,emphasis:$2,footnoteReference:z2,heading:B2,html:U2,imageReference:H2,image:q2,inlineCode:G2,linkReference:W2,link:V2,listItem:K2,list:J2,paragraph:Q2,root:X2,strong:Z2,table:eS,tableCell:nS,tableRow:tS,text:sS,thematicBreak:iS,toml:Pa,yaml:Pa,definition:Pa,footnoteDefinition:Pa};function Pa(){}const hy=-1,rl=0,wi=1,No=2,$d=3,zd=4,Bd=5,Ud=6,fy=7,my=8,dm=typeof self=="object"?self:globalThis,oS=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case rl:case hy:return n(o,s);case wi:{const l=n([],s);for(const c of o)l.push(r(c));return l}case No:{const l=n({},s);for(const[c,u]of o)l[r(c)]=r(u);return l}case $d:return n(new Date(o),s);case zd:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Bd:{const l=n(new Map,s);for(const[c,u]of o)l.set(r(c),r(u));return l}case Ud:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case fy:{const{name:l,message:c}=o;return n(new dm[l](c),s)}case my:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new dm[i](o),s)};return r},hm=e=>oS(new Map,e)(0),Zr="",{toString:lS}={},{keys:cS}=Object,Xs=e=>{const t=typeof e;if(t!=="object"||!e)return[rl,t];const n=lS.call(e).slice(8,-1);switch(n){case"Array":return[wi,Zr];case"Object":return[No,Zr];case"Date":return[$d,Zr];case"RegExp":return[zd,Zr];case"Map":return[Bd,Zr];case"Set":return[Ud,Zr];case"DataView":return[wi,n]}return n.includes("Array")?[wi,n]:n.includes("Error")?[fy,n]:[No,n]},Ta=([e,t])=>e===rl&&(t==="function"||t==="symbol"),uS=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},i=o=>{if(n.has(o))return n.get(o);let[l,c]=Xs(o);switch(l){case rl:{let h=o;switch(c){case"bigint":l=my,h=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return s([hy],o)}return s([l,h],o)}case wi:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const h=[],d=s([l,h],o);for(const m of o)h.push(i(m));return d}case No:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const h=[],d=s([l,h],o);for(const m of cS(o))(e||!Ta(Xs(o[m])))&&h.push([i(m),i(o[m])]);return d}case $d:return s([l,o.toISOString()],o);case zd:{const{source:h,flags:d}=o;return s([l,{source:h,flags:d}],o)}case Bd:{const h=[],d=s([l,h],o);for(const[m,f]of o)(e||!(Ta(Xs(m))||Ta(Xs(f))))&&h.push([i(m),i(f)]);return d}case Ud:{const h=[],d=s([l,h],o);for(const m of o)(e||!Ta(Xs(m)))&&h.push(i(m));return d}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return i},fm=(e,{json:t,lossy:n}={})=>{const r=[];return uS(!(t||n),!!t,new Map,r)(e),r},So=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?hm(fm(e,t)):structuredClone(e):(e,t)=>hm(fm(e,t));function dS(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hS(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function fS(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||dS,r=e.options.footnoteBackLabel||hS,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const h=e.all(u),d=String(u.identifier).toUpperCase(),m=zs(d.toLowerCase());let f=0;const p=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++f<=y;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const v=E.children[E.children.length-1];v&&v.type==="text"?v.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...p)}else h.push(...p);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(u,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...So(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const sl=function(e){if(e==null)return xS;if(typeof e=="function")return il(e);if(typeof e=="object")return Array.isArray(e)?mS(e):pS(e);if(typeof e=="string")return gS(e);throw new Error("Expected function, string, or object as test")};function mS(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=sl(e[n]);return il(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function pS(e){const t=e;return il(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function gS(e){return il(t);function t(n){return n&&n.type===e}}function il(e){return t;function t(n,r,s){return!!(yS(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function xS(){return!0}function yS(e){return e!==null&&typeof e=="object"&&"type"in e}const py=[],bS=!0,yu=!1,vS="skip";function gy(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=sl(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,h){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=py,p,y,E;if((!t||i(c,u,h[h.length-1]||void 0))&&(f=wS(n(c,h)),f[0]===yu))return f;if("children"in c&&c.children){const g=c;if(g.children&&f[0]!==vS)for(y=(r?g.children.length:-1)+o,E=h.concat(g);y>-1&&y<g.children.length;){const v=g.children[y];if(p=l(v,y,E)(),p[0]===yu)return p;y=typeof p[1]=="number"?p[1]:y+o}}return f}}}function wS(e){return Array.isArray(e)?e:typeof e=="number"?[bS,e]:e==null?py:[e]}function Hd(e,t,n,r){let s,i,o;typeof t=="function"&&typeof n!="function"?(i=void 0,o=t,s=n):(i=t,o=n,s=r),gy(e,i,l,s);function l(c,u){const h=u[u.length-1],d=h?h.children.indexOf(c):void 0;return o(c,d,h)}}const bu={}.hasOwnProperty,kS={};function jS(e,t){const n=t||kS,r=new Map,s=new Map,i=new Map,o={...aS,...n.handlers},l={all:u,applyData:SS,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:n,patch:NS,wrap:CS};return Hd(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const d=h.type==="definition"?r:s,m=String(h.identifier).toUpperCase();d.has(m)||d.set(m,h)}}),l;function c(h,d){const m=h.type,f=l.handlers[m];if(bu.call(l.handlers,m)&&f)return f(l,h,d);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:y,...E}=h,g=So(E);return g.children=l.all(h),g}return So(h)}return(l.options.unknownHandler||_S)(l,h,d)}function u(h){const d=[];if("children"in h){const m=h.children;let f=-1;for(;++f<m.length;){const p=l.one(m[f],h);if(p){if(f&&m[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=mm(p.value)),!Array.isArray(p)&&p.type==="element")){const y=p.children[0];y&&y.type==="text"&&(y.value=mm(y.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function NS(e,t){e.position&&(t.position=hj(e))}function SS(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,So(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function _S(e,t){const n=t.data||{},r="value"in t&&!(bu.call(n,"hProperties")||bu.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function CS(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function mm(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function pm(e,t){const n=jS(e,t),r=n.one(e,void 0),s=fS(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function ES(e,t){return e&&"run"in e?async function(n,r){const s=pm(n,{file:r,...t});await e.run(s,r)}:function(n,r){return pm(n,{file:r,...e||t})}}function gm(e){if(e)throw e}var Wa=Object.prototype.hasOwnProperty,xy=Object.prototype.toString,xm=Object.defineProperty,ym=Object.getOwnPropertyDescriptor,bm=function(t){return typeof Array.isArray=="function"?Array.isArray(t):xy.call(t)==="[object Array]"},vm=function(t){if(!t||xy.call(t)!=="[object Object]")return!1;var n=Wa.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Wa.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Wa.call(t,s)},wm=function(t,n){xm&&n.name==="__proto__"?xm(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},km=function(t,n){if(n==="__proto__")if(Wa.call(t,n)){if(ym)return ym(t,n).value}else return;return t[n]},PS=function e(){var t,n,r,s,i,o,l=arguments[0],c=1,u=arguments.length,h=!1;for(typeof l=="boolean"&&(h=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=km(l,n),s=km(t,n),l!==s&&(h&&s&&(vm(s)||(i=bm(s)))?(i?(i=!1,o=r&&bm(r)?r:[]):o=r&&vm(r)?r:{},wm(l,{name:n,newValue:e(h,o,s)})):typeof s<"u"&&wm(l,{name:n,newValue:s}));return l};const Gl=Su(PS);function vu(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function TS(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const h=e[++i];let d=-1;if(c){o(c);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,h?IS(h,l)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function IS(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const h=u;if(l&&n)throw h;return s(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(o,...l){n||(n=!0,t(o,...l))}function i(o){s(null,o)}}const vn={basename:AS,dirname:MS,extname:LS,join:DS,sep:"/"};function AS(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ia(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function MS(e){if(ia(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function LS(e){ia(e);let t=e.length,n=-1,r=0,s=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function DS(...e){let t=-1,n;for(;++t<e.length;)ia(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":OS(n)}function OS(e){ia(e);const t=e.codePointAt(0)===47;let n=RS(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function RS(e,t){let n="",r=0,s=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,i=0}else l===46&&i>-1?i++:i=-1}return n}function ia(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const FS={cwd:$S};function $S(){return"/"}function wu(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function zS(e){if(typeof e=="string")e=new URL(e);else if(!wu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return BS(e)}function BS(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Wl=["history","path","basename","stem","extname","dirname"];class yy{constructor(t){let n;t?wu(t)?n={path:t}:typeof t=="string"||US(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":FS.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Wl.length;){const i=Wl[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Wl.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?vn.basename(this.path):void 0}set basename(t){Kl(t,"basename"),Vl(t,"basename"),this.path=vn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?vn.dirname(this.path):void 0}set dirname(t){jm(this.basename,"dirname"),this.path=vn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?vn.extname(this.path):void 0}set extname(t){if(Vl(t,"extname"),jm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){wu(t)&&(t=zS(t)),Kl(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?vn.basename(this.path,this.extname):void 0}set stem(t){Kl(t,"stem"),Vl(t,"stem"),this.path=vn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new wt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Vl(e,t){if(e&&e.includes(vn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+vn.sep+"`")}function Kl(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function jm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function US(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const HS=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},qS={}.hasOwnProperty;class qd extends HS{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=TS()}copy(){const t=new qd;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Gl(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ql("data",this.frozen),this.namespace[t]=n,this):qS.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ql("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ia(t),r=this.parser||this.Parser;return Yl("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Yl("process",this.parser||this.Parser),Jl("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,o){const l=Ia(t),c=r.parse(l);r.run(c,l,function(h,d,m){if(h||!d||!m)return u(h);const f=d,p=r.stringify(f,m);VS(p)?m.value=p:m.result=p,u(h,m)});function u(h,d){h||!d?o(h):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),Yl("processSync",this.parser||this.Parser),Jl("processSync",this.compiler||this.Compiler),this.process(t,s),Sm("processSync","process",n),r;function s(i,o){n=!0,gm(i),r=o}}run(t,n,r){Nm(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,l){const c=Ia(n);s.run(t,c,u);function u(h,d,m){const f=d||t;h?l(h):o?o(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),Sm("runSync","run",r),s;function i(o,l){gm(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=Ia(n),s=this.compiler||this.Compiler;return Jl("stringify",s),Nm(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Ql("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...d]=u;c(h,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Gl(!0,s.settings,u.settings))}function l(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const d=u[h];i(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,h){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===u){m=d;break}if(m===-1)r.push([u,...h]);else if(h.length>0){let[f,...p]=h;const y=r[m][1];vu(y)&&vu(f)&&(f=Gl(!0,y,f)),r[m]=[u,f,...p]}}}}const GS=new qd().freeze();function Yl(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Jl(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ql(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Nm(e){if(!vu(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Sm(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ia(e){return WS(e)?e:new yy(e)}function WS(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function VS(e){return typeof e=="string"||KS(e)}function KS(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const YS="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",_m=[],Cm={allowDangerousHtml:!0},JS=/^(https?|ircs?|mailto|xmpp)$/i,QS=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ki(e){const t=XS(e),n=ZS(e);return e_(t.runSync(t.parse(n),n),e)}function XS(e){const t=e.rehypePlugins||_m,n=e.remarkPlugins||_m,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Cm}:Cm;return GS().use(L2).use(n).use(ES,r).use(t)}function ZS(e){const t=e.children||"",n=new yy;return typeof t=="string"&&(n.value=t),n}function e_(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||t_;for(const h of QS)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+YS+h.id,void 0);return Hd(e,u),xj(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function u(h,d,m){if(h.type==="raw"&&m&&typeof d=="number")return o?m.children.splice(d,1):m.children[d]={type:"text",value:h.value},d;if(h.type==="element"){let f;for(f in Ul)if(Object.hasOwn(Ul,f)&&Object.hasOwn(h.properties,f)){const p=h.properties[f],y=Ul[f];(y===null||y.includes(h.tagName))&&(h.properties[f]=c(String(p||""),f,h))}}if(h.type==="element"){let f=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(h,d,m)),f&&m&&typeof d=="number")return l&&h.children?m.children.splice(d,1,...h.children):m.children.splice(d,1),d}}}function t_(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||JS.test(e.slice(0,t))?e:""}function Em(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function n_(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function r_(e,t,n){const s=sl((n||{}).ignore||[]),i=s_(t);let o=-1;for(;++o<i.length;)gy(e,"text",l);function l(u,h){let d=-1,m;for(;++d<h.length;){const f=h[d],p=m?m.children:void 0;if(s(f,p?p.indexOf(f):void 0,m))return;m=f}if(m)return c(u,h)}function c(u,h){const d=h[h.length-1],m=i[o][0],f=i[o][1];let p=0;const E=d.children.indexOf(u);let g=!1,v=[];m.lastIndex=0;let x=m.exec(u.value);for(;x;){const j=x.index,k={index:x.index,input:x.input,stack:[...h,u]};let w=f(...x,k);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?m.lastIndex=j+1:(p!==j&&v.push({type:"text",value:u.value.slice(p,j)}),Array.isArray(w)?v.push(...w):w&&v.push(w),p=j+x[0].length,g=!0),!m.global)break;x=m.exec(u.value)}return g?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(E,1,...v)):v=[u],E+v.length}}function s_(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([i_(s[0]),a_(s[1])])}return t}function i_(e){return typeof e=="string"?new RegExp(n_(e),"g"):e}function a_(e){return typeof e=="function"?e:function(){return e}}const Xl="phrasing",Zl=["autolink","link","image","label"];function o_(){return{transforms:[m_],enter:{literalAutolink:c_,literalAutolinkEmail:ec,literalAutolinkHttp:ec,literalAutolinkWww:ec},exit:{literalAutolink:f_,literalAutolinkEmail:h_,literalAutolinkHttp:u_,literalAutolinkWww:d_}}}function l_(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Xl,notInConstruct:Zl},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Xl,notInConstruct:Zl},{character:":",before:"[ps]",after:"\\/",inConstruct:Xl,notInConstruct:Zl}]}}function c_(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ec(e){this.config.enter.autolinkProtocol.call(this,e)}function u_(e){this.config.exit.autolinkProtocol.call(this,e)}function d_(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function h_(e){this.config.exit.autolinkEmail.call(this,e)}function f_(e){this.exit(e)}function m_(e){r_(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,p_],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),g_]],{ignore:["link","linkReference"]})}function p_(e,t,n,r,s){let i="";if(!by(s)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!x_(n)))return!1;const o=y_(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function g_(e,t,n,r){return!by(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function x_(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function y_(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=Em(e,"(");let i=Em(e,")");for(;r!==-1&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function by(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||$r(n)||tl(n))&&(!t||n!==47)}vy.peek=C_;function b_(){this.buffer()}function v_(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function w_(){this.buffer()}function k_(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function j_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=mn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function N_(e){this.exit(e)}function S_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=mn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function __(e){this.exit(e)}function C_(){return"["}function vy(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),l(),o(),i+=s.move("]"),i}function E_(){return{enter:{gfmFootnoteCallString:b_,gfmFootnoteCall:v_,gfmFootnoteDefinitionLabelString:w_,gfmFootnoteDefinition:k_},exit:{gfmFootnoteCallString:j_,gfmFootnoteCall:N_,gfmFootnoteDefinitionLabelString:S_,gfmFootnoteDefinition:__}}}function P_(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:vy},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,o){const l=i.createTracker(o);let c=l.move("[^");const u=i.enter("footnoteDefinition"),h=i.enter("label");return c+=l.move(i.safe(i.associationId(r),{before:c,after:"]"})),h(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),t?wy:T_))),u(),c}}function T_(e,t,n){return t===0?e:wy(e,t,n)}function wy(e,t,n){return(n?"":"    ")+e}const I_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ky.peek=O_;function A_(){return{canContainEols:["delete"],enter:{strikethrough:L_},exit:{strikethrough:D_}}}function M_(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:I_}],handlers:{delete:ky}}}function L_(e){this.enter({type:"delete",children:[]},e)}function D_(e){this.exit(e)}function ky(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(e,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function O_(){return"~"}function R_(e){return e.length}function F_(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||R_,i=[],o=[],l=[],c=[];let u=0,h=-1;for(;++h<e.length;){const y=[],E=[];let g=-1;for(e[h].length>u&&(u=e[h].length);++g<e[h].length;){const v=$_(e[h][g]);if(n.alignDelimiters!==!1){const x=s(v);E[g]=x,(c[g]===void 0||x>c[g])&&(c[g]=x)}y.push(v)}o[h]=y,l[h]=E}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)i[d]=Pm(r[d]);else{const y=Pm(r);for(;++d<u;)i[d]=y}d=-1;const m=[],f=[];for(;++d<u;){const y=i[d];let E="",g="";y===99?(E=":",g=":"):y===108?E=":":y===114&&(g=":");let v=n.alignDelimiters===!1?1:Math.max(1,c[d]-E.length-g.length);const x=E+"-".repeat(v)+g;n.alignDelimiters!==!1&&(v=E.length+v+g.length,v>c[d]&&(c[d]=v),f[d]=v),m[d]=x}o.splice(1,0,m),l.splice(1,0,f),h=-1;const p=[];for(;++h<o.length;){const y=o[h],E=l[h];d=-1;const g=[];for(;++d<u;){const v=y[d]||"";let x="",j="";if(n.alignDelimiters!==!1){const k=c[d]-(E[d]||0),w=i[d];w===114?x=" ".repeat(k):w===99?k%2?(x=" ".repeat(k/2+.5),j=" ".repeat(k/2-.5)):(x=" ".repeat(k/2),j=x):j=" ".repeat(k)}n.delimiterStart!==!1&&!d&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&g.push(" "),n.alignDelimiters!==!1&&g.push(x),g.push(v),n.alignDelimiters!==!1&&g.push(j),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function $_(e){return e==null?"":String(e)}function Pm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function z_(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(e,i.current()),B_);return s(),o}function B_(e,t,n){return">"+(n?"":" ")+e}function U_(e,t){return Tm(e,t.inConstruct,!0)&&!Tm(e,t.notInConstruct,!1)}function Tm(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Im(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&U_(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function H_(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>o&&(o=i):i=1,s=r+t.length,r=n.indexOf(t,s);return o}function q_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function G_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function W_(e,t,n,r){const s=G_(n),i=e.value||"",o=s==="`"?"GraveAccent":"Tilde";if(q_(e,n)){const d=n.enter("codeIndented"),m=n.indentLines(i,V_);return d(),m}const l=n.createTracker(r),c=s.repeat(Math.max(H_(i,s)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),d()}return h+=l.move(`
`),i&&(h+=l.move(i+`
`)),h+=l.move(c),u(),h}function V_(e,t,n){return(n?"":"    ")+e}function Gd(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function K_(e,t,n,r){const s=Gd(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),o(),u}function Y_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Gi(e){return"&#x"+e.toString(16).toUpperCase()+";"}function _o(e,t,n){const r=Is(e),s=Is(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}jy.peek=J_;function jy(e,t,n,r){const s=Y_(n),i=n.enter("emphasis"),o=n.createTracker(r),l=o.move(s);let c=o.move(n.containerPhrasing(e,{after:s,before:l,...o.current()}));const u=c.charCodeAt(0),h=_o(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Gi(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=_o(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Gi(d));const f=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function J_(e,t,n){return n.options.emphasis||"*"}function Q_(e,t){let n=!1;return Hd(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,yu}),!!((!e.depth||e.depth<3)&&Od(e)&&(t.options.setext||n))}function X_(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(Q_(e,n)){const h=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),h(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");i.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=Gi(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}Ny.peek=Z_;function Ny(e){return e.value||""}function Z_(){return"<"}Sy.peek=eC;function Sy(e,t,n,r){const s=Gd(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),o(),u}function eC(){return"!"}_y.peek=tC;function _y(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function tC(){return"!"}Cy.peek=nC;function Cy(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function nC(){return"`"}function Ey(e,t){const n=Od(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Py.peek=rC;function Py(e,t,n,r){const s=Gd(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(Ey(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=h,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${i}`),u+=o.move(" "+s),u+=o.move(n.safe(e.title,{before:u,after:s,...o.current()})),u+=o.move(s),c()),u+=o.move(")"),l(),u}function rC(e,t,n){return Ey(e,n)?"<":"["}Ty.peek=sC;function Ty(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function sC(){return"["}function Wd(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function iC(e){const t=Wd(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function aC(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Iy(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function oC(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=e.ordered?aC(n):Wd(n);const l=e.ordered?o==="."?")":".":iC(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Iy(n)===o&&h){let d=-1;for(;++d<e.children.length;){const m=e.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),u}function lC(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function cC(e,t,n,r){const s=lC(n);let i=n.bulletCurrent||Wd(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(o-i.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),h);return c(),u;function h(d,m,f){return m?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function uC(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(e,r);return i(),s(),o}const dC=sl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function hC(e,t,n,r){return(e.children.some(function(o){return dC(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function fC(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Ay.peek=mC;function Ay(e,t,n,r){const s=fC(n),i=n.enter("strong"),o=n.createTracker(r),l=o.move(s+s);let c=o.move(n.containerPhrasing(e,{after:s,before:l,...o.current()}));const u=c.charCodeAt(0),h=_o(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Gi(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=_o(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Gi(d));const f=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function mC(e,t,n){return n.options.strong||"*"}function pC(e,t,n,r){return n.safe(e.value,r)}function gC(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function xC(e,t,n){const r=(Iy(n)+(n.options.ruleSpaces?" ":"")).repeat(gC(n));return n.options.ruleSpaces?r.slice(0,-1):r}const My={blockquote:z_,break:Im,code:W_,definition:K_,emphasis:jy,hardBreak:Im,heading:X_,html:Ny,image:Sy,imageReference:_y,inlineCode:Cy,link:Py,linkReference:Ty,list:oC,listItem:cC,paragraph:uC,root:hC,strong:Ay,text:pC,thematicBreak:xC};function yC(){return{enter:{table:bC,tableData:Am,tableHeader:Am,tableRow:wC},exit:{codeText:kC,table:vC,tableData:tc,tableHeader:tc,tableRow:tc}}}function bC(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function vC(e){this.exit(e),this.data.inTable=void 0}function wC(e){this.enter({type:"tableRow",children:[]},e)}function tc(e){this.exit(e)}function Am(e){this.enter({type:"tableCell",children:[]},e)}function kC(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,jC));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function jC(e,t){return t==="|"?t:e}function NC(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:l}};function o(f,p,y,E){return u(h(f,y,E),f.align)}function l(f,p,y,E){const g=d(f,y,E),v=u([g]);return v.slice(0,v.indexOf(`
`))}function c(f,p,y,E){const g=y.enter("tableCell"),v=y.enter("phrasing"),x=y.containerPhrasing(f,{...E,before:i,after:i});return v(),g(),x}function u(f,p){return F_(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function h(f,p,y){const E=f.children;let g=-1;const v=[],x=p.enter("table");for(;++g<E.length;)v[g]=d(E[g],p,y);return x(),v}function d(f,p,y){const E=f.children;let g=-1;const v=[],x=p.enter("tableRow");for(;++g<E.length;)v[g]=c(E[g],f,p,y);return x(),v}function m(f,p,y){let E=My.inlineCode(f,p,y);return y.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function SC(){return{exit:{taskListCheckValueChecked:Mm,taskListCheckValueUnchecked:Mm,paragraph:CC}}}function _C(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:EC}}}function Mm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function CC(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let i=-1,o;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function EC(e,t,n,r){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(o);let c=My.listItem(e,t,n,{...r,...l.current()});return i&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+o}}function PC(){return[o_(),E_(),A_(),yC(),SC()]}function TC(e){return{extensions:[l_(),P_(e),M_(),NC(e),_C()]}}const IC={tokenize:RC,partial:!0},Ly={tokenize:FC,partial:!0},Dy={tokenize:$C,partial:!0},Oy={tokenize:zC,partial:!0},AC={tokenize:BC,partial:!0},Ry={name:"wwwAutolink",tokenize:DC,previous:$y},Fy={name:"protocolAutolink",tokenize:OC,previous:zy},Bn={name:"emailAutolink",tokenize:LC,previous:By},_n={};function MC(){return{text:_n}}let yr=48;for(;yr<123;)_n[yr]=Bn,yr++,yr===58?yr=65:yr===91&&(yr=97);_n[43]=Bn;_n[45]=Bn;_n[46]=Bn;_n[95]=Bn;_n[72]=[Bn,Fy];_n[104]=[Bn,Fy];_n[87]=[Bn,Ry];_n[119]=[Bn,Ry];function LC(e,t,n){const r=this;let s,i;return o;function o(d){return!ku(d)||!By.call(r,r.previous)||Vd(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return ku(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(AC,h,u)(d):d===45||d===95||yt(d)?(i=!0,e.consume(d),c):h(d)}function u(d){return e.consume(d),s=!0,c}function h(d){return i&&s&&Nt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function DC(e,t,n){const r=this;return s;function s(o){return o!==87&&o!==119||!$y.call(r,r.previous)||Vd(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(IC,e.attempt(Ly,e.attempt(Dy,i),n),n)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function OC(e,t,n){const r=this;let s="",i=!1;return o;function o(d){return(d===72||d===104)&&zy.call(r,r.previous)&&!Vd(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(Nt(d)&&s.length<5)return s+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),i?u:(i=!0,c)):n(d)}function u(d){return d===null||jo(d)||Oe(d)||$r(d)||tl(d)?n(d):e.attempt(Ly,e.attempt(Dy,h),n)(d)}function h(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function RC(e,t,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),s):o===46&&r===3?(e.consume(o),i):n(o)}function i(o){return o===null?n(o):t(o)}}function FC(e,t,n){let r,s,i;return o;function o(u){return u===46||u===95?e.check(Oy,c,l)(u):u===null||Oe(u)||$r(u)||u!==45&&tl(u)?c(u):(i=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),o}function c(u){return s||r||!i?n(u):t(u)}}function $C(e,t){let n=0,r=0;return s;function s(o){return o===40?(n++,e.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(Oy,t,i)(o):o===null||Oe(o)||$r(o)?t(o):(e.consume(o),s)}function i(o){return o===41&&r++,e.consume(o),s}}function zC(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),i):l===93?(e.consume(l),s):l===60||l===null||Oe(l)||$r(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||Oe(l)||$r(l)?t(l):r(l)}function i(l){return Nt(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):Nt(l)?(e.consume(l),o):n(l)}}function BC(e,t,n){return r;function r(i){return e.consume(i),s}function s(i){return yt(i)?n(i):t(i)}}function $y(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Oe(e)}function zy(e){return!Nt(e)}function By(e){return!(e===47||ku(e))}function ku(e){return e===43||e===45||e===46||e===95||yt(e)}function Vd(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const UC={tokenize:JC,partial:!0};function HC(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:VC,continuation:{tokenize:KC},exit:YC}},text:{91:{name:"gfmFootnoteCall",tokenize:WC},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qC,resolveTo:GC}}}}function qC(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=mn(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function GC(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function WC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!o||d===null||d===91||Oe(d))return n(d);if(d===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(mn(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Oe(d)||(o=!0),i++,e.consume(d),d===92?h:u}function h(d){return d===91||d===92||d===93?(e.consume(d),i++,u):u(d)}}function VC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,l;return c;function c(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(p)}function h(p){if(o>999||p===93&&!l||p===null||p===91||Oe(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return i=mn(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Oe(p)||(l=!0),o++,e.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}function m(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),s.includes(i)||s.push(i),Ce(e,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return t(p)}}function KC(e,t,n){return e.check(sa,t,e.attempt(UC,t,n))}function YC(e){e.exit("gfmFootnoteDefinition")}function JC(e,t,n){const r=this;return Ce(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(i):n(i)}}function QC(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",h,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],f=l.parser.constructs.insideSpan.null;f&&Bt(m,m.length,0,nl(f,o.slice(u+1,c),l)),Bt(m,m.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",h,l]]),Bt(o,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function i(o,l,c){const u=this.previous,h=this.events;let d=0;return m;function m(p){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const y=Is(u);if(p===126)return d>1?c(p):(o.consume(p),d++,f);if(d<2&&!n)return c(p);const E=o.exit("strikethroughSequenceTemporary"),g=Is(p);return E._open=!g||g===2&&!!y,E._close=!y||y===2&&!!g,l(p)}}}class XC{constructor(){this.map=[]}add(t,n,r){ZC(this,t,n,r)}consume(t){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const i of s)t.push(i);s=r.pop()}this.map.length=0}}function ZC(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function eE(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function tE(){return{flow:{null:{name:"table",tokenize:nE,resolveAll:rE}}}}function nE(e,t,n){const r=this;let s=0,i=0,o;return l;function l(b){let P=r.events.length-1;for(;P>-1;){const $=r.events[P][1].type;if($==="lineEnding"||$==="linePrefix")P--;else break}const I=P>-1?r.events[P][1].type:null,D=I==="tableHead"||I==="tableRow"?w:c;return D===w&&r.parser.lazy[r.now().line]?n(b):D(b)}function c(b){return e.enter("tableHead"),e.enter("tableRow"),u(b)}function u(b){return b===124||(o=!0,i+=1),h(b)}function h(b){return b===null?n(b):ce(b)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):n(b):Ne(b)?Ce(e,h,"whitespace")(b):(i+=1,o&&(o=!1,s+=1),b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),o=!0,h):(e.enter("data"),d(b)))}function d(b){return b===null||b===124||Oe(b)?(e.exit("data"),h(b)):(e.consume(b),b===92?m:d)}function m(b){return b===92||b===124?(e.consume(b),d):d(b)}function f(b){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(b):(e.enter("tableDelimiterRow"),o=!1,Ne(b)?Ce(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):p(b))}function p(b){return b===45||b===58?E(b):b===124?(o=!0,e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),y):k(b)}function y(b){return Ne(b)?Ce(e,E,"whitespace")(b):E(b)}function E(b){return b===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),g):b===45?(i+=1,g(b)):b===null||ce(b)?j(b):k(b)}function g(b){return b===45?(e.enter("tableDelimiterFiller"),v(b)):k(b)}function v(b){return b===45?(e.consume(b),v):b===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(b))}function x(b){return Ne(b)?Ce(e,j,"whitespace")(b):j(b)}function j(b){return b===124?p(b):b===null||ce(b)?!o||s!==i?k(b):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(b)):k(b)}function k(b){return n(b)}function w(b){return e.enter("tableRow"),S(b)}function S(b){return b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),S):b===null||ce(b)?(e.exit("tableRow"),t(b)):Ne(b)?Ce(e,S,"whitespace")(b):(e.enter("data"),A(b))}function A(b){return b===null||b===124||Oe(b)?(e.exit("data"),S(b)):(e.consume(b),b===92?M:A)}function M(b){return b===92||b===124?(e.consume(b),A):A(b)}}function rE(e,t){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,h,d;const m=new XC;for(;++n<e.length;){const f=e[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,c!==0&&(Lm(m,t,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",h,t]])),s=p.type==="tableDelimiterRow"?2:h?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=Aa(m,t,i,s,void 0,d),i=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],d=Aa(m,t,i,s,void 0,d)),i=o,o=[i[1],n,0,0])):p.type==="tableHead"?(l=!0,c=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(c=n,i[1]!==0?(o[0]=o[1],d=Aa(m,t,i,s,n,d)):o[1]!==0&&(d=Aa(m,t,o,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&Lm(m,t,c,u,h),m.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=eE(t.events,n))}return e}function Aa(e,t,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},rs(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const c=rs(t.events,n[1]);if(i={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=rs(t.events,n[2]),h=rs(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const m=t.events[n[2]],f=t.events[n[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,y=n[3]-n[2]-1;e.add(p,y,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return s!==void 0&&(i.end=Object.assign({},rs(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function Lm(e,t,n,r,s){const i=[],o=rs(t.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,t])),r.end=Object.assign({},o),i.push(["exit",r,t]),e.add(n+1,0,i)}function rs(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const sE={name:"tasklistCheck",tokenize:aE};function iE(){return{text:{91:sE}}}function aE(e,t,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),i)}function i(c){return Oe(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return ce(c)?t(c):Ne(c)?e.check({tokenize:oE},t,n)(c):n(c)}}function oE(e,t,n){return Ce(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function lE(e){return Qx([MC(),HC(),QC(e),tE(),iE()])}const cE={};function ji(e){const t=this,n=e||cE,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(lE(n)),i.push(PC()),o.push(TC(n))}function Uy(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),[s,i]=N.useState(null),o=async()=>{try{r(!0),i(null);const{data:c,error:u}=await q.from("version").select("*").order("created_at",{ascending:!1}).limit(1).single();if(u)throw u;t(c)}catch(c){i(c instanceof Error?c.message:"Failed to fetch version"),console.error("Error fetching version:",c)}finally{r(!1)}},l=async()=>{try{i(null);const{data:c,error:u}=await q.from("version").select("ver_number").order("created_at",{ascending:!1}).limit(1).single();if(u)throw u;const h=((c==null?void 0:c.ver_number)||1)+.1,{data:d,error:m}=await q.from("version").insert({ver_number:h,created_at:new Date().toISOString()}).select().single();if(m)throw m;return t(d),d}catch(c){throw i(c instanceof Error?c.message:"Failed to create new version"),console.error("Error creating new version:",c),c}};return N.useEffect(()=>{o()},[]),{currentVersion:e,loading:n,error:s,fetchCurrentVersion:o,createNewVersion:l}}function wn(){const{currentVersion:e,loading:t}=Uy();return a.jsx("footer",{className:"mt-12 pt-8 pb-20 border-t border-border-custom",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("img",{src:"Battleplan-Logo-Purple.svg",alt:"BattlePlan",className:"h-8"}),!t&&e&&a.jsxs("span",{className:"text-xs text-secondary-text",children:["Version ",e.ver_number]})]})})}function Hy({tabs:e,activeTab:t,onTabChange:n,className:r=""}){return a.jsx("div",{className:`flex space-x-1 bg-bg-secondary rounded-lg p-1 ${r}`,children:e.map(s=>{const i=s.icon,o=t===s.id;return a.jsxs("button",{onClick:()=>n(s.id),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ${o?"bg-white text-brand shadow-sm":"text-secondary-text hover:text-text"}`,children:[a.jsx(i,{className:`w-4 h-4 ${o?"text-brand":"text-secondary-text"}`}),a.jsx("span",{children:s.label})]},s.id)})})}function qy({modelId:e,onBack:t,breadcrumbs:n}){var E;const[r,s]=N.useState(null),[i,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState("details");Cd();const f=[{id:"details",label:"Details",icon:rx},{id:"lore",label:"Lore",icon:Yc},{id:"painting",label:"Painting",icon:fi}];N.useEffect(()=>{const g=v=>{const x=v.target;u&&!x.closest(".profile-dropdown")&&h(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[u]),N.useEffect(()=>{p()},[e]);const p=async()=>{try{o(!0),c(null);const{data:g,error:v}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          notes,
          public,
          lore_name,
          lore_description,
          painting_notes,
          painted_date,
          purchase_date,
          user:users(
            id,
            username
          ),
          game:games(
            id,
            name,
            icon
          ),
          box:boxes(
            id,
            name,
            purchase_date,
            game:games(id, name, icon, image)
          )
        `).eq("id",e).eq("public",!0).single();if(v){if(v.code==="PGRST116")c("Model not found or not publicly accessible");else throw v;return}const x={...g,user:g.user&&Array.isArray(g.user)?g.user[0]:g.user,game:g.game&&Array.isArray(g.game)?g.game[0]:g.game,box:g.box&&Array.isArray(g.box)?g.box[0]:g.box};s(x)}catch(g){c(g instanceof Error?g.message:"Failed to load model")}finally{o(!1)}},y=g=>Ht(g,{month:"2-digit",day:"2-digit",year:"2-digit"});return i?a.jsx("div",{className:"min-h-screen bg-bg-secondary",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-4"}),a.jsx("div",{className:"h-64 bg-gray-300 rounded mb-6"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"})]})]})})}):l||!r?a.jsx("div",{className:"min-h-screen bg-bg-secondary",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-text mb-4",children:"Model Not Found"}),a.jsx("p",{className:"text-secondary-text mb-6",children:l||"The requested model could not be found."}),a.jsx("button",{onClick:t,className:"bg-[var(--color-brand)] text-white px-6 py-2 rounded-lg hover:bg-[var(--color-brand)]/90 transition-colors",children:"Go Back"})]})})}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary px-[10%] pt-6",children:[t&&a.jsx("div",{className:"bg-[var(--color-brand)] text-white px-4 py-3",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[a.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[a.jsx(Wt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),a.jsx("span",{className:"text-sm font-medium",children:"This is just a preview."}),a.jsx("div",{className:"w-16"})," "]})}),n&&a.jsx("div",{className:"mb-4",children:a.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-secondary-text",children:[a.jsx("a",{href:`/shared/collection/${n.collectionId}`,className:"hover:text-text transition-colors",children:n.collectionName}),a.jsx("span",{children:"/"}),a.jsx("span",{className:"text-text",children:(r==null?void 0:r.name)||"Loading..."})]})}),a.jsxs("main",{children:[r.image_url&&a.jsx("div",{className:"w-full relative",children:a.jsx("img",{src:r.image_url,alt:r.name,className:"w-full max-h-[70vh] object-contain rounded-lg"})}),a.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-title mb-2",children:r.name}),((E=r.user)==null?void 0:E.username)&&a.jsxs("p",{className:"text-secondary-text mb-3",children:["by ",r.user.username]}),r.game&&a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[r.game.icon&&a.jsx("img",{src:r.game.icon,alt:r.game.name,className:"w-6 h-6"}),a.jsx("span",{className:"text-secondary-text",children:r.game.name})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-secondary-text",children:[a.jsxs("span",{children:["Status: ",r.status]}),a.jsxs("span",{children:["Count: ",r.count]})]})]})}),a.jsx(Hy,{tabs:f,activeTab:d,onTabChange:g=>m(g),className:"mb-6"}),d==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(gn,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:[r.count," model",r.count!==1?"s":""]})]})}),r.purchase_date&&a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ct,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",y(r.purchase_date)]})]})}),r.notes&&a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-title mb-4",children:"Notes"}),a.jsx("div",{className:"prose prose-sm max-w-none text-text",children:a.jsx(ki,{remarkPlugins:[ji],children:r.notes})})]})]}),d==="lore"&&a.jsxs("div",{className:"space-y-6",children:[r.lore_name&&a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-title mb-4",children:"Lore Name"}),a.jsx("p",{className:"text-text",children:r.lore_name})]}),r.lore_description&&a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-title mb-4",children:"Lore Description"}),a.jsx("div",{className:"prose prose-sm max-w-none text-text",children:a.jsx(ki,{remarkPlugins:[ji],children:r.lore_description})})]}),!r.lore_name&&!r.lore_description&&a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:a.jsxs("div",{className:"text-center text-secondary-text",children:[a.jsx(Yc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No lore information available"})]})})]}),d==="painting"&&a.jsxs("div",{className:"space-y-6",children:[r.painted_date&&a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fi,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",y(r.painted_date)]})]})}),r.painting_notes&&a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-title mb-4",children:"Painting Information"}),a.jsx("div",{className:"prose prose-sm max-w-none text-text",children:a.jsx(ki,{remarkPlugins:[ji],children:r.painting_notes})})]}),!r.painted_date&&!r.painting_notes&&a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:a.jsxs("div",{className:"text-center text-secondary-text",children:[a.jsx(fi,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No painting information available"})]})})]}),a.jsx(wn,{})]})]})]})}function Gy({collectionId:e,onBack:t}){var j,k,w,S,A;const[n,r]=N.useState(null),[s,i]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(null),[h,d]=N.useState(!1),[m,f]=N.useState(!1);Cd(),N.useEffect(()=>{const M=b=>{const P=b.target;m&&!P.closest(".profile-dropdown")&&f(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[m]),N.useEffect(()=>{p()},[e]);const p=async()=>{try{l(!0),u(null);const{data:M,error:b}=await q.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          user:users(
            id,
            username
          ),
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("id",e).eq("public",!0).single();if(b){if(b.code==="PGRST116")d(!0);else throw b;return}r(M);const{data:P,error:I}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",e).order("created_at",{ascending:!1});if(I)throw I;i(P||[])}catch(M){u(M instanceof Error?M.message:"Failed to load collection")}finally{l(!1)}},y=M=>Ht(M,{month:"2-digit",day:"2-digit",year:"2-digit"}),E=()=>{var b;if(!n)return"";if(n.image_url&&typeof n.image_url=="string"&&n.image_url.trim()!==""&&n.image_url!=="undefined"&&n.image_url!=="null"&&(n.image_url.startsWith("http")||n.image_url.startsWith("/")))return n.image_url;const M=(b=n.game)==null?void 0:b.image;return M&&typeof M=="string"&&M.trim()!==""&&M!=="undefined"&&M!=="null"&&M.startsWith("http")?M:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},g=M=>{var P;if(M.image_url&&typeof M.image_url=="string"&&M.image_url.trim()!==""&&M.image_url!=="undefined"&&M.image_url!=="null"&&(M.image_url.startsWith("http")||M.image_url.startsWith("/")))return{src:M.image_url,isGameFallback:!1};const b=(P=M.game)==null?void 0:P.icon;return b&&typeof b=="string"&&b.trim()!==""&&b!=="undefined"&&b!=="null"&&b.startsWith("http")?{src:b,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},v=M=>{switch(M){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=()=>{window.history.back()};return o?a.jsx("div",{className:"min-h-screen bg-bg-primary",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),a.jsx("div",{className:"h-64 bg-gray-200 rounded mb-8"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})}):h||c?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-title mb-2",children:h?"Collection Not Found":"Error Loading Collection"}),a.jsx("p",{className:"text-secondary-text mb-6",children:h?"This collection may be private or no longer exists.":c||"Something went wrong while loading the collection."}),a.jsx("button",{onClick:t||x,className:"btn-secondary",children:a.jsx("span",{children:"Go Back"})})]})}):n?a.jsxs("div",{className:"min-h-screen bg-bg-primary px-[10%] pt-6",children:[t?a.jsx(a.Fragment,{children:a.jsx("div",{className:"bg-[var(--color-brand)] text-white px-4 py-3",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[a.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[a.jsx(Wt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),a.jsx("span",{className:"text-sm font-medium",children:"This is just a preview."}),a.jsx("div",{className:"w-16"})," "]})})}):null,a.jsx("div",{className:"w-full relative",children:a.jsx("img",{src:E(),alt:n.name,className:"w-full max-h-[70vh] object-contain rounded-lg",loading:"lazy",onError:M=>{const b=M.target,P="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";b.src!==P&&(b.src=P)}})}),a.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-title mb-4 text-center",children:n.name}),((j=n.user)==null?void 0:j.username)&&a.jsxs("p",{className:"text-secondary-text text-center",children:["by ",n.user.username]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[(k=n.game)!=null&&k.icon?a.jsx("img",{src:n.game.icon,alt:`${n.game.name} icon`,className:"w-12 h-12 object-cover rounded",onError:M=>{const b=M.target;b.style.display="none";const P=b.nextElementSibling;P&&P.classList.contains("icon-fallback")&&(P.style.display="flex")},onLoad:M=>{const P=M.target.nextElementSibling;P&&P.classList.contains("icon-fallback")&&(P.style.display="none")}}):null,a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(w=n.game)!=null&&w.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-sm font-bold",children:(((S=n.game)==null?void 0:S.name)||"Unknown Game").charAt(0)})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-text",children:"Game"}),a.jsx("p",{className:"text-secondary-text",children:((A=n.game)==null?void 0:A.name)||"Unknown Game"})]})]})}),n.purchase_date&&a.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ct,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-text",children:"Purchase Date"}),a.jsx("p",{className:"text-secondary-text",children:y(n.purchase_date)})]})]})})]}),a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bi,{className:"w-6 h-6 text-secondary-text"}),a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Models (",s.length,")"]})]})}),s.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(gn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No models in this collection."})]}):a.jsx("div",{className:"divide-y divide-border-custom",children:s.map(M=>a.jsx("div",{className:"p-6 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>{const b=new URLSearchParams({from:e,collectionName:encodeURIComponent((n==null?void 0:n.name)||"")});window.location.href=`/shared/model/${M.id}?${b.toString()}`},children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:(()=>{const b=g(M);return a.jsx("img",{src:b.src,alt:M.name,className:`w-16 h-16 object-cover rounded ${b.isGameFallback?"opacity-10":""}`,onError:P=>{const I=P.target;I.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-text mb-2",children:M.name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-text mb-2",children:[M.count&&a.jsxs("span",{children:[M.count," model",M.count!==1?"s":""]}),M.status&&M.status!=="None"&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(M.status)}`,children:M.status})]}),M.notes&&a.jsx("div",{className:"text-sm text-secondary-text",children:a.jsx(ki,{remarkPlugins:[ji],className:"prose prose-sm max-w-none",components:{p:({children:b})=>a.jsx("p",{className:"mb-1 last:mb-0 text-sm text-secondary-text",children:b}),h1:({children:b})=>a.jsx("h1",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h2:({children:b})=>a.jsx("h2",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h3:({children:b})=>a.jsx("h3",{className:"text-xs font-bold mb-1 text-secondary-text",children:b}),ul:({children:b})=>a.jsx("ul",{className:"list-disc list-inside mb-1 space-y-0.5",children:b}),ol:({children:b})=>a.jsx("ol",{className:"list-decimal list-inside mb-1 space-y-0.5",children:b}),li:({children:b})=>a.jsx("li",{className:"text-sm text-secondary-text",children:b}),strong:({children:b})=>a.jsx("strong",{className:"font-semibold text-secondary-text",children:b}),em:({children:b})=>a.jsx("em",{className:"italic text-secondary-text",children:b}),code:({children:b})=>a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:b}),pre:({children:b})=>a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded text-xs font-mono overflow-x-auto mb-1",children:b}),blockquote:({children:b})=>a.jsx("blockquote",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-2 italic mb-1 text-secondary-text",children:b})},children:M.notes})})]})]})},M.id))})]}),a.jsx(wn,{})]})]}):null}function uE({onBack:e}){const[t,n]=N.useState("model"),[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState("selection"),{models:u,loading:h}=Dx(),{boxes:d,loading:m}=Ox();Ye();const f=u.find(v=>v.id===r),p=d.find(v=>v.id===i),y=()=>{c(t==="model"?"model-preview":"collection-preview")},E=()=>{c("selection")},g=()=>t==="model"?!r:!i;return l==="model-preview"&&r?a.jsx(qy,{modelId:r,onBack:E}):l==="collection-preview"&&i?a.jsx(Gy,{collectionId:i,onBack:E}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Admin Panel"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"Share Preview"}),a.jsx("p",{className:"text-secondary-text mt-2",children:"Select a model or collection to preview its share page"})]}),a.jsx("div",{className:"max-w-2xl",children:a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsxs("div",{className:"flex space-x-1 bg-bg-secondary rounded-lg p-1 mb-6",children:[a.jsxs("button",{onClick:()=>{n("model"),s(""),o("")},className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="model"?"bg-white text-text shadow-sm":"text-secondary-text hover:text-text"}`,children:[a.jsx(sx,{className:"w-4 h-4"}),a.jsx("span",{children:"Model"})]}),a.jsxs("button",{onClick:()=>{n("collection"),s(""),o("")},className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="collection"?"bg-white text-text shadow-sm":"text-secondary-text hover:text-text"}`,children:[a.jsx(gn,{className:"w-4 h-4"}),a.jsx("span",{children:"Collection"})]})]}),a.jsxs("div",{className:"space-y-6",children:[t==="model"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"model-select",className:"block text-sm font-medium text-text mb-2",children:"Select Model"}),a.jsxs("select",{id:"model-select",value:r,onChange:v=>s(v.target.value),className:"w-full bg-bg-secondary border border-border-custom rounded-lg px-4 py-3 text-text focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] focus:border-transparent",disabled:h,children:[a.jsx("option",{value:"",children:"Choose a model..."}),u.map(v=>a.jsxs("option",{value:v.id,children:[v.name," ",v.game&&`(${v.game.name})`]},v.id))]}),h&&a.jsx("p",{className:"text-sm text-secondary-text mt-2",children:"Loading models..."})]}),t==="collection"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"collection-select",className:"block text-sm font-medium text-text mb-2",children:"Select Collection"}),a.jsxs("select",{id:"collection-select",value:i,onChange:v=>o(v.target.value),className:"w-full bg-bg-secondary border border-border-custom rounded-lg px-4 py-3 text-text focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] focus:border-transparent",disabled:m,children:[a.jsx("option",{value:"",children:"Choose a collection..."}),d.map(v=>a.jsxs("option",{value:v.id,children:[v.name," ",v.game&&`(${v.game.name})`]},v.id))]}),m&&a.jsx("p",{className:"text-sm text-secondary-text mt-2",children:"Loading collections..."})]}),t==="model"&&f&&a.jsxs("div",{className:"bg-bg-secondary border border-border-custom rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-text mb-2",children:"Selected Model"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[f.image_url&&a.jsx("img",{src:f.image_url,alt:f.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:f.name}),f.game&&a.jsx("p",{className:"text-sm text-secondary-text",children:f.game.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Count: ",f.count]})]})]})]}),t==="collection"&&p&&a.jsxs("div",{className:"bg-bg-secondary border border-border-custom rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-text mb-2",children:"Selected Collection"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[p.image_url&&a.jsx("img",{src:p.image_url,alt:p.name,className:"w-16 h-16 object-cover rounded-lg"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:p.name}),p.game&&a.jsx("p",{className:"text-sm text-secondary-text",children:p.game.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Purchase Date: ",Ht(p.purchase_date)]}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Public: ",p.public?"Yes":"No"]})]})]})]}),a.jsx("div",{className:"pt-4",children:a.jsxs("button",{onClick:y,disabled:g(),className:`w-full flex items-center justify-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all ${g()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[var(--color-brand)] text-white hover:bg-[var(--color-brand)]/90 shadow-lg hover:shadow-xl"}`,children:[a.jsx(Qc,{className:"w-5 h-5"}),a.jsx("span",{children:"Preview"})]})})]})]})})]})}function dE({onBack:e}){const[t,n]=N.useState("main"),{user:r}=Ye(),{currentVersion:s,createNewVersion:i,loading:o}=Uy(),l=()=>{},c=u=>{};return t==="users"?a.jsx(pk,{onBack:()=>n("main")}):t==="games"?a.jsx(xk,{onBack:()=>n("main")}):t==="locations"?a.jsx(wk,{onBack:()=>n("main"),isLocationAdmin:(r==null?void 0:r.is_location_admin)||!1}):t==="share-preview"?a.jsx(uE,{onBack:()=>n("main")}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>{},onAdminClick:l,onSettingsClick:()=>{},activeTab:"collection",onTabChange:c}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Collection"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"ADMIN PANEL"})]}),a.jsxs("div",{className:"space-y-4 max-w-md",children:[(r==null?void 0:r.is_admin)&&a.jsxs("button",{onClick:()=>n("users"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Bi,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Users"})]}),a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),(r==null?void 0:r.is_admin)&&a.jsxs("button",{onClick:()=>n("games"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(vd,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Games"})]}),a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),a.jsxs("button",{onClick:()=>n("locations"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ur,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Locations"})]}),a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),a.jsxs("button",{onClick:()=>n("share-preview"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Qi,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Share Preview"})]}),a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),(r==null?void 0:r.is_admin)&&a.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx(Tv,{className:"w-6 h-6 text-secondary-text"}),a.jsx("span",{className:"text-lg font-semibold text-text",children:"Version Management"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-secondary-text",children:"Current Version:"}),a.jsx("span",{className:"font-mono text-text",children:o?"Loading...":s?`v${s.ver_number}`:"Unknown"})]}),a.jsx("button",{onClick:async()=>{try{await i(),alert("Version incremented successfully!")}catch(u){alert("Failed to increment version: "+u)}},disabled:o,className:"w-full bg-[var(--color-brand)] text-white px-4 py-2 rounded-lg hover:bg-[var(--color-brand)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Updating...":"Increment Version"})]})]})]})]}),a.jsx(ns,{activeTab:"collection",onTabChange:u=>{}})]})}function hE({onBack:e}){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title text-center",children:"About this app"})]}),a.jsx("div",{children:a.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-8",children:a.jsxs("div",{className:"space-y-6 text-base text-text leading-relaxed",children:[a.jsx("p",{children:"You're using a very, very early version of the Mini Myths app. Our hope is that one day you'll be able to use this app to manage your tabletop wargaming collection, and book a table at nearby gaming store."}),a.jsx("p",{children:"We're still in very early development, so make sure to let us know if you run into any issues along the way. You can flag issues in the Mini Myths Discord."})]})})})]})}function Dm({date:e,bookings:t,isExpanded:n,onToggle:r,onBookingClick:s,onCancelBooking:i}){const o=l=>Ix(l);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:o(e)}),a.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-sm font-medium rounded-full",children:[t.length," booking",t.length!==1?"s":""]})]}),n?a.jsx(Ds,{className:"w-5 h-5 text-icon"}):a.jsx(dn,{className:"w-5 h-5 text-icon"})]}),n&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>a.jsx(Ax,{booking:l,onClick:()=>s(l),onCancelBooking:i,isPast:e==="past"},l.id))})]})}function fE({isOpen:e,onClose:t,onBookingCancelled:n,booking:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),c=async()=>{if(r){i(!0);try{const{error:d}=await q.from("bookings").delete().eq("id",r.id);if(d)throw d;n()}catch(d){console.error("Error cancelling booking:",d),alert("Failed to cancel booking. Please try again.")}finally{i(!1),l(!1)}}},u=d=>Ht(d,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});if(!e||!r)return null;const h=d=>{d.target===d.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-title",children:"Booking Details"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ct,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:Ix(r.date)}),a.jsx("p",{className:"text-sm text-secondary-text",children:Ht(r.date)})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Os,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.timeslot.name}),a.jsxs("p",{className:"text-sm text-secondary-text",children:[ko(r.timeslot.start_time)," - ",ko(r.timeslot.end_time)]})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ur,{className:"w-5 h-5 text-secondary-text mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.location.name}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.location.address})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Sn,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:r.user_name?r.user_name:"Booked by"}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.user_email||r.user.email})]})]}),r.game&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r.game.icon?a.jsx("img",{src:r.game.icon,alt:`${r.game.name} icon`,className:"w-5 h-5 object-contain rounded",onError:d=>{const m=d.target;m.style.display="none";const f=m.nextElementSibling;f&&f.classList.contains("icon-fallback")&&(f.style.display="flex")}}):null,a.jsx("div",{className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:r.game.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:r.game.name.charAt(0)})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-text",children:"Game"}),a.jsx("p",{className:"text-sm text-secondary-text",children:r.game.name})]})]}),a.jsx("div",{className:"border-t border-border-custom pt-4",children:a.jsxs("p",{className:"text-sm text-secondary-text",children:["Booking created: ",u(r.created_at)]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-border-custom",children:o?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Are you sure?"}),a.jsx("p",{className:"text-red-700 text-sm",children:"This will permanently delete this booking and make the table available for others to book."})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>l(!1),disabled:s,className:"btn-ghost btn-flex",children:"Keep Booking"}),a.jsx("button",{onClick:c,disabled:s,className:"btn-danger btn-flex",children:s?"Cancelling...":"Yes, Cancel Booking"})]})]}):a.jsxs("button",{onClick:()=>l(!0),className:"btn-danger-outline btn-with-icon",children:[a.jsx(Hr,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel This Booking"})]})})]})})}function mE(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=Ye(),l=async()=>{try{r(!0);let c=q.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `);if(o!=null&&o.is_location_admin&&!(o!=null&&o.is_admin)&&(o!=null&&o.id)){const{data:g,error:v}=await q.from("locations").select("id").contains("admins",[o.id]);if(v)throw v;const x=(g==null?void 0:g.map(j=>j.id))||[];if(x.length===0){t([]);return}c=c.in("location_id",x)}const{data:u,error:h}=await c;if(h)throw h;const d=[...new Set((u==null?void 0:u.map(g=>g.user_id))||[])],{data:m,error:f}=await q.from("users").select("id, email").in("id",d);if(f)throw f;const p=new Map((m==null?void 0:m.map(g=>[g.id,g]))||[]),E=((u==null?void 0:u.map(g=>({...g,user:p.get(g.user_id)||{id:g.user_id,email:"Unknown User"}})))||[]).sort((g,v)=>{const x=uu(g.date),j=uu(v.date);if(x&&!j)return 1;if(!x&&j)return-1;const k=new Date(v.date).getTime()-new Date(g.date).getTime();return k!==0?k:new Date(v.created_at).getTime()-new Date(g.created_at).getTime()});t(E)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return N.useEffect(()=>{l()},[]),{bookings:e,loading:n,error:s,refetch:l}}function pE({onBack:e}){const[t,n]=N.useState(new Set),[r,s]=N.useState(null),[i,o]=N.useState(!1),[l,c]=N.useState({isOpen:!1,bookingId:null}),[u,h]=N.useState(!1),{bookings:d,loading:m,error:f,refetch:p}=mE(),y=k=>{s(k),o(!0)},E=()=>{o(!1),s(null),p()},g=k=>{console.log("Attempting to cancel booking with ID:",k),c({isOpen:!0,bookingId:k})},v=async()=>{if(console.log("Confirming cancellation for booking ID:",l.bookingId),!!l.bookingId){h(!0);try{const{error:k}=await q.from("bookings").delete().eq("id",l.bookingId);if(k)throw k;console.log("Booking cancelled successfully"),await p(),c({isOpen:!1,bookingId:null})}catch(k){console.error("Error cancelling booking:",k),alert("Failed to cancel booking. Please try again.")}finally{h(!1)}}},x=we.useMemo(()=>{const k=[],w=[];d.forEach(I=>{uu(I.date)?w.push(I):k.push(I)});const S={},A={};k.forEach(I=>{const D=I.date;S[D]||(S[D]=[]),S[D].push(I)}),w.forEach(I=>{const D=I.date;A[D]||(A[D]=[]),A[D].push(I)}),Object.keys(S).forEach(I=>{S[I].sort((D,$)=>D.timeslot.start_time.localeCompare($.timeslot.start_time))}),Object.keys(A).forEach(I=>{A[I].sort((D,$)=>D.timeslot.start_time.localeCompare($.timeslot.start_time))});const M=Object.keys(S).sort((I,D)=>I.localeCompare(D)),b=Object.keys(A).sort((I,D)=>D.localeCompare(I)),P=M.map(I=>({date:I,bookings:S[I],isPast:!1}));return b.forEach(I=>{P.push({date:I,bookings:A[I],isPast:!0})}),P},[d]);we.useEffect(()=>{if(x.length>0){const k=new Set(x.slice(0,3).map(w=>w.date));n(k)}},[x]);const j=k=>{n(w=>{const S=new Set(w);return S.has(k)?S.delete(k):S.add(k),S})};return m?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading all bookings..."})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-4xl font-bold text-title",children:"ALL BOOKINGS"}),a.jsx("p",{className:"text-base text-secondary-text mt-2",children:"View and manage all table bookings across all locations"})]}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:f})}),d.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ct,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"No bookings found."})]}):a.jsxs("div",{className:"space-y-8",children:[x.filter(k=>!k.isPast).length>0&&a.jsx("div",{className:"space-y-6",children:x.filter(k=>!k.isPast).map(({date:k,bookings:w,isPast:S})=>a.jsx(Dm,{date:k,bookings:w,isExpanded:t.has(k),onToggle:()=>j(k),onBookingClick:y,onCancelBooking:g},k))}),x.filter(k=>k.isPast).length>0&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"border-t border-border-custom pt-8",children:a.jsx("h2",{className:"text-2xl font-bold text-title mb-6",children:"Past Bookings"})}),x.filter(k=>k.isPast).map(({date:k,bookings:w,isPast:S})=>a.jsx(Dm,{date:k,bookings:w,isExpanded:t.has(k),onToggle:()=>j(k),onBookingClick:y,onCancelBooking:g},k))]})]})]}),a.jsx(fE,{isOpen:i,onClose:()=>o(!1),onBookingCancelled:E,booking:r}),a.jsx(Mx,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,bookingId:null}),onConfirm:v,loading:u})]})}function gE(){const[e,t]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(null),{user:o}=Ye(),l=async()=>{try{r(!0),i(null);let c=q.from("blocked_dates").select("*, locations(*)").order("date",{ascending:!0});if(o!=null&&o.is_location_admin&&!(o!=null&&o.is_admin)){const{data:d,error:m}=await q.from("locations").select("id").contains("admins",[o.id]);if(m)throw console.error("Error fetching user locations:",m),m;if(d&&d.length>0){const f=d.map(p=>p.id);c=c.in("location_id",f)}else{t([]);return}}const{data:u,error:h}=await c;if(h)throw h;t(u||[])}catch(c){console.error("Error fetching blocked dates:",c),i("Failed to load blocked dates")}finally{r(!1)}};return N.useEffect(()=>{l()},[o]),{blockedDates:e,loading:n,error:s,refetch:l}}function xE({isOpen:e,onClose:t,onBlockedDateCreated:n}){const[r,s]=N.useState([]),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[d,m]=N.useState(!1),[f,p]=N.useState(null),{user:y}=Ye();N.useEffect(()=>{e&&(E(),g())},[e]);const E=async()=>{try{let j=q.from("locations").select("id, name, address").order("name");y!=null&&y.is_location_admin&&!(y!=null&&y.is_admin)&&(y!=null&&y.id)&&(j=j.contains("admins",[y.id]));const{data:k,error:w}=await j;if(w)throw w;s(k||[])}catch(j){console.error("Error fetching locations:",j),p("Failed to load locations")}},g=()=>{o(""),c(""),h(""),p(null)},v=async j=>{if(j.preventDefault(),!i||!l){p("Please fill in all required fields");return}const k=new Date(l),w=new Date;if(w.setHours(0,0,0,0),k<w){p("Date must be in the future");return}m(!0),p(null);try{console.log("Submitting blocked date:",{location_id:i,date:l,description:u||null});const{data:S,error:A}=await q.from("blocked_dates").insert({location_id:i,date:l,description:u||null}).select();if(A)throw console.error("Supabase error:",A),A;console.log("Blocked date created successfully:",S),g(),n(),t()}catch(S){console.error("Error creating blocked date:",S),p("Failed to create blocked date")}finally{m(!1)}},x=j=>{j.target===j.currentTarget&&t()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:x,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Add Blocked Date"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600",children:f})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Location ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),a.jsxs("select",{value:i,onChange:j=>o(j.target.value),disabled:d,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0,children:[a.jsx("option",{value:"",children:"Select a location"}),r.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),a.jsx("input",{type:"date",value:l,onChange:j=>c(j.target.value),disabled:d,min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Description"}),a.jsxs("div",{className:"relative",children:[a.jsx(yo,{className:"absolute left-3 top-3 w-5 h-5 text-icon"}),a.jsx("textarea",{value:u,onChange:j=>h(j.target.value),disabled:d,placeholder:"Optional description for this blocked date...",rows:3,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50 resize-none"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,disabled:d,className:"btn-ghost btn-flex flex-1",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:d||!i||!l,className:"btn-primary btn-flex flex-1",children:d?"Creating...":"Create Blocked Date"})]})]})]})}):null}function yE({onBack:e}){const[t,n]=N.useState(!1),{blockedDates:r,loading:s,error:i,refetch:o}=gE(),l=async u=>{if(confirm("Are you sure you want to delete this blocked date?"))try{const{error:h}=await q.from("blocked_dates").delete().eq("id",u);if(h)throw h;o()}catch(h){console.error("Error deleting blocked date:",h),alert("Failed to delete blocked date")}},c=u=>Ht(u,{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",children:a.jsx(Wt,{className:"w-5 h-5 text-icon"})}),a.jsx("h1",{className:"text-2xl font-bold text-title",children:"Blocked Dates"})]}),a.jsxs("button",{onClick:()=>n(!0),className:"btn-primary btn-with-icon",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:"Add blocked date"})]})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:i})}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading blocked dates..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xg,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-title mb-2",children:"No blocked dates"}),a.jsx("p",{className:"text-secondary-text mb-6",children:r.length===0?"You haven't blocked any dates yet. Click 'Add blocked date' to get started.":"No blocked dates found for your locations."})]}):a.jsx("div",{className:"space-y-4",children:r.map(u=>{var h;return a.jsx("div",{className:"bg-bg-secondary border border-border-custom rounded-lg p-4 hover:bg-bg-tertiary transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-icon"}),a.jsx("span",{className:"font-medium text-text",children:((h=u.locations)==null?void 0:h.name)||"Unknown Location"})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(ct,{className:"w-4 h-4 text-icon"}),a.jsx("span",{className:"text-text",children:c(u.date)})]}),u.description&&a.jsx("p",{className:"text-secondary-text text-sm",children:u.description})]}),a.jsx("button",{onClick:()=>l(u.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete blocked date",children:a.jsx(Hr,{className:"w-4 h-4"})})]})},u.id)})}),a.jsx(xE,{isOpen:t,onClose:()=>n(!1),onBlockedDateCreated:o})]})}function bE({isOpen:e,onClose:t,onConfirm:n,modelName:r,loading:s=!1}){if(!e)return null;const i=o=>{o.target===o.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Model"})]})]})})}function ju({value:e,onChange:t,placeholder:n="Enter text...",label:r="Notes",rows:s=3}){const i=N.useRef(null),[o,l]=N.useState(!1);N.useEffect(()=>{if(i.current&&e){const f=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/^- (.*)/gm,"$1").replace(/^\d+\. (.*)/gm,"$1");i.current.textContent=f,l(!0)}},[e]);const c=(f,p)=>{if(!i.current)return;i.current.focus(),document.execCommand(f,!1,p);const y=m(i.current.innerHTML);t(y)},u=f=>{if(!i.current)return;i.current.focus(),document.execCommand("insertText",!1,f);const p=m(i.current.innerHTML);t(p)},h=()=>{if(!i.current)return;const f=m(i.current.innerHTML);t(f)},d=f=>{f.key==="Enter"&&(f.preventDefault(),document.execCommand("insertLineBreak",!1),h())},m=f=>f?f.replace(/<strong>(.*?)<\/strong>/g,"**$1**").replace(/<b>(.*?)<\/b>/g,"**$1**").replace(/<em>(.*?)<\/em>/g,"*$1*").replace(/<i>(.*?)<\/i>/g,"*$1*").replace(/<u>(.*?)<\/u>/g,"__$1__").replace(/<li>(.*?)<\/li>/g,"- $1").replace(/<br>/g,`
`).replace(/<div>/g,`
`).replace(/<\/div>/g,"").replace(/<p>/g,"").replace(/<\/p>/g,`
`):"";return a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:a.jsx("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:r})}),a.jsxs("div",{className:"flex items-center space-x-1 p-2 border border-gray-300 dark:border-gray-600 border-b-0 rounded-t-md bg-gray-50 dark:bg-gray-800",children:[a.jsx("button",{type:"button",onClick:()=>c("bold"),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:"Bold (Ctrl+B)",children:a.jsx(_v,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>c("italic"),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:"Italic (Ctrl+I)",children:a.jsx(Av,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>c("underline"),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:"Underline (Ctrl+U)",children:a.jsx($v,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),a.jsx("button",{type:"button",onClick:()=>u("- "),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:"Bullet List",children:a.jsx(Lv,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>u("1. "),className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:"Numbered List",children:a.jsx(Mv,{className:"w-4 h-4"})})]}),a.jsx("div",{ref:i,contentEditable:!0,onInput:h,onKeyDown:d,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-b-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white min-h-[80px] max-h-[200px] overflow-y-auto",style:{minHeight:`${s*1.5}rem`,whiteSpace:"pre-wrap",wordWrap:"break-word"},"data-placeholder":n})]})}function vE({isOpen:e,onClose:t,model:n,onModelUpdated:r}){var I;const{user:s}=Ye(),[i,o]=N.useState({name:"",count:1,purchase_date:"",notes:"",game_id:"",status:"",painted_date:""}),[l,c]=N.useState(null),[u,h]=N.useState(!1),[d,m]=N.useState(!1),[f,p]=N.useState(!1),[y,E]=N.useState(null),[g,v]=N.useState(null),[x,j]=N.useState([]),[k,w]=N.useState(!1);N.useEffect(()=>{n&&o({name:n.name,count:n.count,purchase_date:n.purchase_date||"",notes:n.notes||"",game_id:n.game_id||"",status:n.status||"",painted_date:n.painted_date||""})},[n]),N.useEffect(()=>{e&&(async()=>{const{data:$,error:O}=await q.from("games").select("id, name, icon").order("name");O?console.error("Error fetching games:",O):j($||[])})()},[e]);const S=D=>{var O;const $=(O=D.target.files)==null?void 0:O[0];if($){if(!$.type.startsWith("image/")){alert("Please select an image file");return}c($),E($),p(!0)}},A=async D=>{try{m(!0),console.log("Original cropped size:",(D.size/1024).toFixed(2),"KB");const $=await $n(D,1200,1200,.8);console.log("Compressed size:",($.size/1024).toFixed(2),"KB"),v($)}catch($){console.error("Compression failed, using original cropped image:",$),v(D)}finally{m(!1),p(!1)}},M=()=>{w(!0),v(null),c(null)},b=async D=>{if(D.preventDefault(),!!s){h(!0);try{let $=n.image_url;if(k){if(n.image_url&&n.image_url.includes("supabase"))try{const B=n.image_url.split("/"),G=B.findIndex(R=>R==="model-images");if(G!==-1){const R=B.slice(G+1).join("/");await q.storage.from("model-images").remove([R])}}catch(B){console.warn("Failed to delete old image:",B)}$=null}else if(g){if(n.image_url&&n.image_url.includes("supabase"))try{const ee=n.image_url.split("/"),C=ee.findIndex(Z=>Z==="model-images");if(C!==-1){const Z=ee.slice(C+1).join("/");await q.storage.from("model-images").remove([Z])}}catch(ee){console.warn("Failed to delete old image:",ee)}const B=(l==null?void 0:l.name.split(".").pop())||"jpg",G=`${Date.now()}-${Math.random().toString(36).substring(2)}.${B}`,R=`${s.id}/${G}`,{data:z,error:_}=await q.storage.from("model-images").upload(R,g);if(_)throw console.error("Upload error:",_),new Error(`Failed to upload image: ${_.message}`);const{data:H}=q.storage.from("model-images").getPublicUrl(z.path);$=H.publicUrl,console.log("New image uploaded:",$)}const{error:O}=await q.from("models").update({name:i.name,count:i.count,purchase_date:i.purchase_date||null,notes:i.notes||null,game_id:i.game_id||null,image_url:$,status:i.status||"None",painted_date:i.painted_date||null}).eq("id",n.id);if(O)throw O;r(),t(),c(null),v(null),E(null),w(!1)}catch($){console.error("Error updating model:",$),alert("Failed to update model. Please try again.")}finally{h(!1)}}};if(!e)return null;const P=D=>{D.target===D.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:P,children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Model"}),a.jsx("button",{onClick:t,className:"text-icon hover:text-icon-hover",children:a.jsx(be,{className:"w-6 h-6"})})]}),f&&y&&a.jsx(Fr,{isOpen:f,imageFile:y,onCrop:A,onClose:()=>{p(!1),E(null),c(null)}}),!f&&a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Model Name"]}),a.jsx("input",{type:"text",value:i.name,onChange:D=>o({...i,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(gn,{className:"w-4 h-4 mr-2"}),"Box"]}),a.jsx("input",{type:"text",value:((I=n.box)==null?void 0:I.name)||"No Collection (Loose Model)",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Box assignment cannot be changed in edit mode."})]}),!n.box&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(vd,{className:"w-4 h-4 mr-2"}),"Game"]}),a.jsx(na,{games:x,selectedGame:i.game_id,onGameSelect:D=>o({...i,game_id:D})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(yo,{className:"w-4 h-4 mr-2"}),"Painted Status"]}),a.jsxs("select",{value:i.status,onChange:D=>o({...i,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"",children:"Select Status"}),a.jsx("option",{value:"Assembled",children:"Assembled"}),a.jsx("option",{value:"Primed",children:"Primed"}),a.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),a.jsx("option",{value:"Painted",children:"Painted"})]})]}),i.status==="Painted"&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Painted Date"]}),a.jsx(Hi,{value:i.painted_date,onChange:D=>o({...i,painted_date:D}),placeholder:"Select painted date",minDate:""})]}),!n.box&&a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Purchase Date"]}),a.jsx(Hi,{value:i.purchase_date,onChange:D=>o({...i,purchase_date:D}),placeholder:"Select purchase date",minDate:""})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Number of Models"]}),a.jsx("input",{type:"number",min:"1",value:i.count,onChange:D=>o({...i,count:parseInt(D.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Replace Image"]}),n.image_url&&!k&&a.jsx("div",{className:"mb-3 p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:n.image_url,alt:"Current model image",className:"w-12 h-12 object-cover rounded",onError:D=>{const $=D.target;$.style.display="none"}}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current image"})]}),a.jsx("button",{type:"button",onClick:M,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:a.jsx(Hr,{className:"w-4 h-4"})})]})}),k&&a.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-md bg-red-50 dark:bg-red-900/20",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"✓ Image will be deleted when you save changes"})}),a.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20"}),g&&a.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["✓ Cropped image ready for upload (",(g.size/1024).toFixed(1)," KB)"]}),d&&a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Compressing image..."})]}),a.jsx(ju,{value:i.notes,onChange:D=>o({...i,notes:D}),placeholder:"Optional notes about this model...",label:"Notes",rows:4}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||d,className:"btn-primary btn-flex",children:u?a.jsxs(a.Fragment,{children:[a.jsx(zv,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Model"})]})]})]})})}function wE({isOpen:e,onClose:t,onModelUpdated:n,model:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState(""),[m,f]=N.useState(!1),[p,y]=N.useState("");N.useEffect(()=>{r&&i(r.public??!1)},[r]);const E=async()=>{if(r){l(!0),d("");try{const{error:x}=await q.from("models").update({public:!s}).eq("id",r.id);if(x)throw x;i(!s),n==null||n()}catch(x){d(x instanceof Error?x.message:"Failed to update model visibility")}finally{l(!1)}}},g=async()=>{if(r){u(!0),d("");try{const x=wo(`/shared/model/${r.id}`);await navigator.clipboard.writeText(x),y(`${r.name}'s URL has been copied to your clipboard!`),f(!0)}catch(x){console.error("Error copying URL:",x);const j=wo(`/shared/model/${r.id}`),k=document.createElement("textarea");k.value=j,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k),y(`${r.name}'s URL has been copied to your clipboard!`),f(!0)}finally{u(!1)}}},v=x=>{x.target===x.currentTarget&&t()};return!e||!r?null:a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:v,children:[a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Share ",r.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-sm text-secondary-text",children:"Sharing a model makes it visible to other users who have the link to it."}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Qi,{className:"w-5 h-5 text-icon"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-input-label",children:"Make Public"}),a.jsx("p",{className:"text-xs text-secondary-text",children:"Allow anyone to view this model"})]})]}),a.jsx("button",{onClick:E,disabled:o,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 disabled:opacity-50 ${s?"bg-brand":"bg-secondary-text"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),s&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wd,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-800",children:"This model is now public and can be viewed by anyone with the link."})]})}),!s&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ix,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-800",children:"This model is private and only visible to you."})]})}),s&&a.jsxs("button",{onClick:g,disabled:c,className:"btn-secondary btn-full btn-with-icon",children:[a.jsx(ex,{className:"w-4 h-4"}),a.jsx("span",{children:c?"Copying...":"Copy URL"})]}),h&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:h}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:t,className:"btn-secondary",children:"Done"})})]})]}),a.jsx(Xo,{message:p,isVisible:m,onClose:()=>f(!1)})]})}function kE({isOpen:e,onClose:t,onModelDeleted:n,onModelUpdated:r,onViewBox:s,model:i}){var he,Ee,De,Ae,Me,ie,fe,X,re,ve,Te,We,Ze,at,te,W,Q,ae,Ie;const[o,l]=we.useState(!1),[c,u]=we.useState(!1),[h,d]=we.useState(!1),[m,f]=we.useState(!1),[p,y]=we.useState(!1),[E,g]=we.useState(i),[v,x]=we.useState("details"),[j,k]=we.useState({lore_name:"",lore_description:""}),[w,S]=we.useState({lore_name:"",lore_description:""}),[A,M]=we.useState({painting_notes:""}),[b,P]=we.useState({painting_notes:""}),I=[{id:"details",label:"Details",icon:rx},{id:"lore",label:"Lore",icon:Yc},{id:"painting",label:"Painting",icon:fi}];we.useEffect(()=>{if(g(i),i){const T={lore_name:i.lore_name||"",lore_description:i.lore_description||""},L={painting_notes:i.painting_notes||""};k(T),S(T),M(L),P(L)}},[i]);const D=async()=>{r==null||r()};if(we.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e||!i)return null;const $=T=>{c||T.target===T.currentTarget&&t()},O=T=>Ht(T,{month:"2-digit",day:"2-digit",year:"2-digit"}),B=(T,L)=>`${L} Model${L>1?"s":""}`,G=()=>(i==null?void 0:i.painted_date)||null,R=()=>(i==null?void 0:i.notes)||null,z=()=>{l(!0)},_=async()=>{if(i){f(!0);try{if(i.image_url&&typeof i.image_url=="string"&&i.image_url.includes("supabase")){const L=i.image_url.split("/"),U=L.findIndex(V=>V==="model-images");if(U!==-1){const V=L.slice(U+1).join("/");await q.storage.from("model-images").remove([V])}}const{error:T}=await q.from("models").delete().eq("id",i.id);if(T)throw T;l(!1),t(),n&&n()}catch(T){console.error("Error deleting model:",T)}finally{f(!1)}}},H=()=>{d(!0)},ee=async()=>{u(!1),t(),r&&await r()},C=async()=>{if(!E)return;const{error:T}=await q.from("models").update({lore_name:j.lore_name,lore_description:j.lore_description}).eq("id",E.id);T?console.error("Error saving lore:",T):(g(L=>L?{...L,lore_name:j.lore_name,lore_description:j.lore_description}:null),S(j))},Z=async()=>{if(!E)return;const{error:T}=await q.from("models").update({painting_notes:A.painting_notes}).eq("id",E.id);T?console.error("Error saving painting notes:",T):(g(L=>L?{...L,painting_notes:A.painting_notes}:null),P(A))},ne=j.lore_name!==w.lore_name||j.lore_description!==w.lore_description,K=A.painting_notes!==b.painting_notes;return!e||!E?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 bg-black flex items-center justify-center p-4 z-50 ${c?"bg-opacity-25":"bg-opacity-50"}`,onClick:$,children:a.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:(()=>{var L,U,V;if(i.image_url&&typeof i.image_url=="string"&&i.image_url.trim()!==""&&i.image_url!=="undefined"&&i.image_url!=="null"&&(i.image_url.startsWith("http")||i.image_url.startsWith("/")))return i.image_url;const T=((U=(L=i.box)==null?void 0:L.game)==null?void 0:U.image)||((V=i.game)==null?void 0:V.image);return T&&typeof T=="string"&&T.trim()!==""&&T!=="undefined"&&T!=="null"&&T.startsWith("http")?T:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:i.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:T=>{const L=T.target,U="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";L.src!==U&&(console.log("Modal image failed to load:",L.src,"Falling back to default"),L.src=U)}})}),a.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:a.jsx(be,{className:"w-6 h-6 text-icon"})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6 relative",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:i.name}),a.jsx("button",{onClick:()=>u(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:a.jsx(Xi,{className:"w-4 h-4"})})]}),i.box?a.jsx("button",{onClick:()=>{t(),s==null||s(i.box)},className:"text-base text-secondary-text mb-3 hover:text-amber-600 transition-colors",children:i.box.name}):null,a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(Ee=(he=i.box)==null?void 0:he.game)!=null&&Ee.icon||(De=i.game)!=null&&De.icon?a.jsx("img",{src:((Me=(Ae=i.box)==null?void 0:Ae.game)==null?void 0:Me.icon)||((ie=i.game)==null?void 0:ie.icon),alt:`${((X=(fe=i.box)==null?void 0:fe.game)==null?void 0:X.name)||((re=i.game)==null?void 0:re.name)||"Unknown Game"} icon`,className:"object-cover rounded max-h-[32px]",onError:T=>{const L=T.target;console.warn("Game icon failed to load:",L.src,"Falling back to letter icon"),L.style.display="none";const U=L.nextElementSibling;U&&U.classList.contains("icon-fallback")&&(U.style.display="flex")},onLoad:T=>{const U=T.target.nextElementSibling;U&&U.classList.contains("icon-fallback")&&(U.style.display="none")}}):null,a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Te=(ve=i.box)==null?void 0:ve.game)!=null&&Te.icon||(We=i.game)!=null&&We.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((at=(Ze=i.box)==null?void 0:Ze.game)==null?void 0:at.name)||((te=i.game)==null?void 0:te.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((Q=(W=i.box)==null?void 0:W.game)==null?void 0:Q.name)||((ae=i.game)==null?void 0:ae.name)||"Unknown Game"})]})]}),a.jsx(Hy,{tabs:I,activeTab:v,onTabChange:T=>x(T),className:"mb-6"}),v==="details"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(Ho,{className:"w-5 h-5 text-secondary-text"}),a.jsx("span",{className:"text-base text-text font-medium",children:B(i.status,i.count)})]}),((Ie=i.box)==null?void 0:Ie.purchase_date)&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(ct,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",O(i.box.purchase_date)]})]}),G()&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(yf,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",O(G())]})]})]}),v==="lore"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Lore Name"}),a.jsx("input",{type:"text",value:j.lore_name,onChange:T=>k({...j,lore_name:T.target.value}),placeholder:"Enter lore name...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white"})]}),a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:a.jsx(ju,{value:j.lore_description,onChange:T=>k({...j,lore_description:T}),placeholder:"Enter lore description...",label:"Lore Description",rows:6})}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:C,disabled:!ne,className:"btn-secondary btn-full w-full disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Lore"})})]}),v==="painting"&&a.jsxs("div",{className:"space-y-3",children:[G()&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(yf,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",O(G())]})]}),a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:a.jsx(ju,{value:A.painting_notes,onChange:T=>M({...A,painting_notes:T}),placeholder:"Enter painting information...",label:"Painting Information",rows:6})}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:Z,disabled:!K,className:"btn-secondary btn-full w-full disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Painting Information"})}),R()&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-start space-x-3",children:[a.jsx(yo,{className:"w-5 h-5 text-secondary-text mt-0.5"}),a.jsx("div",{className:"flex-1",children:a.jsx(ki,{remarkPlugins:[ji],components:{p:({children:T})=>a.jsx("p",{className:"mb-2 last:mb-0 text-base text-text",children:T}),h1:({children:T})=>a.jsx("h1",{className:"text-lg font-bold mb-2 text-text",children:T}),h2:({children:T})=>a.jsx("h2",{className:"text-base font-bold mb-2 text-text",children:T}),h3:({children:T})=>a.jsx("h3",{className:"text-sm font-bold mb-1 text-text",children:T}),ul:({children:T})=>a.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:T}),ol:({children:T})=>a.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:T}),li:({children:T})=>a.jsx("li",{className:"text-sm text-text",children:T}),strong:({children:T})=>a.jsx("strong",{className:"font-semibold text-text",children:T}),em:({children:T})=>a.jsx("em",{className:"italic text-text",children:T}),code:({children:T})=>a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:T}),pre:({children:T})=>a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:T}),blockquote:({children:T})=>a.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2 text-text",children:T})},children:R()})})]}),!G()&&!R()&&!A.painting_notes&&a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:a.jsxs("div",{className:"text-center text-secondary-text",children:[a.jsx(fi,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No painting information available"})]})})]}),a.jsx("div",{className:"pt-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:H,className:"btn-primary btn-full btn-with-icon w-full",children:[a.jsx(Qi,{className:"w-4 h-4"}),a.jsx("span",{children:"Share Model"})]}),a.jsx("button",{onClick:z,className:"btn-danger-outline w-full",children:"Delete this model"})]})})]})]})}),a.jsx(bE,{isOpen:o,onClose:()=>l(!1),onConfirm:_,modelName:i.name,loading:m}),a.jsx(vE,{isOpen:c,onClose:()=>u(!1),onModelUpdated:ee,model:i}),a.jsx(wE,{isOpen:h,onClose:()=>d(!1),onModelUpdated:D,model:E}),a.jsx(Xo,{message:"A share link has been copied to your clipboard",isVisible:p,onClose:()=>y(!1)})]})}function jE({isOpen:e,onClose:t,onConfirm:n,boxName:r,loading:s=!1}){if(!e)return null;const i=o=>{o.target===o.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Box"})]})]})})}function NE({isOpen:e,onClose:t,onModelsAdded:n,onAddNewModel:r,box:s}){var M;const[i,o]=N.useState([]),[l,c]=N.useState(new Set),[u,h]=N.useState(!0),[d,m]=N.useState(!1),[f,p]=N.useState(null),{user:y}=Ye();N.useEffect(()=>{e&&y&&E()},[e,y]);const E=async()=>{try{h(!0);const{data:b,error:P}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          box_id,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("user_id",y==null?void 0:y.id).is("box_id",null).order("created_at",{ascending:!1});if(P)throw P;const I=(b||[]).sort((D,$)=>{var G,R;const O=D.game_id===((G=s.game)==null?void 0:G.id),B=$.game_id===((R=s.game)==null?void 0:R.id);return O&&!B?-1:!O&&B?1:D.name.localeCompare($.name)});o(I)}catch(b){p(b instanceof Error?b.message:"Failed to fetch models")}finally{h(!1)}},g=b=>{c(P=>{const I=new Set(P);return I.has(b)?I.delete(b):I.add(b),I})},v=async()=>{if(l.size!==0){m(!0),p(null);try{const b=Array.from(l),{error:P}=await q.from("models").update({box_id:s.id,public:s.public}).in("id",b);if(P)throw P;n(),t(),c(new Set)}catch(b){p(b instanceof Error?b.message:"Failed to add models to box")}finally{m(!1)}}},x=()=>{try{localStorage.setItem("mini-myths-temp-box-context",JSON.stringify({id:s.id,name:s.name,game:s.game}))}catch(b){console.error("Error storing box context:",b)}r(),t()},j=b=>{switch(b){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},k=b=>{var I;if(b.image_url&&typeof b.image_url=="string"&&b.image_url.trim()!==""&&b.image_url!=="undefined"&&b.image_url!=="null"&&(b.image_url.startsWith("http")||b.image_url.startsWith("/")))return{src:b.image_url,isGameFallback:!1};const P=(I=b.game)==null?void 0:I.icon;return P&&typeof P=="string"&&P.trim()!==""&&P!=="undefined"&&P!=="null"&&P.startsWith("http")?{src:P,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},w=i.filter(b=>{var P;return b.game_id===((P=s.game)==null?void 0:P.id)}),S=i.filter(b=>{var P;return b.game_id!==((P=s.game)==null?void 0:P.id)});if(!e)return null;const A=b=>{b.target===b.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:A,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Add Models to Collection: ",s.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-600",children:f})}),u?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"Loading models..."})]}):i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(gn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text mb-4",children:"No unboxed models found in your collection."}),a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"All your models are already assigned to collections."}),a.jsxs(yi,{onClick:x,variant:"primary",width:"full",withIcon:!0,children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:"Add new model to collection"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Select models to add to this box. Models will be moved from their current unboxed state."}),a.jsxs("div",{className:"space-y-6 mb-6",children:[w.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:[((M=s.game)==null?void 0:M.name)||"Same Game"," Models"]}),a.jsx("div",{className:"space-y-2",children:w.map(b=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[a.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&a.jsx(Jc,{className:"w-3 h-3"})}),(()=>{const P=k(b);return a.jsx("img",{src:P.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${P.isGameFallback?"opacity-10":""}`,onError:I=>{const D=I.target;D.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${j(b.status)}`,children:b.status})]})]})]},b.id))})]}),S.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:"Other Models"}),a.jsx("div",{className:"space-y-2",children:S.map(b=>{var P;return a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[a.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&a.jsx(Jc,{className:"w-3 h-3"})}),(()=>{const I=k(b);return a.jsx("img",{src:I.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${I.isGameFallback?"opacity-10":""}`,onError:D=>{const $=D.target;$.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"text-xs text-secondary-text",children:((P=b.game)==null?void 0:P.name)||"Unknown Game"}),a.jsx("span",{className:"text-xs text-secondary-text",children:"•"}),a.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-secondary-text",children:"•"}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${j(b.status)}`,children:b.status})]})]})]})]},b.id)})})]})]}),a.jsx("div",{className:"pt-4 border-t border-border-custom",children:a.jsxs(yi,{onClick:x,variant:"secondary",width:"full",withIcon:!0,children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:"Add new model to collection"})]})}),a.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border-custom",children:[a.jsx("button",{onClick:t,disabled:d,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:v,disabled:l.size===0||d,className:"btn-primary btn-flex",children:d?"Adding...":`Add ${l.size} Model${l.size!==1?"s":""}`})]})]})]})})}function SE({isOpen:e,onClose:t,onBoxUpdated:n,box:r}){var Me;const[s,i]=N.useState({name:"",game_id:"",purchase_date:"",image_url:""}),[o,l]=N.useState([]),[c,u]=N.useState(null),[h,d]=N.useState(!1),[m,f]=N.useState(null),[p,y]=N.useState(null),[E,g]=N.useState(!1),[v,x]=N.useState(!1),[j,k]=N.useState(""),[w,S]=N.useState(!1),[A,M]=N.useState(!1),[b,P]=N.useState(!1),[I,D]=N.useState([]),[$,O]=N.useState(""),[B,G]=N.useState([]),[R,z]=N.useState(!1);N.useEffect(()=>{var ie;r&&i({name:r.name,game_id:r.game_id||((ie=r.game)==null?void 0:ie.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""})},[r]),N.useEffect(()=>{e&&_()},[e]),N.useEffect(()=>{e&&r&&_()},[e,r]);const _=async()=>{try{const{data:ie,error:fe}=await q.from("games").select("id, name, icon").order("name");if(fe)throw fe;l(ie||[])}catch(ie){console.error("Error fetching games:",ie)}},H=ie=>{var X;const fe=(X=ie.target.files)==null?void 0:X[0];if(fe){if(!Rr(fe)){alert("Please select a valid image file");return}u(fe),f(fe),d(!0)}},ee=ie=>{y(ie),d(!1),f(null)},C=()=>{S(!0),y(null),u(null)},Z=async()=>{if(s.name.trim()){P(!0),D([]),G([]);try{const ie=o.find(We=>We.id===s.game_id),fe=(ie==null?void 0:ie.name)||"",X=`${s.name.trim()} ${fe}`.trim(),re=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:X,count:6})});if(!re.ok)throw new Error("Failed to search for images");const Te=(await re.json()).images||[];D(Te),G(Te),M(!0)}catch(ie){console.error("Error searching for images:",ie),M(!1)}finally{P(!1)}}},ne=ie=>{O(ie),M(!1)},K=async()=>{if(s.name.trim()){z(!0);try{const ie=o.find(Ze=>Ze.id===s.game_id),fe=(ie==null?void 0:ie.name)||"",X=`${s.name.trim()} ${fe}`.trim();console.log("Finding more images with exclude:",B);const re=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:X,count:6,exclude:B})});if(!re.ok)throw new Error("Failed to search for more images");const Te=(await re.json()).images||[];console.log("Received additional images:",Te),console.log("Previous results count:",B.length),console.log("New results count:",Te.length);const We=Te.filter(Ze=>!B.includes(Ze));console.log("Unique new images after filtering:",We),D(We),G([...B,...We])}catch(ie){console.error("Error searching for more images:",ie)}finally{z(!1)}}},he=async(ie,fe,X)=>{const re=(c==null?void 0:c.name.split(".").pop())||"jpg",ve=`${X}/${Date.now()}-${Math.random().toString(36).substring(2)}.${re}`,{data:Te,error:We}=await q.storage.from(fe).upload(ve,ie);if(We)throw We;const{data:Ze}=q.storage.from(fe).getPublicUrl(Te.path);return Ze.publicUrl},Ee=async ie=>{if(ie.preventDefault(),!!r){g(!0),k("");try{let fe=s.image_url;if(w){if(s.image_url&&s.image_url.includes("supabase"))try{const re=s.image_url.split("/"),ve=re.findIndex(Te=>Te==="model-images");if(ve!==-1){const Te=re.slice(ve+1).join("/");await q.storage.from("model-images").remove([Te])}}catch(re){console.warn("Failed to delete old image:",re)}fe=null}else if($)fe=$;else if(p){x(!0);const re=await $n(p,1200,1200,.8);fe=await he(re,"model-images","boxes")}const{error:X}=await q.from("boxes").update({name:s.name,game_id:s.game_id||null,purchase_date:s.purchase_date||null,image_url:fe}).eq("id",r.id);if(X)throw X;n()}catch(fe){k(fe instanceof Error?fe.message:"Failed to update box")}finally{g(!1),x(!1)}}},De=()=>{var ie;r&&i({name:r.name,game_id:r.game_id||((ie=r.game)==null?void 0:ie.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""}),u(null),y(null),S(!1),O(""),M(!1),D([]),G([]),k("")};if(!e||!r)return null;const Ae=ie=>{ie.target===ie.currentTarget&&t()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:Ae,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Collection"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"boxName",value:s.name,onChange:ie=>i({...s,name:ie.target.value}),placeholder:"Enter collection name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),a.jsx(na,{games:o,selectedGame:s.game_id||"",onGameSelect:ie=>i({...s,game_id:ie}),placeholder:"Choose a Game"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"date",id:"purchaseDate",value:s.purchase_date,onChange:ie=>i({...s,purchase_date:ie.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Box Image"}),s.image_url&&!w&&a.jsx("div",{className:"mb-3 p-3 border border-border-custom rounded-lg bg-bg-secondary",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:s.image_url,alt:"Current box image",className:"w-12 h-12 object-cover rounded",onError:ie=>{const fe=ie.target;fe.style.display="none"}}),a.jsx("span",{className:"text-sm text-secondary-text",children:"Current image"})]}),a.jsx("button",{type:"button",onClick:C,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:a.jsx(Hr,{className:"w-4 h-4"})})]})}),w&&a.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-lg bg-red-50",children:a.jsx("p",{className:"text-sm text-red-700",children:"✓ Image will be deleted when you save changes"})}),a.jsxs("div",{className:"relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:H,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),p&&a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✓ New image ready for upload"}),!s.image_url&&!p&&!$&&s.name.trim()&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{type:"button",onClick:Z,disabled:b,className:"btn-secondary btn-full",children:b?"Searching for images...":"Find images for this box"})}),$&&a.jsx("div",{className:"mt-3 p-3 border border-green-300 rounded-lg bg-green-50",children:a.jsx("p",{className:"text-sm text-green-700",children:"✓ Image selected from search results"})})]}),j&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:j}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:De,className:"btn-ghost btn-flex",children:"Discard Changes"}),a.jsx("button",{type:"submit",disabled:E||v,className:"btn-primary btn-flex",children:v?"Processing...":E?"Saving...":"Save Changes"})]})]})]})}),m&&a.jsx(Fr,{isOpen:h,onClose:()=>{d(!1),f(null),u(null)},onCrop:ee,imageFile:m}),A&&a.jsx(Lx,{isOpen:A,onClose:()=>M(!1),images:I,onImageSelect:ne,searchQuery:`${s.name} ${((Me=o.find(ie=>ie.id===s.game_id))==null?void 0:Me.name)||""}`.trim(),onFindMoreImages:K,isLoadingMore:R})]})}function _E({isOpen:e,onClose:t,onConfirm:n,modelName:r,boxName:s,loading:i=!1}){if(!e)return null;const o=l=>{l.target===l.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:o,children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-title",children:["Remove ",r," from ",s,"?"]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),a.jsx("p",{className:"text-base text-secondary-text mb-6",children:"Are you sure you want to remove this model from this box? This won't delete the model or the box from your collection."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:t,disabled:i,className:"btn-ghost btn-flex",children:"Cancel"}),a.jsx("button",{onClick:n,disabled:i,className:"btn-primary btn-flex",children:i?"Removing...":"Remove from Box"})]})]})})}function CE({isOpen:e,onClose:t,onCollectionUpdated:n,box:r}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState(""),[m,f]=N.useState(!1),[p,y]=N.useState("");N.useEffect(()=>{r&&i(r.public??!1)},[r]);const E=async()=>{if(r){l(!0),d("");try{const{error:x}=await q.from("boxes").update({public:!s}).eq("id",r.id);if(x)throw x;const{error:j}=await q.from("models").update({public:!s}).eq("box_id",r.id);if(j)throw j;i(!s),n==null||n()}catch(x){d(x instanceof Error?x.message:"Failed to update collection visibility")}finally{l(!1)}}},g=async()=>{if(r){u(!0),d("");try{const x=wo(`/shared/collection/${r.id}`);await navigator.clipboard.writeText(x),y(`${r.name}'s URL has been copied to your clipboard!`),f(!0)}catch(x){console.error("Error copying URL:",x);const j=wo(`/shared/collection/${r.id}`),k=document.createElement("textarea");k.value=j,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k),y(`${r.name}'s URL has been copied to your clipboard!`),f(!0)}finally{u(!1)}}},v=x=>{x.target===x.currentTarget&&t()};return!e||!r?null:a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:v,children:[a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-title",children:["Share ",r.name]}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6 text-icon"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-sm text-secondary-text",children:"Sharing a collection makes it visible to other users who have the link to it. Additionally, models inside a shared collection also become visible."}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Qi,{className:"w-5 h-5 text-icon"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-input-label",children:"Make Public"}),a.jsx("p",{className:"text-xs text-secondary-text",children:"Allow anyone to view this collection"})]})]}),a.jsx("button",{onClick:E,disabled:o,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 disabled:opacity-50 ${s?"bg-brand":"bg-secondary-text"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),s&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wd,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-800",children:"This collection is now public and can be viewed by anyone with the link."})]})}),!s&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ix,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-800",children:"This collection is private and only visible to you."})]})}),s&&a.jsxs("button",{onClick:g,disabled:c,className:"btn-secondary btn-full btn-with-icon",children:[a.jsx(ex,{className:"w-4 h-4"}),a.jsx("span",{children:c?"Copying...":"Copy URL"})]}),h&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:h}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:t,className:"btn-secondary",children:"Done"})})]})]}),a.jsx(Xo,{message:p,isVisible:m,onClose:()=>f(!1)})]})}function EE({isOpen:e,onClose:t,onBoxDeleted:n,onModelsUpdated:r,onViewModel:s,onAddNewModel:i,box:o}){var De,Ae,Me,ie,fe;const[l,c]=we.useState(!1),[u,h]=we.useState(!1),[d,m]=we.useState(!1),[f,p]=we.useState(!1),[y,E]=we.useState({isOpen:!1,model:null}),[g,v]=we.useState(!1),[x,j]=we.useState(!1),[k,w]=we.useState(!1),[S,A]=we.useState([]),[M,b]=we.useState(!0),[P,I]=we.useState(null);we.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),we.useEffect(()=>{e&&o&&D()},[e,o]);const D=async()=>{if(o){b(!0),I(null);try{const{data:X,error:re}=await q.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          painted_date,
          purchase_date,
          lore_name,
          lore_description,
          painting_notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",o.id).order("created_at",{ascending:!1});if(re)throw re;A(X||[])}catch(X){I(X instanceof Error?X.message:"Failed to fetch models")}finally{b(!1)}}},$=()=>{h(!1),D(),r==null||r()},O=()=>{h(!1),v(!0),t()};we.useEffect(()=>{g&&!e&&(v(!1),i==null||i((o==null?void 0:o.id)||null))},[g,e,i,o==null?void 0:o.id]);const B=X=>{E({isOpen:!0,model:X})},G=async()=>{if(y.model){w(!0);try{const{error:X}=await q.from("models").update({box_id:null,public:!1}).eq("id",y.model.id);if(X)throw X;D(),r==null||r(),E({isOpen:!1,model:null})}catch(X){console.error("Error removing model from box:",X)}finally{w(!1)}}},R=X=>{t(),s==null||s(X)},z=()=>{m(!1),t(),r&&r()},_=()=>{r&&r()};if(!e||!o)return null;const H=X=>{X.target===X.currentTarget&&t()},ee=X=>Ht(X,{month:"2-digit",day:"2-digit",year:"2-digit"}),C=()=>{var re;if(o.image_url&&typeof o.image_url=="string"&&o.image_url.trim()!==""&&o.image_url!=="undefined"&&o.image_url!=="null"&&(o.image_url.startsWith("http")||o.image_url.startsWith("/")))return o.image_url;const X=(re=o.game)==null?void 0:re.image;return X&&typeof X=="string"&&X.trim()!==""&&X!=="undefined"&&X!=="null"&&X.startsWith("http")?X:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},Z=X=>{switch(X){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},ne=X=>{var ve;if(X.image_url&&typeof X.image_url=="string"&&X.image_url.trim()!==""&&X.image_url!=="undefined"&&X.image_url!=="null"&&(X.image_url.startsWith("http")||X.image_url.startsWith("/")))return{src:X.image_url,isGameFallback:!1};const re=(ve=X.game)==null?void 0:ve.icon;return re&&typeof re=="string"&&re.trim()!==""&&re!=="undefined"&&re!=="null"&&re.startsWith("http")?{src:re,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},K=()=>{p(!0)},he=()=>{c(!0)},Ee=async()=>{if(o){j(!0);try{if(o.image_url&&typeof o.image_url=="string"&&o.image_url.includes("supabase")){const re=o.image_url.split("/"),ve=re.findIndex(Te=>Te==="model-images");if(ve!==-1){const Te=re.slice(ve+1).join("/");await q.storage.from("model-images").remove([Te])}}const{error:X}=await q.from("boxes").delete().eq("id",o.id);if(X)throw X;c(!1),t(),n&&n()}catch(X){console.error("Error deleting box:",X)}finally{j(!1)}}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:H,children:a.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:C(),alt:o.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:X=>{const re=X.target,ve="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";re.src!==ve&&(console.log("Box modal image failed to load:",re.src,"Falling back to default"),re.src=ve)}})}),a.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:a.jsx(be,{className:"w-6 h-6 text-icon"})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6 relative",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:o.name}),a.jsx("button",{onClick:()=>m(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:a.jsx(Xi,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(De=o.game)!=null&&De.icon?a.jsx("img",{src:o.game.icon,alt:`${o.game.name} icon`,className:"object-cover rounded max-h-[32px]",onError:X=>{const re=X.target;console.warn("Game icon failed to load:",re.src,"Falling back to letter icon"),re.style.display="none";const ve=re.nextElementSibling;ve&&ve.classList.contains("icon-fallback")&&(ve.style.display="flex")},onLoad:X=>{const ve=X.target.nextElementSibling;ve&&ve.classList.contains("icon-fallback")&&(ve.style.display="none")}}):null,a.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Ae=o.game)!=null&&Ae.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((Me=o.game)==null?void 0:Me.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((ie=o.game)==null?void 0:ie.name)||"Unknown Game"})]})]}),a.jsx("div",{className:"space-y-3",children:o.purchase_date&&a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(ct,{className:"w-5 h-5 text-secondary-text"}),a.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",ee(o.purchase_date)]})]})}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:"Models in this Collection"}),M?a.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((X,re)=>a.jsx("div",{className:"bg-bg-secondary rounded-lg p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]})},re))}):P?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600",children:P})}):S.length===0?a.jsxs("div",{className:"text-center py-8 bg-bg-secondary rounded-lg",children:[a.jsx(gn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),a.jsx("p",{className:"text-secondary-text",children:"No models in this collection yet."}),a.jsx("p",{className:"text-sm text-secondary-text mt-2",children:'Use the "Add Models to Collection" button to add some!'})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:S.map(X=>a.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center justify-between hover:bg-bg-primary transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(()=>{const re=ne(X);return a.jsx("img",{src:re.src,alt:X.name,className:`w-12 h-12 object-cover rounded ${re.isGameFallback?"opacity-10":""}`,onError:ve=>{const Te=ve.target;Te.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-text truncate",children:X.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:"text-xs text-secondary-text",children:[X.count," model",X.count!==1?"s":""]}),X.status!=="None"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-secondary-text",children:"•"}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Z(X.status)}`,children:X.status})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>B(X),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:a.jsx(Hr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(X),className:"p-2 text-secondary-text hover:text-text transition-colors",children:a.jsx(dn,{className:"w-4 h-4"})})]})]},X.id))})]}),a.jsx("div",{className:"flex justify-center pt-6",children:a.jsxs("div",{className:"space-y-3 w-full",children:[a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-full btn-with-icon",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Models to Collection"})]}),a.jsxs("button",{onClick:K,className:"btn-secondary btn-full btn-with-icon",children:[a.jsx(Qi,{className:"w-4 h-4"}),a.jsx("span",{children:"Share Collection"})]}),a.jsx("button",{onClick:he,className:"btn-danger-outline btn-full",children:"Delete Collection"})]})})]})]})}),a.jsx(jE,{isOpen:l,onClose:()=>c(!1),onConfirm:Ee,boxName:o.name,loading:x}),a.jsx(NE,{isOpen:u,onClose:()=>h(!1),onModelsAdded:$,onAddNewModel:O,box:o}),a.jsx(SE,{isOpen:d,onClose:()=>m(!1),onBoxUpdated:z,box:o}),a.jsx(_E,{isOpen:y.isOpen,onClose:()=>E({isOpen:!1,model:null}),onConfirm:G,modelName:((fe=y.model)==null?void 0:fe.name)||"",boxName:(o==null?void 0:o.name)||"",loading:k}),a.jsx(CE,{isOpen:f,onClose:()=>p(!1),onCollectionUpdated:_,box:o})]})}function PE({isOpen:e,onClose:t}){const[n,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState(!1),[m,f]=N.useState(""),[p,y]=N.useState(!1),{updatePassword:E}=Ye(),g=async v=>{if(v.preventDefault(),d(!0),f(""),n.length<6){f("Password must be at least 6 characters long"),d(!1);return}if(n!==s){f("Passwords do not match"),d(!1);return}try{const{error:x}=await E(n);x?f(x.message):(y(!0),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{t(),r(""),i(""),y(!1)},2e3))}catch{f("An unexpected error occurred")}finally{d(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-title",children:"Set New Password"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:a.jsx(be,{className:"w-6 h-6"})})]}),p?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-green-600 text-lg font-semibold mb-2",children:"Password updated successfully!"}),a.jsx("p",{className:"text-secondary-text",children:"You can now use your new password to log in."})]}):a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsx("p",{className:"text-secondary-text text-sm",children:"Please set a new password for your account."}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:o?"text":"password",id:"newPassword",value:n,onChange:v=>r(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:o?a.jsx(xf,{className:"w-4 h-4"}):a.jsx(Qc,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",id:"confirmPassword",value:s,onChange:v=>i(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),a.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:c?a.jsx(xf,{className:"w-4 h-4"}):a.jsx(Qc,{className:"w-4 h-4"})})]})]}),m&&a.jsx("div",{className:"text-red-600 text-sm",children:m}),a.jsx("button",{type:"submit",disabled:h,className:"btn-primary btn-full",children:h?"Updating Password...":"Update Password"})]})]})}):null}function Om({isOpen:e,onClose:t,onBookingCreated:n,lastSelectedLocation:r="",onLocationSelected:s}){const[i,o]=N.useState([]),[l,c]=N.useState([]),[u,h]=N.useState([]),[d,m]=N.useState(r),[f,p]=N.useState(""),[y,E]=N.useState(""),[g,v]=N.useState(""),[x,j]=N.useState(""),[k,w]=N.useState(null),[S,A]=N.useState(!1),[M,b]=N.useState(0),[P,I]=N.useState(!1),[D,$]=N.useState(!1),[O,B]=N.useState(""),[G,R]=N.useState(null),[z,_]=N.useState(!1),{user:H}=Ye(),{recentGames:ee,addRecentGame:C}=Zo(),Z=()=>{try{return localStorage.getItem("mini-myths-last-location")||""}catch(te){return console.error("Error loading last selected location:",te),""}},ne=te=>{try{te&&localStorage.setItem("mini-myths-last-location",te)}catch(W){console.error("Error saving last selected location:",W)}};we.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),N.useEffect(()=>{if(e){De(),Me(),Ee();const te=Z();m(te||r),H!=null&&H.user_name_public&&j(H.user_name_public)}},[e,r]),N.useEffect(()=>{d?(Ae(),ne(d),s==null||s(d)):(c([]),E(""))},[d,s]),N.useEffect(()=>{f&&(E(""),w(null))},[f]),N.useEffect(()=>{d&&f?K():R(null)},[d,f]),N.useEffect(()=>{G&&E("")},[G]),N.useEffect(()=>{d&&f&&y?he():w(null)},[d,f,y]);const K=async()=>{if(!(!d||!f)){_(!0);try{console.log("Checking blocked date for:",{selectedLocation:d,selectedDate:f});const{data:te,error:W}=await q.from("blocked_dates").select("description").eq("location_id",d).eq("date",f);if(console.log("Blocked date query result:",{data:te,error:W}),W){console.error("Error checking blocked date:",W),R(null);return}te&&te.length>0?(console.log("Found blocked date:",te[0]),R({description:te[0].description})):(console.log("No blocked date found for this location/date"),R(null))}catch(te){console.error("Error checking blocked date:",te),R(null)}finally{_(!1)}}},he=async()=>{if(!(!d||!f||!y)){A(!0);try{const{data:te,error:W}=await q.from("locations").select("tables").eq("id",d).single();if(W)throw W;const Q=te.tables,ae=l.find(U=>U.id===y),Ie=(ae==null?void 0:ae.isAllDay)||!1;let T=0;if(Ie){const{data:U,error:V}=await q.from("bookings").select("timeslot_id").eq("location_id",d).eq("date",f);if(V)throw V;const oe={};U==null||U.forEach(_e=>{const pe=_e.timeslot_id;oe[pe]=(oe[pe]||0)+1}),T=Math.max(0,...Object.values(oe))}else{const{data:U,error:V}=await q.from("bookings").select("id").eq("location_id",d).eq("date",f).eq("timeslot_id",y);if(V)throw V;const{data:oe,error:_e}=await q.from("bookings").select("timeslot:timeslots(id, name, start_time, end_time)").eq("location_id",d).eq("date",f);if(_e)throw _e;const pe=(U==null?void 0:U.length)||0,de=(oe==null?void 0:oe.filter(me=>{const xe=me.timeslot;return xe&&(xe.name==="All Day Booking"||xe.start_time==="00:00:00"&&xe.end_time==="23:59:59")}).length)||0;T=pe+de}const L=Q-T;w(Math.max(0,L))}catch(te){console.error("Error checking table availability:",te),w(null)}finally{A(!1)}}},Ee=async()=>{if(H){I(!0);try{const te=cu(),{data:W,error:Q}=await q.from("bookings").select("id").eq("user_id",H.id).gte("date",te);if(Q)throw Q;b((W==null?void 0:W.length)||0)}catch(te){console.error("Error checking current bookings:",te),b(0)}finally{I(!1)}}},De=async()=>{try{const{data:te,error:W}=await q.from("locations").select("*").order("name");if(W)throw W;o(te||[])}catch(te){console.error("Error fetching locations:",te)}},Ae=async()=>{try{const{data:te,error:W}=await q.from("timeslots").select("*").eq("location_id",d).order("start_time");if(W)throw W;const Q=(te||[]).map(ae=>({...ae,isAllDay:ae.name==="All Day Booking"||ae.start_time==="00:00:00"&&ae.end_time==="23:59:59"}));c(Q)}catch(te){console.error("Error fetching timeslots:",te)}},Me=async()=>{try{const{data:te,error:W}=await q.from("games").select("id, name, icon").order("name");if(W)throw W;h(te||[])}catch(te){console.error("Error fetching games:",te)}},ie=()=>!(H!=null&&H.fav_games)||H.fav_games.length===0?[]:u.filter(te=>{var W;return(W=H.fav_games)==null?void 0:W.includes(te.id)}),fe=te=>{v(te);const W=u.find(Q=>Q.id===te);W&&C(W)},X=()=>{if(!f)return null;const te=new Date(f);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][te.getDay()]},re=()=>{const te=X();return te?l.filter(W=>W.availability&&W.availability.includes(te)):[]},ve=te=>te==="00:00:00"?"All Day":new Date(`2000-01-01T${te}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),Te=async te=>{if(te.preventDefault(),!(!d||!f||!y||!H)){$(!0),B("");try{x.trim()&&H.user_name_public!==x.trim()&&await q.from("users").update({user_name_public:x.trim()}).eq("id",H.id);const{error:W}=await q.from("bookings").insert({location_id:d,timeslot_id:y,game_id:g||null,date:f,user_id:H.id,user_name:x.trim(),user_email:H.email});if(W)throw W;if(g){const Q=u.find(ae=>ae.id===g);Q&&C(Q)}m(""),p(""),E(""),v(""),j(""),R(null),n(),t(),b(Q=>Q+1)}catch(W){B(W instanceof Error?W.message:"Failed to create booking")}finally{$(!1)}}},We=d&&f&&y&&x.trim()&&M<4&&!G;if(!e)return null;const Ze=te=>{te.target===te.currentTarget&&t()},at=re();return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Ze,children:a.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-text font-overpass",children:"New Booking"}),a.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:a.jsx(be,{className:"w-6 h-6"})})]}),P?a.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking booking limit..."})]})}):M>=4?a.jsx("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:a.jsx("span",{className:"text-red-700 text-sm font-medium",children:"⚠️ You have reached the maximum of 4 active bookings. Cancel an existing booking to create a new one."})}):M>=3?a.jsx("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200",children:a.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:["⚠️ You have ",M," active booking",M!==1?"s":"",". You can create ",4-M," more."]})}):null,a.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Your Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"userName",value:x,onChange:te=>j(te.target.value),placeholder:"Enter your full name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),a.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"This will be shared with the store for your booking."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game (Optional)"}),a.jsx(na,{games:u,selectedGame:g,onGameSelect:fe,placeholder:"Choose a Game (Optional)",favoriteGames:ie()})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"location",value:d,onChange:te=>m(te.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0,children:[a.jsx("option",{value:"",children:"Select Location"}),i.map(te=>a.jsxs("option",{value:te.id,children:[te.name," - ",te.tables," table",te.tables!==1?"s":""]},te.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Date"}),a.jsx(Hi,{value:f,onChange:p,minDate:cu(),placeholder:"Select a date"})]}),!G&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeslot",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot"}),a.jsxs("div",{className:"relative",children:[a.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsxs("select",{id:"timeslot",value:y,onChange:te=>E(te.target.value),disabled:!d||!f,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text disabled:opacity-50 disabled:cursor-not-allowed",required:!0,children:[a.jsx("option",{value:"",children:d?f?at.length===0?"No timeslots available for this day":"Select Timeslot":"Select date first":"Select location first"}),at.map(te=>a.jsx("option",{value:te.id,children:te.isAllDay?`${te.name} (All Day)`:`${te.name} (${ve(te.start_time)} - ${ve(te.end_time)})`},te.id))]})]}),f&&at.length===0&&d&&a.jsxs("p",{className:"text-sm text-secondary-text mt-1",children:["No timeslots available for ",X()," at this location."]})]}),z?a.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking date availability..."})]})}):G?a.jsxs("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:[a.jsx("div",{className:"flex items-start space-x-2",children:a.jsx("span",{className:"text-red-700 text-sm font-medium",children:"🚫 Location Unavailable"})}),a.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["This location is blocked on the selected date.",G.description&&a.jsxs("span",{className:"block mt-1",children:[a.jsx("strong",{children:"Reason:"})," ",G.description]})]})]}):null,O&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:O}),!G&&d&&f&&y&&a.jsx("div",{className:`p-4 rounded-lg border ${S?"bg-blue-50 border-blue-200":k===null?"bg-gray-50 border-gray-200":k===0?"bg-red-50 border-red-200":k<=2?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:S?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking table availability..."})]}):k===null?a.jsx("span",{className:"text-gray-700 text-sm font-medium",children:"Unable to check table availability"}):k===0?a.jsx("span",{className:"text-red-700 text-sm font-medium",children:"⚠️ No tables available for this timeslot"}):k<=2?a.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:["⚠️ Only ",k," table",k!==1?"s":""," remaining"]}):a.jsxs("span",{className:"text-green-700 text-sm font-medium",children:["✅ ",k," table",k!==1?"s":""," available"]})}),a.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:!We||D||k===0||M>=4||G,className:`btn-full ${We&&!D&&k!==0&&M<4&&!G?"btn-primary":"btn-disabled"}`,children:D?"Creating Booking...":M>=4?"Booking Limit Reached":k===0?"No Tables Available":G?"Location Unavailable":"Confirm Booking"}),a.jsx("button",{type:"button",onClick:t,className:"btn-danger-outline btn-full",children:"Cancel"})]})]})]})})}function TE(){const[e,t]=N.useState(null),[n,r]=N.useState(!0),{user:s}=Ye();return N.useEffect(()=>{(async()=>{try{const o=window.location.hash,l=new URLSearchParams(window.location.search);if(o.includes("access_token")||l.has("code"))setTimeout(()=>{r(!1),window.location.href=xi()},1e3);else if(o.includes("error")){const c=new URLSearchParams(o.substring(1)).get("error_description");t(c||"Authentication failed"),r(!1)}else t("Invalid authentication callback"),r(!1)}catch(o){console.error("Auth callback error:",o),t("Authentication failed"),r(!1)}})()},[]),N.useEffect(()=>{s&&!n&&(window.location.href=xi())},[s,n]),n?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),a.jsx("p",{className:"text-text",children:"Completing authentication..."})]})}):e?a.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),a.jsx("h1",{className:"text-2xl font-bold text-title mb-4",children:"Authentication Failed"}),a.jsx("p",{className:"text-red-500 mb-6",children:e}),a.jsx("button",{onClick:()=>window.location.href=xi(),className:"btn-primary",children:"Return to Home"})]})}):null}function Wy({isExpanded:e,onClick:t}){return a.jsx("button",{onClick:t,className:`w-14 h-14 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 flex items-center justify-center ${e?"bg-brand-hover text-white":"bg-brand hover:bg-brand-hover text-white"}`,children:e?a.jsx(be,{className:"w-6 h-6 transition-transform duration-200"}):a.jsx(Or,{className:"w-6 h-6 transition-transform duration-200"})})}function Nu({icon:e,label:t,onClick:n,animationClass:r="animate-fab-slide-in"}){return a.jsxs("button",{onClick:n,className:`flex items-center space-x-3 bg-brand hover:bg-brand-hover text-white px-8 py-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 ${r}`,children:[a.jsx(e,{className:"w-8 h-8"}),a.jsx("span",{className:"text-sm font-medium",children:t})]})}function IE({onAddModel:e,onAddCollection:t}){const[n,r]=N.useState(!1),s=()=>{r(!n)},i=()=>{r(!1),e()},o=()=>{r(!1),t()};return a.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[n&&a.jsxs("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:[a.jsx(Nu,{icon:Sn,label:"Add Model",onClick:i,animationClass:"animate-fab-slide-in-delayed"}),a.jsx(Nu,{icon:gn,label:"Add Collection",onClick:o,animationClass:"animate-fab-slide-in"})]}),a.jsx(Wy,{isExpanded:n,onClick:s})]})}function AE({onNewBooking:e}){const[t,n]=N.useState(!1),r=()=>{n(!t)},s=()=>{n(!1),e()};return a.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[t&&a.jsx("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:a.jsx(Nu,{icon:ct,label:"New Table Booking",onClick:s,animationClass:"animate-fab-slide-in"})}),a.jsx(Wy,{isExpanded:t,onClick:r})]})}const nc="2025-08-27 06:18:33 UTC",Rm=()=>({timestamp:nc,date:new Date(nc).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:new Date(nc).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})});function lr({options:e,selectedOptions:t,onSelectionChange:n,placeholder:r="Select options",maxSelections:s=5,searchable:i=!0,type:o="game"}){const[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,m]=N.useState({top:0,left:0,width:0,maxHeight:400}),f=N.useRef(null),p=N.useRef(null),y=e.filter(k=>k.name.toLowerCase().includes(u.toLowerCase())||k.address&&k.address.toLowerCase().includes(u.toLowerCase()));N.useEffect(()=>{if(l&&f.current){const k=f.current.getBoundingClientRect(),w=window.innerHeight-k.bottom,A=Math.min(400,w-20);m({top:k.bottom,left:k.left,width:k.width,maxHeight:A})}},[l]),N.useEffect(()=>{const k=w=>{f.current&&!f.current.contains(w.target)&&p.current&&!p.current.contains(w.target)&&(c(!1),h(""))};if(l)return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[l]);const E=k=>{const w=t.includes(k)?t.filter(S=>S!==k):t.length<s?[...t,k]:t;n(w)},g=k=>{n(t.filter(w=>w!==k))},v=()=>t.map(k=>{var w;return(w=e.find(S=>S.id===k))==null?void 0:w.name}).filter(Boolean),x=k=>k.icon?a.jsx("img",{src:k.icon,alt:`${k.name} icon`,className:"w-6 h-6 rounded object-cover"}):a.jsx("div",{className:"w-6 h-6 rounded bg-bg-secondary flex items-center justify-center text-xs",children:o==="game"?"🎮":"📍"}),j=()=>a.jsxs("div",{ref:p,className:"absolute z-[9999] bg-bg-primary border border-border-custom rounded-lg shadow-lg overflow-hidden",style:{top:`${d.top}px`,left:`${d.left}px`,width:`${d.width}px`,maxHeight:`${d.maxHeight}px`},children:[i&&a.jsx("div",{className:"p-3 border-b border-border-custom",children:a.jsxs("div",{className:"relative",children:[a.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),a.jsx("input",{type:"text",value:u,onChange:k=>h(k.target.value),placeholder:"Search...",className:"w-full pl-10 pr-12 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text text-sm"}),a.jsx("button",{type:"button",onClick:()=>c(!1),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-text transition-colors",children:a.jsx(be,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${d.maxHeight-120}px`},children:y.length===0?a.jsx("div",{className:"p-4 text-center text-secondary-text text-sm",children:"No options found"}):y.map(k=>{const w=t.includes(k.id),S=!w&&t.length>=s;return a.jsxs("button",{type:"button",onClick:()=>E(k.id),disabled:S,className:`w-full p-3 flex items-center space-x-3 hover:bg-bg-secondary transition-colors ${w?"bg-bg-secondary":""} ${S?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[x(k),a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsx("div",{className:"text-text font-medium truncate",children:k.name}),k.address&&a.jsx("div",{className:"text-secondary-text text-sm truncate",children:k.address})]})]}),w&&a.jsx(Jc,{className:"w-4 h-4 text-[var(--color-brand)] flex-shrink-0"})]},k.id)})}),t.length>0&&a.jsx("div",{className:"p-3 border-t border-border-custom",children:a.jsxs("div",{className:"text-xs text-secondary-text",children:[t.length," of ",s," selected"]})})]});return a.jsxs("div",{ref:f,className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>c(!l),className:"w-full p-3 border border-border-custom rounded-lg bg-bg-primary text-left hover:border-[var(--color-brand)] transition-colors focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)]",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 min-w-0",children:t.length>0?a.jsx("div",{className:"flex flex-wrap gap-1",children:v().map((k,w)=>a.jsxs("span",{className:"inline-flex items-center space-x-1 bg-bg-secondary px-2 py-1 rounded text-sm",children:[a.jsx("span",{className:"truncate max-w-20",children:k}),a.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),g(t[w])},className:"hover:text-red-500 transition-colors",children:a.jsx(be,{className:"w-3 h-3"})})]},w))}):a.jsx("span",{className:"text-secondary-text",children:r})}),a.jsx(Ds,{className:`w-4 h-4 text-icon transition-transform ${l?"rotate-180":""}`})]})}),l&&Jg.createPortal(j(),document.body)]})}function ME({games:e,boxes:t,models:n,selectedBoxes:r,selectedGames:s,selectedStatuses:i,searchQuery:o,onBoxesChange:l,onGamesChange:c,onStatusesChange:u,onSearchChange:h,onClearFilters:d}){const[m,f]=N.useState(!1),p=r.length>0||s.length>0||i.length>0||o.length>0,y=()=>{const P=new Map;return n.forEach(I=>{if(I.box){const D=I.box.id,$=I.box.name,O=P.get(D)||{name:$,count:0};O.count++,P.set(D,O)}}),Array.from(P.entries()).map(([I,{name:D,count:$}])=>({id:I,name:D,count:$})).sort((I,D)=>D.count-I.count)},E=()=>{const P=new Map;return n.forEach(I=>{var O,B,G,R,z,_;const D=((B=(O=I.box)==null?void 0:O.game)==null?void 0:B.id)||((G=I.game)==null?void 0:G.id),$=((z=(R=I.box)==null?void 0:R.game)==null?void 0:z.name)||((_=I.game)==null?void 0:_.name);if(D&&$){const H=P.get(D)||{name:$,count:0};H.count++,P.set(D,H)}}),Array.from(P.entries()).map(([I,{name:D,count:$}])=>({id:I,name:D,count:$})).sort((I,D)=>D.count-I.count)},g=()=>{const P=new Map;return n.forEach(I=>{const D=P.get(I.status)||0;P.set(I.status,D+1)}),Array.from(P.entries()).map(([I,D])=>({status:I,count:D})).sort((I,D)=>D.count-I.count)},v=y(),x=E(),j=g(),k=v.map(P=>{const I=t.find(D=>D.id===P.id);return{id:P.id,name:`${P.name} (${P.count})`,icon:(I==null?void 0:I.image_url)||null}}),w=x.map(P=>{const I=e.find(D=>D.id===P.id);return{id:P.id,name:`${P.name} (${P.count})`,icon:(I==null?void 0:I.icon)||null}}),S=j.map(({status:P,count:I})=>({id:P,name:`${P} (${I})`})),A=P=>{const I=r.includes(P)?r.filter(D=>D!==P):[...r,P];l(I)},M=P=>{const I=s.includes(P)?s.filter(D=>D!==P):[...s,P];c(I)},b=P=>{const I=i.includes(P)?i.filter(D=>D!==P):[...i,P];u(I)};return a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nx,{className:"w-5 h-5 text-secondary-text"}),a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[p&&a.jsxs("button",{onClick:d,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[a.jsx(be,{className:"w-4 h-4 text-icon"}),a.jsx("span",{children:"Clear all"})]}),a.jsxs("button",{onClick:()=>f(!m),className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[m?a.jsx(Ds,{className:"w-4 h-4"}):a.jsx(dn,{className:"w-4 h-4"}),a.jsx("span",{children:m?"Collapse":"Expand"})]})]})]}),m&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Models"}),a.jsx("input",{type:"text",value:o,onChange:P=>h(P.target.value),placeholder:"Search by model name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collections"}),a.jsx(lr,{options:k,selectedOptions:r,onSelectionChange:l,placeholder:"Select collections...",maxSelections:10,searchable:!0,type:"game"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),a.jsx(lr,{options:w,selectedOptions:s,onSelectionChange:c,placeholder:"Select games...",maxSelections:10,searchable:!0,type:"game"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Statuses"}),a.jsx(lr,{options:S,selectedOptions:i,onSelectionChange:u,placeholder:"Select statuses...",maxSelections:10,searchable:!0,type:"game"})]})]})]}),p&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:['Search: "',o,'"']}),a.jsx("button",{onClick:()=>h(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]}),r.map(P=>{var D;const I=((D=v.find($=>$.id===P))==null?void 0:D.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Collection: ",I]}),a.jsx("button",{onClick:()=>A(P),className:"text-amber-600 hover:text-amber-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},P)}),s.map(P=>{var D;const I=((D=x.find($=>$.id===P))==null?void 0:D.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Game: ",I]}),a.jsx("button",{onClick:()=>M(P),className:"text-blue-600 hover:text-blue-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},P)}),i.map(P=>a.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Status: ",P]}),a.jsx("button",{onClick:()=>b(P),className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},P))]})})]})}function LE({games:e,boxes:t,selectedGames:n,searchQuery:r,onGamesChange:s,onSearchChange:i,onClearFilters:o}){const[l,c]=N.useState(!1),u=n.length>0||r.length>0,d=(()=>{const p=new Map;return t.forEach(y=>{if(y.game){const E=y.game.id,g=y.game.name,v=p.get(E)||{name:g,count:0};v.count++,p.set(E,v)}}),Array.from(p.entries()).map(([y,{name:E,count:g}])=>({id:y,name:E,count:g})).sort((y,E)=>E.count-y.count)})(),m=d.map(p=>{const y=e.find(E=>E.id===p.id);return{id:p.id,name:`${p.name} (${p.count})`,icon:(y==null?void 0:y.icon)||null}}),f=p=>{const y=n.includes(p)?n.filter(E=>E!==p):[...n,p];s(y)};return a.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nx,{className:"w-5 h-5 text-secondary-text"}),a.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[u&&a.jsxs("button",{onClick:o,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[a.jsx(be,{className:"w-4 h-4 text-icon"}),a.jsx("span",{children:"Clear all"})]}),a.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[l?a.jsx(Ds,{className:"w-4 h-4"}):a.jsx(dn,{className:"w-4 h-4"}),a.jsx("span",{children:l?"Collapse":"Expand"})]})]})]}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Collections"}),a.jsx("input",{type:"text",value:r,onChange:p=>i(p.target.value),placeholder:"Search by collection name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),a.jsx(lr,{options:m,selectedOptions:n,onSelectionChange:s,placeholder:"Select games...",maxSelections:10,searchable:!0,type:"game"})]})})]}),u&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:['Search: "',r,'"']}),a.jsx("button",{onClick:()=>i(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]}),n.map(p=>{var E;const y=((E=d.find(g=>g.id===p))==null?void 0:E.name)||"";return a.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[a.jsxs("span",{children:["Game: ",y]}),a.jsx("button",{onClick:()=>f(p),className:"text-blue-600 hover:text-blue-800 transition-colors",children:a.jsx(be,{className:"w-3 h-3 text-icon"})})]},p)})]})})]})}function DE({isOpen:e,onClose:t,onComplete:n}){const{user:r}=Ye(),[s,i]=N.useState(1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,d]=N.useState(""),[m,f]=N.useState([]),[p,y]=N.useState([]),[E,g]=N.useState([]),[v,x]=N.useState([]),j=["fuck","shit","bitch","ass","damn","hell","crap","piss","dick","cock","pussy","cunt","bastard","whore","slut","faggot","nigger","nigga","fag","dyke","retard","spic","kike","fuk","fuq","sh1t","sh!t","b!tch","b1tch","a$$","a55","d!ck","d1ck","p!ss","p1ss","noob","n00b","nub","scrub","get gud","git gud","uninstall","kys","kys","kys","f*ck","f**k","f***","s**t","s***","b***h","a**","d**k","p**s","c**t"],k=O=>{const B=O.toLowerCase();return j.some(G=>new RegExp(`\\b${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b|${G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"i").test(B))},w=()=>h.length>=5&&h.length<=20&&!k(h)&&/^[a-zA-Z0-9\s]+$/.test(h);N.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const{data:O,error:B}=await q.from("games").select("id, name, icon").order("name");if(B)throw B;g(O||[]);const{data:G,error:R}=await q.from("locations").select("id, name, address, icon").order("name");if(R)throw R;x(G||[])}catch(O){console.error("Error fetching data:",O),u("Failed to load data")}},A=()=>{s<3&&(i(s+1),u(null))},M=()=>{s>1&&(i(s-1),u(null))},b=async()=>{if(r){l(!0),u(null);try{const{error:O}=await q.from("users").update({user_name_public:h.trim(),fav_games:m.length>0?m:null,fav_locations:p.length>0?p:null,onboarded:!0}).eq("id",r.id);if(O)throw O;n()}catch(O){u(O instanceof Error?O.message:"Failed to save preferences")}finally{l(!1)}}},P=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Welcome to BattlePlan!"}),a.jsx("p",{className:"text-secondary-text",children:"Let's get you set up with your profile. First, let's set your display name."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label mb-2",children:"Display Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"userName",value:h,onChange:O=>d(O.target.value),placeholder:"Enter your display name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),a.jsxs("div",{className:"mt-2 text-sm text-secondary-text",children:[a.jsx("p",{children:"• Must be 5-20 characters long"}),a.jsx("p",{children:"• Can contain letters, numbers, and spaces"}),a.jsx("p",{children:"• Cannot contain inappropriate language"})]}),h&&!w()&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:k(h)?"Display name contains inappropriate language":"Please enter a valid display name (5-20 characters, letters, numbers, and spaces only)"})]})]}),I=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Favorite Games"}),a.jsx("p",{className:"text-secondary-text",children:"Select up to 5 of your favorite games (optional)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Select Games"}),a.jsx(lr,{options:E,selectedOptions:m,onSelectionChange:f,placeholder:"Choose your favorite games",maxSelections:5,type:"game"})]})]}),D=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-title mb-2",children:"Favorite Locations"}),a.jsx("p",{className:"text-secondary-text",children:"Select up to 5 of your favorite gaming locations (optional)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Select Locations"}),a.jsx(lr,{options:v,selectedOptions:p,onSelectionChange:y,placeholder:"Choose your favorite locations",maxSelections:5,type:"location"})]})]}),$=()=>{switch(s){case 1:return P();case 2:return I();case 3:return D();default:return null}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-bg-primary rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"flex items-center justify-between p-6 border-b border-border-custom",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[s>1&&a.jsx("button",{type:"button",onClick:M,className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",children:a.jsx(Wt,{className:"w-5 h-5 text-icon"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-title",children:"Setup Profile"}),a.jsxs("p",{className:"text-sm text-secondary-text",children:["Step ",s," of 3"]})]})]})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx("div",{className:"w-full bg-bg-secondary rounded-full h-2",children:a.jsx("div",{className:"bg-[var(--color-brand)] h-2 rounded-full transition-all duration-300",style:{width:`${s/3*100}%`}})})}),a.jsx("div",{className:"px-6 py-4 flex-1 overflow-y-auto",children:$()}),c&&a.jsx("div",{className:"px-6 py-3",children:a.jsx("p",{className:"text-sm text-red-500 text-center",children:c})}),a.jsx("div",{className:"p-6 border-t border-border-custom",children:a.jsx("div",{className:"flex justify-between",children:s<3?a.jsxs("button",{type:"button",onClick:A,disabled:s===1&&!w(),className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{children:"Next"}),a.jsx(gf,{className:"w-4 h-4"})]}):a.jsx("button",{type:"button",onClick:b,disabled:o,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Complete Setup"}),a.jsx(gf,{className:"w-4 h-4"})]})})})})]})}):null}function OE({onBack:e}){const{user:t}=Ye(),[n,r]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState(""),[h,d]=N.useState([]),[m,f]=N.useState([]),[p,y]=N.useState([]),[E,g]=N.useState([]),v=["fuck","shit","bitch","ass","damn","hell","crap","piss","dick","cock","pussy","cunt","bastard","whore","slut","faggot","nigger","nigga","fag","dyke","retard","spic","kike","fuk","fuq","sh1t","sh!t","b!tch","b1tch","a$$","a55","d!ck","d1ck","p!ss","p1ss","noob","n00b","nub","scrub","get gud","git gud","uninstall","kys","kys","kys","f*ck","f**k","f***","s**t","s***","b***h","a**","d**k","p**s","c**t"],x=M=>{const b=M.toLowerCase();return v.some(P=>new RegExp(`\\b${P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b|${P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"i").test(b))},j=()=>c?!(c.length<5||c.length>20||!/^[a-zA-Z0-9\s]+$/.test(c)||x(c)):!0;N.useEffect(()=>{t&&(u(t.user_name_public||""),d(t.fav_games||[]),f(t.fav_locations||[]),k(),w())},[t]);const k=async()=>{try{const{data:M,error:b}=await q.from("games").select("id, name, icon").order("name");if(b)throw b;y(M||[])}catch(M){console.error("Error fetching games:",M),i("Failed to load games")}},w=async()=>{try{const{data:M,error:b}=await q.from("locations").select("id, name, address, icon").order("name");if(b)throw b;g(M||[])}catch(M){console.error("Error fetching locations:",M),i("Failed to load locations")}},S=async()=>{if(t){if(c&&!j()){i("Please enter a valid display name (5-20 characters, letters, numbers, and spaces only)");return}r(!0),i(null),l(null);try{const{error:M}=await q.from("users").update({user_name_public:c||null,fav_games:h.length>0?h:null,fav_locations:m.length>0?m:null}).eq("id",t.id);if(M)throw M;l("Settings saved successfully!"),t&&(t.user_name_public=c||null,t.fav_games=h.length>0?h:null,t.fav_locations=m.length>0?m:null)}catch(M){console.error("Error saving settings:",M),i("Failed to save settings. Please try again.")}finally{r(!1)}}},A=()=>{t&&(u(t.user_name_public||""),d(t.fav_games||[]),f(t.fav_locations||[])),i(null),l(null)};return a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(RE,{onBack:e}),a.jsx("main",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-title mb-2",children:"Settings"}),a.jsx("p",{className:"text-secondary-text",children:"Manage your profile preferences and favorite games and locations."})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label mb-2",children:"Display Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),a.jsx("input",{type:"text",id:"userName",value:c,onChange:M=>u(M.target.value),placeholder:"Enter your display name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),a.jsxs("div",{className:"mt-2 text-sm text-secondary-text",children:[a.jsx("p",{children:"• Must be 5-20 characters long"}),a.jsx("p",{children:"• Can contain letters, numbers, and spaces"}),a.jsx("p",{children:"• Cannot contain inappropriate language"}),a.jsx("p",{children:"• Leave empty to hide your display name"})]}),c&&!j()&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:x(c)?"Display name contains inappropriate language":"Please enter a valid display name (5-20 characters, letters, numbers, and spaces only)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Favorite Games"}),a.jsx(lr,{options:p,selectedOptions:h,onSelectionChange:d,placeholder:"Select your favorite games",maxSelections:5,type:"game"}),a.jsx("p",{className:"mt-2 text-sm text-secondary-text",children:"Select up to 5 of your favorite games. These will be prioritized in dropdowns."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-input-label mb-2",children:"Favorite Locations"}),a.jsx(lr,{options:E,selectedOptions:m,onSelectionChange:f,placeholder:"Select your favorite locations",maxSelections:5,type:"location"}),a.jsx("p",{className:"mt-2 text-sm text-secondary-text",children:"Select up to 5 of your favorite locations. These will be prioritized in dropdowns."})]}),s&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:s})}),o&&a.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-green-600",children:o})}),a.jsxs("div",{className:"flex space-x-4 pt-4",children:[a.jsxs("button",{onClick:A,disabled:n,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 border border-border-custom rounded-lg bg-bg-primary text-text hover:bg-bg-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(be,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:S,disabled:n||c&&!j(),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-[var(--color-brand)] text-white rounded-lg hover:bg-[var(--color-brand)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Ov,{className:"w-4 h-4"}),a.jsx("span",{children:n?"Saving...":"Save"})]})]})]})]})})]})}function RE({onBack:e}){return a.jsx("header",{className:"bg-bg-primary border-b border-border-custom",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-text hover:text-secondary-text transition-colors",children:[a.jsx(Wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-lg font-semibold text-title",children:"Settings"}),a.jsx("div",{className:"w-20"})," "]})})})}function FE(){const e=window.location.pathname.endsWith("/auth/callback"),t=window.location.pathname.match(/\/shared\/collection\/(.+)$/),n=t?t[1]:null,r=window.location.pathname.match(/\/shared\/model\/(.+)$/),s=r?r[1]:null;if(e)return a.jsx(TE,{});if(n)return a.jsx(Gy,{collectionId:n});if(s){const F=new URLSearchParams(window.location.search),ue=F.get("from"),Je=F.get("collectionName");let tt;return ue&&Je&&(tt={collectionId:ue,collectionName:decodeURIComponent(Je)}),a.jsx(qy,{modelId:s,breadcrumbs:tt})}const[i,o]=N.useState("collection"),[l,c]=N.useState("recent"),[u,h]=N.useState(1),[d,m]=N.useState(1),[f,p]=N.useState({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),[y,E]=N.useState({selectedGames:[],searchQuery:""}),[g,v]=N.useState([]),[x,j]=N.useState({isOpen:!1,mode:"login"}),[k,w]=N.useState(!1),[S,A]=N.useState(!1),[M,b]=N.useState(!1),[P,I]=N.useState(!1),[D,$]=N.useState(!1),[O,B]=N.useState(!1),[G,R]=N.useState(null),[z,_]=N.useState({isOpen:!1,model:null}),[H,ee]=N.useState(0),[C,Z]=N.useState({isOpen:!1,box:null}),{user:ne,loading:K,needsPasswordReset:he}=Ye(),{models:Ee,loading:De,refetch:Ae}=Dx(),{boxes:Me,loading:ie,refetch:fe}=Ox();N.useEffect(()=>{ne&&X()},[ne]);const X=async()=>{try{const{data:F,error:ue}=await q.from("games").select("id, name, icon").order("name");if(ue)throw ue;v(F||[])}catch(F){console.error("Error fetching games:",F)}},re=6,ve=F=>{p(ue=>({...ue,selectedBoxes:F})),h(1)},Te=F=>{p(ue=>({...ue,selectedGames:F})),h(1)},We=F=>{p(ue=>({...ue,selectedStatuses:F})),h(1)},Ze=()=>{p({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),h(1)},at=F=>{E(ue=>({...ue,selectedGames:F})),m(1)},te=()=>{E({selectedGames:[],searchQuery:""}),m(1)},W=F=>{p(ue=>({...ue,searchQuery:F})),h(1)},Q=F=>{E(ue=>({...ue,searchQuery:F})),m(1)},ae=Ee.filter(F=>{var ue,Je,tt,nn;return!(f.searchQuery&&!F.name.toLowerCase().includes(f.searchQuery.toLowerCase())||f.selectedBoxes.length>0&&!f.selectedBoxes.includes(((ue=F.box)==null?void 0:ue.id)||"")||f.selectedGames.length>0&&!f.selectedGames.includes(((tt=(Je=F.box)==null?void 0:Je.game)==null?void 0:tt.id)||"")&&!f.selectedGames.includes(((nn=F.game)==null?void 0:nn.id)||"")||f.selectedStatuses.length>0&&!f.selectedStatuses.includes(F.status))}),Ie=Ee.filter(F=>F.status==="Painted").sort((F,ue)=>F.painted_date&&ue.painted_date?new Date(ue.painted_date).getTime()-new Date(F.painted_date).getTime():F.painted_date&&!ue.painted_date?-1:!F.painted_date&&ue.painted_date?1:new Date(ue.created_at).getTime()-new Date(F.created_at).getTime()),T=Me.filter(F=>{var ue;return!(y.searchQuery&&!F.name.toLowerCase().includes(y.searchQuery.toLowerCase())||y.selectedGames.length>0&&!y.selectedGames.includes(((ue=F.game)==null?void 0:ue.id)||""))}),L=Math.ceil(ae.length/re),U=Math.ceil(Ie.length/re),V=Math.ceil(T.length/re),oe=ae.slice((u-1)*re,u*re),_e=Ie.slice((u-1)*re,u*re),pe=T.slice((d-1)*re,d*re),de=()=>{Ae(),fe();try{const F=localStorage.getItem("mini-myths-temp-box-context");if(F){const ue=JSON.parse(F),Je=Me.find(tt=>tt.id===ue.id);Je&&Z({isOpen:!0,box:Je}),localStorage.removeItem("mini-myths-temp-box-context")}}catch(F){console.error("Error handling return to box modal:",F),localStorage.removeItem("mini-myths-temp-box-context")}R(null)},me=F=>{_({isOpen:!0,model:F})},xe=F=>{Z({isOpen:!0,box:F})},ke=()=>{Ae(),fe()},et=async()=>{await Ae(),await fe()},tn=()=>{fe(),Ae()},Vy=()=>{fe(),Ae()},Ky=F=>{R(F),w(!0)},Yy=F=>{R(F),w(!0)},Bs=()=>{I(!0)},Wr=()=>{$(!0)};N.useEffect(()=>{he&&B(!0)},[he]);const[Jy,al]=N.useState(!1);N.useEffect(()=>{ne&&!K&&ne.onboarded===!1&&al(!0)},[ne,K]);const Qy=()=>{al(!1),window.location.reload()};return K?a.jsx("div",{className:"min-h-screen bg-bg-secondary flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),a.jsx("p",{className:"text-base text-secondary-text",children:"Loading..."})]})}):ne?P?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(dE,{onBack:()=>I(!1)}),a.jsx(wn,{})]}):D?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(OE,{onBack:()=>$(!1)}),a.jsx(wn,{})]}):i==="about"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>w(!0),onAdminClick:Bs,onSettingsClick:Wr,activeTab:i,onTabChange:o}),a.jsx(hE,{onBack:()=>o("collection")}),a.jsx(wn,{}),a.jsx(ns,{activeTab:i,onTabChange:o})]}):i==="all-bookings"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>w(!0),onAdminClick:Bs,onSettingsClick:Wr,activeTab:i,onTabChange:o}),a.jsx(pE,{onBack:()=>o("collection")}),a.jsx(wn,{}),a.jsx(ns,{activeTab:i,onTabChange:o})]}):i==="blocked-dates"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>w(!0),onAdminClick:Bs,onSettingsClick:Wr,activeTab:i,onTabChange:o}),a.jsx(yE,{onBack:()=>o("collection")}),a.jsx(wn,{}),a.jsx(ns,{activeTab:i,onTabChange:o})]}):i==="battleplan"?a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>w(!0),onAdminClick:Bs,onSettingsClick:Wr,activeTab:i,onTabChange:o}),a.jsx(uk,{refreshTrigger:H,onNewBooking:()=>b(!0)}),a.jsx(wn,{}),a.jsx(ns,{activeTab:i,onTabChange:o}),a.jsx(AE,{onNewBooking:()=>b(!0)}),a.jsx(Om,{isOpen:M,onClose:()=>b(!1),onBookingCreated:()=>{ee(F=>F+1),b(!1)},lastSelectedLocation:"",onLocationSelected:F=>{console.log("Location selected:",F)}})]}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onAddModel:()=>w(!0),onAdminClick:Bs,onSettingsClick:Wr,activeTab:i,onTabChange:o}),i==="collection"&&a.jsx(ok,{activeView:l,onViewChange:c}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[l==="recent"&&a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"mb-16",children:[Ie.length>0&&a.jsx("div",{className:"flex flex-col items-center mb-8",children:a.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENTLY PAINTED MODELS"})}),De?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((F,ue)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[a.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),a.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ue))}):Ie.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_e.map(F=>{var ue,Je,tt,nn,ut,Et,Vt;return a.jsx(dk,{model:F,name:F.name,boxName:((ue=F.box)==null?void 0:ue.name)||"Unknown Collection",gameName:((tt=(Je=F.box)==null?void 0:Je.game)==null?void 0:tt.name)||((nn=F.game)==null?void 0:nn.name)||"Unknown Game",gameIcon:((Et=(ut=F.box)==null?void 0:ut.game)==null?void 0:Et.icon)||((Vt=F.game)==null?void 0:Vt.icon)||null,status:F.status,count:F.count,imageUrl:F.image_url,paintedDate:F.painted_date,onViewModel:()=>me(F),onViewBox:xe},F.id)})}),U>1&&a.jsx(Ca,{currentPage:u,totalPages:U,onPageChange:h})]})]}),a.jsxs("section",{children:[Me.length>0&&a.jsx("div",{className:"flex flex-col items-center mb-8",children:a.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT COLLECTIONS"})}),ie?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((F,ue)=>a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[a.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),a.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},ue))}):Me.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No collections in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:pe.map(F=>{var ue,Je,tt;return a.jsx(hk,{name:F.name,gameName:((ue=F.game)==null?void 0:ue.name)||"Unknown Game",modelCount:F.models_count||0,imageUrl:F.image_url||null,gameImage:((Je=F.game)==null?void 0:Je.image)||null,gameIcon:((tt=F.game)==null?void 0:tt.icon)||null,onViewBox:()=>xe(F)},F.id)})}),V>1&&a.jsx(Ca,{currentPage:d,totalPages:V,onPageChange:m})]})]})]}),l==="collections"&&a.jsxs("section",{children:[Me.length>0&&a.jsx(LE,{games:g,boxes:Me,selectedGames:y.selectedGames,searchQuery:y.searchQuery,onGamesChange:at,onSearchChange:Q,onClearFilters:te}),ie?a.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((F,ue)=>a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),a.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ue))}):Me.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No collections in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:pe.map(F=>{var ue,Je,tt,nn;return a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>xe(F),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:(()=>{var Et;if(F.image_url&&typeof F.image_url=="string"&&F.image_url.trim()!==""&&F.image_url!=="undefined"&&F.image_url!=="null"&&(F.image_url.startsWith("http")||F.image_url.startsWith("/")))return F.image_url;const ut=(Et=F.game)==null?void 0:Et.image;return ut&&typeof ut=="string"&&ut.trim()!==""&&ut!=="undefined"&&ut!=="null"&&ut.startsWith("http")?ut:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:F.name,className:"w-16 h-16 object-cover rounded",onError:ut=>{const Et=ut.target,Vt="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";Et.src!==Vt&&(Et.src=Vt)}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:F.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(ue=F.game)!=null&&ue.icon?a.jsx("img",{src:F.game.icon,alt:`${F.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:ut=>{const Et=ut.target;Et.style.display="none";const Vt=Et.nextElementSibling;Vt&&Vt.classList.contains("icon-fallback")&&(Vt.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Je=F.game)!=null&&Je.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((tt=F.game)==null?void 0:tt.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text",children:((nn=F.game)==null?void 0:nn.name)||"Unknown Game"})]}),a.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:[F.models_count||0," Model",(F.models_count||0)!==1?"s":""]})]})]})},F.id)})}),V>1&&a.jsx(Ca,{currentPage:d,totalPages:V,onPageChange:m})]})]}),l==="models"&&a.jsxs("section",{children:[Ee.length>0&&a.jsx(ME,{games:g,boxes:Me,models:Ee,selectedBoxes:f.selectedBoxes,selectedGames:f.selectedGames,selectedStatuses:f.selectedStatuses,searchQuery:f.searchQuery,onBoxesChange:ve,onGamesChange:Te,onStatusesChange:We,onSearchChange:W,onClearFilters:Ze}),De?a.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((F,ue)=>a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),a.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},ue))}):Ee.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No models in your collection yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:oe.map(F=>{var ue,Je,tt,nn,ut,Et,Vt,Kd,Yd,Jd,Qd,Xd,Zd,eh,th,nh,rh,sh;return a.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>me(F),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:(()=>{var Un,Cn,ih;if(F.image_url&&typeof F.image_url=="string"&&F.image_url.trim()!==""&&F.image_url!=="undefined"&&F.image_url!=="null"&&(F.image_url.startsWith("http")||F.image_url.startsWith("/")))return F.image_url;const rn=((Cn=(Un=F.box)==null?void 0:Un.game)==null?void 0:Cn.icon)||((ih=F.game)==null?void 0:ih.icon);return rn&&typeof rn=="string"&&rn.trim()!==""&&rn!=="undefined"&&rn!=="null"&&rn.startsWith("http")?rn:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:F.name,className:"w-16 h-16 object-cover rounded",onError:rn=>{const Un=rn.target,Cn="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";Un.src!==Cn&&(Un.src=Cn)}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:F.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(Je=(ue=F.box)==null?void 0:ue.game)!=null&&Je.icon||(tt=F.game)!=null&&tt.icon?a.jsx("img",{src:((ut=(nn=F.box)==null?void 0:nn.game)==null?void 0:ut.icon)||((Et=F.game)==null?void 0:Et.icon)||void 0,alt:`${((Kd=(Vt=F.box)==null?void 0:Vt.game)==null?void 0:Kd.name)||((Yd=F.game)==null?void 0:Yd.name)||"Unknown Game"} icon`,className:"w-4 h-4 object-contain rounded",onError:rn=>{const Un=rn.target;Un.style.display="none";const Cn=Un.nextElementSibling;Cn&&Cn.classList.contains("icon-fallback")&&(Cn.style.display="flex")}}):null,a.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Qd=(Jd=F.box)==null?void 0:Jd.game)!=null&&Qd.icon||(Xd=F.game)!=null&&Xd.icon?"none":"flex"},children:a.jsx("span",{className:"text-white text-xs font-bold",children:(((eh=(Zd=F.box)==null?void 0:Zd.game)==null?void 0:eh.name)||((th=F.game)==null?void 0:th.name)||"Unknown Game").charAt(0)})}),a.jsx("span",{className:"text-sm text-secondary-text",children:((rh=(nh=F.box)==null?void 0:nh.game)==null?void 0:rh.name)||((sh=F.game)==null?void 0:sh.name)||"Unknown Game"})]}),F.status!=="None"&&a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${(()=>{switch(F.status){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:F.status})})]})]})},F.id)})}),L>1&&a.jsx(Ca,{currentPage:u,totalPages:L,onPageChange:h})]})]})]}),a.jsx(wn,{}),a.jsx(ns,{activeTab:i,onTabChange:o}),a.jsx(Ff,{isOpen:x.isOpen,onClose:()=>j({isOpen:!1,mode:"login"}),mode:x.mode}),a.jsx(fk,{isOpen:k,onClose:()=>w(!1),onSuccess:de,preselectedBoxId:G}),a.jsx(mk,{isOpen:S,onClose:()=>A(!1),onSuccess:de,onAddModelsToBox:Ky}),a.jsx(kE,{isOpen:z.isOpen,onClose:()=>_({isOpen:!1,model:null}),onModelDeleted:ke,onModelUpdated:et,onViewBox:xe,model:z.model}),a.jsx(EE,{isOpen:C.isOpen,onClose:()=>Z({isOpen:!1,box:null}),onBoxDeleted:tn,onModelsUpdated:Vy,onViewModel:me,onAddNewModel:Yy,box:C.box}),a.jsx(PE,{isOpen:O,onClose:()=>B(!1)}),a.jsx(Om,{isOpen:M,onClose:()=>b(!1),onBookingCreated:()=>{ee(F=>F+1),b(!1)},lastSelectedLocation:"",onLocationSelected:F=>{console.log("Location selected:",F)}}),i==="collection"&&a.jsx(IE,{onAddModel:()=>w(!0),onAddCollection:()=>A(!0)}),a.jsx(DE,{isOpen:Jy,onClose:()=>al(!1),onComplete:Qy})]}):a.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[a.jsx(kr,{onSettingsClick:Wr}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:a.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm p-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:"Welcome to the Battleplan App Beta"}),a.jsxs("p",{className:"text-xs text-secondary-text mb-2",children:["Last updated: ",Rm().date," at ",Rm().time]}),a.jsxs("p",{className:"text-base text-secondary-text mb-8",children:["Track your miniatures and book a table at your favourite gaming store.",a.jsx("br",{}),a.jsx("br",{}),"Make sure to report any bugs and issues on the Discord!"]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>j({isOpen:!0,mode:"login"}),className:"btn-secondary",children:"Log In"}),a.jsx("button",{onClick:()=>j({isOpen:!0,mode:"signup"}),className:"btn-primary",children:"Sign Up"})]})]})}),a.jsx(wn,{}),a.jsx(Ff,{isOpen:x.isOpen,onClose:()=>j({isOpen:!1,mode:"login"}),mode:x.mode})]})}Qg(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(FE,{})}));
