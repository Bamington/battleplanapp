(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var wm={exports:{}},fo={},km={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=Symbol.for("react.element"),wy=Symbol.for("react.portal"),ky=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),Ny=Symbol.for("react.profiler"),Sy=Symbol.for("react.provider"),_y=Symbol.for("react.context"),Cy=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Py=Symbol.for("react.memo"),Ty=Symbol.for("react.lazy"),Gd=Symbol.iterator;function Iy(e){return e===null||typeof e!="object"?null:(e=Gd&&e[Gd]||e["@@iterator"],typeof e=="function"?e:null)}var jm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nm=Object.assign,Sm={};function Ss(e,t,n){this.props=e,this.context=t,this.refs=Sm,this.updater=n||jm}Ss.prototype.isReactComponent={};Ss.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ss.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _m(){}_m.prototype=Ss.prototype;function lu(e,t,n){this.props=e,this.context=t,this.refs=Sm,this.updater=n||jm}var cu=lu.prototype=new _m;cu.constructor=lu;Nm(cu,Ss.prototype);cu.isPureReactComponent=!0;var Vd=Array.isArray,Cm=Object.prototype.hasOwnProperty,uu={current:null},Em={key:!0,ref:!0,__self:!0,__source:!0};function Pm(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Cm.call(t,r)&&!Em.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Mi,type:e,key:i,ref:a,props:s,_owner:uu.current}}function Ay(e,t){return{$$typeof:Mi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function du(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mi}function My(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kd=/\/+/g;function Ho(e,t){return typeof e=="object"&&e!==null&&e.key!=null?My(""+e.key):t.toString(36)}function va(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Mi:case wy:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ho(a,0):r,Vd(s)?(n="",e!=null&&(n=e.replace(Kd,"$&/")+"/"),va(s,t,n,"",function(u){return u})):s!=null&&(du(s)&&(s=Ay(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Kd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Vd(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ho(i,l);a+=va(i,t,n,c,s)}else if(c=Iy(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ho(i,l++),a+=va(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Vi(e,t,n){if(e==null)return e;var r=[],s=0;return va(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Dy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},wa={transition:null},Ly={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:wa,ReactCurrentOwner:uu};function Tm(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Vi,forEach:function(e,t,n){Vi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vi(e,function(){t++}),t},toArray:function(e){return Vi(e,function(t){return t})||[]},only:function(e){if(!du(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Ss;Se.Fragment=ky;Se.Profiler=Ny;Se.PureComponent=lu;Se.StrictMode=jy;Se.Suspense=Ey;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ly;Se.act=Tm;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nm({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=uu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Cm.call(t,c)&&!Em.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Mi,type:e.type,key:s,ref:i,props:r,_owner:a}};Se.createContext=function(e){return e={$$typeof:_y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sy,_context:e},e.Consumer=e};Se.createElement=Pm;Se.createFactory=function(e){var t=Pm.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:Cy,render:e}};Se.isValidElement=du;Se.lazy=function(e){return{$$typeof:Ty,_payload:{_status:-1,_result:e},_init:Dy}};Se.memo=function(e,t){return{$$typeof:Py,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=wa.transition;wa.transition={};try{e()}finally{wa.transition=t}};Se.unstable_act=Tm;Se.useCallback=function(e,t){return wt.current.useCallback(e,t)};Se.useContext=function(e){return wt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return wt.current.useEffect(e,t)};Se.useId=function(){return wt.current.useId()};Se.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return wt.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};Se.useRef=function(e){return wt.current.useRef(e)};Se.useState=function(e){return wt.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return wt.current.useTransition()};Se.version="18.3.1";km.exports=Se;var j=km.exports;const Ce=ou(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy=j,Ry=Symbol.for("react.element"),Fy=Symbol.for("react.fragment"),zy=Object.prototype.hasOwnProperty,$y=Oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,By={key:!0,ref:!0,__self:!0,__source:!0};function Im(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)zy.call(t,r)&&!By.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ry,type:e,key:i,ref:a,props:s,_owner:$y.current}}fo.Fragment=Fy;fo.jsx=Im;fo.jsxs=Im;wm.exports=fo;var o=wm.exports,Am={exports:{}},Bt={},Mm={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,J){var k=F.length;F.push(J);e:for(;0<k;){var z=k-1>>>1,re=F[z];if(0<s(re,J))F[z]=J,F[k]=re,k=z;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var J=F[0],k=F.pop();if(k!==J){F[0]=k;e:for(var z=0,re=F.length,_=re>>>1;z<_;){var B=2*(z+1)-1,se=F[B],O=B+1,U=F[O];if(0>s(se,k))O<re&&0>s(U,se)?(F[z]=U,F[O]=k,z=O):(F[z]=se,F[B]=k,z=B);else if(O<re&&0>s(U,k))F[z]=U,F[O]=k,z=O;else break e}}return J}function s(F,J){var k=F.sortIndex-J.sortIndex;return k!==0?k:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,m=3,f=!1,p=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var J=n(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=F)r(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=n(u)}}function S(F){if(y=!1,x(F),!p)if(n(c)!==null)p=!0,ne(N);else{var J=n(u);J!==null&&ee(S,J.startTime-F)}}function N(F,J){p=!1,y&&(y=!1,g(P),P=-1),f=!0;var k=m;try{for(x(J),d=n(c);d!==null&&(!(d.expirationTime>J)||F&&!T());){var z=d.callback;if(typeof z=="function"){d.callback=null,m=d.priorityLevel;var re=z(d.expirationTime<=J);J=e.unstable_now(),typeof re=="function"?d.callback=re:d===n(c)&&r(c),x(J)}else r(c);d=n(c)}if(d!==null)var _=!0;else{var B=n(u);B!==null&&ee(S,B.startTime-J),_=!1}return _}finally{d=null,m=k,f=!1}}var w=!1,C=null,P=-1,I=5,b=-1;function T(){return!(e.unstable_now()-b<I)}function A(){if(C!==null){var F=e.unstable_now();b=F;var J=!0;try{J=C(!0,F)}finally{J?R():(w=!1,C=null)}}else w=!1}var R;if(typeof v=="function")R=function(){v(A)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,q=Q.port2;Q.port1.onmessage=A,R=function(){q.postMessage(null)}}else R=function(){E(A,0)};function ne(F){C=F,w||(w=!0,R())}function ee(F,J){P=E(function(){F(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,ne(N))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var k=m;m=J;try{return F()}finally{m=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var k=m;m=F;try{return J()}finally{m=k}},e.unstable_scheduleCallback=function(F,J,k){var z=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?z+k:z):k=z,F){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=k+re,F={id:h++,callback:J,priorityLevel:F,startTime:k,expirationTime:re,sortIndex:-1},k>z?(F.sortIndex=k,t(u,F),n(c)===null&&F===n(u)&&(y?(g(P),P=-1):y=!0,ee(S,k-z))):(F.sortIndex=re,t(c,F),p||f||(p=!0,ne(N))),F},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(F){var J=m;return function(){var k=m;m=J;try{return F.apply(this,arguments)}finally{m=k}}}})(Dm);Mm.exports=Dm;var Uy=Mm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy=j,$t=Uy;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lm=new Set,di={};function Mr(e,t){ps(e,t),ps(e+"Capture",t)}function ps(e,t){for(di[e]=t,e=0;e<t.length;e++)Lm.add(t[e])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jd={},Qd={};function Wy(e){return $l.call(Qd,e)?!0:$l.call(Jd,e)?!1:qy.test(e)?Qd[e]=!0:(Jd[e]=!0,!1)}function Gy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vy(e,t,n,r){if(t===null||typeof t>"u"||Gy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var hu=/[\-:]([a-z])/g;function fu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hu,fu);lt[t]=new kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hu,fu);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hu,fu);lt[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function mu(e,t,n,r){var s=lt.hasOwnProperty(t)?lt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vy(t,n,s,r)&&(n=null),r||s===null?Wy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=Hy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ki=Symbol.for("react.element"),Qr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),pu=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),Rm=Symbol.for("react.context"),gu=Symbol.for("react.forward_ref"),Ul=Symbol.for("react.suspense"),Hl=Symbol.for("react.suspense_list"),xu=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),Fm=Symbol.for("react.offscreen"),Yd=Symbol.iterator;function Ms(e){return e===null||typeof e!="object"?null:(e=Yd&&e[Yd]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,qo;function qs(e){if(qo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qo=t&&t[1]||""}return`
`+qo+e}var Wo=!1;function Go(e,t){if(!e||Wo)return"";Wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Wo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qs(e):""}function Ky(e){switch(e.tag){case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return e=Go(e.type,!1),e;case 11:return e=Go(e.type.render,!1),e;case 1:return e=Go(e.type,!0),e;default:return""}}function ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case Qr:return"Portal";case Bl:return"Profiler";case pu:return"StrictMode";case Ul:return"Suspense";case Hl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rm:return(e.displayName||"Context")+".Consumer";case Om:return(e._context.displayName||"Context")+".Provider";case gu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xu:return t=e.displayName||null,t!==null?t:ql(e.type)||"Memo";case $n:t=e._payload,e=e._init;try{return ql(e(t))}catch{}}return null}function Jy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(t);case 8:return t===pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qy(e){var t=zm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ji(e){e._valueTracker||(e._valueTracker=Qy(e))}function $m(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wl(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bm(e,t){t=t.checked,t!=null&&mu(e,"checked",t,!1)}function Gl(e,t){Bm(e,t);var n=nr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vl(e,t.type,nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vl(e,t,n){(t!=="number"||Da(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ws=Array.isArray;function ls(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Kl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Ws(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nr(n)}}function Um(e,t){var n=nr(t.value),r=nr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function th(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qi,qm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qi=Qi||document.createElement("div"),Qi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yy=["Webkit","ms","Moz","O"];Object.keys(Js).forEach(function(e){Yy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Js[t]=Js[e]})});function Wm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Js.hasOwnProperty(e)&&Js[e]?(""+t).trim():t+"px"}function Gm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Xy=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ql(e,t){if(t){if(Xy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Yl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xl=null;function yu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zl=null,cs=null,us=null;function nh(e){if(e=Oi(e)){if(typeof Zl!="function")throw Error(G(280));var t=e.stateNode;t&&(t=yo(t),Zl(e.stateNode,e.type,t))}}function Vm(e){cs?us?us.push(e):us=[e]:cs=e}function Km(){if(cs){var e=cs,t=us;if(us=cs=null,nh(e),t)for(e=0;e<t.length;e++)nh(t[e])}}function Jm(e,t){return e(t)}function Qm(){}var Vo=!1;function Ym(e,t,n){if(Vo)return e(t,n);Vo=!0;try{return Jm(e,t,n)}finally{Vo=!1,(cs!==null||us!==null)&&(Qm(),Km())}}function fi(e,t){var n=e.stateNode;if(n===null)return null;var r=yo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var ec=!1;if(Cn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){ec=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{ec=!1}function Zy(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Qs=!1,La=null,Oa=!1,tc=null,e0={onError:function(e){Qs=!0,La=e}};function t0(e,t,n,r,s,i,a,l,c){Qs=!1,La=null,Zy.apply(e0,arguments)}function n0(e,t,n,r,s,i,a,l,c){if(t0.apply(this,arguments),Qs){if(Qs){var u=La;Qs=!1,La=null}else throw Error(G(198));Oa||(Oa=!0,tc=u)}}function Dr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rh(e){if(Dr(e)!==e)throw Error(G(188))}function r0(e){var t=e.alternate;if(!t){if(t=Dr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rh(s),e;if(i===r)return rh(s),t;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function Zm(e){return e=r0(e),e!==null?ep(e):null}function ep(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ep(e);if(t!==null)return t;e=e.sibling}return null}var tp=$t.unstable_scheduleCallback,sh=$t.unstable_cancelCallback,s0=$t.unstable_shouldYield,i0=$t.unstable_requestPaint,Ge=$t.unstable_now,a0=$t.unstable_getCurrentPriorityLevel,bu=$t.unstable_ImmediatePriority,np=$t.unstable_UserBlockingPriority,Ra=$t.unstable_NormalPriority,o0=$t.unstable_LowPriority,rp=$t.unstable_IdlePriority,mo=null,pn=null;function l0(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(mo,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:d0,c0=Math.log,u0=Math.LN2;function d0(e){return e>>>=0,e===0?32:31-(c0(e)/u0|0)|0}var Yi=64,Xi=4194304;function Gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Gs(l):(i&=a,i!==0&&(r=Gs(i)))}else a=n&~s,a!==0?r=Gs(a):i!==0&&(r=Gs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),s=1<<n,r|=e[n],t&=~s;return r}function h0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-an(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=h0(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function nc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sp(){var e=Yi;return Yi<<=1,!(Yi&4194240)&&(Yi=64),e}function Ko(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Di(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function m0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-an(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function vu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ae=0;function ip(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ap,wu,op,lp,cp,rc=!1,Zi=[],Vn=null,Kn=null,Jn=null,mi=new Map,pi=new Map,Un=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ih(e,t){switch(e){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(t.pointerId)}}function Ls(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Oi(t),t!==null&&wu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function g0(e,t,n,r,s){switch(t){case"focusin":return Vn=Ls(Vn,e,t,n,r,s),!0;case"dragenter":return Kn=Ls(Kn,e,t,n,r,s),!0;case"mouseover":return Jn=Ls(Jn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return mi.set(i,Ls(mi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pi.set(i,Ls(pi.get(i)||null,e,t,n,r,s)),!0}return!1}function up(e){var t=vr(e.target);if(t!==null){var n=Dr(t);if(n!==null){if(t=n.tag,t===13){if(t=Xm(n),t!==null){e.blockedOn=t,cp(e.priority,function(){op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=sc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xl=r,n.target.dispatchEvent(r),Xl=null}else return t=Oi(n),t!==null&&wu(t),e.blockedOn=n,!1;t.shift()}return!0}function ah(e,t,n){ka(e)&&n.delete(t)}function x0(){rc=!1,Vn!==null&&ka(Vn)&&(Vn=null),Kn!==null&&ka(Kn)&&(Kn=null),Jn!==null&&ka(Jn)&&(Jn=null),mi.forEach(ah),pi.forEach(ah)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,rc||(rc=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,x0)))}function gi(e){function t(s){return Os(s,e)}if(0<Zi.length){Os(Zi[0],e);for(var n=1;n<Zi.length;n++){var r=Zi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vn!==null&&Os(Vn,e),Kn!==null&&Os(Kn,e),Jn!==null&&Os(Jn,e),mi.forEach(t),pi.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)up(n),n.blockedOn===null&&Un.shift()}var ds=An.ReactCurrentBatchConfig,za=!0;function y0(e,t,n,r){var s=Ae,i=ds.transition;ds.transition=null;try{Ae=1,ku(e,t,n,r)}finally{Ae=s,ds.transition=i}}function b0(e,t,n,r){var s=Ae,i=ds.transition;ds.transition=null;try{Ae=4,ku(e,t,n,r)}finally{Ae=s,ds.transition=i}}function ku(e,t,n,r){if(za){var s=sc(e,t,n,r);if(s===null)sl(e,t,r,$a,n),ih(e,r);else if(g0(s,e,t,n,r))r.stopPropagation();else if(ih(e,r),t&4&&-1<p0.indexOf(e)){for(;s!==null;){var i=Oi(s);if(i!==null&&ap(i),i=sc(e,t,n,r),i===null&&sl(e,t,r,$a,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sl(e,t,r,null,n)}}var $a=null;function sc(e,t,n,r){if($a=null,e=yu(r),e=vr(e),e!==null)if(t=Dr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $a=e,null}function dp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case bu:return 1;case np:return 4;case Ra:case o0:return 16;case rp:return 536870912;default:return 16}default:return 16}}var Wn=null,ju=null,ja=null;function hp(){if(ja)return ja;var e,t=ju,n=t.length,r,s="value"in Wn?Wn.value:Wn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return ja=s.slice(e,1<r?1-r:void 0)}function Na(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ea(){return!0}function oh(){return!1}function Ut(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ea:oh,this.isPropagationStopped=oh,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),t}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=Ut(_s),Li=qe({},_s,{view:0,detail:0}),v0=Ut(Li),Jo,Qo,Rs,po=qe({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(Jo=e.screenX-Rs.screenX,Qo=e.screenY-Rs.screenY):Qo=Jo=0,Rs=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),lh=Ut(po),w0=qe({},po,{dataTransfer:0}),k0=Ut(w0),j0=qe({},Li,{relatedTarget:0}),Yo=Ut(j0),N0=qe({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=Ut(N0),_0=qe({},_s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C0=Ut(_0),E0=qe({},_s,{data:0}),ch=Ut(E0),P0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I0[e])?!!t[e]:!1}function Su(){return A0}var M0=qe({},Li,{key:function(e){if(e.key){var t=P0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(e){return e.type==="keypress"?Na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D0=Ut(M0),L0=qe({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Ut(L0),O0=qe({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),R0=Ut(O0),F0=qe({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=Ut(F0),$0=qe({},po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=Ut($0),U0=[9,13,27,32],_u=Cn&&"CompositionEvent"in window,Ys=null;Cn&&"documentMode"in document&&(Ys=document.documentMode);var H0=Cn&&"TextEvent"in window&&!Ys,fp=Cn&&(!_u||Ys&&8<Ys&&11>=Ys),dh=" ",hh=!1;function mp(e,t){switch(e){case"keyup":return U0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xr=!1;function q0(e,t){switch(e){case"compositionend":return pp(t);case"keypress":return t.which!==32?null:(hh=!0,dh);case"textInput":return e=t.data,e===dh&&hh?null:e;default:return null}}function W0(e,t){if(Xr)return e==="compositionend"||!_u&&mp(e,t)?(e=hp(),ja=ju=Wn=null,Xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fp&&t.locale!=="ko"?null:t.data;default:return null}}var G0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G0[e.type]:t==="textarea"}function gp(e,t,n,r){Vm(r),t=Ba(t,"onChange"),0<t.length&&(n=new Nu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xs=null,xi=null;function V0(e){Cp(e,0)}function go(e){var t=ts(e);if($m(t))return e}function K0(e,t){if(e==="change")return t}var xp=!1;if(Cn){var Xo;if(Cn){var Zo="oninput"in document;if(!Zo){var mh=document.createElement("div");mh.setAttribute("oninput","return;"),Zo=typeof mh.oninput=="function"}Xo=Zo}else Xo=!1;xp=Xo&&(!document.documentMode||9<document.documentMode)}function ph(){Xs&&(Xs.detachEvent("onpropertychange",yp),xi=Xs=null)}function yp(e){if(e.propertyName==="value"&&go(xi)){var t=[];gp(t,xi,e,yu(e)),Ym(V0,t)}}function J0(e,t,n){e==="focusin"?(ph(),Xs=t,xi=n,Xs.attachEvent("onpropertychange",yp)):e==="focusout"&&ph()}function Q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return go(xi)}function Y0(e,t){if(e==="click")return go(t)}function X0(e,t){if(e==="input"||e==="change")return go(t)}function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Z0;function yi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$l.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function gh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xh(e,t){var n=gh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gh(n)}}function bp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vp(){for(var e=window,t=Da();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Da(e.document)}return t}function Cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eb(e){var t=vp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bp(n.ownerDocument.documentElement,n)){if(r!==null&&Cu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=xh(n,i);var a=xh(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tb=Cn&&"documentMode"in document&&11>=document.documentMode,Zr=null,ic=null,Zs=null,ac=!1;function yh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ac||Zr==null||Zr!==Da(r)||(r=Zr,"selectionStart"in r&&Cu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zs&&yi(Zs,r)||(Zs=r,r=Ba(ic,"onSelect"),0<r.length&&(t=new Nu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zr)))}function ta(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var es={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},el={},wp={};Cn&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function xo(e){if(el[e])return el[e];if(!es[e])return e;var t=es[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wp)return el[e]=t[n];return e}var kp=xo("animationend"),jp=xo("animationiteration"),Np=xo("animationstart"),Sp=xo("transitionend"),_p=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(e,t){_p.set(e,t),Mr(t,[e])}for(var tl=0;tl<bh.length;tl++){var nl=bh[tl],nb=nl.toLowerCase(),rb=nl[0].toUpperCase()+nl.slice(1);sr(nb,"on"+rb)}sr(kp,"onAnimationEnd");sr(jp,"onAnimationIteration");sr(Np,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(Sp,"onTransitionEnd");ps("onMouseEnter",["mouseout","mouseover"]);ps("onMouseLeave",["mouseout","mouseover"]);ps("onPointerEnter",["pointerout","pointerover"]);ps("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vs));function vh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n0(r,t,void 0,e),e.currentTarget=null}function Cp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;vh(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;vh(s,l,u),i=c}}}if(Oa)throw e=tc,Oa=!1,tc=null,e}function Fe(e,t){var n=t[dc];n===void 0&&(n=t[dc]=new Set);var r=e+"__bubble";n.has(r)||(Ep(t,e,2,!1),n.add(r))}function rl(e,t,n){var r=0;t&&(r|=4),Ep(n,e,r,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function bi(e){if(!e[na]){e[na]=!0,Lm.forEach(function(n){n!=="selectionchange"&&(sb.has(n)||rl(n,!1,e),rl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,rl("selectionchange",!1,t))}}function Ep(e,t,n,r){switch(dp(t)){case 1:var s=y0;break;case 4:s=b0;break;default:s=ku}n=s.bind(null,t,n,e),s=void 0,!ec||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function sl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=vr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Ym(function(){var u=i,h=yu(n),d=[];e:{var m=_p.get(e);if(m!==void 0){var f=Nu,p=e;switch(e){case"keypress":if(Na(n)===0)break e;case"keydown":case"keyup":f=D0;break;case"focusin":p="focus",f=Yo;break;case"focusout":p="blur",f=Yo;break;case"beforeblur":case"afterblur":f=Yo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=R0;break;case kp:case jp:case Np:f=S0;break;case Sp:f=z0;break;case"scroll":f=v0;break;case"wheel":f=B0;break;case"copy":case"cut":case"paste":f=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=uh}var y=(t&4)!==0,E=!y&&e==="scroll",g=y?m!==null?m+"Capture":null:m;y=[];for(var v=u,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=fi(v,g),S!=null&&y.push(vi(v,S,x)))),E)break;v=v.return}0<y.length&&(m=new f(m,p,null,n,h),d.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==Xl&&(p=n.relatedTarget||n.fromElement)&&(vr(p)||p[En]))break e;if((f||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?vr(p):null,p!==null&&(E=Dr(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=lh,S="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=uh,S="onPointerLeave",g="onPointerEnter",v="pointer"),E=f==null?m:ts(f),x=p==null?m:ts(p),m=new y(S,v+"leave",f,n,h),m.target=E,m.relatedTarget=x,S=null,vr(h)===u&&(y=new y(g,v+"enter",p,n,h),y.target=x,y.relatedTarget=E,S=y),E=S,f&&p)t:{for(y=f,g=p,v=0,x=y;x;x=zr(x))v++;for(x=0,S=g;S;S=zr(S))x++;for(;0<v-x;)y=zr(y),v--;for(;0<x-v;)g=zr(g),x--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=zr(y),g=zr(g)}y=null}else y=null;f!==null&&wh(d,m,f,y,!1),p!==null&&E!==null&&wh(d,E,p,y,!0)}}e:{if(m=u?ts(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var N=K0;else if(fh(m))if(xp)N=X0;else{N=Q0;var w=J0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=Y0);if(N&&(N=N(e,u))){gp(d,N,n,h);break e}w&&w(e,m,u),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&Vl(m,"number",m.value)}switch(w=u?ts(u):window,e){case"focusin":(fh(w)||w.contentEditable==="true")&&(Zr=w,ic=u,Zs=null);break;case"focusout":Zs=ic=Zr=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,yh(d,n,h);break;case"selectionchange":if(tb)break;case"keydown":case"keyup":yh(d,n,h)}var C;if(_u)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Xr?mp(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(fp&&n.locale!=="ko"&&(Xr||P!=="onCompositionStart"?P==="onCompositionEnd"&&Xr&&(C=hp()):(Wn=h,ju="value"in Wn?Wn.value:Wn.textContent,Xr=!0)),w=Ba(u,P),0<w.length&&(P=new ch(P,e,null,n,h),d.push({event:P,listeners:w}),C?P.data=C:(C=pp(n),C!==null&&(P.data=C)))),(C=H0?q0(e,n):W0(e,n))&&(u=Ba(u,"onBeforeInput"),0<u.length&&(h=new ch("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}Cp(d,t)})}function vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ba(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fi(e,n),i!=null&&r.unshift(vi(e,i,s)),i=fi(e,t),i!=null&&r.push(vi(e,i,s))),e=e.return}return r}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wh(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=fi(n,i),c!=null&&a.unshift(vi(n,c,l))):s||(c=fi(n,i),c!=null&&a.push(vi(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ib=/\r\n?/g,ab=/\u0000|\uFFFD/g;function kh(e){return(typeof e=="string"?e:""+e).replace(ib,`
`).replace(ab,"")}function ra(e,t,n){if(t=kh(t),kh(e)!==t&&n)throw Error(G(425))}function Ua(){}var oc=null,lc=null;function cc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uc=typeof setTimeout=="function"?setTimeout:void 0,ob=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,lb=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(e){return jh.resolve(null).then(e).catch(cb)}:uc;function cb(e){setTimeout(function(){throw e})}function il(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),gi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gi(t)}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),mn="__reactFiber$"+Cs,wi="__reactProps$"+Cs,En="__reactContainer$"+Cs,dc="__reactEvents$"+Cs,ub="__reactListeners$"+Cs,db="__reactHandles$"+Cs;function vr(e){var t=e[mn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[En]||n[mn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nh(e);e!==null;){if(n=e[mn])return n;e=Nh(e)}return t}e=n,n=e.parentNode}return null}function Oi(e){return e=e[mn]||e[En],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function yo(e){return e[wi]||null}var hc=[],ns=-1;function ir(e){return{current:e}}function ze(e){0>ns||(e.current=hc[ns],hc[ns]=null,ns--)}function Re(e,t){ns++,hc[ns]=e.current,e.current=t}var rr={},mt=ir(rr),It=ir(!1),Sr=rr;function gs(e,t){var n=e.type.contextTypes;if(!n)return rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function At(e){return e=e.childContextTypes,e!=null}function Ha(){ze(It),ze(mt)}function Sh(e,t,n){if(mt.current!==rr)throw Error(G(168));Re(mt,t),Re(It,n)}function Pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(G(108,Jy(e)||"Unknown",s));return qe({},n,r)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rr,Sr=mt.current,Re(mt,e),Re(It,It.current),!0}function _h(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=Pp(e,t,Sr),r.__reactInternalMemoizedMergedChildContext=e,ze(It),ze(mt),Re(mt,e)):ze(It),Re(It,n)}var kn=null,bo=!1,al=!1;function Tp(e){kn===null?kn=[e]:kn.push(e)}function hb(e){bo=!0,Tp(e)}function ar(){if(!al&&kn!==null){al=!0;var e=0,t=Ae;try{var n=kn;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,bo=!1}catch(s){throw kn!==null&&(kn=kn.slice(e+1)),tp(bu,ar),s}finally{Ae=t,al=!1}}return null}var rs=[],ss=0,Wa=null,Ga=0,qt=[],Wt=0,_r=null,jn=1,Nn="";function pr(e,t){rs[ss++]=Ga,rs[ss++]=Wa,Wa=e,Ga=t}function Ip(e,t,n){qt[Wt++]=jn,qt[Wt++]=Nn,qt[Wt++]=_r,_r=e;var r=jn;e=Nn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,jn=1<<32-an(t)+s|n<<s|r,Nn=i+e}else jn=1<<i|n<<s|r,Nn=e}function Eu(e){e.return!==null&&(pr(e,1),Ip(e,1,0))}function Pu(e){for(;e===Wa;)Wa=rs[--ss],rs[ss]=null,Ga=rs[--ss],rs[ss]=null;for(;e===_r;)_r=qt[--Wt],qt[Wt]=null,Nn=qt[--Wt],qt[Wt]=null,jn=qt[--Wt],qt[Wt]=null}var Ft=null,Rt=null,$e=!1,sn=null;function Ap(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ch(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,Rt=Qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_r!==null?{id:jn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,Rt=null,!0):!1;default:return!1}}function fc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mc(e){if($e){var t=Rt;if(t){var n=t;if(!Ch(e,t)){if(fc(e))throw Error(G(418));t=Qn(n.nextSibling);var r=Ft;t&&Ch(e,t)?Ap(r,n):(e.flags=e.flags&-4097|2,$e=!1,Ft=e)}}else{if(fc(e))throw Error(G(418));e.flags=e.flags&-4097|2,$e=!1,Ft=e}}}function Eh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function sa(e){if(e!==Ft)return!1;if(!$e)return Eh(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cc(e.type,e.memoizedProps)),t&&(t=Rt)){if(fc(e))throw Mp(),Error(G(418));for(;t;)Ap(e,t),t=Qn(t.nextSibling)}if(Eh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rt=Qn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=Ft?Qn(e.stateNode.nextSibling):null;return!0}function Mp(){for(var e=Rt;e;)e=Qn(e.nextSibling)}function xs(){Rt=Ft=null,$e=!1}function Tu(e){sn===null?sn=[e]:sn.push(e)}var fb=An.ReactCurrentBatchConfig;function Fs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function ia(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ph(e){var t=e._init;return t(e._payload)}function Dp(e){function t(g,v){if(e){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=er(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,v,x,S){return v===null||v.tag!==6?(v=fl(x,g.mode,S),v.return=g,v):(v=s(v,x),v.return=g,v)}function c(g,v,x,S){var N=x.type;return N===Yr?h(g,v,x.props.children,S,x.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$n&&Ph(N)===v.type)?(S=s(v,x.props),S.ref=Fs(g,v,x),S.return=g,S):(S=Ia(x.type,x.key,x.props,null,g.mode,S),S.ref=Fs(g,v,x),S.return=g,S)}function u(g,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=ml(x,g.mode,S),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function h(g,v,x,S,N){return v===null||v.tag!==7?(v=Nr(x,g.mode,S,N),v.return=g,v):(v=s(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fl(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ki:return x=Ia(v.type,v.key,v.props,null,g.mode,x),x.ref=Fs(g,null,v),x.return=g,x;case Qr:return v=ml(v,g.mode,x),v.return=g,v;case $n:var S=v._init;return d(g,S(v._payload),x)}if(Ws(v)||Ms(v))return v=Nr(v,g.mode,x,null),v.return=g,v;ia(g,v)}return null}function m(g,v,x,S){var N=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:l(g,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ki:return x.key===N?c(g,v,x,S):null;case Qr:return x.key===N?u(g,v,x,S):null;case $n:return N=x._init,m(g,v,N(x._payload),S)}if(Ws(x)||Ms(x))return N!==null?null:h(g,v,x,S,null);ia(g,x)}return null}function f(g,v,x,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,l(v,g,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ki:return g=g.get(S.key===null?x:S.key)||null,c(v,g,S,N);case Qr:return g=g.get(S.key===null?x:S.key)||null,u(v,g,S,N);case $n:var w=S._init;return f(g,v,x,w(S._payload),N)}if(Ws(S)||Ms(S))return g=g.get(x)||null,h(v,g,S,N,null);ia(v,S)}return null}function p(g,v,x,S){for(var N=null,w=null,C=v,P=v=0,I=null;C!==null&&P<x.length;P++){C.index>P?(I=C,C=null):I=C.sibling;var b=m(g,C,x[P],S);if(b===null){C===null&&(C=I);break}e&&C&&b.alternate===null&&t(g,C),v=i(b,v,P),w===null?N=b:w.sibling=b,w=b,C=I}if(P===x.length)return n(g,C),$e&&pr(g,P),N;if(C===null){for(;P<x.length;P++)C=d(g,x[P],S),C!==null&&(v=i(C,v,P),w===null?N=C:w.sibling=C,w=C);return $e&&pr(g,P),N}for(C=r(g,C);P<x.length;P++)I=f(C,g,P,x[P],S),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?P:I.key),v=i(I,v,P),w===null?N=I:w.sibling=I,w=I);return e&&C.forEach(function(T){return t(g,T)}),$e&&pr(g,P),N}function y(g,v,x,S){var N=Ms(x);if(typeof N!="function")throw Error(G(150));if(x=N.call(x),x==null)throw Error(G(151));for(var w=N=null,C=v,P=v=0,I=null,b=x.next();C!==null&&!b.done;P++,b=x.next()){C.index>P?(I=C,C=null):I=C.sibling;var T=m(g,C,b.value,S);if(T===null){C===null&&(C=I);break}e&&C&&T.alternate===null&&t(g,C),v=i(T,v,P),w===null?N=T:w.sibling=T,w=T,C=I}if(b.done)return n(g,C),$e&&pr(g,P),N;if(C===null){for(;!b.done;P++,b=x.next())b=d(g,b.value,S),b!==null&&(v=i(b,v,P),w===null?N=b:w.sibling=b,w=b);return $e&&pr(g,P),N}for(C=r(g,C);!b.done;P++,b=x.next())b=f(C,g,P,b.value,S),b!==null&&(e&&b.alternate!==null&&C.delete(b.key===null?P:b.key),v=i(b,v,P),w===null?N=b:w.sibling=b,w=b);return e&&C.forEach(function(A){return t(g,A)}),$e&&pr(g,P),N}function E(g,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Yr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ki:e:{for(var N=x.key,w=v;w!==null;){if(w.key===N){if(N=x.type,N===Yr){if(w.tag===7){n(g,w.sibling),v=s(w,x.props.children),v.return=g,g=v;break e}}else if(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$n&&Ph(N)===w.type){n(g,w.sibling),v=s(w,x.props),v.ref=Fs(g,w,x),v.return=g,g=v;break e}n(g,w);break}else t(g,w);w=w.sibling}x.type===Yr?(v=Nr(x.props.children,g.mode,S,x.key),v.return=g,g=v):(S=Ia(x.type,x.key,x.props,null,g.mode,S),S.ref=Fs(g,v,x),S.return=g,g=S)}return a(g);case Qr:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=ml(x,g.mode,S),v.return=g,g=v}return a(g);case $n:return w=x._init,E(g,v,w(x._payload),S)}if(Ws(x))return p(g,v,x,S);if(Ms(x))return y(g,v,x,S);ia(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=fl(x,g.mode,S),v.return=g,g=v),a(g)):n(g,v)}return E}var ys=Dp(!0),Lp=Dp(!1),Va=ir(null),Ka=null,is=null,Iu=null;function Au(){Iu=is=Ka=null}function Mu(e){var t=Va.current;ze(Va),e._currentValue=t}function pc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hs(e,t){Ka=e,Iu=is=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(Iu!==e)if(e={context:e,memoizedValue:t,next:null},is===null){if(Ka===null)throw Error(G(308));is=e,Ka.dependencies={lanes:0,firstContext:e}}else is=is.next=e;return t}var wr=null;function Du(e){wr===null?wr=[e]:wr.push(e)}function Op(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Du(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pn(e,r)}function Pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pn(e,n)}return s=r.interleaved,s===null?(t.next=t,Du(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pn(e,n)}function Sa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vu(e,n)}}function Th(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ja(e,t,n,r){var s=e.updateQueue;Bn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;a=0,h=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(f,d,m):p,m==null)break e;d=qe({},d,m);break e;case 2:Bn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=f,c=d):h=h.next=f,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Er|=a,e.lanes=a,e.memoizedState=d}}function Ih(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Ri={},gn=ir(Ri),ki=ir(Ri),ji=ir(Ri);function kr(e){if(e===Ri)throw Error(G(174));return e}function Ou(e,t){switch(Re(ji,t),Re(ki,e),Re(gn,Ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jl(t,e)}ze(gn),Re(gn,t)}function bs(){ze(gn),ze(ki),ze(ji)}function Fp(e){kr(ji.current);var t=kr(gn.current),n=Jl(t,e.type);t!==n&&(Re(ki,e),Re(gn,n))}function Ru(e){ki.current===e&&(ze(gn),ze(ki))}var Ue=ir(0);function Qa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ol=[];function Fu(){for(var e=0;e<ol.length;e++)ol[e]._workInProgressVersionPrimary=null;ol.length=0}var _a=An.ReactCurrentDispatcher,ll=An.ReactCurrentBatchConfig,Cr=0,He=null,Ze=null,nt=null,Ya=!1,ei=!1,Ni=0,mb=0;function ct(){throw Error(G(321))}function zu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function $u(e,t,n,r,s,i){if(Cr=i,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_a.current=e===null||e.memoizedState===null?yb:bb,e=n(r,s),ei){i=0;do{if(ei=!1,Ni=0,25<=i)throw Error(G(301));i+=1,nt=Ze=null,t.updateQueue=null,_a.current=vb,e=n(r,s)}while(ei)}if(_a.current=Xa,t=Ze!==null&&Ze.next!==null,Cr=0,nt=Ze=He=null,Ya=!1,t)throw Error(G(300));return e}function Bu(){var e=Ni!==0;return Ni=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?He.memoizedState=nt=e:nt=nt.next=e,nt}function Qt(){if(Ze===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=nt===null?He.memoizedState:nt.next;if(t!==null)nt=t,Ze=e;else{if(e===null)throw Error(G(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},nt===null?He.memoizedState=nt=e:nt=nt.next=e}return nt}function Si(e,t){return typeof t=="function"?t(e):t}function cl(e){var t=Qt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Cr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=r):c=c.next=d,He.lanes|=h,Er|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,cn(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,He.lanes|=i,Er|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ul(e){var t=Qt(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);cn(i,t.memoizedState)||(Tt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function zp(){}function $p(e,t){var n=He,r=Qt(),s=t(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,Uu(Hp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,_i(9,Up.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(G(349));Cr&30||Bp(n,t,s)}return s}function Bp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Up(e,t,n,r){t.value=n,t.getSnapshot=r,qp(t)&&Wp(e)}function Hp(e,t,n){return n(function(){qp(t)&&Wp(e)})}function qp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function Wp(e){var t=Pn(e,1);t!==null&&on(t,e,1,-1)}function Ah(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:e},t.queue=e,e=e.dispatch=xb.bind(null,He,e),[t.memoizedState,e]}function _i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Gp(){return Qt().memoizedState}function Ca(e,t,n,r){var s=dn();He.flags|=e,s.memoizedState=_i(1|t,n,void 0,r===void 0?null:r)}function vo(e,t,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(Ze!==null){var a=Ze.memoizedState;if(i=a.destroy,r!==null&&zu(r,a.deps)){s.memoizedState=_i(t,n,i,r);return}}He.flags|=e,s.memoizedState=_i(1|t,n,i,r)}function Mh(e,t){return Ca(8390656,8,e,t)}function Uu(e,t){return vo(2048,8,e,t)}function Vp(e,t){return vo(4,2,e,t)}function Kp(e,t){return vo(4,4,e,t)}function Jp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qp(e,t,n){return n=n!=null?n.concat([e]):null,vo(4,4,Jp.bind(null,t,e),n)}function Hu(){}function Yp(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xp(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zp(e,t,n){return Cr&21?(cn(n,t)||(n=sp(),He.lanes|=n,Er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function pb(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=ll.transition;ll.transition={};try{e(!1),t()}finally{Ae=n,ll.transition=r}}function eg(){return Qt().memoizedState}function gb(e,t,n){var r=Zn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tg(e))ng(t,n);else if(n=Op(e,t,n,r),n!==null){var s=vt();on(n,e,r,s),rg(n,t,r)}}function xb(e,t,n){var r=Zn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tg(e))ng(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,cn(l,a)){var c=t.interleaved;c===null?(s.next=s,Du(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Op(e,t,s,r),n!==null&&(s=vt(),on(n,e,r,s),rg(n,t,r))}}function tg(e){var t=e.alternate;return e===He||t!==null&&t===He}function ng(e,t){ei=Ya=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vu(e,n)}}var Xa={readContext:Jt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},yb={readContext:Jt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Mh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ca(4194308,4,Jp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ca(4,2,e,t)},useMemo:function(e,t){var n=dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gb.bind(null,He,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:Ah,useDebugValue:Hu,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=Ah(!1),t=e[0];return e=pb.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=He,s=dn();if($e){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),rt===null)throw Error(G(349));Cr&30||Bp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Mh(Hp.bind(null,r,i,e),[e]),r.flags|=2048,_i(9,Up.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=dn(),t=rt.identifierPrefix;if($e){var n=Nn,r=jn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ni++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bb={readContext:Jt,useCallback:Yp,useContext:Jt,useEffect:Uu,useImperativeHandle:Qp,useInsertionEffect:Vp,useLayoutEffect:Kp,useMemo:Xp,useReducer:cl,useRef:Gp,useState:function(){return cl(Si)},useDebugValue:Hu,useDeferredValue:function(e){var t=Qt();return Zp(t,Ze.memoizedState,e)},useTransition:function(){var e=cl(Si)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:zp,useSyncExternalStore:$p,useId:eg,unstable_isNewReconciler:!1},vb={readContext:Jt,useCallback:Yp,useContext:Jt,useEffect:Uu,useImperativeHandle:Qp,useInsertionEffect:Vp,useLayoutEffect:Kp,useMemo:Xp,useReducer:ul,useRef:Gp,useState:function(){return ul(Si)},useDebugValue:Hu,useDeferredValue:function(e){var t=Qt();return Ze===null?t.memoizedState=e:Zp(t,Ze.memoizedState,e)},useTransition:function(){var e=ul(Si)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:zp,useSyncExternalStore:$p,useId:eg,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wo={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),s=Zn(e),i=Sn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Yn(e,i,s),t!==null&&(on(t,e,s,r),Sa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),s=Zn(e),i=Sn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Yn(e,i,s),t!==null&&(on(t,e,s,r),Sa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=Zn(e),s=Sn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Yn(e,s,r),t!==null&&(on(t,e,r,n),Sa(t,e,r))}};function Dh(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!yi(n,r)||!yi(s,i):!0}function sg(e,t,n){var r=!1,s=rr,i=t.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=At(t)?Sr:mt.current,r=t.contextTypes,i=(r=r!=null)?gs(e,s):rr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Lh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function xc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=At(t)?Sr:mt.current,s.context=gs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(gc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wo.enqueueReplaceState(s,s.state,null),Ja(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function vs(e,t){try{var n="",r=t;do n+=Ky(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function yc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wb=typeof WeakMap=="function"?WeakMap:Map;function ig(e,t,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eo||(eo=!0,Ec=r),yc(e,t)},n}function ag(e,t,n){n=Sn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){yc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yc(e,t),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Oh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wb;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Lb.bind(null,e,t,n),t.then(e,e))}function Rh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sn(-1,1),t.tag=2,Yn(n,t,1))),n.lanes|=1),e)}var kb=An.ReactCurrentOwner,Tt=!1;function yt(e,t,n,r){t.child=e===null?Lp(t,null,n,r):ys(t,e.child,n,r)}function zh(e,t,n,r,s){n=n.render;var i=t.ref;return hs(t,s),r=$u(e,t,n,r,i,s),n=Bu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):($e&&n&&Eu(t),t.flags|=1,yt(e,t,r,s),t.child)}function $h(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Yu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,og(e,t,i,r,s)):(e=Ia(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:yi,n(a,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=er(i,r),e.ref=t.ref,e.return=t,t.child=e}function og(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(yi(i,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return bc(e,t,n,r,s)}function lg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(os,Ot),Ot|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(os,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(os,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Re(os,Ot),Ot|=r;return yt(e,t,s,n),t.child}function cg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bc(e,t,n,r,s){var i=At(n)?Sr:mt.current;return i=gs(t,i),hs(t,s),n=$u(e,t,n,r,i,s),r=Bu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):($e&&r&&Eu(t),t.flags|=1,yt(e,t,n,s),t.child)}function Bh(e,t,n,r,s){if(At(n)){var i=!0;qa(t)}else i=!1;if(hs(t,s),t.stateNode===null)Ea(e,t),sg(t,n,r),xc(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=At(n)?Sr:mt.current,u=gs(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Lh(t,a,r,u),Bn=!1;var m=t.memoizedState;a.state=m,Ja(t,r,a,s),c=t.memoizedState,l!==r||m!==c||It.current||Bn?(typeof h=="function"&&(gc(t,n,h,r),c=t.memoizedState),(l=Bn||Dh(t,n,l,r,m,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Rp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:tn(t.type,l),a.props=u,d=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=At(n)?Sr:mt.current,c=gs(t,c));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Lh(t,a,r,c),Bn=!1,m=t.memoizedState,a.state=m,Ja(t,r,a,s);var p=t.memoizedState;l!==d||m!==p||It.current||Bn?(typeof f=="function"&&(gc(t,n,f,r),p=t.memoizedState),(u=Bn||Dh(t,n,u,r,m,p,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return vc(e,t,n,r,i,s)}function vc(e,t,n,r,s,i){cg(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&_h(t,n,!1),Tn(e,t,i);r=t.stateNode,kb.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ys(t,e.child,null,i),t.child=ys(t,null,l,i)):yt(e,t,l,i),t.memoizedState=r.state,s&&_h(t,n,!0),t.child}function ug(e){var t=e.stateNode;t.pendingContext?Sh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sh(e,t.context,!1),Ou(e,t.containerInfo)}function Uh(e,t,n,r,s){return xs(),Tu(s),t.flags|=256,yt(e,t,n,r),t.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function kc(e){return{baseLanes:e,cachePool:null,transitions:null}}function dg(e,t,n){var r=t.pendingProps,s=Ue.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(Ue,s&1),e===null)return mc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=No(a,r,0,null),e=Nr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=kc(n),t.memoizedState=wc,e):qu(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return jb(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=er(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=er(l,i):(i=Nr(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?kc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=wc,r}return i=e.child,e=i.sibling,r=er(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qu(e,t){return t=No({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aa(e,t,n,r){return r!==null&&Tu(r),ys(t,e.child,null,n),e=qu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jb(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=dl(Error(G(422))),aa(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=No({mode:"visible",children:r.children},s,0,null),i=Nr(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ys(t,e.child,null,a),t.child.memoizedState=kc(a),t.memoizedState=wc,i);if(!(t.mode&1))return aa(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(G(419)),r=dl(i,r,void 0),aa(e,t,a,r)}if(l=(a&e.childLanes)!==0,Tt||l){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pn(e,s),on(r,e,s,-1))}return Qu(),r=dl(Error(G(421))),aa(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ob.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Rt=Qn(s.nextSibling),Ft=t,$e=!0,sn=null,e!==null&&(qt[Wt++]=jn,qt[Wt++]=Nn,qt[Wt++]=_r,jn=e.id,Nn=e.overflow,_r=t),t=qu(t,r.children),t.flags|=4096,t)}function Hh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),pc(e.return,t,n)}function hl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(yt(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hh(e,n,t);else if(e.tag===19)Hh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qa(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),hl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qa(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}hl(t,!0,n,null,i);break;case"together":hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ea(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nb(e,t,n){switch(t.tag){case 3:ug(t),xs();break;case 5:Fp(t);break;case 1:At(t.type)&&qa(t);break;case 4:Ou(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Re(Va,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?dg(e,t,n):(Re(Ue,Ue.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Re(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,lg(e,t,n)}return Tn(e,t,n)}var fg,jc,mg,pg;fg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jc=function(){};mg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,kr(gn.current);var i=null;switch(n){case"input":s=Wl(e,s),r=Wl(e,r),i=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),i=[];break;case"textarea":s=Kl(e,s),r=Kl(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ua)}Ql(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(di.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(di.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};pg=function(e,t,n,r){n!==r&&(t.flags|=4)};function zs(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sb(e,t,n){var r=t.pendingProps;switch(Pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return At(t.type)&&Ha(),ut(t),null;case 3:return r=t.stateNode,bs(),ze(It),ze(mt),Fu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sn!==null&&(Ic(sn),sn=null))),jc(e,t),ut(t),null;case 5:Ru(t);var s=kr(ji.current);if(n=t.type,e!==null&&t.stateNode!=null)mg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return ut(t),null}if(e=kr(gn.current),sa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[mn]=t,r[wi]=i,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<Vs.length;s++)Fe(Vs[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Xd(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":eh(r,i),Fe("invalid",r)}Ql(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ra(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ra(r.textContent,l,e),s=["children",""+l]):di.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Ji(r),Zd(r,i,!0);break;case"textarea":Ji(r),th(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ua)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[mn]=t,e[wi]=r,fg(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yl(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),s=r;break;case"iframe":case"object":case"embed":Fe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Vs.length;s++)Fe(Vs[s],e);s=r;break;case"source":Fe("error",e),s=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),s=r;break;case"details":Fe("toggle",e),s=r;break;case"input":Xd(e,r),s=Wl(e,r),Fe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":eh(e,r),s=Kl(e,r),Fe("invalid",e);break;default:s=r}Ql(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Gm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qm(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&hi(e,c):typeof c=="number"&&hi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(di.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Fe("scroll",e):c!=null&&mu(e,i,c,a))}switch(n){case"input":Ji(e),Zd(e,r,!1);break;case"textarea":Ji(e),th(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ls(e,!!r.multiple,i,!1):r.defaultValue!=null&&ls(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ua)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)pg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=kr(ji.current),kr(gn.current),sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[mn]=t,(i=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:ra(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ra(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=t,t.stateNode=r}return ut(t),null;case 13:if(ze(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Rt!==null&&t.mode&1&&!(t.flags&128))Mp(),xs(),t.flags|=98560,i=!1;else if(i=sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[mn]=t}else xs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else sn!==null&&(Ic(sn),sn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?et===0&&(et=3):Qu())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return bs(),jc(e,t),e===null&&bi(t.stateNode.containerInfo),ut(t),null;case 10:return Mu(t.type._context),ut(t),null;case 17:return At(t.type)&&Ha(),ut(t),null;case 19:if(ze(Ue),i=t.memoizedState,i===null)return ut(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)zs(i,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Qa(e),a!==null){for(t.flags|=128,zs(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(Ue,Ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ge()>ws&&(t.flags|=128,r=!0,zs(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qa(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!$e)return ut(t),null}else 2*Ge()-i.renderingStartTime>ws&&n!==1073741824&&(t.flags|=128,r=!0,zs(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ge(),t.sibling=null,n=Ue.current,Re(Ue,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return Ju(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ot&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function _b(e,t){switch(Pu(t),t.tag){case 1:return At(t.type)&&Ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bs(),ze(It),ze(mt),Fu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ru(t),null;case 13:if(ze(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ue),null;case 4:return bs(),null;case 10:return Mu(t.type._context),null;case 22:case 23:return Ju(),null;case 24:return null;default:return null}}var oa=!1,dt=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,ie=null;function as(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Nc(e,t,n){try{n()}catch(r){We(e,t,r)}}var qh=!1;function Eb(e,t){if(oc=za,e=vp(),Cu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(l=a+s),d!==i||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)m=d,d=f;for(;;){if(d===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++h===r&&(c=a),(f=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lc={focusedElem:e,selectionRange:n},za=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,E=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:tn(t.type,y),E);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(S){We(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return p=qh,qh=!1,p}function ti(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nc(t,n,i)}s=s.next}while(s!==r)}}function ko(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gg(e){var t=e.alternate;t!==null&&(e.alternate=null,gg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mn],delete t[wi],delete t[dc],delete t[ub],delete t[db])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xg(e){return e.tag===5||e.tag===3||e.tag===4}function Wh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ua));else if(r!==4&&(e=e.child,e!==null))for(_c(e,t,n),e=e.sibling;e!==null;)_c(e,t,n),e=e.sibling}function Cc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Cc(e,t,n),e=e.sibling;e!==null;)Cc(e,t,n),e=e.sibling}var at=null,nn=!1;function On(e,t,n){for(n=n.child;n!==null;)yg(e,t,n),n=n.sibling}function yg(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(mo,n)}catch{}switch(n.tag){case 5:dt||as(n,t);case 6:var r=at,s=nn;at=null,On(e,t,n),at=r,nn=s,at!==null&&(nn?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(nn?(e=at,n=n.stateNode,e.nodeType===8?il(e.parentNode,n):e.nodeType===1&&il(e,n),gi(e)):il(at,n.stateNode));break;case 4:r=at,s=nn,at=n.stateNode.containerInfo,nn=!0,On(e,t,n),at=r,nn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Nc(n,t,a),s=s.next}while(s!==r)}On(e,t,n);break;case 1:if(!dt&&(as(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,On(e,t,n),dt=r):On(e,t,n);break;default:On(e,t,n)}}function Gh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cb),t.forEach(function(r){var s=Rb.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,nn=!1;break e;case 3:at=l.stateNode.containerInfo,nn=!0;break e;case 4:at=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(at===null)throw Error(G(160));yg(i,a,s),at=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){We(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bg(t,e),t=t.sibling}function bg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(t,e),un(e),r&4){try{ti(3,e,e.return),ko(3,e)}catch(y){We(e,e.return,y)}try{ti(5,e,e.return)}catch(y){We(e,e.return,y)}}break;case 1:Zt(t,e),un(e),r&512&&n!==null&&as(n,n.return);break;case 5:if(Zt(t,e),un(e),r&512&&n!==null&&as(n,n.return),e.flags&32){var s=e.stateNode;try{hi(s,"")}catch(y){We(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bm(s,i),Yl(l,a);var u=Yl(l,i);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?Gm(s,d):h==="dangerouslySetInnerHTML"?qm(s,d):h==="children"?hi(s,d):mu(s,h,d,u)}switch(l){case"input":Gl(s,i);break;case"textarea":Um(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ls(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?ls(s,!!i.multiple,i.defaultValue,!0):ls(s,!!i.multiple,i.multiple?[]:"",!1))}s[wi]=i}catch(y){We(e,e.return,y)}}break;case 6:if(Zt(t,e),un(e),r&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){We(e,e.return,y)}}break;case 3:if(Zt(t,e),un(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gi(t.containerInfo)}catch(y){We(e,e.return,y)}break;case 4:Zt(t,e),un(e);break;case 13:Zt(t,e),un(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vu=Ge())),r&4&&Gh(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(u=dt)||h,Zt(t,e),dt=u):Zt(t,e),un(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ie=e,h=e.child;h!==null;){for(d=ie=h;ie!==null;){switch(m=ie,f=m.child,m.tag){case 0:case 11:case 14:case 15:ti(4,m,m.return);break;case 1:as(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){We(r,n,y)}}break;case 5:as(m,m.return);break;case 22:if(m.memoizedState!==null){Kh(d);continue}}f!==null?(f.return=m,ie=f):Kh(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wm("display",a))}catch(y){We(e,e.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){We(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zt(t,e),un(e),r&4&&Gh(e);break;case 21:break;default:Zt(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xg(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hi(s,""),r.flags&=-33);var i=Wh(e);Cc(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Wh(e);_c(e,l,a);break;default:throw Error(G(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pb(e,t,n){ie=e,vg(e)}function vg(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||oa;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||dt;l=oa;var u=dt;if(oa=a,(dt=c)&&!u)for(ie=s;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?Jh(s):c!==null?(c.return=a,ie=c):Jh(s);for(;i!==null;)ie=i,vg(i),i=i.sibling;ie=s,oa=l,dt=u}Vh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Vh(e)}}function Vh(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||ko(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:tn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ih(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ih(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&gi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}dt||t.flags&512&&Sc(t)}catch(m){We(t,t.return,m)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Kh(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Jh(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ko(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var i=t.return;try{Sc(t)}catch(c){We(t,i,c)}break;case 5:var a=t.return;try{Sc(t)}catch(c){We(t,a,c)}}}catch(c){We(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var Tb=Math.ceil,Za=An.ReactCurrentDispatcher,Wu=An.ReactCurrentOwner,Kt=An.ReactCurrentBatchConfig,Pe=0,rt=null,Je=null,ot=0,Ot=0,os=ir(0),et=0,Ci=null,Er=0,jo=0,Gu=0,ni=null,Et=null,Vu=0,ws=1/0,vn=null,eo=!1,Ec=null,Xn=null,la=!1,Gn=null,to=0,ri=0,Pc=null,Pa=-1,Ta=0;function vt(){return Pe&6?Ge():Pa!==-1?Pa:Pa=Ge()}function Zn(e){return e.mode&1?Pe&2&&ot!==0?ot&-ot:fb.transition!==null?(Ta===0&&(Ta=sp()),Ta):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:dp(e.type)),e):1}function on(e,t,n,r){if(50<ri)throw ri=0,Pc=null,Error(G(185));Di(e,n,r),(!(Pe&2)||e!==rt)&&(e===rt&&(!(Pe&2)&&(jo|=n),et===4&&Hn(e,ot)),Mt(e,r),n===1&&Pe===0&&!(t.mode&1)&&(ws=Ge()+500,bo&&ar()))}function Mt(e,t){var n=e.callbackNode;f0(e,t);var r=Fa(e,e===rt?ot:0);if(r===0)n!==null&&sh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sh(n),t===1)e.tag===0?hb(Qh.bind(null,e)):Tp(Qh.bind(null,e)),lb(function(){!(Pe&6)&&ar()}),n=null;else{switch(ip(r)){case 1:n=bu;break;case 4:n=np;break;case 16:n=Ra;break;case 536870912:n=rp;break;default:n=Ra}n=Eg(n,wg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wg(e,t){if(Pa=-1,Ta=0,Pe&6)throw Error(G(327));var n=e.callbackNode;if(fs()&&e.callbackNode!==n)return null;var r=Fa(e,e===rt?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=no(e,r);else{t=r;var s=Pe;Pe|=2;var i=jg();(rt!==e||ot!==t)&&(vn=null,ws=Ge()+500,jr(e,t));do try{Mb();break}catch(l){kg(e,l)}while(!0);Au(),Za.current=i,Pe=s,Je!==null?t=0:(rt=null,ot=0,t=et)}if(t!==0){if(t===2&&(s=nc(e),s!==0&&(r=s,t=Tc(e,s))),t===1)throw n=Ci,jr(e,0),Hn(e,r),Mt(e,Ge()),n;if(t===6)Hn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ib(s)&&(t=no(e,r),t===2&&(i=nc(e),i!==0&&(r=i,t=Tc(e,i))),t===1))throw n=Ci,jr(e,0),Hn(e,r),Mt(e,Ge()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:gr(e,Et,vn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Vu+500-Ge(),10<t)){if(Fa(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=uc(gr.bind(null,e,Et,vn),t);break}gr(e,Et,vn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-an(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tb(r/1960))-r,10<r){e.timeoutHandle=uc(gr.bind(null,e,Et,vn),r);break}gr(e,Et,vn);break;case 5:gr(e,Et,vn);break;default:throw Error(G(329))}}}return Mt(e,Ge()),e.callbackNode===n?wg.bind(null,e):null}function Tc(e,t){var n=ni;return e.current.memoizedState.isDehydrated&&(jr(e,t).flags|=256),e=no(e,t),e!==2&&(t=Et,Et=n,t!==null&&Ic(t)),e}function Ic(e){Et===null?Et=e:Et.push.apply(Et,e)}function Ib(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Gu,t&=~jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function Qh(e){if(Pe&6)throw Error(G(327));fs();var t=Fa(e,0);if(!(t&1))return Mt(e,Ge()),null;var n=no(e,t);if(e.tag!==0&&n===2){var r=nc(e);r!==0&&(t=r,n=Tc(e,r))}if(n===1)throw n=Ci,jr(e,0),Hn(e,t),Mt(e,Ge()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Et,vn),Mt(e,Ge()),null}function Ku(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(ws=Ge()+500,bo&&ar())}}function Pr(e){Gn!==null&&Gn.tag===0&&!(Pe&6)&&fs();var t=Pe;Pe|=1;var n=Kt.transition,r=Ae;try{if(Kt.transition=null,Ae=1,e)return e()}finally{Ae=r,Kt.transition=n,Pe=t,!(Pe&6)&&ar()}}function Ju(){Ot=os.current,ze(os)}function jr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ob(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ha();break;case 3:bs(),ze(It),ze(mt),Fu();break;case 5:Ru(r);break;case 4:bs();break;case 13:ze(Ue);break;case 19:ze(Ue);break;case 10:Mu(r.type._context);break;case 22:case 23:Ju()}n=n.return}if(rt=e,Je=e=er(e.current,null),ot=Ot=t,et=0,Ci=null,Gu=jo=Er=0,Et=ni=null,wr!==null){for(t=0;t<wr.length;t++)if(n=wr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}wr=null}return e}function kg(e,t){do{var n=Je;try{if(Au(),_a.current=Xa,Ya){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ya=!1}if(Cr=0,nt=Ze=He=null,ei=!1,Ni=0,Wu.current=null,n===null||n.return===null){et=1,Ci=t,Je=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Rh(a);if(f!==null){f.flags&=-257,Fh(f,a,l,i,t),f.mode&1&&Oh(i,u,t),t=f,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Oh(i,u,t),Qu();break e}c=Error(G(426))}}else if($e&&l.mode&1){var E=Rh(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Fh(E,a,l,i,t),Tu(vs(c,l));break e}}i=c=vs(c,l),et!==4&&(et=2),ni===null?ni=[i]:ni.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=ig(i,c,t);Th(i,g);break e;case 1:l=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Xn===null||!Xn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=ag(i,l,t);Th(i,S);break e}}i=i.return}while(i!==null)}Sg(n)}catch(N){t=N,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function jg(){var e=Za.current;return Za.current=Xa,e===null?Xa:e}function Qu(){(et===0||et===3||et===2)&&(et=4),rt===null||!(Er&268435455)&&!(jo&268435455)||Hn(rt,ot)}function no(e,t){var n=Pe;Pe|=2;var r=jg();(rt!==e||ot!==t)&&(vn=null,jr(e,t));do try{Ab();break}catch(s){kg(e,s)}while(!0);if(Au(),Pe=n,Za.current=r,Je!==null)throw Error(G(261));return rt=null,ot=0,et}function Ab(){for(;Je!==null;)Ng(Je)}function Mb(){for(;Je!==null&&!s0();)Ng(Je)}function Ng(e){var t=Cg(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?Sg(e):Je=t,Wu.current=null}function Sg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_b(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Je=null;return}}else if(n=Sb(n,t,Ot),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);et===0&&(et=5)}function gr(e,t,n){var r=Ae,s=Kt.transition;try{Kt.transition=null,Ae=1,Db(e,t,n,r)}finally{Kt.transition=s,Ae=r}return null}function Db(e,t,n,r){do fs();while(Gn!==null);if(Pe&6)throw Error(G(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(m0(e,i),e===rt&&(Je=rt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||la||(la=!0,Eg(Ra,function(){return fs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var a=Ae;Ae=1;var l=Pe;Pe|=4,Wu.current=null,Eb(e,n),bg(n,e),eb(lc),za=!!oc,lc=oc=null,e.current=n,Pb(n),i0(),Pe=l,Ae=a,Kt.transition=i}else e.current=n;if(la&&(la=!1,Gn=e,to=s),i=e.pendingLanes,i===0&&(Xn=null),l0(n.stateNode),Mt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=Ec,Ec=null,e;return to&1&&e.tag!==0&&fs(),i=e.pendingLanes,i&1?e===Pc?ri++:(ri=0,Pc=e):ri=0,ar(),null}function fs(){if(Gn!==null){var e=ip(to),t=Kt.transition,n=Ae;try{if(Kt.transition=null,Ae=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,to=0,Pe&6)throw Error(G(331));var s=Pe;for(Pe|=4,ie=e.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ie=u;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:ti(8,h,i)}var d=h.child;if(d!==null)d.return=h,ie=d;else for(;ie!==null;){h=ie;var m=h.sibling,f=h.return;if(gg(h),h===u){ie=null;break}if(m!==null){m.return=f,ie=m;break}ie=f}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ti(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ie=g;break e}ie=i.return}}var v=e.current;for(ie=v;ie!==null;){a=ie;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ie=x;else e:for(a=v;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ko(9,l)}}catch(N){We(l,l.return,N)}if(l===a){ie=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ie=S;break e}ie=l.return}}if(Pe=s,ar(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(mo,e)}catch{}r=!0}return r}finally{Ae=n,Kt.transition=t}}return!1}function Yh(e,t,n){t=vs(n,t),t=ig(e,t,1),e=Yn(e,t,1),t=vt(),e!==null&&(Di(e,1,t),Mt(e,t))}function We(e,t,n){if(e.tag===3)Yh(e,e,n);else for(;t!==null;){if(t.tag===3){Yh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){e=vs(n,e),e=ag(t,e,1),t=Yn(t,e,1),e=vt(),t!==null&&(Di(t,1,e),Mt(t,e));break}}t=t.return}}function Lb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(ot&n)===n&&(et===4||et===3&&(ot&130023424)===ot&&500>Ge()-Vu?jr(e,0):Gu|=n),Mt(e,t)}function _g(e,t){t===0&&(e.mode&1?(t=Xi,Xi<<=1,!(Xi&130023424)&&(Xi=4194304)):t=1);var n=vt();e=Pn(e,t),e!==null&&(Di(e,t,n),Mt(e,n))}function Ob(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_g(e,n)}function Rb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),_g(e,n)}var Cg;Cg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,Nb(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,$e&&t.flags&1048576&&Ip(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ea(e,t),e=t.pendingProps;var s=gs(t,mt.current);hs(t,n),s=$u(null,t,r,e,s,n);var i=Bu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(i=!0,qa(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lu(t),s.updater=wo,t.stateNode=s,s._reactInternals=t,xc(t,r,e,n),t=vc(null,t,r,!0,i,n)):(t.tag=0,$e&&i&&Eu(t),yt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ea(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=zb(r),e=tn(r,e),s){case 0:t=bc(null,t,r,e,n);break e;case 1:t=Bh(null,t,r,e,n);break e;case 11:t=zh(null,t,r,e,n);break e;case 14:t=$h(null,t,r,tn(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),bc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),Bh(e,t,r,s,n);case 3:e:{if(ug(t),e===null)throw Error(G(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Rp(e,t),Ja(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=vs(Error(G(423)),t),t=Uh(e,t,r,n,s);break e}else if(r!==s){s=vs(Error(G(424)),t),t=Uh(e,t,r,n,s);break e}else for(Rt=Qn(t.stateNode.containerInfo.firstChild),Ft=t,$e=!0,sn=null,n=Lp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){t=Tn(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return Fp(t),e===null&&mc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,cc(r,s)?a=null:i!==null&&cc(r,i)&&(t.flags|=32),cg(e,t),yt(e,t,a,n),t.child;case 6:return e===null&&mc(t),null;case 13:return dg(e,t,n);case 4:return Ou(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ys(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),zh(e,t,r,s,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Re(Va,r._currentValue),r._currentValue=a,i!==null)if(cn(i.value,a)){if(i.children===s.children&&!It.current){t=Tn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Sn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),pc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),pc(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}yt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,hs(t,n),s=Jt(s),r=r(s),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,s=tn(r,t.pendingProps),s=tn(r.type,s),$h(e,t,r,s,n);case 15:return og(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),Ea(e,t),t.tag=1,At(r)?(e=!0,qa(t)):e=!1,hs(t,n),sg(t,r,s),xc(t,r,s,n),vc(null,t,r,!0,e,n);case 19:return hg(e,t,n);case 22:return lg(e,t,n)}throw Error(G(156,t.tag))};function Eg(e,t){return tp(e,t)}function Fb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new Fb(e,t,n,r)}function Yu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zb(e){if(typeof e=="function")return Yu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gu)return 11;if(e===xu)return 14}return 2}function er(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ia(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Yu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Yr:return Nr(n.children,s,i,t);case pu:a=8,s|=8;break;case Bl:return e=Vt(12,n,t,s|2),e.elementType=Bl,e.lanes=i,e;case Ul:return e=Vt(13,n,t,s),e.elementType=Ul,e.lanes=i,e;case Hl:return e=Vt(19,n,t,s),e.elementType=Hl,e.lanes=i,e;case Fm:return No(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Om:a=10;break e;case Rm:a=9;break e;case gu:a=11;break e;case xu:a=14;break e;case $n:a=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Vt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Nr(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function No(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=Fm,e.lanes=n,e.stateNode={isHidden:!1},e}function fl(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function ml(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $b(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xu(e,t,n,r,s,i,a,l,c){return e=new $b(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lu(i),e}function Bb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pg(e){if(!e)return rr;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(At(n))return Pp(e,n,t)}return t}function Tg(e,t,n,r,s,i,a,l,c){return e=Xu(n,r,!0,e,s,i,a,l,c),e.context=Pg(null),n=e.current,r=vt(),s=Zn(n),i=Sn(r,s),i.callback=t??null,Yn(n,i,s),e.current.lanes=s,Di(e,s,r),Mt(e,r),e}function So(e,t,n,r){var s=t.current,i=vt(),a=Zn(s);return n=Pg(n),t.context===null?t.context=n:t.pendingContext=n,t=Sn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yn(s,t,a),e!==null&&(on(e,s,a,i),Sa(e,s,a)),a}function ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zu(e,t){Xh(e,t),(e=e.alternate)&&Xh(e,t)}function Ub(){return null}var Ig=typeof reportError=="function"?reportError:function(e){console.error(e)};function ed(e){this._internalRoot=e}_o.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));So(e,t,null,null)};_o.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){So(null,e,null,null)}),t[En]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=lp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&up(e)}};function td(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function Hb(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ro(a);i.call(u)}}var a=Tg(t,r,e,0,null,!1,!1,"",Zh);return e._reactRootContainer=a,e[En]=a.current,bi(e.nodeType===8?e.parentNode:e),Pr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ro(c);l.call(u)}}var c=Xu(e,0,!1,null,null,!1,!1,"",Zh);return e._reactRootContainer=c,e[En]=c.current,bi(e.nodeType===8?e.parentNode:e),Pr(function(){So(t,c,n,r)}),c}function Eo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=ro(a);l.call(c)}}So(t,a,e,s)}else a=Hb(n,t,e,s,r);return ro(a)}ap=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gs(t.pendingLanes);n!==0&&(vu(t,n|1),Mt(t,Ge()),!(Pe&6)&&(ws=Ge()+500,ar()))}break;case 13:Pr(function(){var r=Pn(e,1);if(r!==null){var s=vt();on(r,e,1,s)}}),Zu(e,1)}};wu=function(e){if(e.tag===13){var t=Pn(e,134217728);if(t!==null){var n=vt();on(t,e,134217728,n)}Zu(e,134217728)}};op=function(e){if(e.tag===13){var t=Zn(e),n=Pn(e,t);if(n!==null){var r=vt();on(n,e,t,r)}Zu(e,t)}};lp=function(){return Ae};cp=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};Zl=function(e,t,n){switch(t){case"input":if(Gl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=yo(r);if(!s)throw Error(G(90));$m(r),Gl(r,s)}}}break;case"textarea":Um(e,n);break;case"select":t=n.value,t!=null&&ls(e,!!n.multiple,t,!1)}};Jm=Ku;Qm=Pr;var qb={usingClientEntryPoint:!1,Events:[Oi,ts,yo,Vm,Km,Ku]},$s={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wb={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zm(e),e===null?null:e.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||Ub,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{mo=ca.inject(Wb),pn=ca}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;Bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(t))throw Error(G(200));return Bb(e,t,null,n)};Bt.createRoot=function(e,t){if(!td(e))throw Error(G(299));var n=!1,r="",s=Ig;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xu(e,1,!1,null,null,n,!1,r,s),e[En]=t.current,bi(e.nodeType===8?e.parentNode:e),new ed(t)};Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Zm(t),e=e===null?null:e.stateNode,e};Bt.flushSync=function(e){return Pr(e)};Bt.hydrate=function(e,t,n){if(!Co(t))throw Error(G(200));return Eo(null,e,t,!0,n)};Bt.hydrateRoot=function(e,t,n){if(!td(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Ig;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Tg(t,null,e,1,n??null,s,!1,i,a),e[En]=t.current,bi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _o(t)};Bt.render=function(e,t,n){if(!Co(t))throw Error(G(200));return Eo(null,e,t,!1,n)};Bt.unmountComponentAtNode=function(e){if(!Co(e))throw Error(G(40));return e._reactRootContainer?(Pr(function(){Eo(null,null,e,!1,function(){e._reactRootContainer=null,e[En]=null})}),!0):!1};Bt.unstable_batchedUpdates=Ku;Bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Co(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Eo(e,t,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Ag(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ag)}catch(e){console.error(e)}}Ag(),Am.exports=Bt;var Gb=Am.exports,Mg,ef=Gb;Mg=ef.createRoot,ef.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},h)=>j.createElement("svg",{ref:h,...Vb,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Kb(e)}`,l].join(" "),...u},[...t.map(([d,m])=>j.createElement(d,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=ye("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=ye("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=ye("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=ye("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ye("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),cv="modulepreload",uv=function(e){return"/battleplanapp/"+e},rf={},$i=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=uv(c),c in rf)return;rf[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":cv,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},dv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$i(async()=>{const{default:r}=await Promise.resolve().then(()=>Ps);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class ad extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class hv extends ad{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sf extends ad{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class af extends ad{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Dc||(Dc={}));var fv=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class mv{constructor(t,{headers:n={},customFetch:r,region:s=Dc.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=dv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return fv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(y=>{throw new hv(y)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new sf(d);if(!d.ok)throw new af(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof af||s instanceof sf?s.context:void 0}}})}}var Pt={},od={},To={},Bi={},Io={},Ao={},pv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ks=pv();const gv=ks.fetch,Bg=ks.fetch.bind(ks),Ug=ks.Headers,xv=ks.Request,yv=ks.Response,Ps=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ug,Request:xv,Response:yv,default:Bg,fetch:gv},Symbol.toStringTag,{value:"Module"})),bv=vy(Ps);var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});let vv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Mo.default=vv;var Hg=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ao,"__esModule",{value:!0});const wv=Hg(bv),kv=Hg(Mo);let jv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=wv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,h=null,d=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=g:h=JSON.parse(g))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(h=[],u=null,m=200,f="OK")}catch{i.status===404&&y===""?(m=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new kv.default(u)}return{error:u,data:h,count:d,status:m,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Ao.default=jv;var Nv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Io,"__esModule",{value:!0});const Sv=Nv(Ao);let _v=class extends Sv.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Io.default=_v;var Cv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bi,"__esModule",{value:!0});const Ev=Cv(Io);let Pv=class extends Ev.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Bi.default=Pv;var Tv=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(To,"__esModule",{value:!0});const Bs=Tv(Bi);let Iv=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Bs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Bs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Bs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Bs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Bs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};To.default=Iv;var Do={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.version=void 0;Lo.version="0.0.0-automated";Object.defineProperty(Do,"__esModule",{value:!0});Do.DEFAULT_HEADERS=void 0;const Av=Lo;Do.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Av.version}`};var qg=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(od,"__esModule",{value:!0});const Mv=qg(To),Dv=qg(Bi),Lv=Do;let Ov=class Wg{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Lv.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Mv.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Wg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Dv.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};od.default=Ov;var Ts=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.PostgrestError=Pt.PostgrestBuilder=Pt.PostgrestTransformBuilder=Pt.PostgrestFilterBuilder=Pt.PostgrestQueryBuilder=Pt.PostgrestClient=void 0;const Gg=Ts(od);Pt.PostgrestClient=Gg.default;const Vg=Ts(To);Pt.PostgrestQueryBuilder=Vg.default;const Kg=Ts(Bi);Pt.PostgrestFilterBuilder=Kg.default;const Jg=Ts(Io);Pt.PostgrestTransformBuilder=Jg.default;const Qg=Ts(Ao);Pt.PostgrestBuilder=Qg.default;const Yg=Ts(Mo);Pt.PostgrestError=Yg.default;var Rv=Pt.default={PostgrestClient:Gg.default,PostgrestQueryBuilder:Vg.default,PostgrestFilterBuilder:Kg.default,PostgrestTransformBuilder:Jg.default,PostgrestBuilder:Qg.default,PostgrestError:Yg.default};const{PostgrestClient:Fv,PostgrestQueryBuilder:gE,PostgrestFilterBuilder:xE,PostgrestTransformBuilder:yE,PostgrestBuilder:bE,PostgrestError:vE}=Rv;class zv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $v="2.15.1",Bv=`realtime-js/${$v}`,Uv="1.0.0",Lc=1e4,Hv=1e3,qv=100;var si;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(si||(si={}));var Ye;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ye||(Ye={}));var rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rn||(rn={}));var Oc;(function(e){e.websocket="websocket"})(Oc||(Oc={}));var yr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yr||(yr={}));class Wv{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Xg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const of=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=Gv(a,e,t,s),i),{})},Gv=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Zg(i,a):Rc(a)},Zg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Qv(t,n)}switch(e){case Le.bool:return Vv(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return Kv(t);case Le.json:case Le.jsonb:return Jv(t);case Le.timestamp:return Yv(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Rc(t);default:return Rc(t)}},Rc=e=>e,Vv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Kv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Jv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Qv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Zg(t,l))}return e},Yv=e=>typeof e=="string"?e.replace(" ","T"):e,ex=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class pl{constructor(t,n,r={},s=Lc){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lf||(lf={}));class ii{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ii.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ii.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ii.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,h)=>{a[u]||(c[u]=h)}),this.map(a,(u,h)=>{const d=i[u];if(d){const m=h.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),p=h.filter(E=>f.indexOf(E.presence_ref)<0),y=d.filter(E=>m.indexOf(E.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(f=>f.presence_ref),m=h.filter(f=>d.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cf||(cf={}));var ai;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ai||(ai={}));var wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wn||(wn={}));class ld{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new pl(this,rn.join,this.params,this.timeout),this.rejoinTimer=new Xg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ii(this),this.broadcastEndpointURL=ex(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[ai.PRESENCE]&&this.bindings[ai.PRESENCE].length>0,h={},d={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(wn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(wn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){t==null||t(wn.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,E=[];for(let g=0;g<y;g++){const v=p[g],{filter:{event:x,schema:S,table:N,filter:w}}=v,C=m&&m[g];if(C&&C.event===x&&C.schema===S&&C.table===N&&C.filter===w)E.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=Ye.errored,t==null||t(wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(wn.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ye.errored,t==null||t(wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ye.joined&&t===ai.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ye.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new pl(this,rn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new pl(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>qv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=rn;if(r&&[l,c,u,h].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,y,E;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(y=f.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(f=>f.callback(m,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var p,y,E,g,v,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,N=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const S=(v=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:E,commit_timestamp:g,type:v,errors:x}=p;m=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:g,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}f.callback(m,r)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ld.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rn.close,{},t)}_onError(t){this._on(rn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=of(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=of(t.columns,t.old_record)),n}}const uf=()=>{},ua={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xv=[1e3,2e3,5e3,1e4],Zv=1e4,ew=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tw{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lc,this.transport=null,this.heartbeatIntervalMs=ua.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uf,this.ref=0,this.reconnectTimer=null,this.logger=uf,this.conn=null,this.sendBuffer=[],this.serializer=new Wv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>$i(async()=>{const{default:l}=await Promise.resolve().then(()=>Ps);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Oc.websocket}`,this.httpEndpoint=ex(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Uv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case si.connecting:return yr.Connecting;case si.open:return yr.Open;case si.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ld(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Hv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ua.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([ew],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Bv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(rn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ua.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Lc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ua.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>Xv[h-1]||Zv,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class cd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class nw extends cd{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fc extends cd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var rw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const tx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$i(async()=>{const{default:r}=await Promise.resolve().then(()=>Ps);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},sw=()=>rw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $i(()=>Promise.resolve().then(()=>Ps),void 0)).Response:Response}),zc=e=>{if(Array.isArray(e))return e.map(n=>zc(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=zc(r)}),t},iw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Rr=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const gl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aw=(e,t,n)=>Rr(void 0,void 0,void 0,function*(){const r=yield sw();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new nw(gl(s),i,a))}).catch(s=>{t(new Fc(gl(s),s))}):t(new Fc(gl(e),e))}),ow=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(iw(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Ui(e,t,n,r,s,i){return Rr(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,ow(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>aw(c,l,r))})})}function so(e,t,n,r){return Rr(this,void 0,void 0,function*(){return Ui(e,"GET",t,n,r)})}function hn(e,t,n,r,s){return Rr(this,void 0,void 0,function*(){return Ui(e,"POST",t,r,s,n)})}function $c(e,t,n,r,s){return Rr(this,void 0,void 0,function*(){return Ui(e,"PUT",t,r,s,n)})}function lw(e,t,n,r){return Rr(this,void 0,void 0,function*(){return Ui(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function nx(e,t,n,r,s){return Rr(this,void 0,void 0,function*(){return Ui(e,"DELETE",t,r,s,n)})}var xt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const cw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},df={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uw{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=tx(s)}uploadOrUpdate(t,n,r,s){return xt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},df),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),d=yield(t=="PUT"?$c:hn)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return xt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:df.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield $c(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(Xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield hn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new cd("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}update(t,n,r){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return xt(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return xt(this,void 0,void 0,function*(){try{return{data:{path:(yield hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return xt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield hn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return xt(this,void 0,void 0,function*(){try{const s=yield hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}download(t,n){return xt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield so(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}info(t){return xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield so(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:zc(r),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}exists(t){return xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield lw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Xe(r)&&r instanceof Fc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return xt(this,void 0,void 0,function*(){try{return{data:yield nx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}list(t,n,r){return xt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},cw),n),{prefix:t||""});return{data:yield hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}listV2(t,n){return xt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield hn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const dw="2.11.0",hw={"X-Client-Info":`storage-js/${dw}`};var $r=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class fw{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},hw),n),this.fetch=tx(r)}listBuckets(){return $r(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}getBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return $r(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return $r(this,void 0,void 0,function*(){try{return{data:yield $c(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield nx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}}class mw extends fw{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new uw(this.url,this.headers,t,this.fetch)}}const pw="2.55.0";let Ks="";typeof Deno<"u"?Ks="deno":typeof document<"u"?Ks="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ks="react-native":Ks="node";const gw={"X-Client-Info":`supabase-js-${Ks}/${pw}`},xw={headers:gw},yw={schema:"public"},bw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vw={};var ww=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const kw=e=>{let t;return e?t=e:typeof fetch>"u"?t=Bg:t=fetch,(...n)=>t(...n)},jw=()=>typeof Headers>"u"?Ug:Headers,Nw=(e,t,n)=>{const r=kw(n),s=jw();return(i,a)=>ww(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var Sw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function _w(e){return e.endsWith("/")?e:e+"/"}function Cw(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Sw(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const rx="2.71.1",Vr=30*1e3,Bc=3,xl=Bc*Vr,Ew="http://localhost:9999",Pw="supabase.auth.token",Tw={"X-Client-Info":`gotrue-js/${rx}`},Uc="X-Supabase-Api-Version",sx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Aw=10*60*1e3;class ud extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Mw extends ud{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Dw(e){return be(e)&&e.name==="AuthApiError"}class ix extends ud{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class lr extends ud{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class zn extends lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lw(e){return be(e)&&e.name==="AuthSessionMissingError"}class da extends lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ha extends lr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fa extends lr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ow(e){return be(e)&&e.name==="AuthImplicitGrantRedirectError"}class hf extends lr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hc extends lr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yl(e){return be(e)&&e.name==="AuthRetryableFetchError"}class ff extends lr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class qc extends lr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mf=` 	
\r=`.split(""),Rw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<mf.length;t+=1)e[mf[t].charCodeAt(0)]=-2;for(let t=0;t<io.length;t+=1)e[io[t].charCodeAt(0)]=t;return e})();function pf(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(io[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(io[r]),t.queuedBits-=6}}function ax(e,t,n){const r=Rw[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gf(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{$w(a,r,n)};for(let a=0;a<e.length;a+=1)ax(e.charCodeAt(a),s,i);return t.join("")}function Fw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zw(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Fw(r,t)}}function $w(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Bw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)ax(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Uw(e){const t=[];return zw(e,n=>t.push(n)),new Uint8Array(t)}function Hw(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>pf(s,n,r)),pf(null,n,r),t.join("")}function qw(e){return Math.round(Date.now()/1e3)+e}function Ww(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const en=()=>typeof window<"u"&&typeof document<"u",dr={tested:!1,writable:!1},ox=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dr.tested)return dr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),dr.tested=!0,dr.writable=!0}catch{dr.tested=!0,dr.writable=!1}return dr.writable};function Gw(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const lx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$i(async()=>{const{default:r}=await Promise.resolve().then(()=>Ps);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Vw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Kr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},hr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rn=async(e,t)=>{await e.removeItem(t)};class Oo{constructor(){this.promise=new Oo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Oo.promiseConstructor=Promise;function bl(e){const t=e.split(".");if(t.length!==3)throw new qc("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Iw.test(t[r]))throw new qc("JWT not in base64url format");return{header:JSON.parse(gf(t[0])),payload:JSON.parse(gf(t[1])),signature:Bw(t[2]),raw:{header:t[0],payload:t[1]}}}async function Kw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Jw(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function Qw(e){return("0"+e.toString(16)).substr(-2)}function Yw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Qw).join("")}async function Xw(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Zw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Xw(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Br(e,t,n=!1){const r=Yw();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Kr(e,`${t}-code-verifier`,s);const i=await Zw(r);return[i,r===i?"plain":"s256"]}const e1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t1(e){const t=e.headers.get(Uc);if(!t||!t.match(e1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function n1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function r1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(e){if(!s1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vl(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xf(e){return JSON.parse(JSON.stringify(e))}var i1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const xr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a1=[502,503,504];async function yf(e){var t;if(!Vw(e))throw new Hc(xr(e),0);if(a1.includes(e.status))throw new Hc(xr(e),e.status);let n;try{n=await e.json()}catch(i){throw new ix(xr(i),i)}let r;const s=t1(e);if(s&&s.getTime()>=sx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ff(xr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new zn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ff(xr(n),e.status,n.weak_password.reasons);throw new Mw(xr(n),e.status||500,r)}const o1=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ke(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Uc]||(i[Uc]=sx["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await l1(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function l1(e,t,n,r,s,i){const a=o1(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Hc(xr(c),0)}if(l.ok||await yf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await yf(c)}}function bn(e){var t;let n=null;h1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=qw(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function bf(e){const t=bn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function c1(e){return{data:e,error:null}}function u1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=i1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function d1(e){return e}function h1(e){return e.access_token&&e.refresh_token&&e.expires_in}const wl=["global","local","others"];var f1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class m1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=lx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=wl[0]){if(wl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wl.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qn})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=f1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:u1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qn})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:d1});if(h.error)throw h.error;const d=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ur(t);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qn})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ur(t);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qn})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ur(t);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qn})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ur(t.userId);try{const{data:n,error:r}=await ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ur(t.userId),Ur(t.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}}function vf(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function p1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hr={debug:!!(globalThis&&ox()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class g1 extends cx{}async function x1(e,t,n){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new g1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}p1();const y1={url:Ew,storageKey:Pw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wf(e,t,n){return await n()}const qr={};class Ti{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ti.nextInstanceID,Ti.nextInstanceID+=1,this.instanceID>0&&en()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},y1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new m1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lx(s.fetch),this.lock=s.lock||wf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:en()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=x1:this.lock=wf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ox()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vf(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=qr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){qr[this.storageKey]=Object.assign(Object.assign({},qr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=qr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qr[this.storageKey]=Object.assign(Object.assign({},qr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Gw(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),en()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ow(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return be(n)?{error:n}:{error:new ix("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:bn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:h,password:d,options:m}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Br(this.storage,this.storageKey)),i=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:p},xform:bn})}else if("phone"in t){const{phone:h,password:d,options:m}=t;i=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:bn})}else throw new ha("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bf})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bf})}else throw new ha("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new da}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,h,d,m,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:E,wallet:g,statement:v,options:x}=t;let S;if(en())if(typeof g=="object")S=g;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))S=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const N=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const w=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),v?{statement:v}:null));let C;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")C=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)C=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${N.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const w=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=w}}try{const{data:E,error:g}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Hw(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:bn});if(g)throw g;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new da}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:g})}catch(E){if(be(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await hr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:bn});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new da}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(be(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:bn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new da}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Br(this.storage,this.storageKey));const{error:d}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new ha("You must provide either an email or phone number.")}catch(l){if(be(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:bn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Br(this.storage,this.storageKey)),await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:c1})}catch(i){if(be(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new zn;const{error:s}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new ha("You must provide either an email or phone number and a type")}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<xl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await hr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=vl()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qn}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zn}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qn})})}catch(n){if(be(n))return Lw(n)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new zn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Br(this.storage,this.storageKey));const{data:u,error:h}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:qn});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=bl(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new zn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!en())throw new fa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new hf("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new fa("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let m=h+d;c&&(m=parseInt(c));const f=m-h;f*1e3<=Vr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=m-d;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,h);const{data:y,error:E}=await this._getUser(i);if(E)throw E;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:m,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Dw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Ww(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Br(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(be(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,h;const{data:d,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return en()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Jw(async s=>(s>0&&await Kw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&yl(i)&&Date.now()+a-r<Vr})}catch(r){if(this._debug(n,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),en()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await hr(this.storage,this.storageKey);if(s&&this.userStorage){let a=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Kr(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:vl()}else if(s&&!s.user&&!s.user){const a=await hr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Rn(this.storage,this.storageKey+"-user"),await Kr(this.storage,this.storageKey,s)):s.user=vl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${xl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),yl(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Oo;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new zn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),be(i)){const a={session:null,error:i};return yl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Kr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=xf(s);await Kr(this.storage,this.storageKey,i)}else{const s=xf(n);await Kr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Vr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Vr}ms, refresh threshold is ${Bc} ticks`),s<=Bc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Br(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=bl(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Aw>s)return r;const{data:i,error:a}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=bl(r);n!=null&&n.allowExpired||n1(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const h=r1(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,a,Uw(`${l}.${c}`)))throw new qc("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}Ti.nextInstanceID=0;const b1=Ti;class v1 extends b1{constructor(t){super(t)}}var w1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(h){try{u(r.next(h))}catch(d){a(d)}}function c(h){try{u(r.throw(h))}catch(d){a(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class k1{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=_w(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:yw,realtime:vw,auth:Object.assign(Object.assign({},bw),{storageKey:u}),global:xw},d=Cw(r??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Nw(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Fv(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new mw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new mv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return w1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new tw(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j1=(e,t,n)=>new k1(e,t,n);function N1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}N1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const S1="https://dthxptbozocrbvmhwvao.supabase.co",_1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg",W=j1(S1,_1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),C1=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",oi=()=>C1()?"http://localhost:5173":`${window.location.origin}/battleplanapp/`,kl=()=>`${oi()}/auth/callback`,ao=e=>`${oi()}${e}`;function st(){const[e,t]=j.useState(null),[n,r]=j.useState(!0),s=async m=>{if(!(m!=null&&m.user)){t(null);return}try{const{data:f,error:p}=await W.from("users").select("is_admin, user_name_public").eq("id",m.user.id).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user profile:",p);const{data:y,error:E}=await W.from("locations").select("id").contains("admins",[m.user.id]).limit(1),g=!E&&y&&y.length>0;t({...m.user,is_admin:(f==null?void 0:f.is_admin)||!1,is_location_admin:g,user_name_public:(f==null?void 0:f.user_name_public)||null})}catch(f){console.error("Error fetching user profile:",f),t(m.user)}};j.useEffect(()=>{W.auth.getSession().then(({data:{session:f}})=>{s(f),r(!1)});const{data:{subscription:m}}=W.auth.onAuthStateChange((f,p)=>{s(p),r(!1)});return()=>m.unsubscribe()},[]);const i=async(m,f)=>{const{data:p,error:y}=await W.auth.signInWithPassword({email:m,password:f});return{data:p,error:y}},a=async(m,f)=>{const{data:p,error:y}=await W.auth.signUp({email:m,password:f,options:{emailRedirectTo:kl()}});return{data:p,error:y}},l=async()=>{const{data:m,error:f}=await W.auth.signInWithOAuth({provider:"google",options:{redirectTo:kl()}});return{data:m,error:f}},c=async()=>{const{error:m}=await W.auth.signOut();return{error:m}},u=async m=>{const{data:f,error:p}=await W.auth.resetPasswordForEmail(m,{redirectTo:kl()});return{data:f,error:p}},h=async m=>{const{data:f,error:p}=await W.auth.updateUser({password:m});return{data:f,error:p}},d=e&&window.location.hash.includes("type=recovery");return{user:e,loading:n,signIn:i,signUp:a,signInWithGoogle:l,signOut:c,resetPassword:u,updatePassword:h,needsPasswordReset:d}}function ux(){const[e,t]=j.useState(()=>{const r=localStorage.getItem("darkMode");return r!==null?JSON.parse(r):window.matchMedia("(prefers-color-scheme: dark)").matches});return j.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),{isDarkMode:e,toggleDarkMode:()=>{t(!e)}}}function fr({onAddModel:e,onAdminClick:t,activeTab:n,onTabChange:r}){const[s,i]=j.useState(!1),[a,l]=j.useState(!1),{isDarkMode:c,toggleDarkMode:u}=ux(),{user:h,signOut:d}=st(),m=async()=>{i(!1),await d()},f=[{id:"collection",name:"Collection",icon:Mn},{id:"battleplan",name:"Battleplan",icon:tt}],p=y=>{l(!1),r==null||r(y)};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:h&&o.jsx("button",{onClick:()=>l(!a),className:"text-secondary-text hover:text-text focus:outline-none mr-4",children:a?o.jsx(Ne,{className:"w-6 h-6 text-icon"}):o.jsx(tv,{className:"w-6 h-6 text-icon"})})}),o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsx("img",{src:"Battleplan-Logo-Purple.svg",alt:"Mini Myths Logo",className:"max-h-[300px] w-auto"})}),o.jsx("div",{className:"flex items-center space-x-4",children:h?o.jsx(o.Fragment,{children:o.jsx("button",{onClick:()=>i(!s),className:"text-secondary-text hover:text-text focus:outline-none",children:o.jsx(_n,{className:"w-6 h-6 text-icon hover:text-icon-hover"})})}):null})]}),h&&o.jsxs("div",{className:`absolute right-4 top-16 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-50 min-w-[200px] transition-all duration-200 ease-in-out ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}`,children:[o.jsx("div",{className:"px-4 py-2 border-b border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(_n,{className:"w-5 h-5 text-icon"}),o.jsx("span",{className:"text-base text-text",children:h.email})]})}),o.jsxs("button",{onClick:()=>{i(!1),t==null||t()},className:`flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors ${h!=null&&h.is_admin||h!=null&&h.is_location_admin?"":"hidden"}`,children:[o.jsx(iv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{children:"Admin"})]}),o.jsxs("button",{onClick:()=>{i(!1)},className:"flex items-center space-x-3 w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:[o.jsx(sv,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{children:"Settings"})]}),o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 hover:bg-bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[c?o.jsx(zg,{className:"w-5 h-5 text-icon hover:text-icon-hover"}):o.jsx($g,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{className:"text-base font-semibold text-text",children:c?"Dark Mode":"Light Mode"})]}),o.jsx("button",{onClick:u,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring---color-brand focus:ring-offset-2 ${c?"bg-brand":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]}),o.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-base font-semibold text-text hover:bg-bg-secondary transition-colors",children:"Sign Out"})]})]})}),h&&o.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-bg-primary border-r border-border-custom shadow-lg transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"-translate-x-full"}`,children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[o.jsx("h2",{className:"text-lg font-semibold text-title",children:"Navigation"}),o.jsx("button",{onClick:()=>l(!1),className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),o.jsx("nav",{className:"flex-1 p-4",children:o.jsxs("div",{className:"space-y-2",children:[f.map(y=>{const E=y.icon,g=n===y.id;return o.jsxs("button",{onClick:()=>p(y.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${g?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[o.jsx(E,{className:`w-5 h-5 ${g?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:`font-medium ${g?"text-brand":""}`,children:y.name})]},y.id)}),o.jsx("div",{className:"border-t border-border-custom my-4"}),o.jsxs("button",{onClick:()=>{l(!1),r==null||r("about")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-secondary-text hover:text-text hover:bg-bg-secondary",children:[o.jsx(_n,{className:"w-5 h-5 text-icon hover:text-icon-hover"}),o.jsx("span",{className:"font-medium",children:"About"})]}),((h==null?void 0:h.is_admin)||(h==null?void 0:h.is_location_admin))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-border-custom my-4"}),o.jsx("div",{className:"px-4 py-2",children:o.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"Admin Tools"})}),o.jsxs("button",{onClick:()=>{l(!1),r==null||r("all-bookings")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${n==="all-bookings"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[o.jsx(tt,{className:`w-5 h-5 ${n==="all-bookings"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:`font-medium ${n==="all-bookings"?"text-brand":""}`,children:"All Bookings"})]}),o.jsxs("button",{onClick:()=>{l(!1),r==null||r("blocked-dates")},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${n==="blocked-dates"?"bg-brand/10 text-brand border border-brand/20":"text-secondary-text hover:text-text hover:bg-bg-secondary"}`,children:[o.jsx(Dg,{className:`w-5 h-5 ${n==="blocked-dates"?"text-icon-active":"text-icon hover:text-icon-hover"}`}),o.jsx("span",{className:`font-medium ${n==="blocked-dates"?"text-brand":""}`,children:"Blocked Dates"})]})]})]})})]})}),h&&o.jsx("div",{className:`fixed inset-0 bg-black z-30 transition-opacity duration-300 ease-in-out ${a?"bg-opacity-50 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>l(!1)}),h&&o.jsx("div",{className:`fixed inset-0 bg-black z-40 transition-opacity duration-200 ease-in-out ${s?"bg-opacity-25 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>{i(!1)}})]})}function E1({icon:e,label:t,isActive:n,onClick:r}){return o.jsxs("button",{onClick:r,className:`flex items-center space-x-2 py-4 px-6 border-b-2 font-medium text-sm transition-colors ${n?"!border-brand !text-brand":"border-transparent text-secondary-text hover:text-text hover:border-border-custom"}`,children:[o.jsx(e,{className:`w-5 h-5 ${n?"text-brand":"text-secondary-text hover:text-text"}`}),o.jsx("span",{children:t})]})}function Wr({activeTab:e,onTabChange:t}){const n=[{id:"collection",name:"Collection",icon:Mn},{id:"battleplan",name:"Bookings",icon:tt}];return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black/75 backdrop-blur-md border-t border-border-custom/30",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("nav",{className:"flex justify-center items-center space-x-8","aria-label":"Tabs",children:n.map(r=>o.jsx(E1,{icon:r.icon,label:r.name,isActive:e===r.id,onClick:()=>t(r.id)},r.id))})})})}function P1({activeView:e,onViewChange:t}){const n=[{id:"recent",label:"Recent",icon:Es},{id:"models",label:"Models",icon:Zb},{id:"collections",label:"Collections",icon:Mn}];return o.jsx("div",{className:"bg-bg-secondary shadow-sm",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"flex justify-center items-center py-3",children:o.jsx("div",{className:"flex space-x-8",children:n.map(r=>{const s=r.icon,i=e===r.id;return o.jsxs("button",{onClick:()=>t(r.id),className:"flex flex-col items-center space-y-2 px-6 py-2 rounded-lg transition-all duration-200",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-border-custom transition-opacity",children:o.jsx(s,{className:`w-4 h-4 transition-opacity ${i?"text-icon-active opacity-100":"text-icon opacity-75"}`})}),o.jsx("span",{className:`text-lg font-medium transition-colors ${i?"text-text":"text-secondary-text"}`,children:r.label})]},r.id)})})})})})}function Hi({games:e,selectedGame:t,onGameSelect:n,placeholder:r="Choose a Game",recentGames:s=[]}){const[i,a]=j.useState(!1),[l,c]=j.useState(""),u=j.useRef(null),h=j.useRef(null),d=e.find(x=>x.id===t),m=e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),f=new Set(s.map(x=>x.id)),p=s.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),y=m.filter(x=>!f.has(x.id));j.useEffect(()=>{const x=S=>{u.current&&!u.current.contains(S.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),j.useEffect(()=>{i&&h.current&&h.current.focus()},[i]);const E=x=>{n(x),c(""),a(!1)},g=x=>{c(x.target.value)},v=()=>{a(!i),i||c("")};return o.jsxs("div",{className:"relative",ref:u,children:[o.jsxs("button",{type:"button",onClick:v,className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-left bg-bg-primary flex items-center justify-between hover:bg-bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[d!=null&&d.icon?o.jsx("img",{src:d.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:x=>{const S=x.target;console.warn("Dropdown game icon failed to load:",d.icon),S.style.display="none"},onLoad:()=>{console.warn("Dropdown game icon loaded successfully:",d.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:d?"text-text":"text-secondary-text",children:d?d.name:r})]}),o.jsx(nd,{className:`w-5 h-5 text-icon transition-transform ${i?"rotate-180":""}`})]}),i&&o.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg max-h-60 overflow-hidden",children:[o.jsx("div",{className:"p-3 border-b border-border-custom",children:o.jsxs("div",{className:"relative",children:[o.jsx(sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),o.jsx("input",{ref:h,type:"text",value:l,onChange:g,placeholder:"Search games...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-sm bg-bg-primary text-text"})]})}),o.jsx("div",{className:"max-h-48 overflow-y-auto",children:p.length===0&&y.length===0?o.jsxs("div",{className:"px-4 py-3 text-secondary-text text-sm",children:['No games found matching "',l,'"']}):o.jsxs(o.Fragment,{children:[p.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-4 py-2 bg-amber-50 border-b border-border-custom",children:o.jsx("span",{className:"text-xs font-semibold text-amber-800 uppercase tracking-wide",children:"Recently Used"})}),p.map(x=>o.jsxs("button",{type:"button",onClick:()=>E(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors bg-amber-25",children:[x.icon?o.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const N=S.target;console.warn("Game list icon failed to load:",x.icon),N.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:"text-text",children:x.name})]},`recent-${x.id}`))]}),y.length>0&&o.jsxs(o.Fragment,{children:[p.length>0&&o.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-custom",children:o.jsx("span",{className:"text-xs font-semibold text-secondary-text uppercase tracking-wide",children:"All Games"})}),y.map(x=>o.jsxs("button",{type:"button",onClick:()=>E(x.id),className:"w-full px-4 py-3 text-left hover:bg-bg-secondary flex items-center space-x-3 transition-colors",children:[x.icon?o.jsx("img",{src:x.icon,alt:"",className:"w-6 h-6 object-contain flex-shrink-0",onError:S=>{const N=S.target;console.warn("Game list icon failed to load:",x.icon),N.style.display="none"},onLoad:()=>{console.warn("Game list icon loaded successfully:",x.icon)}}):o.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),o.jsx("span",{className:"text-text",children:x.name})]},x.id))]})]})})]})]})}const ma="mini-myths-recent-games",kf=3;function T1(){const[e,t]=j.useState([]);j.useEffect(()=>{n()},[]);const n=()=>{try{const i=localStorage.getItem(ma);if(i){const l=JSON.parse(i).sort((c,u)=>u.lastUsed-c.lastUsed).slice(0,kf);t(l)}}catch(i){console.error("Error loading recent games:",i),t([])}};return{recentGames:e,addRecentGame:i=>{try{const a=Date.now(),l={id:i.id,name:i.name,icon:i.icon,lastUsed:a},c=localStorage.getItem(ma);let u=[];c&&(u=JSON.parse(c)),u=u.filter(h=>h.id!==i.id),u.unshift(l),u=u.slice(0,kf),localStorage.setItem(ma,JSON.stringify(u)),t(u)}catch(a){console.error("Error saving recent game:",a)}},clearRecentGames:()=>{try{localStorage.removeItem(ma),t([])}catch(i){console.error("Error clearing recent games:",i)}}}}function dd(e){return new Date(e)}function hd(e,t={weekday:"long",year:"numeric",month:"long",day:"numeric"}){return dd(e).toLocaleDateString("en-US",t)}function oo(e,t={hour:"numeric",minute:"2-digit",hour12:!0}){const n=new Date,[r,s,i="00"]=e.split(":");return new Date(n.getFullYear(),n.getMonth(),n.getDate(),parseInt(r),parseInt(s),parseInt(i)).toLocaleTimeString("en-US",t)}function Wc(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Gc(e){const t=dd(e),n=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<n}function I1(e){const t=dd(e),n=new Date,r=new Date(n),s=new Date(n);return r.setDate(r.getDate()-1),s.setDate(s.getDate()+1),n.setHours(0,0,0,0),r.setHours(0,0,0,0),s.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime()?"Today":t.getTime()===r.getTime()?"Yesterday":t.getTime()===s.getTime()?"Tomorrow":hd(e,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function A1(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function M1({value:e,onChange:t,minDate:n=Wc(),placeholder:r="Select date",className:s="",disabled:i=!1}){const[a,l]=j.useState(!1),[c,u]=j.useState(new Date),[h,d]=j.useState(e?new Date(e):null),m=j.useRef(null);j.useEffect(()=>{const C=P=>{m.current&&!m.current.contains(P.target)&&l(!1)};return a&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[a]),j.useEffect(()=>{e&&(d(new Date(e)),u(new Date(e)))},[e]);const f=C=>{const P=C.getFullYear(),I=C.getMonth(),b=new Date(P,I,1),A=new Date(P,I+1,0).getDate(),R=b.getDay(),Q=[];for(let q=0;q<R;q++)Q.push(null);for(let q=1;q<=A;q++)Q.push(new Date(P,I,q));return Q},p=C=>A1(C),y=C=>{const P=new Date(n);return P.setHours(0,0,0,0),C.setHours(0,0,0,0),C<P},E=C=>h?p(C)===p(h):!1,g=C=>{y(C)||(d(C),t(p(C)),l(!1))},v=()=>{u(new Date(c.getFullYear(),c.getMonth()-1,1))},x=()=>{u(new Date(c.getFullYear(),c.getMonth()+1,1))},S=()=>{d(null),t(""),l(!1)},N=f(c),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return o.jsxs("div",{className:`relative ${s}`,ref:m,children:[o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",value:h?h.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"",placeholder:r,onClick:()=>!i&&l(!a),readOnly:!0,disabled:i,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-brand focus:border-brand bg-bg-primary text-text cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),h&&!i&&o.jsx("button",{onClick:S,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-4 h-4"})})]}),a&&o.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-bg-primary border border-border-custom rounded-lg shadow-lg z-50 min-w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-custom",children:[o.jsx("button",{onClick:v,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:o.jsx(Lg,{className:"w-4 h-4"})}),o.jsxs("h3",{className:"text-sm font-semibold text-text",children:[w[c.getMonth()]," ",c.getFullYear()]}),o.jsx("button",{onClick:x,className:"p-1 hover:bg-bg-secondary rounded transition-colors",children:o.jsx(tr,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(C=>o.jsx("div",{className:"text-xs text-secondary-text text-center py-1",children:C},C))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:N.map((C,P)=>o.jsx("div",{className:"text-center",children:C?o.jsx("button",{onClick:()=>g(C),disabled:y(C),className:`w-8 h-8 text-sm rounded-full transition-colors ${E(C)?"bg-brand text-white":y(C)?"text-secondary-text cursor-not-allowed":"hover:bg-bg-secondary text-text"}`,children:C.getDate()}):o.jsx("div",{className:"w-8 h-8"})},P))})]})]})]})}function Vc({isOpen:e,onClose:t,onBookingCreated:n,lastSelectedLocation:r="",onLocationSelected:s}){const[i,a]=j.useState([]),[l,c]=j.useState([]),[u,h]=j.useState([]),[d,m]=j.useState(r),[f,p]=j.useState(""),[y,E]=j.useState(""),[g,v]=j.useState(""),[x,S]=j.useState(""),[N,w]=j.useState(null),[C,P]=j.useState(!1),[I,b]=j.useState(0),[T,A]=j.useState(!1),[R,Q]=j.useState(!1),[q,ne]=j.useState(""),[ee,F]=j.useState(null),[J,k]=j.useState(!1),{user:z}=st(),{recentGames:re,addRecentGame:_}=T1(),B=()=>{try{return localStorage.getItem("mini-myths-last-location")||""}catch(H){return console.error("Error loading last selected location:",H),""}},se=H=>{try{H&&localStorage.setItem("mini-myths-last-location",H)}catch(ue){console.error("Error saving last selected location:",ue)}};Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),j.useEffect(()=>{if(e){ce(),me(),xe();const H=B();m(H||r),z!=null&&z.user_name_public&&S(z.user_name_public)}},[e,r]),j.useEffect(()=>{d?(K(),se(d),s==null||s(d)):(c([]),E(""))},[d,s]),j.useEffect(()=>{f&&(E(""),w(null))},[f]),j.useEffect(()=>{d&&f?O():F(null)},[d,f]),j.useEffect(()=>{ee&&E("")},[ee]),j.useEffect(()=>{d&&f&&y?U():w(null)},[d,f,y]);const O=async()=>{if(!(!d||!f)){k(!0);try{console.log("Checking blocked date for:",{selectedLocation:d,selectedDate:f});const{data:H,error:ue}=await W.from("blocked_dates").select("description").eq("location_id",d).eq("date",f);if(console.log("Blocked date query result:",{data:H,error:ue}),ue){console.error("Error checking blocked date:",ue),F(null);return}H&&H.length>0?(console.log("Found blocked date:",H[0]),F({description:H[0].description})):(console.log("No blocked date found for this location/date"),F(null))}catch(H){console.error("Error checking blocked date:",H),F(null)}finally{k(!1)}}},U=async()=>{if(!(!d||!f||!y)){P(!0);try{const{data:H,error:ue}=await W.from("locations").select("tables").eq("id",d).single();if(ue)throw ue;const _e=H.tables,ve=l.find(M=>M.id===y),X=(ve==null?void 0:ve.isAllDay)||!1;let le=0;if(X){const{data:M,error:L}=await W.from("bookings").select("timeslot_id").eq("location_id",d).eq("date",f);if(L)throw L;const Z={};M==null||M.forEach(oe=>{const pe=oe.timeslot_id;Z[pe]=(Z[pe]||0)+1}),le=Math.max(0,...Object.values(Z))}else{const{data:M,error:L}=await W.from("bookings").select("id").eq("location_id",d).eq("date",f).eq("timeslot_id",y);if(L)throw L;const{data:Z,error:oe}=await W.from("bookings").select("timeslot:timeslots(id, name, start_time, end_time)").eq("location_id",d).eq("date",f);if(oe)throw oe;const pe=(M==null?void 0:M.length)||0,Be=(Z==null?void 0:Z.filter(Qe=>{const Ie=Qe.timeslot;return Ie&&(Ie.name==="All Day Booking"||Ie.start_time==="00:00:00"&&Ie.end_time==="23:59:59")}).length)||0;le=pe+Be}const Te=_e-le;w(Math.max(0,Te))}catch(H){console.error("Error checking table availability:",H),w(null)}finally{P(!1)}}},xe=async()=>{if(z){A(!0);try{const H=Wc(),{data:ue,error:_e}=await W.from("bookings").select("id").eq("user_id",z.id).gte("date",H);if(_e)throw _e;b((ue==null?void 0:ue.length)||0)}catch(H){console.error("Error checking current bookings:",H),b(0)}finally{A(!1)}}},ce=async()=>{try{const{data:H,error:ue}=await W.from("locations").select("*").order("name");if(ue)throw ue;a(H||[])}catch(H){console.error("Error fetching locations:",H)}},K=async()=>{try{const{data:H,error:ue}=await W.from("timeslots").select("*").eq("location_id",d).order("start_time");if(ue)throw ue;const _e=(H||[]).map(ve=>({...ve,isAllDay:ve.name==="All Day Booking"||ve.start_time==="00:00:00"&&ve.end_time==="23:59:59"}));c(_e)}catch(H){console.error("Error fetching timeslots:",H)}},me=async()=>{try{const{data:H,error:ue}=await W.from("games").select("id, name, icon").order("name");if(ue)throw ue;h(H||[])}catch(H){console.error("Error fetching games:",H)}},Y=()=>{if(!f)return null;const H=new Date(f);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][H.getDay()]},$=()=>{const H=Y();return H?l.filter(ue=>ue.availability&&ue.availability.includes(H)):[]},de=H=>H==="00:00:00"?"All Day":new Date(`2000-01-01T${H}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),ge=async H=>{if(H.preventDefault(),!(!d||!f||!y||!z)){Q(!0),ne("");try{x.trim()&&z.user_name_public!==x.trim()&&await W.from("users").update({user_name_public:x.trim()}).eq("id",z.id);const{error:ue}=await W.from("bookings").insert({location_id:d,timeslot_id:y,game_id:g||null,date:f,user_id:z.id,user_name:x.trim(),user_email:z.email});if(ue)throw ue;if(g){const _e=u.find(ve=>ve.id===g);_e&&_(_e)}m(""),p(""),E(""),v(""),S(""),F(null),n(),t(),b(_e=>_e+1)}catch(ue){ne(ue instanceof Error?ue.message:"Failed to create booking")}finally{Q(!1)}}},Me=d&&f&&y&&x.trim()&&I<4&&!ee;if(!e)return null;const te=H=>{H.target===H.currentTarget&&t()},ae=$();return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:te,children:o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-text font-overpass",children:"New Booking"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),T?o.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),o.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking booking limit..."})]})}):I>=4?o.jsx("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:o.jsx("span",{className:"text-red-700 text-sm font-medium",children:" You have reached the maximum of 4 active bookings. Cancel an existing booking to create a new one."})}):I>=3?o.jsx("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200",children:o.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" You have ",I," active booking",I!==1?"s":"",". You can create ",4-I," more."]})}):null,o.jsxs("form",{onSubmit:ge,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Your Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(_n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"userName",value:x,onChange:H=>S(H.target.value),placeholder:"Enter your full name",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"This will be shared with the store for your booking."})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game (Optional)"}),o.jsx(Hi,{games:u,selectedGame:g,onGameSelect:v,placeholder:"Choose a Game (Optional)",recentGames:re})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location"}),o.jsxs("div",{className:"relative",children:[o.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"location",value:d,onChange:H=>m(H.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0,children:[o.jsx("option",{value:"",children:"Select Location"}),i.map(H=>o.jsxs("option",{value:H.id,children:[H.name," - ",H.tables," table",H.tables!==1?"s":""]},H.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Date"}),o.jsx(M1,{value:f,onChange:p,minDate:Wc(),placeholder:"Select a date"})]}),!ee&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"timeslot",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot"}),o.jsxs("div",{className:"relative",children:[o.jsx(Es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"timeslot",value:y,onChange:H=>E(H.target.value),disabled:!d||!f,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text disabled:opacity-50 disabled:cursor-not-allowed",required:!0,children:[o.jsx("option",{value:"",children:d?f?ae.length===0?"No timeslots available for this day":"Select Timeslot":"Select date first":"Select location first"}),ae.map(H=>o.jsx("option",{value:H.id,children:H.isAllDay?`${H.name} (All Day)`:`${H.name} (${de(H.start_time)} - ${de(H.end_time)})`},H.id))]})]}),f&&ae.length===0&&d&&o.jsxs("p",{className:"text-sm text-secondary-text mt-1",children:["No timeslots available for ",Y()," at this location."]})]}),J?o.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),o.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking date availability..."})]})}):ee?o.jsxs("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200",children:[o.jsx("div",{className:"flex items-start space-x-2",children:o.jsx("span",{className:"text-red-700 text-sm font-medium",children:" Location Unavailable"})}),o.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["This location is blocked on the selected date.",ee.description&&o.jsxs("span",{className:"block mt-1",children:[o.jsx("strong",{children:"Reason:"})," ",ee.description]})]})]}):null,q&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:q}),!ee&&d&&f&&y&&o.jsx("div",{className:`p-4 rounded-lg border ${C?"bg-blue-50 border-blue-200":N===null?"bg-gray-50 border-gray-200":N===0?"bg-red-50 border-red-200":N<=2?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:C?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),o.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Checking table availability..."})]}):N===null?o.jsx("span",{className:"text-gray-700 text-sm font-medium",children:"Unable to check table availability"}):N===0?o.jsx("span",{className:"text-red-700 text-sm font-medium",children:" No tables available for this timeslot"}):N<=2?o.jsxs("span",{className:"text-yellow-700 text-sm font-medium",children:[" Only ",N," table",N!==1?"s":""," remaining"]}):o.jsxs("span",{className:"text-green-700 text-sm font-medium",children:[" ",N," table",N!==1?"s":""," available"]})}),o.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[o.jsx("button",{type:"submit",disabled:!Me||R||N===0||I>=4||ee,className:`btn-full ${Me&&!R&&N!==0&&I<4&&!ee?"btn-primary":"btn-disabled"}`,children:R?"Creating Booking...":I>=4?"Booking Limit Reached":N===0?"No Tables Available":ee?"Location Unavailable":"Confirm Booking"}),o.jsx("button",{type:"button",onClick:t,className:"btn-danger-outline btn-full",children:"Cancel"})]})]})]})})}function dx({booking:e,onClick:t,onCancelBooking:n,isPast:r=!1}){return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom p-4 w-full",children:[o.jsxs("div",{onClick:t,className:"cursor-pointer hover:bg-bg-secondary transition-colors text-left rounded p-2 -m-2 mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(Es,{className:"w-4 h-4 text-secondary-text"}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-text text-sm",children:[hd(e.date)," - ",e.timeslot.name]}),o.jsxs("p",{className:"text-xs text-secondary-text",children:[oo(e.timeslot.start_time)," - ",oo(e.timeslot.end_time)]})]})]}),o.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[o.jsx(Lr,{className:"w-4 h-4 text-secondary-text mt-0.5"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"font-medium text-text text-sm truncate",children:e.location.name}),o.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.location.address})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(_n,{className:"w-4 h-4 text-secondary-text"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[e.user_name&&o.jsx("p",{className:"text-sm text-text truncate font-medium",children:e.user_name}),o.jsx("p",{className:"text-xs text-secondary-text truncate",children:e.user_email||e.user.email})]})]}),e.game&&o.jsxs("div",{className:"flex items-center space-x-2",children:[e.game.icon?o.jsx("img",{src:e.game.icon,alt:`${e.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:s=>{const i=s.target;i.style.display="none";const a=i.nextElementSibling;a&&a.classList.contains("icon-fallback")&&(a.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:e.game.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:e.game.name.charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text truncate",children:e.game.name})]})]}),n&&!r&&o.jsx("div",{className:"flex justify-end pt-2 border-t border-border-custom",children:o.jsxs("button",{onClick:()=>n(e.id),className:"btn-danger-outline-sm btn-with-icon-sm",children:[o.jsx(Ne,{className:"w-3 h-3"}),o.jsx("span",{children:"Cancel"})]})})]})}function hx({isOpen:e,onClose:t,onConfirm:n,loading:r=!1}){if(!e)return null;const s=i=>{i.target===i.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:"Are you sure you want to cancel this booking?"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"We'll delete this booking and make the table available for someone else."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:r,className:"btn-ghost btn-flex",children:"No, I'll keep my booking"}),o.jsx("button",{onClick:n,disabled:r,className:"btn-danger btn-flex",children:r?"Deleting...":"Yes, Delete my booking"})]})]})})}function D1(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{user:a}=st();j.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await W.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `).eq("user_id",a==null?void 0:a.id).order("date",{ascending:!0});if(u)throw u;if(!c){t([]);return}const h=[...new Set(c.map(y=>y.user_id))],{data:d,error:m}=await W.from("users").select("id, email").in("id",h);if(m)throw m;const f=new Map((d||[]).map(y=>[y.id,y])),p=c.map(y=>({...y,user:f.get(y.user_id)||{id:y.user_id,email:"Unknown User"}}));t(p)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return{bookings:e,loading:n,error:s,refetch:l}}function L1(){const[e,t]=Ce.useState(!1),[n,r]=Ce.useState(new Set),[s,i]=Ce.useState(""),[a,l]=Ce.useState({isOpen:!1,bookingId:null}),[c,u]=Ce.useState(!1),{bookings:h,loading:d,refetch:m}=D1(),f=()=>{m()},p=S=>{i(S)},y=S=>{l({isOpen:!0,bookingId:S})},E=async()=>{if(a.bookingId){u(!0);try{const{error:S}=await W.from("bookings").delete().eq("id",a.bookingId);if(S)throw S;await m(),l({isOpen:!1,bookingId:null})}catch(S){console.error("Error cancelling booking:",S)}finally{u(!1)}}},g=Ce.useMemo(()=>{const S=new Date;S.setHours(0,0,0,0);const N={},w=[];h.forEach(I=>{if(new Date(I.date)>=S){const T=I.date;N[T]||(N[T]=[]),N[T].push(I)}else w.push(I)}),Object.keys(N).forEach(I=>{N[I].sort((b,T)=>b.timeslot.start_time.localeCompare(T.timeslot.start_time))}),w.sort((I,b)=>{const T=b.date.localeCompare(I.date);return T!==0?T:b.timeslot.start_time.localeCompare(I.timeslot.start_time)});const P=Object.keys(N).sort((I,b)=>I.localeCompare(b)).map(I=>({date:I,bookings:N[I],isPast:!1}));return w.length>0&&P.push({date:"past",bookings:w,isPast:!0}),P},[h]);Ce.useEffect(()=>{g.length>0&&r(new Set([g[0].date]))},[g]);const v=S=>{r(N=>{const w=new Set(N);return w.has(S)?w.delete(S):w.add(S),w})},x=S=>S==="past"?"Past Bookings":new Date(S).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsx("div",{className:"text-center mb-12",children:o.jsx("h1",{className:"text-4xl font-bold text-title mb-4",children:"YOUR TABLE BOOKINGS"})}),o.jsx("div",{className:"mb-8",children:d?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((S,N)=>o.jsx("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("div",{className:"h-6 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-1/2"})]})},N))}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(tt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No table bookings yet."}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:()=>t(!0),className:"btn-primary",children:"Book Your First Table"})})]}):o.jsx("div",{className:"space-y-8",children:g.map(({date:S,bookings:N,isPast:w})=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>v(S),className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:x(S)}),n.has(S)?o.jsx(nd,{className:"w-5 h-5 text-icon"}):o.jsx(tr,{className:"w-5 h-5 text-icon"})]}),n.has(S)&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(C=>o.jsx(dx,{booking:C,onClick:()=>{},onCancelBooking:y,isPast:w},C.id))})]},S))})})]}),o.jsx(Vc,{isOpen:e,onClose:()=>t(!1),onBookingCreated:f,lastSelectedLocation:s,onLocationSelected:p}),o.jsx(hx,{isOpen:a.isOpen,onClose:()=>l({isOpen:!1,bookingId:null}),onConfirm:E,loading:c})]})}function O1({model:e,name:t,boxName:n,gameName:r,gameIcon:s,status:i,count:a,imageUrl:l,onViewModel:c,onViewBox:u}){console.log("ModelCard Debug:",{name:t,gameName:r,gameIcon:s,hasGameIcon:!!s,gameIconType:typeof s,gameIconTrimmed:s==null?void 0:s.trim()});const h=f=>{switch(f){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},d=()=>{var p,y,E;if(l&&typeof l=="string"&&l.trim()!==""&&l!=="undefined"&&l!=="null"&&!l.includes("undefined")&&!l.includes("null")&&(l.startsWith("http")||l.startsWith("/")))return{src:l,isGameFallback:!1};const f=((y=(p=e==null?void 0:e.box)==null?void 0:p.game)==null?void 0:y.icon)||((E=e==null?void 0:e.game)==null?void 0:E.icon);return f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")?{src:f,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},m=f=>!!(f&&typeof f=="string"&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&f.startsWith("http")&&f.includes("game-assets"));return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col h-full",children:[o.jsxs("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:[(()=>{const f=d();return o.jsx("img",{src:f.src,alt:t,className:`w-full h-48 min-h-[400px] object-cover ${f.isGameFallback?"opacity-10":""}`,loading:"lazy",onError:p=>{const y=p.target,E="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";y.src!==E&&(console.log("Image failed to load:",y.src,"Falling back to default"),y.src=E)}})})(),i!=="None"&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(i)}`,children:i})})]}),o.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[o.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:t}),(e==null?void 0:e.box)&&o.jsx("button",{onClick:()=>u==null?void 0:u(e.box),className:"text-sm text-secondary-text hover:text-brand transition-colors text-left",children:n})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[o.jsx("span",{className:"text-xs text-secondary-text font-bold",children:r.toUpperCase()}),m(s)?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:s||"",alt:`${r} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:f=>{const p=f.target;console.warn("Game icon failed to load (bucket not found):",s,"Falling back to letter icon"),p.style.display="none";const y=p.nextElementSibling;y&&y.classList.contains("icon-fallback")&&(y.style.display="flex")},onLoad:f=>{const y=f.target.nextElementSibling;y&&y.classList.contains("icon-fallback")&&(y.style.display="none")}}),o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]}):o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.charAt(0)})})]})]}),o.jsx("div",{className:"flex justify-center mt-auto",children:o.jsx("button",{onClick:c,className:"btn-secondary btn-flex",children:"View Model"})})]})]})}function R1({name:e,gameName:t,purchaseDate:n,imageUrl:r,gameImage:s,gameIcon:i,onViewBox:a}){const l=h=>new Date(h).toLocaleDateString(),c=()=>r&&typeof r=="string"&&r.trim()!==""&&r!=="undefined"&&r!=="null"&&!r.includes("undefined")&&!r.includes("null")&&(r.startsWith("http")||r.startsWith("/"))?r:s&&typeof s=="string"&&s.trim()!==""&&s!=="undefined"&&s!=="null"&&s.startsWith("http")?s:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",u=h=>!!(h&&typeof h=="string"&&h.trim()!==""&&h!=="undefined"&&h!=="null"&&h.startsWith("http")&&h.includes("game-assets"));return o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden max-w-[380px] flex flex-col",children:[o.jsx("div",{className:"aspect-w-16 aspect-h-12 relative bg-bg-card-secondary",children:o.jsx("img",{src:c(),alt:e,className:"w-full h-48 min-h-[400px] bg-bg-card-secondary object-cover"})}),o.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 mr-3",children:[o.jsx("h3",{className:"text-lg font-bold text-title mb-1 break-words",children:e}),o.jsxs("p",{className:"text-sm text-secondary-text",children:["Purchased: ",l(n)]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 max-w-[30%]",children:[o.jsx("span",{className:"text-xs text-secondary-text font-bold",children:t.toUpperCase()}),u(i)?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:i||"",alt:`${t} icon`,className:"w-8 h-8 object-contain rounded flex-shrink-0",onError:h=>{const d=h.target;console.warn("Game icon failed to load (bucket not found):",i,"Falling back to letter icon"),d.style.display="none";const m=d.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="flex")},onLoad:h=>{const m=h.target.nextElementSibling;m&&m.classList.contains("icon-fallback")&&(m.style.display="none")}}),o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]}):o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 icon-fallback",children:o.jsx("span",{className:"text-white text-xs font-bold",children:t.charAt(0)})})]})]}),o.jsx("div",{className:"flex justify-center mt-auto",children:o.jsx("button",{onClick:a,className:"btn-secondary btn-flex",children:"View Collection"})})]})]})}function pa({currentPage:e,totalPages:t,onPageChange:n}){const r=[];if(t>7)if(e<=4){for(let i=1;i<=5;i++)r.push(i);r.push("..."),r.push(t)}else if(e>=t-3){r.push(1),r.push("...");for(let i=t-4;i<=t;i++)r.push(i)}else{r.push(1),r.push("...");for(let i=e-1;i<=e+1;i++)r.push(i);r.push("..."),r.push(t)}else for(let i=1;i<=t;i++)r.push(i);return o.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-8",children:[o.jsx("button",{onClick:()=>n(e-1),disabled:e===1,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:o.jsx(Lg,{className:"w-5 h-5"})}),r.map((i,a)=>o.jsx("button",{onClick:()=>typeof i=="number"&&n(i),disabled:i==="...",className:`px-3 py-2 rounded-lg text-sm font-medium ${i===e?"bg-title text-bg-primary":i==="..."?"cursor-default text-secondary-text":"hover:bg-bg-secondary text-text"}`,children:i},a)),o.jsx("button",{onClick:()=>n(e+1),disabled:e===t,className:"p-2 rounded-lg hover:bg-bg-secondary disabled:opacity-50 disabled:cursor-not-allowed text-text",children:o.jsx(tr,{className:"w-5 h-5"})})]})}function jf({isOpen:e,onClose:t,mode:n}){const[r,s]=j.useState(""),[i,a]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(""),[d,m]=j.useState(""),[f,p]=j.useState(n),{signIn:y,signUp:E,signInWithGoogle:g,resetPassword:v}=st();Ce.useEffect(()=>{p(n),s(""),a(""),h(""),m("")},[n]);const x=async()=>{c(!0),h("");try{const{error:C}=await g();C&&h(C.message)}catch{h("An unexpected error occurred")}finally{c(!1)}},S=async C=>{C.preventDefault(),c(!0),h(""),m("");try{if(f==="forgot-password"){const{error:P}=await v(r);P?h(P.message):(m("Password reset email sent! Check your inbox."),s(""))}else{const{error:P}=f==="login"?await y(r,i):await E(r,i);P?h(P.message):(t(),s(""),a(""))}}catch{h("An unexpected error occurred")}finally{c(!1)}},N=()=>{p("login"),s(""),a(""),h(""),m("")};if(!e)return null;const w=C=>{C.target===C.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:w,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f==="forgot-password"&&o.jsx("button",{onClick:N,className:"text-secondary-text hover:text-text p-1",children:o.jsx(or,{className:"w-5 h-5"})}),o.jsx("h2",{className:"text-2xl font-bold text-title flex-1 text-center",children:f==="login"?"Log In":f==="signup"?"Sign Up":"Reset Password"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),f!=="forgot-password"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-6",children:o.jsxs("button",{type:"button",onClick:x,disabled:l,className:"btn-secondary btn-full btn-with-icon",children:[o.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o.jsx("span",{className:"font-medium",children:f==="login"?"Sign in with Google":"Sign up with Google"})]})}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-border-custom"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-modal-bg text-secondary-text",children:"Or continue with email"})})]})]}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:r,onChange:C=>s(C.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f!=="forgot-password"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:i,onChange:C=>a(C.target.value),required:!0,className:"w-full px-3 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]}),f==="login"&&o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"button",onClick:()=>p("forgot-password"),className:"text-sm text-[var(--color-brand)] hover:text-[var(--color-brand)]/80 transition-colors",children:"Forgot your password?"})}),u&&o.jsx("div",{className:"text-red-600 text-sm",children:u}),d&&o.jsx("div",{className:"text-green-600 text-sm",children:d}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{type:"submit",disabled:l,className:"btn-primary btn-full",children:l?"Processing...":f==="login"?"Log In":f==="signup"?"Sign Up":"Send Reset Email"})})]}),f!=="forgot-password"&&o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-sm text-secondary-text",children:[f==="login"?"Don't have an account? ":"Already have an account? ",o.jsx("button",{type:"button",onClick:()=>p(f==="login"?"signup":"login"),className:"btn-ghost btn-ghost-sm",children:f==="login"?"Sign Up":"Log In"})]})})]})})}async function In(e,t=1200,n=1200,r=.8){return new Promise((s,i)=>{const a=document.createElement("canvas"),l=a.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:h}=c;u>h?u>t&&(h=h*t/u,u=t):h>n&&(u=u*n/h,h=n),a.width=u,a.height=h,l?(l.drawImage(c,0,0,u,h),a.toBlob(d=>{if(d){const m=new File([d],e.name,{type:e.type,lastModified:Date.now()});s(m)}else i(new Error("Failed to compress image"))},e.type,r)):i(new Error("Failed to get canvas context"))},c.onerror=()=>{i(new Error("Failed to load image"))},c.src=URL.createObjectURL(e)})}function js(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type.toLowerCase())}function Ct(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function Ir({isOpen:e,onClose:t,onCrop:n,imageFile:r}){const s=j.useRef(null);j.useRef(null);const[i,a]=j.useState(null),[l,c]=j.useState({x:0,y:0,width:200,height:200}),[u,h]=j.useState(!1),[d,m]=j.useState(!1),[f,p]=j.useState({x:0,y:0}),[y,E]=j.useState(1),[g,v]=j.useState(0),[x,S]=j.useState(""),[N,w]=j.useState({exposure:0});j.useEffect(()=>{if(e&&r){const k=new Image;return k.onload=()=>{a(k);const z=600,re=400,_=z/k.width,B=re/k.height,se=Math.min(_,B,1),O=k.width*se,U=k.height*se,ce=Math.min(O,U)*.8;c({x:(z-ce)/2,y:(re-ce)/2,width:ce,height:ce}),E(se),v(0),w({exposure:0})},k.src=URL.createObjectURL(r),()=>URL.revokeObjectURL(k.src)}},[e,r]);const C=j.useCallback(()=>{const k=s.current,z=k==null?void 0:k.getContext("2d");if(!k||!z||!i)return;z.clearRect(0,0,k.width,k.height),z.save();const re=k.width/2,_=k.height/2;if(z.translate(re,_),z.rotate(g*Math.PI/180),z.scale(y,y),N.exposure!==0){const O=document.createElement("canvas"),U=O.getContext("2d");U&&(O.width=i.width,O.height=i.height,U.drawImage(i,0,0),N.exposure>0?(U.globalCompositeOperation="screen",U.fillStyle=`rgba(255, 255, 255, ${N.exposure/100})`,U.fillRect(0,0,O.width,O.height)):N.exposure<0&&(U.globalCompositeOperation="multiply",U.fillStyle=`rgba(0, 0, 0, ${Math.abs(N.exposure)/100})`,U.fillRect(0,0,O.width,O.height)),z.drawImage(O,-i.width/2,-i.height/2,i.width,i.height))}else z.drawImage(i,-i.width/2,-i.height/2,i.width,i.height);z.restore(),z.strokeStyle="#F59E0B",z.lineWidth=2,z.strokeRect(l.x,l.y,l.width,l.height);const B=8,se=[{x:l.x-B/2,y:l.y-B/2},{x:l.x+l.width-B/2,y:l.y-B/2},{x:l.x-B/2,y:l.y+l.height-B/2},{x:l.x+l.width-B/2,y:l.y+l.height-B/2},{x:l.x+l.width/2-B/2,y:l.y-B/2},{x:l.x+l.width-B/2,y:l.y+l.height/2-B/2},{x:l.x+l.width/2-B/2,y:l.y+l.height-B/2},{x:l.x-B/2,y:l.y+l.height/2-B/2}];z.fillStyle="#F59E0B",se.forEach(O=>{z.fillRect(O.x,O.y,B,B)})},[i,l,y,g,N]);j.useEffect(()=>{C()},[C]);const P=k=>{const z=s.current;if(!z)return;const re=z.getBoundingClientRect(),_=k.clientX-re.left,B=k.clientY-re.top,O=window.innerWidth<=768?40:20,U=[{x:l.x-O/2,y:l.y-O/2,type:"nw"},{x:l.x+l.width-O/2,y:l.y-O/2,type:"ne"},{x:l.x-O/2,y:l.y+l.height-O/2,type:"sw"},{x:l.x+l.width-O/2,y:l.y+l.height-O/2,type:"se"},{x:l.x+l.width/2-O/2,y:l.y-O/2,type:"n"},{x:l.x+l.width-O/2,y:l.y+l.height/2-O/2,type:"e"},{x:l.x+l.width/2-O/2,y:l.y+l.height-O/2,type:"s"},{x:l.x-O/2,y:l.y+l.height/2-O/2,type:"w"}];for(let xe=0;xe<U.length;xe++){const ce=U[xe];if(_>=ce.x&&_<=ce.x+O&&B>=ce.y&&B<=ce.y+O){m(!0),S(ce.type),p({x:_,y:B});return}}_>=l.x&&_<=l.x+l.width&&B>=l.y&&B<=l.y+l.height&&(h(!0),p({x:_-l.x,y:B-l.y}))},[I,b]=j.useState("crosshair"),T=k=>{const z=s.current;if(!z)return;const re=z.getBoundingClientRect(),_=k.clientX-re.left,B=k.clientY-re.top;if(!u&&!d){const O=window.innerWidth<=768?40:20,U=[{x:l.x-O/2,y:l.y-O/2,type:"nw"},{x:l.x+l.width-O/2,y:l.y-O/2,type:"ne"},{x:l.x-O/2,y:l.y+l.height-O/2,type:"sw"},{x:l.x+l.width-O/2,y:l.y+l.height-O/2,type:"se"},{x:l.x+l.width/2-O/2,y:l.y-O/2,type:"n"},{x:l.x+l.width-O/2,y:l.y+l.height/2-O/2,type:"e"},{x:l.x+l.width/2-O/2,y:l.y+l.height-O/2,type:"s"},{x:l.x-O/2,y:l.y+l.height/2-O/2,type:"w"}];let xe=!1;for(let ce=0;ce<U.length;ce++){const K=U[ce];if(_>=K.x&&_<=K.x+O&&B>=K.y&&B<=K.y+O){switch(xe=!0,K.type){case"nw":case"se":b("nw-resize");break;case"ne":case"sw":b("ne-resize");break;case"n":case"s":b("n-resize");break;case"e":case"w":b("e-resize");break}break}}xe||(_>=l.x&&_<=l.x+l.width&&B>=l.y&&B<=l.y+l.height?b("move"):b("default"))}if(u){b("move");const se=Math.max(0,Math.min(_-f.x,z.width-l.width)),O=Math.max(0,Math.min(B-f.y,z.height-l.height));c(U=>({...U,x:se,y:O}))}else if(d){const se=_-f.x,O=B-f.y;c(U=>{let xe=U.x,ce=U.y,K=U.width,me=U.height;switch(x){case"nw":xe=Math.max(0,Math.min(U.x+se,U.x+U.width-50)),ce=Math.max(0,Math.min(U.y+O,U.y+U.height-50)),K=U.width-(xe-U.x),me=U.height-(ce-U.y);break;case"ne":ce=Math.max(0,Math.min(U.y+O,U.y+U.height-50)),K=Math.max(50,Math.min(U.width+se,z.width-U.x)),me=U.height-(ce-U.y);break;case"sw":xe=Math.max(0,Math.min(U.x+se,U.x+U.width-50)),K=U.width-(xe-U.x),me=Math.max(50,Math.min(U.height+O,z.height-U.y));break;case"se":K=Math.max(50,Math.min(U.width+se,z.width-U.x)),me=Math.max(50,Math.min(U.height+O,z.height-U.y));break;case"n":ce=Math.max(0,Math.min(U.y+O,U.y+U.height-50)),me=U.height-(ce-U.y);break;case"e":K=Math.max(50,Math.min(U.width+se,z.width-U.x));break;case"s":me=Math.max(50,Math.min(U.height+O,z.height-U.y));break;case"w":xe=Math.max(0,Math.min(U.x+se,U.x+U.width-50)),K=U.width-(xe-U.x);break}return{x:xe,y:ce,width:K,height:me}}),p({x:_,y:B})}},A=()=>{h(!1),m(!1),S("")},R=()=>{E(k=>Math.min(k+.1,3))},Q=()=>{E(k=>Math.max(k-.1,.1))},q=()=>{v(k=>(k+90)%360)},ne=k=>{const z=parseFloat(k.target.value);w(re=>({...re,exposure:z}))},ee=()=>{w({exposure:0})},F=()=>{const k=s.current,z=k==null?void 0:k.getContext("2d");if(!k||!z||!i)return;const re=k.width,_=k.height,B=re/2,se=_/2,O=i.width*y,U=i.height*y,xe=B-O/2,ce=se-U/2,K=l.x-xe,me=l.y-ce,Y=K/y,$=me/y,de=l.width/y,ge=l.height/y,Me=Math.max(0,Math.min(Y,i.width)),te=Math.max(0,Math.min($,i.height)),ae=Math.min(de,i.width-Me),H=Math.min(ge,i.height-te),ue=document.createElement("canvas"),_e=ue.getContext("2d");if(_e){if(ue.width=Math.round(ae),ue.height=Math.round(H),g!==0||N.exposure!==0){const ve=document.createElement("canvas"),X=ve.getContext("2d");if(!X)return;if(g!==0){const M=g*Math.PI/180,L=Math.abs(Math.cos(M)),Z=Math.abs(Math.sin(M));ve.width=i.width*L+i.height*Z,ve.height=i.width*Z+i.height*L,X.translate(ve.width/2,ve.height/2),X.rotate(M)}else ve.width=i.width,ve.height=i.height;X.drawImage(i,-i.width/2,-i.height/2),N.exposure!==0&&(N.exposure>0?(X.globalCompositeOperation="screen",X.fillStyle=`rgba(255, 255, 255, ${N.exposure/100})`,X.fillRect(0,0,ve.width,ve.height)):(X.globalCompositeOperation="multiply",X.fillStyle=`rgba(0, 0, 0, ${Math.abs(N.exposure)/100})`,X.fillRect(0,0,ve.width,ve.height)));let le,Te;if(g!==0){const M=g*Math.PI/180,L=Math.abs(Math.cos(M)),Z=Math.abs(Math.sin(M));le=ve.width/2+(Y-i.width/2)*L-($-i.height/2)*Z-ae/2,Te=ve.height/2+(Y-i.width/2)*Z+($-i.height/2)*L-H/2}else le=Y,Te=$;_e.drawImage(ve,Math.max(0,le),Math.max(0,Te),ae,H,0,0,ae,H)}else _e.drawImage(i,Me,te,ae,H,0,0,ae,H);ue.toBlob(ve=>{if(ve){const X=new File([ve],r.name,{type:r.type,lastModified:Date.now()});n(X)}},r.type,1)}};if(!e)return null;const J=k=>{k.target===k.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:J,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Crop Image"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"mb-4",children:o.jsx("canvas",{ref:s,width:600,height:400,className:"border border-border-custom rounded-lg w-full block",style:{cursor:I},onMouseDown:P,onMouseMove:T,onMouseUp:A,onMouseLeave:A})}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[o.jsx("button",{onClick:Q,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom Out",children:o.jsx(lv,{className:"w-4 h-4"})}),o.jsx("button",{onClick:R,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Zoom In",children:o.jsx(ov,{className:"w-4 h-4"})}),o.jsx("button",{onClick:q,className:"p-2 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",title:"Rotate",children:o.jsx(rv,{className:"w-4 h-4"})}),o.jsx("div",{className:"flex items-center space-x-2 text-sm text-secondary-text",children:o.jsx("span",{children:"Drag crop area or resize handles to adjust selection"})})]}),o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm text-secondary-text",children:"Exposure"}),o.jsxs("span",{className:"text-sm text-secondary-text",children:[N.exposure>0?"+":"",N.exposure]})]}),o.jsx("input",{type:"range",min:"-50",max:"50",step:"1",value:N.exposure,onChange:ne,className:"w-full h-2 bg-border-custom rounded-lg appearance-none cursor-pointer slider"}),o.jsxs("div",{className:"flex justify-between text-xs text-secondary-text mt-1",children:[o.jsx("span",{children:"Darker"}),o.jsx("span",{children:"Brighter"})]})]}),o.jsx("button",{onClick:ee,className:"text-sm text-amber-600 hover:text-amber-700 transition-colors",children:"Reset Adjustments"})]})})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:F,className:"btn-primary btn-flex",children:"Crop & Use"})]})]})})}function F1({isOpen:e,onClose:t,onSuccess:n,preselectedBoxId:r}){const[s,i]=j.useState(""),[a,l]=j.useState(""),[c,u]=j.useState(""),[h,d]=j.useState(""),[m,f]=j.useState(""),[p,y]=j.useState(""),[E,g]=j.useState(""),[v,x]=j.useState(""),[S,N]=j.useState("1"),[w,C]=j.useState(null),[P,I]=j.useState(!1),[b,T]=j.useState(null),[A,R]=j.useState([]),[Q,q]=j.useState([]),[ne,ee]=j.useState(!1),[F,J]=j.useState(!1),[k,z]=j.useState(""),[re,_]=j.useState(""),[B,se]=j.useState(""),{user:O}=st();Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),j.useEffect(()=>{e&&(U(),xe(),r&&u(r))},[e]),j.useEffect(()=>{e&&xe()},[e,O]);const U=async()=>{try{const{data:te,error:ae}=await W.from("games").select("id, name, icon").order("name");if(ae)throw ae;R(te||[])}catch(te){console.error("Error fetching games:",te)}},xe=async()=>{if(O)try{const{data:te,error:ae}=await W.from("boxes").select(`
          id,
          name,
          game_id,
          purchase_date,
          created_at,
          game:games(
            name,
            icon
          )
        `).eq("user_id",O.id).order("created_at",{ascending:!1});if(ae)throw ae;const H=(te||[]).map(ue=>({...ue,game:ue.game&&Array.isArray(ue.game)?ue.game[0]:ue.game}));q(H)}catch(te){console.error("Error fetching boxes:",te)}},ce=()=>a?Q.filter(te=>te.game_id===a):Q,K=te=>{const ae=te.target.files;if(_(""),se(""),ae&&ae.length>0){const H=ae[0];if(!js(H)){_("Please select a valid image file (JPEG, PNG, or WebP)"),C(null),te.target.value="";return}const ue=50*1024*1024;H.size>ue?(_(`Your image must be 50MB or less. Current size: ${Ct(H.size)}`),C(null),te.target.value=""):(C(ae),ae&&ae.length>0&&(T(ae[0]),I(!0)),H.size>1024*1024&&se(`Original size: ${Ct(H.size)}. Image will be automatically compressed before upload.`))}else C(ae)},me=te=>{const ae=new DataTransfer;ae.items.add(te),C(ae.files),I(!1),T(null),se(`Cropped image ready for upload (${Ct(te.size)})`)},Y=()=>{I(!1),T(null);const te=document.getElementById("image");te&&(te.value=""),C(null)},$=te=>{const ae=te.target.value.replace(/[^0-9.]/g,"");if(g(ae),ae&&!isNaN(parseFloat(ae))){const H=parseFloat(ae);x(`$${H.toFixed(2)}`)}else x("")},de=async te=>{if(te.preventDefault(),!(!s.trim()||!O)){ee(!0),z("");try{let ae="";if(w&&w.length>0){const _e=w[0];if(B.includes("Cropped image ready")){J(!0);try{const X=await In(_e,1200,1200,.8);console.log(`Cropped image compressed: ${Ct(_e.size)}  ${Ct(X.size)}`);const le=X.name.split(".").pop(),Te=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${le}`,{data:M,error:L}=await W.storage.from("model-images").upload(Te,X);if(L)throw console.error("Compressed cropped image upload error:",L),new Error(`Failed to upload image: ${L.message}`);{const{data:Z}=W.storage.from("model-images").getPublicUrl(M.path);ae=Z.publicUrl,console.log("Uploaded compressed cropped image URL:",ae)}}catch(X){console.error("Cropped image compression error:",X);const le=_e.name.split(".").pop(),Te=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${le}`,{data:M,error:L}=await W.storage.from("model-images").upload(Te,_e);if(L)throw console.error("Fallback cropped image upload error:",L),new Error(`Failed to upload image: ${L.message}`);{const{data:Z}=W.storage.from("model-images").getPublicUrl(M.path);ae=Z.publicUrl,console.log("Uploaded uncompressed cropped image URL:",ae)}}finally{J(!1)}}else{J(!0);try{const X=await In(_e,1200,1200,.8);console.log(`Image compressed: ${Ct(_e.size)}  ${Ct(X.size)}`);const le=X.name.split(".").pop(),Te=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${le}`,{data:M,error:L}=await W.storage.from("model-images").upload(Te,X);if(L)throw console.error("Image upload error:",L),new Error(`Failed to upload image: ${L.message}`);{const{data:Z}=W.storage.from("model-images").getPublicUrl(M.path);ae=Z.publicUrl,console.log("Uploaded compressed image URL:",ae)}}catch(X){console.error("Image compression error:",X);try{const le=_e.name.split(".").pop(),Te=`${O.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${le}`,{data:M,error:L}=await W.storage.from("model-images").upload(Te,_e);if(L)throw console.error("Original image upload error:",L),new Error(`Failed to upload image: ${L.message}`);{const{data:Z}=W.storage.from("model-images").getPublicUrl(M.path);ae=Z.publicUrl,console.log("Uploaded original image URL:",ae)}}catch(le){throw console.error("Fallback upload failed:",le),new Error("Failed to upload image after compression fallback")}}finally{J(!1)}}}let H=a||null;if(c||r){const _e=c||r,ve=Q.find(X=>X.id===_e);ve&&ve.game_id&&(H=ve.game_id)}const{error:ue}=await W.from("models").insert({name:s.trim(),box_id:c||r||null,game_id:H,status:h||"None",count:parseInt(S)||1,user_id:O.id,image_url:ae,purchase_date:m||null,painted_date:p||null});if(ue)throw ue;i(""),l(""),u(""),d(""),f(""),y(""),g(""),x(""),N("1"),C(null),se("");try{localStorage.removeItem("mini-myths-temp-box-context")}catch(_e){console.error("Error clearing box context:",_e)}n(),t()}catch(ae){z(ae instanceof Error?ae.message:"Failed to add model")}finally{ee(!1),J(!1)}}},ge=s.trim().length>0&&!re&&!F;if(!e)return null;const Me=te=>{te.target===te.currentTarget&&t()};return ce(),o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Me,children:[o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Model"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),o.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Don't worry- you can update any of these details later."}),o.jsxs("form",{onSubmit:de,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{htmlFor:"modelName",className:"block text-sm font-medium text-input-label font-overpass",children:"Model Name"}),o.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),o.jsx("input",{type:"text",id:"modelName",value:s,onChange:te=>i(te.target.value),placeholder:'eg. "Space Marine Lieutenant", "Captain America", "US Ranger Squad", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"box",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection (Optional)"}),o.jsxs("select",{id:"box",value:c,onChange:te=>{u(te.target.value),te.target.value&&l("")},className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"No Collection (Loose Model)"}),ce().map(te=>o.jsxs("option",{value:te.id,children:[te.name," ",te.game&&`(${te.game.name})`]},te.id))]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"Choose an existing collection or leave as loose model."}),c&&(()=>{const te=Q.find(ae=>ae.id===c);return te&&te.game?o.jsxs("p",{className:"text-xs text-[var(--color-brand)] mt-1",children:["Game will be automatically set to: ",o.jsx("strong",{children:te.game.name})]}):null})()]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(Hi,{games:A,selectedGame:a,onGameSelect:l,placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paintedStatus",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Status"}),o.jsxs("select",{id:"paintedStatus",value:h,onChange:te=>d(te.target.value),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"Select Status"}),o.jsx("option",{value:"Assembled",children:"Assembled"}),o.jsx("option",{value:"Primed",children:"Primed"}),o.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),o.jsx("option",{value:"Painted",children:"Painted"})]})]}),h==="Painted"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paintedDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Painted Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"paintedDate",value:p,onChange:te=>y(te.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:m,onChange:te=>f(te.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),!c&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),o.jsxs("div",{className:"relative",children:[o.jsx(Og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"purchasePrice",value:E,onChange:$,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"numberOfModels",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Models"}),o.jsxs("div",{className:"relative",children:[o.jsx(Po,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"numberOfModels",value:S,onChange:te=>N(te.target.value),min:"1",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:K,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."})]}),B&&o.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:B}),re&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:re}),k&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:k}),o.jsx("div",{className:"flex justify-center pt-4",children:o.jsx("button",{type:"submit",disabled:!ge||ne,className:`${ge&&!ne?"btn-primary":"btn-disabled"}`,children:F?"Compressing Image...":ne?"Adding...":"Add to Collection"})})]})]}),b&&o.jsx(Ir,{isOpen:P,onClose:Y,onCrop:me,imageFile:b})]})}function fx({isOpen:e,onClose:t,images:n,onImageSelect:r,searchQuery:s,onFindMoreImages:i,isLoadingMore:a}){if(!e)return null;const l=c=>{c.target===c.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:l,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(sd,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Suggested Images"}),o.jsxs("p",{className:"text-sm text-secondary-text",children:['Search results for: "',s,'"']})]})]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("p",{className:"text-base text-secondary-text mb-4",children:['No images found for "',s,'". Try uploading your own image instead.']}),o.jsx("button",{onClick:t,className:"btn-primary",children:"Upload My Own Image"})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Click on an image to use it for your box. Images are sourced from Google Image Search."}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:n.map((c,u)=>o.jsxs("button",{onClick:()=>r(c),className:"group relative aspect-square overflow-hidden rounded-lg border-2 border-transparent hover:border---color-brand transition-all duration-200",children:[o.jsx("img",{src:c,alt:`Suggested image ${u+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy"}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-overpass font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Select Image"})})]},u))}),i&&o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("button",{onClick:i,disabled:a,className:"btn-primary btn-with-icon",children:a?o.jsxs(o.Fragment,{children:[o.jsx(nf,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Finding more images..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(nf,{className:"w-4 h-4"}),o.jsx("span",{children:"Find more images"})]})})}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:t,className:"btn-ghost",children:"Upload My Own Image Instead"})})]})]})})}function jl({variant:e="primary",size:t="default",width:n="default",withIcon:r=!1,className:s="",children:i,...a}){const l=`btn-${e}`,d=[t==="small"?`btn-${e}-sm`:l,n==="full"?"btn-full":n==="flex"?"btn-flex":"",r?t==="small"?"btn-with-icon-sm":"btn-with-icon":"",s].filter(Boolean).join(" ");return o.jsx("button",{className:d,...a,children:i})}function z1({isOpen:e,onClose:t,onSuccess:n}){var ve;const[r,s]=j.useState(""),[i,a]=j.useState(""),[l,c]=j.useState(""),[u,h]=j.useState(""),[d,m]=j.useState(""),[f,p]=j.useState(null),[y,E]=j.useState(!1),[g,v]=j.useState(null),[x,S]=j.useState([]),[N,w]=j.useState(!1),[C,P]=j.useState(!1),[I,b]=j.useState(""),[T,A]=j.useState(""),[R,Q]=j.useState(""),{user:q}=st(),[ne,ee]=j.useState(!1),[F,J]=j.useState(!1),[k,z]=j.useState([]),[re,_]=j.useState(""),[B,se]=j.useState([]),[O,U]=j.useState(!1);let xe=null;Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),j.useEffect(()=>{e&&ce()},[e]);const ce=async()=>{try{const{data:X,error:le}=await W.from("games").select("id, name, icon").order("name");if(le)throw le;S(X||[])}catch(X){console.error("Error fetching games:",X)}},K=X=>{const le=X.target.files;if(A(""),Q(""),le&&le.length>0){const Te=le[0];if(!js(Te)){A("Please select a valid image file (JPEG, PNG, or WebP)"),p(null),X.target.value="";return}const M=50*1024*1024;Te.size>M?(A(`Your image must be 50MB or less. Current size: ${Ct(Te.size)}`),p(null),X.target.value=""):(p(le),le&&le.length>0&&(v(le[0]),E(!0)),Te.size>1024*1024&&Q(`Original size: ${Ct(Te.size)}. Image will be automatically compressed before upload.`))}else p(le)},me=X=>{const le=new DataTransfer;le.items.add(X),p(le.files),E(!1),v(null),Q(`Cropped image ready for upload (${Ct(X.size)})`)},Y=()=>{E(!1),v(null);const X=document.getElementById("boxImage");X&&(X.value=""),p(null)},$=X=>{const le=X.target.value.replace(/[^0-9.]/g,"");if(h(le),le&&!isNaN(parseFloat(le))){const Te=parseFloat(le);m(`$${Te.toFixed(2)}`)}else m("")},de=async()=>{if(r.trim()){J(!0),z([]),se([]);try{const X=x.find(oe=>oe.id===i),le=(X==null?void 0:X.name)||"",Te=`${r.trim()} ${le}`.trim(),M=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Te,count:6})});if(!M.ok)throw new Error("Failed to search for images");const Z=(await M.json()).images||[];z(Z),se(Z),ee(!0)}catch(X){console.error("Error searching for images:",X),ee(!1)}finally{J(!1)}}},ge=async()=>{if(r.trim()){U(!0);try{const X=x.find(pe=>pe.id===i),le=(X==null?void 0:X.name)||"",Te=`${r.trim()} ${le}`.trim();console.log("Finding more images with exclude:",B);const M=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:Te,count:6,exclude:B})});if(!M.ok)throw new Error("Failed to search for more images");const Z=(await M.json()).images||[];console.log("Received additional images:",Z),console.log("Previous results count:",B.length),console.log("New results count:",Z.length);const oe=Z.filter(pe=>!B.includes(pe));console.log("Unique new images after filtering:",oe),z(oe),se([...B,...oe])}catch(X){console.error("Error searching for more images:",X)}finally{U(!1)}}},Me=X=>{p(null),Q(`Selected image: ${X}`),ee(!1),_(X)},te=async X=>{if(X.preventDefault(),!(!r.trim()||!q)){w(!0),b("");try{let le="";if(re)le=re;else if(f&&f.length>0){const L=f[0];if(R.includes("Cropped image ready")){P(!0);try{const oe=await In(L,1200,1200,.8);console.log(`Cropped image compressed: ${Ct(L.size)}  ${Ct(oe.size)}`);const pe=oe.name.split(".").pop(),Be=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:Qe,error:Ie}=await W.storage.from("model-images").upload(Be,oe);if(Ie)throw console.error("Compressed cropped image upload error:",Ie),new Error(`Failed to upload image: ${Ie.message}`);{const{data:gt}=W.storage.from("model-images").getPublicUrl(Qe.path);le=gt.publicUrl,console.log("Uploaded compressed cropped image URL:",le)}}catch(oe){console.error("Cropped image compression error:",oe);const pe=L.name.split(".").pop(),Be=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:Qe,error:Ie}=await W.storage.from("model-images").upload(Be,L);if(Ie)throw console.error("Fallback cropped image upload error:",Ie),new Error(`Failed to upload image: ${Ie.message}`);{const{data:gt}=W.storage.from("model-images").getPublicUrl(Qe.path);le=gt.publicUrl,console.log("Uploaded uncompressed cropped image URL:",le)}}finally{P(!1)}}else{P(!0);try{const oe=await In(L,1200,1200,.8);console.log(`Image compressed: ${Ct(L.size)}  ${Ct(oe.size)}`);const pe=oe.name.split(".").pop(),Be=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:Qe,error:Ie}=await W.storage.from("model-images").upload(Be,oe);if(Ie)throw console.error("Image upload error:",Ie),new Error(`Failed to upload image: ${Ie.message}`);{const{data:gt}=W.storage.from("model-images").getPublicUrl(Qe.path);le=gt.publicUrl,console.log("Uploaded compressed image URL:",le)}}catch(oe){console.error("Image compression error:",oe);try{const pe=L.name.split(".").pop(),Be=`${q.id}/${Date.now()}-${Math.random().toString(36).substring(2)}.${pe}`,{data:Qe,error:Ie}=await W.storage.from("model-images").upload(Be,L);if(Ie)throw console.error("Original image upload error:",Ie),new Error(`Failed to upload image: ${Ie.message}`);{const{data:gt}=W.storage.from("model-images").getPublicUrl(Qe.path);le=gt.publicUrl,console.log("Uploaded original image URL:",le)}}catch(pe){throw console.error("Fallback upload failed:",pe),new Error("Failed to upload image after compression fallback")}}finally{P(!1)}}}const{data:Te,error:M}=await W.from("boxes").insert({name:r.trim(),game_id:i||null,purchase_date:l||null,user_id:q.id,image_url:le}).select().single();if(M)throw M;return xe=Te.id,s(""),a(""),c(""),h(""),m(""),p(null),Q(""),_(""),ee(!1),z([]),n(),Te}catch(le){throw b(le instanceof Error?le.message:"Failed to add box"),le}finally{w(!1),P(!1)}}},ae=async X=>{try{await te(X),t()}catch{}},H=async X=>{await te(X),t()},ue=r.trim().length>0&&!T&&!C;if(!e)return null;const _e=X=>{X.target===X.currentTarget&&t()};return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:_e,children:[o.jsxs("div",{className:`bg-modal-bg rounded-lg max-w-lg w-full p-6 overflow-y-auto transition-all duration-300 ease-out transform
        fixed inset-0 sm:relative sm:inset-auto sm:max-w-lg sm:h-auto sm:rounded-lg sm:max-h-[90vh] h-screen w-screen sm:w-full overflow-y-auto rounded-none sm:rounded-lg p-6 sm:p-6
        ${e?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-secondary-text uppercase tracking-wide text-center flex-1",children:"Add New Collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),o.jsx("p",{className:"text-base text-secondary-text text-center mb-8",children:"Collections are a way to sort your models into groups. You can use this to track boxes you've bought, squads you've assembled, or simply to organise your collection."}),o.jsxs("form",{onSubmit:te,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass",children:"Collection Name"}),o.jsx("span",{className:"text-sm text-gray-500",children:"Required"})]}),o.jsx("input",{type:"text",id:"boxName",value:r,onChange:X=>s(X.target.value),placeholder:'eg. "Kill Team Collection", "Space Marine Heroes", "Warhammer 40k Elite Edition", etc.',className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(Hi,{games:x,selectedGame:i,onGameSelect:a,placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:l,onChange:X=>c(X.target.value),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] text-text bg-bg-primary [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Price"}),o.jsxs("div",{className:"relative",children:[o.jsx(Og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"purchasePrice",value:u,onChange:$,placeholder:"Enter Purchase Price",step:"0.01",min:"0",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] placeholder-secondary-text bg-bg-primary text-text"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:K,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring-[var(--color-brand)] focus:border-[var(--color-brand)] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20 bg-bg-primary text-text"})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-1",children:"You can upload more images later."}),r.trim()&&!f&&!re&&o.jsx("div",{className:"mt-3",children:o.jsx(jl,{variant:"secondary",width:"full",size:"small",onClick:de,disabled:F,children:F?"Searching for images...":"Find images for this collection"})})]}),R&&o.jsx("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded-lg",children:R}),T&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:T}),I&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:I}),o.jsxs("div",{className:"flex flex-col space-y-3 pt-4",children:[o.jsx(jl,{className:"btn-primary",variant:ue&&!N?"primary":"disabled",width:"full",onClick:ae,disabled:!ue||N,children:C?"Compressing Image...":N?"Adding...":"Add Empty Collection"}),o.jsx(jl,{variant:ue&&!N?"primary":"disabled",width:"full",onClick:H,disabled:!ue||N,children:C?"Compressing Image...":N?"Adding...":"Add Models to Collection"})]})]})]}),g&&o.jsx(Ir,{isOpen:y,onClose:Y,onCrop:me,imageFile:g}),ne&&o.jsx(fx,{isOpen:ne,onClose:()=>ee(!1),images:k,onImageSelect:Me,searchQuery:`${r} ${((ve=x.find(X=>X.id===i))==null?void 0:ve.name)||""}`.trim(),onFindMoreImages:ge,isLoadingMore:O})]})}function $1({onBack:e}){const[t,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState(null);j.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await W.from("users").select("*").order("created_at",{ascending:!1});if(h)throw h;n(u||[])}catch(u){a(u instanceof Error?u.message:"Failed to fetch users")}finally{s(!1)}},c=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading users..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE USERS"})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:i})}),o.jsx("div",{className:"space-y-4",children:t.map(u=>o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[o.jsx(_n,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:u.email||"No email"}),o.jsxs("p",{className:"text-sm text-secondary-text",children:["Joined ",c(u.created_at)]})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex-shrink-0 ${u.is_admin?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:u.is_admin?"Admin":"User"})]},u.id))}),t.length===0&&!r&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No users found."})})]})}function B1({isOpen:e,onClose:t,onGameUpdated:n,game:r}){const[s,i]=j.useState({name:"",manufacturer_id:"",image:"",icon:""}),[a,l]=j.useState([]),[c,u]=j.useState(null),[h,d]=j.useState(null),[m,f]=j.useState(!1),[p,y]=j.useState(!1),[E,g]=j.useState(null),[v,x]=j.useState(null),[S,N]=j.useState(null),[w,C]=j.useState(null),[P,I]=j.useState(!1),[b,T]=j.useState(!1),[A,R]=j.useState("");j.useEffect(()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""})},[r]),j.useEffect(()=>{e&&Q()},[e]);const Q=async()=>{try{const{data:_,error:B}=await W.from("manufacturers").select("id, name").order("name");if(B)throw B;l(_||[])}catch(_){console.error("Error fetching manufacturers:",_)}},q=_=>{var se;const B=(se=_.target.files)==null?void 0:se[0];if(B){if(!js(B)){alert("Please select a valid image file");return}u(B),g(B),f(!0)}},ne=_=>{var se;const B=(se=_.target.files)==null?void 0:se[0];if(B){if(!js(B)){alert("Please select a valid image file");return}d(B),x(B),y(!0)}},ee=_=>{N(_),f(!1),g(null)},F=_=>{C(_),y(!1),x(null)},J=async(_,B,se)=>{const O=(c==null?void 0:c.name.split(".").pop())||"jpg",U=`${se}/${Date.now()}-${Math.random().toString(36).substring(2)}.${O}`,{data:xe,error:ce}=await W.storage.from(B).upload(U,_);if(ce)throw ce;const{data:K}=W.storage.from(B).getPublicUrl(xe.path);return K.publicUrl},k=async _=>{if(_.preventDefault(),!!r){I(!0),R("");try{let B=s.image,se=s.icon;if(S){T(!0);const U=await In(S,1200,1200,.8);B=await J(U,"game-assets","images")}if(w){T(!0);const U=await In(w,512,512,.9);se=await J(U,"game-assets","icons")}const{error:O}=await W.from("games").update({name:s.name,manufacturer_id:s.manufacturer_id||null,image:B,icon:se}).eq("id",r.id);if(O)throw O;n()}catch(B){R(B instanceof Error?B.message:"Failed to update game")}finally{I(!1),T(!1)}}},z=()=>{r&&i({name:r.name,manufacturer_id:r.manufacturer_id||"",image:r.image||"",icon:r.icon||""}),u(null),d(null),N(null),C(null),R("")};if(!e||!r)return null;const re=_=>{_.target===_.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:re,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Game"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:k,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(rd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"gameName",value:s.name,onChange:_=>i({...s,name:_.target.value}),placeholder:"Enter game name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"manufacturer",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Manufacturer"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsxs("select",{id:"manufacturer",value:s.manufacturer_id,onChange:_=>i({...s,manufacturer_id:_.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",children:[o.jsx("option",{value:"",children:"Select a manufacturer..."}),a.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Image"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"gameImage",accept:"image/*",onChange:q,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),S&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gameIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game Icon"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"gameIcon",accept:"image/*",onChange:ne,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),w&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),A&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:A}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:z,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:P||b,className:"btn-primary btn-flex",children:b?"Processing...":P?"Saving...":"Save Changes"})]})]})]})}),E&&o.jsx(Ir,{isOpen:m,onClose:()=>{f(!1),g(null),u(null)},onCrop:ee,imageFile:E}),v&&o.jsx(Ir,{isOpen:p,onClose:()=>{y(!1),x(null),d(null)},onCrop:F,imageFile:v})]})}function U1({onBack:e}){const[t,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState(null),[l,c]=j.useState({isOpen:!1,game:null});j.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:m,error:f}=await W.from("games").select(`
          *,
          manufacturer:manufacturers(name)
        `).order("name");if(f)throw f;n(m||[])}catch(m){a(m instanceof Error?m.message:"Failed to fetch games")}finally{s(!1)}},h=m=>{c({isOpen:!0,game:m})},d=()=>{u(),c({isOpen:!1,game:null})};return r?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading games..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE GAMES"})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:i})}),o.jsx("div",{className:"space-y-4",children:t.map(m=>{var f;return o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[m.icon?o.jsx("img",{src:m.icon,alt:`${m.name} icon`,className:"w-12 h-12 object-contain rounded",onError:p=>{const y=p.target;y.style.display="none";const E=y.nextElementSibling;E&&E.classList.contains("icon-fallback")&&(E.style.display="flex")}}):null,o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:m.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:m.name.charAt(0)})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:m.name}),o.jsx("p",{className:"text-sm text-secondary-text",children:((f=m.manufacturer)==null?void 0:f.name)||"No manufacturer"})]})]}),o.jsxs("button",{onClick:()=>h(m),className:"btn-secondary-sm btn-with-icon-sm",children:[o.jsx(zi,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]})]},m.id)})}),t.length===0&&!r&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No games found."})}),o.jsx(B1,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,game:null}),onGameUpdated:d,game:l.game})]})}function H1({isOpen:e,onClose:t,location:n}){const[r,s]=j.useState([]),[i,a]=j.useState(!0),[l,c]=j.useState(null),[u,h]=j.useState(!1),[d,m]=j.useState(null),[f,p]=j.useState({name:"",start_time:"",end_time:"",availability:[]}),[y,E]=j.useState(!1),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];j.useEffect(()=>{e&&v()},[e,n.id]);const v=async()=>{try{a(!0);const{data:b,error:T}=await W.from("timeslots").select("*").eq("location_id",n.id).order("start_time");if(T)throw T;s(b||[])}catch(b){c(b instanceof Error?b.message:"Failed to fetch timeslots")}finally{a(!1)}},x=()=>{p({name:"",start_time:"",end_time:"",availability:[]}),m(null),h(!1)},S=b=>{p({name:b.name,start_time:b.start_time,end_time:b.end_time,availability:b.availability||[]}),m(b),h(!0)},N=async b=>{if(confirm("Are you sure you want to delete this timeslot?"))try{const{error:T}=await W.from("timeslots").delete().eq("id",b);if(T)throw T;await v()}catch(T){console.error("Error deleting timeslot:",T),alert("Failed to delete timeslot")}},w=b=>{p(T=>({...T,availability:T.availability.includes(b)?T.availability.filter(A=>A!==b):[...T.availability,b]}))},C=async b=>{if(b.preventDefault(),!(!f.name.trim()||!f.start_time||!f.end_time)){E(!0),c(null);try{if(d){const{error:T}=await W.from("timeslots").update({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,availability:f.availability}).eq("id",d.id);if(T)throw T}else{const{error:T}=await W.from("timeslots").insert({name:f.name.trim(),start_time:f.start_time,end_time:f.end_time,location_id:n.id,availability:f.availability});if(T)throw T}await v(),x()}catch(T){c(T instanceof Error?T.message:"Failed to save timeslot")}finally{E(!1)}}},P=b=>new Date(`2000-01-01T${b}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(!e)return null;const I=b=>{b.target===b.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:I,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Manage Timeslots - ",n.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),l&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:l})}),!u&&o.jsx("div",{className:"mb-6",children:o.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-with-icon",children:[o.jsx(Fi,{className:"w-4 h-4"}),o.jsx("span",{children:"Add Timeslot"})]})}),u&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:d?"Edit Timeslot":"Add New Timeslot"}),o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Timeslot Name"}),o.jsx("input",{type:"text",value:f.name,onChange:b=>p({...f,name:b.target.value}),placeholder:"e.g., Morning Session, Evening Games",className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Start Time"}),o.jsx("input",{type:"time",value:f.start_time,onChange:b=>p({...f,start_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"End Time"}),o.jsx("input",{type:"time",value:f.end_time,onChange:b=>p({...f,end_time:b.target.value}),className:"w-full px-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Available Days"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:g.map(b=>o.jsx("button",{type:"button",onClick:()=>w(b),className:`px-3 py-2 rounded-lg text-sm font-overpass font-medium transition-colors ${f.availability.includes(b)?"bg-brand text-white":"bg-bg-primary border border-border-custom text-text hover:bg-bg-secondary"}`,children:b.slice(0,3)},b))})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:x,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:y,className:"btn-primary btn-flex",children:y?"Saving...":d?"Update Timeslot":"Add Timeslot"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Current Timeslots"}),i?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading timeslots..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Es,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No timeslots configured for this location."})]}):r.map(b=>{var T;return o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-text",children:b.name}),o.jsxs("p",{className:"text-sm text-secondary-text",children:[P(b.start_time)," - ",P(b.end_time)]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(T=b.availability)==null?void 0:T.map(A=>o.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:A.slice(0,3)},A))})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>S(b),className:"p-2 text-secondary-text hover:text-text transition-colors",children:o.jsx(zi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(b.id),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:o.jsx(Or,{className:"w-4 h-4"})})]})]},b.id)})]})]})})}function q1({isOpen:e,onClose:t,location:n,onAdminsUpdated:r}){const[s,i]=j.useState([]),[a,l]=j.useState([]),[c,u]=j.useState(""),[h,d]=j.useState(!0),[m,f]=j.useState(!1),[p,y]=j.useState("");j.useEffect(()=>{e&&n&&(E(),g())},[e,n]);const E=async()=>{try{const{data:N,error:w}=await W.from("users").select("id, email").order("email");if(w)throw w;i(N||[])}catch(N){console.error("Error fetching users:",N),y("Failed to fetch users")}finally{d(!1)}},g=async()=>{if(!(n!=null&&n.admins)){l([]);return}try{const{data:N,error:w}=await W.from("users").select("id, email").in("id",n.admins).order("email");if(w)throw w;l(N||[])}catch(N){console.error("Error fetching admin users:",N)}},v=async()=>{if(!(!c.trim()||!n)){f(!0),y("");try{const N=s.find(P=>P.email.toLowerCase()===c.toLowerCase().trim());if(!N){y("User not found"),f(!1);return}if(n.admins.includes(N.id)){y("User is already an admin"),f(!1);return}const w=[...n.admins,N.id],{error:C}=await W.from("locations").update({admins:w}).eq("id",n.id);if(C)throw C;l([...a,N]),r(w),u("")}catch(N){y(N instanceof Error?N.message:"Failed to add admin")}finally{f(!1)}}},x=async N=>{if(n)try{const w=n.admins.filter(P=>P!==N),{error:C}=await W.from("locations").update({admins:w}).eq("id",n.id);if(C)throw C;l(a.filter(P=>P.id!==N)),r(w)}catch(w){y(w instanceof Error?w.message:"Failed to remove admin")}};if(!e||!n)return null;const S=N=>{N.target===N.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:S,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Edit Location Admins - ",n.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),p&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:p})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Add New Admin"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-4 h-4"}),o.jsx("input",{type:"text",value:c,onChange:N=>u(N.target.value),placeholder:"Search users by email...",className:"w-full pl-10 pr-4 py-2 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"})]}),o.jsxs("button",{onClick:v,disabled:!c.trim()||m,className:"btn-primary-sm btn-with-icon-sm",children:[o.jsx(Fi,{className:"w-4 h-4"}),o.jsx("span",{children:m?"Adding...":"Add"})]})]}),o.jsx("p",{className:"text-xs text-secondary-text mt-2",children:"Enter the exact email address of the user you want to add as an admin."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-title mb-3",children:"Current Admins"}),h?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading admins..."})]}):a.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Pi,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No admins assigned to this location."})]}):o.jsx("div",{className:"space-y-3",children:a.map(N=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border border-border-custom",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Pi,{className:"w-5 h-5 text-secondary-text"}),o.jsx("span",{className:"text-text font-medium",children:N.email})]}),o.jsx("button",{onClick:()=>x(N.id),className:"p-2 text-icon hover:text-icon-hover hover:bg-red-50 rounded-lg transition-colors",title:"Remove admin",children:o.jsx(Or,{className:"w-4 h-4"})})]},N.id))})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-border-custom",children:o.jsx("button",{onClick:t,className:"btn-primary btn-full",children:"Done"})})]})})}function W1({isOpen:e,onClose:t,onLocationUpdated:n,location:r}){const[s,i]=j.useState({name:"",address:"",icon:"",tables:1,admins:[]}),[a,l]=j.useState(null),[c,u]=j.useState(!1),[h,d]=j.useState(null),[m,f]=j.useState(null),[p,y]=j.useState(!1),[E,g]=j.useState(!1),[v,x]=j.useState(""),[S,N]=j.useState(!1),[w,C]=j.useState(!1);j.useEffect(()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]})},[r]);const P=q=>{var ee;const ne=(ee=q.target.files)==null?void 0:ee[0];if(ne){if(!js(ne)){alert("Please select a valid image file");return}l(ne),d(ne),u(!0)}},I=q=>{f(q),u(!1),d(null)},b=async(q,ne,ee)=>{const F=(a==null?void 0:a.name.split(".").pop())||"jpg",J=`${ee}/${Date.now()}-${Math.random().toString(36).substring(2)}.${F}`,{data:k,error:z}=await W.storage.from(ne).upload(J,q);if(z)throw z;const{data:re}=W.storage.from(ne).getPublicUrl(k.path);return re.publicUrl},T=async q=>{if(q.preventDefault(),!!r){y(!0),x("");try{let ne=s.icon;if(m){g(!0);const F=await In(m,512,512,.9);ne=await b(F,"location-assets","icons")}const{error:ee}=await W.from("locations").update({name:s.name,address:s.address,icon:ne,tables:s.tables,admins:s.admins}).eq("id",r.id);if(ee)throw ee;n()}catch(ne){x(ne instanceof Error?ne.message:"Failed to update location")}finally{y(!1),g(!1)}}},A=()=>{r&&i({name:r.name,address:r.address,icon:r.icon||"",tables:r.tables||1,admins:r.admins||[]}),l(null),f(null),x("")},R=q=>{i(ne=>({...ne,admins:q}))};if(!e||!r)return null;const Q=q=>{q.target===q.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:Q,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Location"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"locationName",value:s.name,onChange:q=>i({...s,name:q.target.value}),placeholder:"Enter location name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Xb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"address",value:s.address,onChange:q=>i({...s,address:q.target.value}),placeholder:"Enter full address...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tables",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Number of Tables"}),o.jsxs("div",{className:"relative",children:[o.jsx(Po,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"number",id:"tables",value:s.tables,onChange:q=>i({...s,tables:parseInt(q.target.value)||0}),min:"1",placeholder:"Enter number of tables...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"locationIcon",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Location Icon"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"locationIcon",accept:"image/*",onChange:P,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),m&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New icon ready for upload"})]}),v&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:v}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>N(!0),className:"btn-secondary btn-with-icon",children:[o.jsx(Es,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Timeslots"})]}),o.jsxs("button",{type:"button",onClick:()=>C(!0),className:"btn-secondary btn-with-icon",children:[o.jsx(Pi,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Admins"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:A,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:p||E,className:"btn-primary btn-flex",children:E?"Processing...":p?"Saving...":"Save Changes"})]})]})]})]})}),h&&o.jsx(Ir,{isOpen:c,onClose:()=>{u(!1),d(null),l(null)},onCrop:I,imageFile:h}),o.jsx(H1,{isOpen:S,onClose:()=>N(!1),location:r}),o.jsx(q1,{isOpen:w,onClose:()=>C(!1),location:r,onAdminsUpdated:R})]})}function G1({onBack:e,isLocationAdmin:t=!1}){const[n,r]=j.useState([]),[s,i]=j.useState(!0),[a,l]=j.useState(null),{user:c}=st(),[u,h]=j.useState({isOpen:!1,location:null});j.useEffect(()=>{d()},[]);const d=async()=>{try{let p=W.from("locations").select("*").order("name");t&&!(c!=null&&c.is_admin)&&(c!=null&&c.id)&&(p=p.contains("admins",[c.id]));const{data:y,error:E}=await p;if(E)throw E;r(y||[])}catch(p){l(p instanceof Error?p.message:"Failed to fetch locations")}finally{i(!1)}},m=p=>{h({isOpen:!0,location:p})},f=()=>{d(),h({isOpen:!1,location:null})};return s?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading locations..."})]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Admin"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"MANAGE LOCATIONS"})]}),a&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:a})}),o.jsx("div",{className:"space-y-4",children:n.map(p=>o.jsxs("div",{className:"bg-bg-card border border-border-custom rounded-lg p-6 flex items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[p.icon?o.jsx("img",{src:p.icon,alt:`${p.name} icon`,className:"w-12 h-12 object-contain rounded",onError:y=>{const E=y.target;E.style.display="none";const g=E.nextElementSibling;g&&g.classList.contains("icon-fallback")&&(g.style.display="flex")}}):null,o.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center icon-fallback",style:{display:p.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:p.name.charAt(0)})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-text truncate",children:p.name}),o.jsx("p",{className:"text-sm text-secondary-text truncate",children:p.address}),o.jsxs("p",{className:"text-xs text-secondary-text",children:[p.tables," table",p.tables!==1?"s":""]})]})]}),o.jsxs("button",{onClick:()=>m(p),className:"btn-secondary-sm btn-with-icon-sm",children:[o.jsx(zi,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]})]},p.id))}),n.length===0&&!s&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text",children:"No locations found."})}),o.jsx(W1,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,location:null}),onLocationUpdated:f,location:u.location})]})}function V1({onBack:e}){const[t,n]=j.useState("main"),{user:r}=st();return t==="users"?o.jsx($1,{onBack:()=>n("main")}):t==="games"?o.jsx(U1,{onBack:()=>n("main")}):t==="locations"?o.jsx(G1,{onBack:()=>n("main"),isLocationAdmin:(r==null?void 0:r.is_location_admin)||!1}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Collection"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"ADMIN PANEL"})]}),o.jsxs("div",{className:"space-y-4 max-w-md",children:[(r==null?void 0:r.is_admin)&&o.jsxs("button",{onClick:()=>n("users"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Pi,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Users"})]}),o.jsx(tr,{className:"w-5 h-5 text-icon"})]}),(r==null?void 0:r.is_admin)&&o.jsxs("button",{onClick:()=>n("games"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(rd,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Games"})]}),o.jsx(tr,{className:"w-5 h-5 text-icon"})]}),o.jsxs("button",{onClick:()=>n("locations"),className:"w-full bg-bg-card border border-border-custom rounded-lg p-6 hover:bg-bg-secondary transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Lr,{className:"w-6 h-6 text-secondary-text"}),o.jsx("span",{className:"text-lg font-semibold text-text",children:"Manage Locations"})]}),o.jsx(tr,{className:"w-5 h-5 text-icon"})]})]})]})}function K1({onBack:e}){return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title text-center",children:"About this app"})]}),o.jsx("div",{children:o.jsx("div",{className:"bg-bg-card border border-border-custom rounded-lg p-8",children:o.jsxs("div",{className:"space-y-6 text-base text-text leading-relaxed",children:[o.jsx("p",{children:"You're using a very, very early version of the Mini Myths app. Our hope is that one day you'll be able to use this app to manage your tabletop wargaming collection, and book a table at nearby gaming store."}),o.jsx("p",{children:"We're still in very early development, so make sure to let us know if you run into any issues along the way. You can flag issues in the Mini Myths Discord."})]})})})]})}function Nf({date:e,bookings:t,isExpanded:n,onToggle:r,onBookingClick:s,onCancelBooking:i}){const a=l=>{const c=new Date(l),u=new Date,h=new Date(u),d=new Date(u);return h.setDate(h.getDate()-1),d.setDate(d.getDate()+1),u.setHours(0,0,0,0),h.setHours(0,0,0,0),d.setHours(0,0,0,0),c.setHours(0,0,0,0),c.getTime()===u.getTime()?"Today":c.getTime()===d.getTime()?"Tomorrow":c.getTime()===h.getTime()?"Yesterday":c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between text-left border-b border-border-custom pb-2 hover:bg-bg-secondary transition-colors rounded-lg px-2 py-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:a(e)}),o.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-sm font-medium rounded-full",children:[t.length," booking",t.length!==1?"s":""]})]}),n?o.jsx(nd,{className:"w-5 h-5 text-icon"}):o.jsx(tr,{className:"w-5 h-5 text-icon"})]}),n&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>o.jsx(dx,{booking:l,onClick:()=>s(l),onCancelBooking:i,isPast:e==="past"},l.id))})]})}function J1({isOpen:e,onClose:t,onBookingCancelled:n,booking:r}){const[s,i]=j.useState(!1),[a,l]=j.useState(!1),c=async()=>{if(r){i(!0);try{const{error:d}=await W.from("bookings").delete().eq("id",r.id);if(d)throw d;n()}catch(d){console.error("Error cancelling booking:",d),alert("Failed to cancel booking. Please try again.")}finally{i(!1),l(!1)}}},u=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});if(!e||!r)return null;const h=d=>{d.target===d.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-title",children:"Booking Details"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:I1(r.date)}),o.jsx("p",{className:"text-sm text-secondary-text",children:hd(r.date)})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Es,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.timeslot.name}),o.jsxs("p",{className:"text-sm text-secondary-text",children:[oo(r.timeslot.start_time)," - ",oo(r.timeslot.end_time)]})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Lr,{className:"w-5 h-5 text-secondary-text mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.location.name}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.location.address})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(_n,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:r.user_name?r.user_name:"Booked by"}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.user_email||r.user.email})]})]}),r.game&&o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r.game.icon?o.jsx("img",{src:r.game.icon,alt:`${r.game.name} icon`,className:"w-5 h-5 object-contain rounded",onError:d=>{const m=d.target;m.style.display="none";const f=m.nextElementSibling;f&&f.classList.contains("icon-fallback")&&(f.style.display="flex")}}):null,o.jsx("div",{className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:r.game.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:r.game.name.charAt(0)})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-text",children:"Game"}),o.jsx("p",{className:"text-sm text-secondary-text",children:r.game.name})]})]}),o.jsx("div",{className:"border-t border-border-custom pt-4",children:o.jsxs("p",{className:"text-sm text-secondary-text",children:["Booking created: ",u(r.created_at)]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-border-custom",children:a?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Are you sure?"}),o.jsx("p",{className:"text-red-700 text-sm",children:"This will permanently delete this booking and make the table available for others to book."})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>l(!1),disabled:s,className:"btn-ghost btn-flex",children:"Keep Booking"}),o.jsx("button",{onClick:c,disabled:s,className:"btn-danger btn-flex",children:s?"Cancelling...":"Yes, Cancel Booking"})]})]}):o.jsxs("button",{onClick:()=>l(!0),className:"btn-danger-outline btn-with-icon",children:[o.jsx(Or,{className:"w-4 h-4"}),o.jsx("span",{children:"Cancel This Booking"})]})})]})})}function Q1(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{user:a}=st(),l=async()=>{try{r(!0);let c=W.from("bookings").select(`
          id,
          date,
          created_at,
          user_id,
          user_name,
          user_email,
          location:locations(
            id,
            name,
            address,
            icon
          ),
          timeslot:timeslots(
            id,
            name,
            start_time,
            end_time
          ),
          game:games(
            id,
            name,
            icon
          )
        `);if(a!=null&&a.is_location_admin&&!(a!=null&&a.is_admin)&&(a!=null&&a.id)){const{data:g,error:v}=await W.from("locations").select("id").contains("admins",[a.id]);if(v)throw v;const x=(g==null?void 0:g.map(S=>S.id))||[];if(x.length===0){t([]);return}c=c.in("location_id",x)}const{data:u,error:h}=await c;if(h)throw h;const d=[...new Set((u==null?void 0:u.map(g=>g.user_id))||[])],{data:m,error:f}=await W.from("users").select("id, email").in("id",d);if(f)throw f;const p=new Map((m==null?void 0:m.map(g=>[g.id,g]))||[]),E=((u==null?void 0:u.map(g=>({...g,user:p.get(g.user_id)||{id:g.user_id,email:"Unknown User"}})))||[]).sort((g,v)=>{const x=Gc(g.date),S=Gc(v.date);if(x&&!S)return 1;if(!x&&S)return-1;const N=new Date(v.date).getTime()-new Date(g.date).getTime();return N!==0?N:new Date(v.created_at).getTime()-new Date(g.created_at).getTime()});t(E)}catch(c){i(c instanceof Error?c.message:"Failed to fetch bookings")}finally{r(!1)}};return j.useEffect(()=>{l()},[]),{bookings:e,loading:n,error:s,refetch:l}}function Y1({onBack:e}){const[t,n]=j.useState(new Set),[r,s]=j.useState(null),[i,a]=j.useState(!1),[l,c]=j.useState({isOpen:!1,bookingId:null}),[u,h]=j.useState(!1),{bookings:d,loading:m,error:f,refetch:p}=Q1(),y=N=>{s(N),a(!0)},E=()=>{a(!1),s(null),p()},g=N=>{console.log("Attempting to cancel booking with ID:",N),c({isOpen:!0,bookingId:N})},v=async()=>{if(console.log("Confirming cancellation for booking ID:",l.bookingId),!!l.bookingId){h(!0);try{const{error:N}=await W.from("bookings").delete().eq("id",l.bookingId);if(N)throw N;console.log("Booking cancelled successfully"),await p(),c({isOpen:!1,bookingId:null})}catch(N){console.error("Error cancelling booking:",N),alert("Failed to cancel booking. Please try again.")}finally{h(!1)}}},x=Ce.useMemo(()=>{const N=[],w=[];d.forEach(A=>{Gc(A.date)?w.push(A):N.push(A)});const C={},P={};N.forEach(A=>{const R=A.date;C[R]||(C[R]=[]),C[R].push(A)}),w.forEach(A=>{const R=A.date;P[R]||(P[R]=[]),P[R].push(A)}),Object.keys(C).forEach(A=>{C[A].sort((R,Q)=>R.timeslot.start_time.localeCompare(Q.timeslot.start_time))}),Object.keys(P).forEach(A=>{P[A].sort((R,Q)=>R.timeslot.start_time.localeCompare(Q.timeslot.start_time))});const I=Object.keys(C).sort((A,R)=>A.localeCompare(R)),b=Object.keys(P).sort((A,R)=>R.localeCompare(A)),T=I.map(A=>({date:A,bookings:C[A],isPast:!1}));return b.forEach(A=>{T.push({date:A,bookings:P[A],isPast:!0})}),T},[d]);Ce.useEffect(()=>{if(x.length>0){const N=new Set(x.slice(0,3).map(w=>w.date));n(N)}},[x]);const S=N=>{n(w=>{const C=new Set(w);return C.has(N)?C.delete(N):C.add(N),C})};return m?o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading all bookings..."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-secondary-text hover:text-text transition-colors mb-4",children:[o.jsx(or,{className:"w-5 h-5"}),o.jsx("span",{children:"Back"})]}),o.jsx("h1",{className:"text-4xl font-bold text-title",children:"ALL BOOKINGS"}),o.jsx("p",{className:"text-base text-secondary-text mt-2",children:"View and manage all table bookings across all locations"})]}),f&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:f})}),d.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(tt,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"No bookings found."})]}):o.jsxs("div",{className:"space-y-8",children:[x.filter(N=>!N.isPast).length>0&&o.jsx("div",{className:"space-y-6",children:x.filter(N=>!N.isPast).map(({date:N,bookings:w,isPast:C})=>o.jsx(Nf,{date:N,bookings:w,isExpanded:t.has(N),onToggle:()=>S(N),onBookingClick:y,onCancelBooking:g},N))}),x.filter(N=>N.isPast).length>0&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"border-t border-border-custom pt-8",children:o.jsx("h2",{className:"text-2xl font-bold text-title mb-6",children:"Past Bookings"})}),x.filter(N=>N.isPast).map(({date:N,bookings:w,isPast:C})=>o.jsx(Nf,{date:N,bookings:w,isExpanded:t.has(N),onToggle:()=>S(N),onBookingClick:y,onCancelBooking:g},N))]})]})]}),o.jsx(J1,{isOpen:i,onClose:()=>a(!1),onBookingCancelled:E,booking:r}),o.jsx(hx,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,bookingId:null}),onConfirm:v,loading:u})]})}function X1({isOpen:e,onClose:t,onBlockedDateCreated:n}){const[r,s]=j.useState([]),[i,a]=j.useState(""),[l,c]=j.useState(""),[u,h]=j.useState(""),[d,m]=j.useState(!1),[f,p]=j.useState(null),{user:y}=st();j.useEffect(()=>{e&&(E(),g())},[e]);const E=async()=>{try{let S=W.from("locations").select("id, name, address").order("name");y!=null&&y.is_location_admin&&!(y!=null&&y.is_admin)&&(y!=null&&y.id)&&(S=S.contains("admins",[y.id]));const{data:N,error:w}=await S;if(w)throw w;s(N||[])}catch(S){console.error("Error fetching locations:",S),p("Failed to load locations")}},g=()=>{a(""),c(""),h(""),p(null)},v=async S=>{if(S.preventDefault(),!i||!l){p("Please fill in all required fields");return}const N=new Date(l),w=new Date;if(w.setHours(0,0,0,0),N<w){p("Date must be in the future");return}m(!0),p(null);try{console.log("Submitting blocked date:",{location_id:i,date:l,description:u||null});const{data:C,error:P}=await W.from("blocked_dates").insert({location_id:i,date:l,description:u||null}).select();if(P)throw console.error("Supabase error:",P),P;console.log("Blocked date created successfully:",C),g(),n(),t()}catch(C){console.error("Error creating blocked date:",C),p("Failed to create blocked date")}finally{m(!1)}},x=S=>{S.target===S.currentTarget&&t()};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]",onClick:x,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Add Blocked Date"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-600",children:f})}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Location ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),o.jsxs("select",{value:i,onChange:S=>a(S.target.value),disabled:d,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0,children:[o.jsx("option",{value:"",children:"Select a location"}),r.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-text mb-2",children:["Date ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-icon"}),o.jsx("input",{type:"date",value:l,onChange:S=>c(S.target.value),disabled:d,min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-text mb-2",children:"Description"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ei,{className:"absolute left-3 top-3 w-5 h-5 text-icon"}),o.jsx("textarea",{value:u,onChange:S=>h(S.target.value),disabled:d,placeholder:"Optional description for this blocked date...",rows:3,className:"w-full pl-10 pr-4 py-3 border border-border-custom rounded-lg bg-bg-secondary text-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50 resize-none"})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,disabled:d,className:"btn-ghost btn-flex flex-1",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:d||!i||!l,className:"btn-primary btn-flex flex-1",children:d?"Creating...":"Create Blocked Date"})]})]})]})}):null}function Z1(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{user:a}=st(),l=async()=>{try{r(!0),i(null);let c=W.from("blocked_dates").select("*, locations(*)").order("date",{ascending:!0});if(a!=null&&a.is_location_admin&&!(a!=null&&a.is_admin)){const{data:d,error:m}=await W.from("locations").select("id").contains("admins",[a.id]);if(m)throw console.error("Error fetching user locations:",m),m;if(d&&d.length>0){const f=d.map(p=>p.id);c=c.in("location_id",f)}else{t([]);return}}const{data:u,error:h}=await c;if(h)throw h;t(u||[])}catch(c){console.error("Error fetching blocked dates:",c),i("Failed to load blocked dates")}finally{r(!1)}};return j.useEffect(()=>{l()},[a]),{blockedDates:e,loading:n,error:s,refetch:l}}function ek({onBack:e}){const[t,n]=j.useState(!1),{blockedDates:r,loading:s,error:i,refetch:a}=Z1(),l=async u=>{if(confirm("Are you sure you want to delete this blocked date?"))try{const{error:h}=await W.from("blocked_dates").delete().eq("id",u);if(h)throw h;a()}catch(h){console.error("Error deleting blocked date:",h),alert("Failed to delete blocked date")}},c=u=>new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",children:o.jsx(or,{className:"w-5 h-5 text-icon"})}),o.jsx("h1",{className:"text-2xl font-bold text-title",children:"Blocked Dates"})]}),o.jsxs("button",{onClick:()=>n(!0),className:"btn-primary btn-with-icon",children:[o.jsx(Fi,{className:"w-4 h-4"}),o.jsx("span",{children:"Add blocked date"})]})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:i})}),s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading blocked dates..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Dg,{className:"w-16 h-16 text-secondary-text mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-title mb-2",children:"No blocked dates"}),o.jsx("p",{className:"text-secondary-text mb-6",children:r.length===0?"You haven't blocked any dates yet. Click 'Add blocked date' to get started.":"No blocked dates found for your locations."})]}):o.jsx("div",{className:"space-y-4",children:r.map(u=>{var h;return o.jsx("div",{className:"bg-bg-secondary border border-border-custom rounded-lg p-4 hover:bg-bg-tertiary transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(Lr,{className:"w-4 h-4 text-icon"}),o.jsx("span",{className:"font-medium text-text",children:((h=u.locations)==null?void 0:h.name)||"Unknown Location"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(tt,{className:"w-4 h-4 text-icon"}),o.jsx("span",{className:"text-text",children:c(u.date)})]}),u.description&&o.jsx("p",{className:"text-secondary-text text-sm",children:u.description})]}),o.jsx("button",{onClick:()=>l(u.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete blocked date",children:o.jsx(Or,{className:"w-4 h-4"})})]})},u.id)})}),o.jsx(X1,{isOpen:t,onClose:()=>n(!1),onBlockedDateCreated:a})]})}function tk({isOpen:e,onClose:t,onConfirm:n,modelName:r,loading:s=!1}){if(!e)return null;const i=a=>{a.target===a.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Model"})]})]})})}function nk(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const rk=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sk=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ik={};function Sf(e,t){return(ik.jsx?sk:rk).test(e)}const ak=/[ \t\n\f\r]/g;function ok(e){return typeof e=="object"?e.type==="text"?_f(e.value):!1:_f(e)}function _f(e){return e.replace(ak,"")===""}class qi{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}qi.prototype.normal={};qi.prototype.property={};qi.prototype.space=void 0;function mx(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new qi(n,r,t)}function Kc(e){return e.toLowerCase()}class Dt{constructor(t,n){this.attribute=n,this.property=t}}Dt.prototype.attribute="";Dt.prototype.booleanish=!1;Dt.prototype.boolean=!1;Dt.prototype.commaOrSpaceSeparated=!1;Dt.prototype.commaSeparated=!1;Dt.prototype.defined=!1;Dt.prototype.mustUseProperty=!1;Dt.prototype.number=!1;Dt.prototype.overloadedBoolean=!1;Dt.prototype.property="";Dt.prototype.spaceSeparated=!1;Dt.prototype.space=void 0;let lk=0;const we=Fr(),Ke=Fr(),Jc=Fr(),V=Fr(),Oe=Fr(),ms=Fr(),Lt=Fr();function Fr(){return 2**++lk}const Qc=Object.freeze(Object.defineProperty({__proto__:null,boolean:we,booleanish:Ke,commaOrSpaceSeparated:Lt,commaSeparated:ms,number:V,overloadedBoolean:Jc,spaceSeparated:Oe},Symbol.toStringTag,{value:"Module"})),Nl=Object.keys(Qc);class fd extends Dt{constructor(t,n,r,s){let i=-1;if(super(t,n),Cf(this,"space",s),typeof r=="number")for(;++i<Nl.length;){const a=Nl[i];Cf(this,Nl[i],(r&Qc[a])===Qc[a])}}}fd.prototype.defined=!0;function Cf(e,t,n){n&&(e[t]=n)}function Is(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new fd(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[Kc(r)]=r,n[Kc(i.attribute)]=r}return new qi(t,n,e.space)}const px=Is({properties:{ariaActiveDescendant:null,ariaAtomic:Ke,ariaAutoComplete:null,ariaBusy:Ke,ariaChecked:Ke,ariaColCount:V,ariaColIndex:V,ariaColSpan:V,ariaControls:Oe,ariaCurrent:null,ariaDescribedBy:Oe,ariaDetails:null,ariaDisabled:Ke,ariaDropEffect:Oe,ariaErrorMessage:null,ariaExpanded:Ke,ariaFlowTo:Oe,ariaGrabbed:Ke,ariaHasPopup:null,ariaHidden:Ke,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Oe,ariaLevel:V,ariaLive:null,ariaModal:Ke,ariaMultiLine:Ke,ariaMultiSelectable:Ke,ariaOrientation:null,ariaOwns:Oe,ariaPlaceholder:null,ariaPosInSet:V,ariaPressed:Ke,ariaReadOnly:Ke,ariaRelevant:null,ariaRequired:Ke,ariaRoleDescription:Oe,ariaRowCount:V,ariaRowIndex:V,ariaRowSpan:V,ariaSelected:Ke,ariaSetSize:V,ariaSort:null,ariaValueMax:V,ariaValueMin:V,ariaValueNow:V,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function gx(e,t){return t in e?e[t]:t}function xx(e,t){return gx(e,t.toLowerCase())}const ck=Is({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ms,acceptCharset:Oe,accessKey:Oe,action:null,allow:null,allowFullScreen:we,allowPaymentRequest:we,allowUserMedia:we,alt:null,as:null,async:we,autoCapitalize:null,autoComplete:Oe,autoFocus:we,autoPlay:we,blocking:Oe,capture:null,charSet:null,checked:we,cite:null,className:Oe,cols:V,colSpan:null,content:null,contentEditable:Ke,controls:we,controlsList:Oe,coords:V|ms,crossOrigin:null,data:null,dateTime:null,decoding:null,default:we,defer:we,dir:null,dirName:null,disabled:we,download:Jc,draggable:Ke,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:we,formTarget:null,headers:Oe,height:V,hidden:Jc,high:V,href:null,hrefLang:null,htmlFor:Oe,httpEquiv:Oe,id:null,imageSizes:null,imageSrcSet:null,inert:we,inputMode:null,integrity:null,is:null,isMap:we,itemId:null,itemProp:Oe,itemRef:Oe,itemScope:we,itemType:Oe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:we,low:V,manifest:null,max:null,maxLength:V,media:null,method:null,min:null,minLength:V,multiple:we,muted:we,name:null,nonce:null,noModule:we,noValidate:we,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:we,optimum:V,pattern:null,ping:Oe,placeholder:null,playsInline:we,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:we,referrerPolicy:null,rel:Oe,required:we,reversed:we,rows:V,rowSpan:V,sandbox:Oe,scope:null,scoped:we,seamless:we,selected:we,shadowRootClonable:we,shadowRootDelegatesFocus:we,shadowRootMode:null,shape:null,size:V,sizes:null,slot:null,span:V,spellCheck:Ke,src:null,srcDoc:null,srcLang:null,srcSet:null,start:V,step:null,style:null,tabIndex:V,target:null,title:null,translate:null,type:null,typeMustMatch:we,useMap:null,value:Ke,width:V,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Oe,axis:null,background:null,bgColor:null,border:V,borderColor:null,bottomMargin:V,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:we,declare:we,event:null,face:null,frame:null,frameBorder:null,hSpace:V,leftMargin:V,link:null,longDesc:null,lowSrc:null,marginHeight:V,marginWidth:V,noResize:we,noHref:we,noShade:we,noWrap:we,object:null,profile:null,prompt:null,rev:null,rightMargin:V,rules:null,scheme:null,scrolling:Ke,standby:null,summary:null,text:null,topMargin:V,valueType:null,version:null,vAlign:null,vLink:null,vSpace:V,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:we,disableRemotePlayback:we,prefix:null,property:null,results:V,security:null,unselectable:null},space:"html",transform:xx}),uk=Is({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Lt,accentHeight:V,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:V,amplitude:V,arabicForm:null,ascent:V,attributeName:null,attributeType:null,azimuth:V,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:V,by:null,calcMode:null,capHeight:V,className:Oe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:V,diffuseConstant:V,direction:null,display:null,dur:null,divisor:V,dominantBaseline:null,download:we,dx:null,dy:null,edgeMode:null,editable:null,elevation:V,enableBackground:null,end:null,event:null,exponent:V,externalResourcesRequired:null,fill:null,fillOpacity:V,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ms,g2:ms,glyphName:ms,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:V,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:V,horizOriginX:V,horizOriginY:V,id:null,ideographic:V,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:V,k:V,k1:V,k2:V,k3:V,k4:V,kernelMatrix:Lt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:V,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:V,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:V,overlineThickness:V,paintOrder:null,panose1:null,path:null,pathLength:V,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Oe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:V,pointsAtY:V,pointsAtZ:V,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Lt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Lt,rev:Lt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Lt,requiredFeatures:Lt,requiredFonts:Lt,requiredFormats:Lt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:V,specularExponent:V,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:V,strikethroughThickness:V,string:null,stroke:null,strokeDashArray:Lt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:V,strokeOpacity:V,strokeWidth:null,style:null,surfaceScale:V,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Lt,tabIndex:V,tableValues:null,target:null,targetX:V,targetY:V,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Lt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:V,underlineThickness:V,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:V,values:null,vAlphabetic:V,vMathematical:V,vectorEffect:null,vHanging:V,vIdeographic:V,version:null,vertAdvY:V,vertOriginX:V,vertOriginY:V,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:V,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:gx}),yx=Is({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),bx=Is({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xx}),vx=Is({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),dk={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hk=/[A-Z]/g,Ef=/-[a-z]/g,fk=/^data[-\w.:]+$/i;function mk(e,t){const n=Kc(t);let r=t,s=Dt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fk.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Ef,gk);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Ef.test(i)){let a=i.replace(hk,pk);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=fd}return new s(r,t)}function pk(e){return"-"+e.toLowerCase()}function gk(e){return e.charAt(1).toUpperCase()}const xk=mx([px,ck,yx,bx,vx],"html"),md=mx([px,uk,yx,bx,vx],"svg");function yk(e){return e.join(" ").trim()}var pd={},Pf=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bk=/\n/g,vk=/^\s*/,wk=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,kk=/^:\s*/,jk=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Nk=/^[;\s]*/,Sk=/^\s+|\s+$/g,_k=`
`,Tf="/",If="*",br="",Ck="comment",Ek="declaration",Pk=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(p){var y=p.match(bk);y&&(n+=y.length);var E=p.lastIndexOf(_k);r=~E?p.length-E:r+p.length}function i(){var p={line:n,column:r};return function(y){return y.position=new a(p),u(),y}}function a(p){this.start=p,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function l(p){var y=new Error(t.source+":"+n+":"+r+": "+p);if(y.reason=p,y.filename=t.source,y.line=n,y.column=r,y.source=e,!t.silent)throw y}function c(p){var y=p.exec(e);if(y){var E=y[0];return s(E),e=e.slice(E.length),y}}function u(){c(vk)}function h(p){var y;for(p=p||[];y=d();)y!==!1&&p.push(y);return p}function d(){var p=i();if(!(Tf!=e.charAt(0)||If!=e.charAt(1))){for(var y=2;br!=e.charAt(y)&&(If!=e.charAt(y)||Tf!=e.charAt(y+1));)++y;if(y+=2,br===e.charAt(y-1))return l("End of comment missing");var E=e.slice(2,y-2);return r+=2,s(E),e=e.slice(y),r+=2,p({type:Ck,comment:E})}}function m(){var p=i(),y=c(wk);if(y){if(d(),!c(kk))return l("property missing ':'");var E=c(jk),g=p({type:Ek,property:Af(y[0].replace(Pf,br)),value:E?Af(E[0].replace(Pf,br)):br});return c(Nk),g}}function f(){var p=[];h(p);for(var y;y=m();)y!==!1&&(p.push(y),h(p));return p}return u(),f()};function Af(e){return e?e.replace(Sk,br):br}var Tk=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});pd.default=Ak;var Ik=Tk(Pk);function Ak(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Ik.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,l=i.value;s?t(a,l,i):l&&(n=n||{},n[a]=l)}}),n}var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.camelCase=void 0;var Mk=/^--[a-zA-Z0-9_-]+$/,Dk=/-([a-z])/g,Lk=/^[^-]+$/,Ok=/^-(webkit|moz|ms|o|khtml)-/,Rk=/^-(ms)-/,Fk=function(e){return!e||Lk.test(e)||Mk.test(e)},zk=function(e,t){return t.toUpperCase()},Mf=function(e,t){return"".concat(t,"-")},$k=function(e,t){return t===void 0&&(t={}),Fk(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Rk,Mf):e=e.replace(Ok,Mf),e.replace(Dk,zk))};Ro.camelCase=$k;var Bk=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Uk=Bk(pd),Hk=Ro;function Yc(e,t){var n={};return!e||typeof e!="string"||(0,Uk.default)(e,function(r,s){r&&s&&(n[(0,Hk.camelCase)(r,t)]=s)}),n}Yc.default=Yc;var qk=Yc;const Wk=ou(qk),wx=kx("end"),gd=kx("start");function kx(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Gk(e){const t=gd(e),n=wx(e);if(t&&n)return{start:t,end:n}}function li(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Df(e.position):"start"in e||"end"in e?Df(e):"line"in e||"column"in e?Xc(e):""}function Xc(e){return Lf(e&&e.line)+":"+Lf(e&&e.column)}function Df(e){return Xc(e&&e.start)+"-"+Xc(e&&e.end)}function Lf(e){return e&&typeof e=="number"?e:1}class pt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=li(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}pt.prototype.file="";pt.prototype.name="";pt.prototype.reason="";pt.prototype.message="";pt.prototype.stack="";pt.prototype.column=void 0;pt.prototype.line=void 0;pt.prototype.ancestors=void 0;pt.prototype.cause=void 0;pt.prototype.fatal=void 0;pt.prototype.place=void 0;pt.prototype.ruleId=void 0;pt.prototype.source=void 0;const xd={}.hasOwnProperty,Vk=new Map,Kk=/[A-Z]/g,Jk=new Set(["table","tbody","thead","tfoot","tr"]),Qk=new Set(["td","th"]),jx="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Yk(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ij(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=sj(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?md:xk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Nx(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Nx(e,t,n){if(t.type==="element")return Xk(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Zk(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return tj(e,t,n);if(t.type==="mdxjsEsm")return ej(e,t);if(t.type==="root")return nj(e,t,n);if(t.type==="text")return rj(e,t)}function Xk(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=md,e.schema=s),e.ancestors.push(t);const i=_x(e,t.tagName,!1),a=aj(e,t);let l=bd(e,t);return Jk.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!ok(c):!0})),Sx(e,a,i,t),yd(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function Zk(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ii(e,t.position)}function ej(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ii(e,t.position)}function tj(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=md,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:_x(e,t.name,!0),a=oj(e,t),l=bd(e,t);return Sx(e,a,i,t),yd(a,l),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function nj(e,t,n){const r={};return yd(r,bd(e,t)),e.create(t,e.Fragment,r,n)}function rj(e,t){return t.value}function Sx(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function yd(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function sj(e,t,n){return r;function r(s,i,a,l){const u=Array.isArray(a.children)?n:t;return l?u(i,a,l):u(i,a)}}function ij(e,t){return n;function n(r,s,i,a){const l=Array.isArray(i.children),c=gd(r);return t(s,i,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function aj(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&xd.call(t.properties,s)){const i=lj(e,s,t.properties[s]);if(i){const[a,l]=i;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&Qk.has(t.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function oj(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Ii(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else Ii(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function bd(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:Vk;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=Nx(e,i,a);l!==void 0&&n.push(l)}return n}function lj(e,t,n){const r=mk(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nk(n):yk(n)),r.property==="style"){let s=typeof n=="object"?n:cj(e,String(n));return e.stylePropertyNameCase==="css"&&(s=uj(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?dk[r.property]||r.property:r.attribute,n]}}function cj(e,t){try{return Wk(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new pt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=jx+"#cannot-parse-style-attribute",s}}function _x(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const l=Sf(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=Sf(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return xd.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ii(e)}function Ii(e,t){const n=new pt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=jx+"#cannot-handle-mdx-estrees-without-createevaluater",n}function uj(e){const t={};let n;for(n in e)xd.call(e,n)&&(t[dj(n)]=e[n]);return t}function dj(e){let t=e.replace(Kk,hj);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function hj(e){return"-"+e.toLowerCase()}const Sl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},fj={};function vd(e,t){const n=fj,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Cx(e,r,s)}function Cx(e,t,n){if(mj(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Of(e.children,t,n)}return Array.isArray(e)?Of(e,t,n):""}function Of(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Cx(e[s],t,n);return r.join("")}function mj(e){return!!(e&&typeof e=="object")}const Rf=document.createElement("i");function wd(e){const t="&"+e+";";Rf.innerHTML=t;const n=Rf.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function zt(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function Gt(e,t){return e.length>0?(zt(e,e.length,0,t),e):t}const Ff={}.hasOwnProperty;function Ex(e){const t={};let n=-1;for(;++n<e.length;)pj(t,e[n]);return t}function pj(e,t){let n;for(n in t){const s=(Ff.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){Ff.call(s,a)||(s[a]=[]);const l=i[a];gj(s[a],Array.isArray(l)?l:l?[l]:[])}}}function gj(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);zt(e,0,0,r)}function Px(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ln(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bt=cr(/[A-Za-z]/),ht=cr(/[\dA-Za-z]/),xj=cr(/[#-'*+\--9=?A-Z^-~]/);function lo(e){return e!==null&&(e<32||e===127)}const Zc=cr(/\d/),yj=cr(/[\dA-Fa-f]/),bj=cr(/[!-/:-@[-`{-~]/);function he(e){return e!==null&&e<-2}function De(e){return e!==null&&(e<0||e===32)}function je(e){return e===-2||e===-1||e===32}const Fo=cr(new RegExp("\\p{P}|\\p{S}","u")),Ar=cr(/\s/);function cr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function As(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&ht(e.charCodeAt(n+1))&&ht(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ee(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(c){return je(c)?(e.enter(n),l(c)):t(c)}function l(c){return je(c)&&i++<s?(e.consume(c),l):(e.exit(n),t(c))}}const vj={tokenize:wj};function wj(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ee(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return he(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),a)}}const kj={tokenize:jj},zf={tokenize:Nj};function jj(e){const t=this,n=[];let r=0,s,i,a;return l;function l(x){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(x)}return u(x)}function c(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const S=t.events.length;let N=S,w;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){w=t.events[N][1].end;break}g(r);let C=S;for(;C<t.events.length;)t.events[C][1].end={...w},C++;return zt(t.events,N+1,0,t.events.slice(S)),t.events.length=C,u(x)}return l(x)}function u(x){if(r===n.length){if(!s)return m(x);if(s.currentConstruct&&s.currentConstruct.concrete)return p(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(zf,h,d)(x)}function h(x){return s&&v(),g(r),m(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,p(x)}function m(x){return t.containerState={},e.attempt(zf,f,p)(x)}function f(x){return r++,n.push([t.currentConstruct,t.containerState]),m(x)}function p(x){if(x===null){s&&v(),g(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),y(x)}function y(x){if(x===null){E(e.exit("chunkFlow"),!0),g(0),e.consume(x);return}return he(x)?(e.consume(x),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(x),y)}function E(x,S){const N=t.sliceStream(x);if(S&&N.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(N),t.parser.lazy[x.start.line]){let w=s.events.length;for(;w--;)if(s.events[w][1].start.offset<a&&(!s.events[w][1].end||s.events[w][1].end.offset>a))return;const C=t.events.length;let P=C,I,b;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(I){b=t.events[P][1].end;break}I=!0}for(g(r),w=C;w<t.events.length;)t.events[w][1].end={...b},w++;zt(t.events,P+1,0,t.events.slice(C)),t.events.length=w}}function g(x){let S=n.length;for(;S-- >x;){const N=n[S];t.containerState=N[1],N[0].exit.call(t,e)}n.length=x}function v(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Nj(e,t,n){return Ee(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ns(e){if(e===null||De(e)||Ar(e))return 1;if(Fo(e))return 2}function zo(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const eu={name:"attention",resolveAll:Sj,tokenize:_j};function Sj(e,t){let n=-1,r,s,i,a,l,c,u,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},m={...e[n][1].start};$f(d,-c),$f(m,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Gt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Gt(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=Gt(u,zo(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Gt(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,u=Gt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,zt(e,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function _j(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ns(r);let i;return a;function a(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),h=Ns(c),d=!h||h===2&&s||n.includes(c),m=!s||s===2&&h||n.includes(r);return u._open=!!(i===42?d:d&&(s||!m)),u._close=!!(i===42?m:m&&(h||!d)),t(c)}}function $f(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Cj={name:"autolink",tokenize:Ej};function Ej(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return bt(f)?(e.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||ht(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||ht(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||lo(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),h):xj(f)?(e.consume(f),u):n(f)}function h(f){return ht(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,h):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||ht(f))&&r++<63){const p=f===45?m:d;return e.consume(f),p}return n(f)}}const Wi={partial:!0,tokenize:Pj};function Pj(e,t,n){return r;function r(i){return je(i)?Ee(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||he(i)?t(i):n(i)}}const Tx={continuation:{tokenize:Ij},exit:Aj,name:"blockQuote",tokenize:Tj};function Tj(e,t,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return je(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Ij(e,t,n){const r=this;return s;function s(a){return je(a)?Ee(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(Tx,t,n)(a)}}function Aj(e){e.exit("blockQuote")}const Ix={name:"characterEscape",tokenize:Mj};function Mj(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return bj(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Ax={name:"characterReference",tokenize:Dj};function Dj(e,t,n){const r=this;let s=0,i,a;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=ht,h(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=yj,h):(e.enter("characterReferenceValue"),i=7,a=Zc,h(d))}function h(d){if(d===59&&s){const m=e.exit("characterReferenceValue");return a===ht&&!wd(r.sliceSerialize(m))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&s++<i?(e.consume(d),h):n(d)}}const Bf={partial:!0,tokenize:Oj},Uf={concrete:!0,name:"codeFenced",tokenize:Lj};function Lj(e,t,n){const r=this,s={partial:!0,tokenize:N};let i=0,a=0,l;return c;function c(w){return u(w)}function u(w){const C=r.events[r.events.length-1];return i=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,l=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(w)}function h(w){return w===l?(a++,e.consume(w),h):a<3?n(w):(e.exit("codeFencedFenceSequence"),je(w)?Ee(e,d,"whitespace")(w):d(w))}function d(w){return w===null||he(w)?(e.exit("codeFencedFence"),r.interrupt?t(w):e.check(Bf,y,S)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||he(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):je(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ee(e,f,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),m)}function f(w){return w===null||he(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||he(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===l?n(w):(e.consume(w),p)}function y(w){return e.attempt(s,S,E)(w)}function E(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),g}function g(w){return i>0&&je(w)?Ee(e,v,"linePrefix",i+1)(w):v(w)}function v(w){return w===null||he(w)?e.check(Bf,y,S)(w):(e.enter("codeFlowValue"),x(w))}function x(w){return w===null||he(w)?(e.exit("codeFlowValue"),v(w)):(e.consume(w),x)}function S(w){return e.exit("codeFenced"),t(w)}function N(w,C,P){let I=0;return b;function b(q){return w.enter("lineEnding"),w.consume(q),w.exit("lineEnding"),T}function T(q){return w.enter("codeFencedFence"),je(q)?Ee(w,A,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):A(q)}function A(q){return q===l?(w.enter("codeFencedFenceSequence"),R(q)):P(q)}function R(q){return q===l?(I++,w.consume(q),R):I>=a?(w.exit("codeFencedFenceSequence"),je(q)?Ee(w,Q,"whitespace")(q):Q(q)):P(q)}function Q(q){return q===null||he(q)?(w.exit("codeFencedFence"),C(q)):P(q)}}}function Oj(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const _l={name:"codeIndented",tokenize:Fj},Rj={partial:!0,tokenize:zj};function Fj(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ee(e,i,"linePrefix",5)(u)}function i(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):he(u)?e.attempt(Rj,a,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||he(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function zj(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):Ee(e,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):he(a)?s(a):n(a)}}const $j={name:"codeText",previous:Uj,resolve:Bj,tokenize:Hj};function Bj(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function Uj(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Hj(e,t,n){let r=0,s,i;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(i=e.enter("codeTextSequence"),s=0,h(d)):he(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||he(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function h(d){return d===96?(e.consume(d),s++,h):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",u(d))}}class qj{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Us(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Us(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Us(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Us(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Us(this.left,n.reverse())}}}function Us(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Mx(e){const t={};let n=-1,r,s,i,a,l,c,u;const h=new qj(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Wj(h,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=h.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(h.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...h.get(s)[1].start},l=h.slice(s,n),l.unshift(r),h.splice(s,n-s+1,l))}}return zt(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function Wj(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let h,d,m=-1,f=n,p=0,y=0;const E=[y];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(h=r.sliceStream(f),f.next||h.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(y=m+1,E.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):E.pop(),m=E.length;m--;){const g=l.slice(E[m],E[m+1]),v=i.pop();c.push([v,v+g.length-1]),e.splice(v,2,g)}for(c.reverse(),m=-1;++m<c.length;)u[p+c[m][0]]=p+c[m][1],p+=c[m][1]-c[m][0]-1;return u}const Gj={resolve:Kj,tokenize:Jj},Vj={partial:!0,tokenize:Qj};function Kj(e){return Mx(e),e}function Jj(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):he(l)?e.check(Vj,a,i)(l):(e.consume(l),s)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Qj(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ee(e,i,"linePrefix")}function i(a){if(a===null||he(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Dx(e,t,n,r,s,i,a,l,c){const u=c||Number.POSITIVE_INFINITY;let h=0;return d;function d(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),m):g===null||g===32||g===41||lo(g)?n(g):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(g))}function m(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(l),m(g)):g===null||g===60||he(g)?n(g):(e.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function y(g){return!h&&(g===null||g===41||De(g))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(g)):h<u&&g===40?(e.consume(g),h++,y):g===41?(e.consume(g),h--,y):g===null||g===32||g===40||lo(g)?n(g):(e.consume(g),g===92?E:y)}function E(g){return g===40||g===41||g===92?(e.consume(g),y):y(g)}}function Lx(e,t,n,r,s,i){const a=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),h}function h(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):he(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||he(f)||l++>999?(e.exit("chunkString"),h(f)):(e.consume(f),c||(c=!je(f)),f===92?m:d)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,d):d(f)}}function Ox(e,t,n,r,s,i){let a;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),a=m===40?41:m,c):n(m)}function c(m){return m===a?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(i),u(m))}function u(m){return m===a?(e.exit(i),c(a)):m===null?n(m):he(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Ee(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===a||m===null||he(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?d:h)}function d(m){return m===a||m===92?(e.consume(m),h):h(m)}}function ci(e,t){let n;return r;function r(s){return he(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):je(s)?Ee(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const Yj={name:"definition",tokenize:Zj},Xj={partial:!0,tokenize:e2};function Zj(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),a(f)}function a(f){return Lx.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=ln(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return De(f)?ci(e,u)(f):u(f)}function u(f){return Dx(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function h(f){return e.attempt(Xj,d,d)(f)}function d(f){return je(f)?Ee(e,m,"whitespace")(f):m(f)}function m(f){return f===null||he(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function e2(e,t,n){return r;function r(l){return De(l)?ci(e,s)(l):n(l)}function s(l){return Ox(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return je(l)?Ee(e,a,"whitespace")(l):a(l)}function a(l){return l===null||he(l)?t(l):n(l)}}const t2={name:"hardBreakEscape",tokenize:n2};function n2(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return he(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const r2={name:"headingAtx",resolve:s2,tokenize:i2};function s2(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},zt(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function i2(e,t,n){let r=0;return s;function s(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&r++<6?(e.consume(h),a):h===null||De(h)?(e.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||he(h)?(e.exit("atxHeading"),t(h)):je(h)?Ee(e,l,"whitespace")(h):(e.enter("atxHeadingText"),u(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),l(h))}function u(h){return h===null||h===35||De(h)?(e.exit("atxHeadingText"),l(h)):(e.consume(h),u)}}const a2=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hf=["pre","script","style","textarea"],o2={concrete:!0,name:"htmlFlow",resolveTo:u2,tokenize:d2},l2={partial:!0,tokenize:f2},c2={partial:!0,tokenize:h2};function u2(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function d2(e,t,n){const r=this;let s,i,a,l,c;return u;function u(_){return h(_)}function h(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),d}function d(_){return _===33?(e.consume(_),m):_===47?(e.consume(_),i=!0,y):_===63?(e.consume(_),s=3,r.interrupt?t:k):bt(_)?(e.consume(_),a=String.fromCharCode(_),E):n(_)}function m(_){return _===45?(e.consume(_),s=2,f):_===91?(e.consume(_),s=5,l=0,p):bt(_)?(e.consume(_),s=4,r.interrupt?t:k):n(_)}function f(_){return _===45?(e.consume(_),r.interrupt?t:k):n(_)}function p(_){const B="CDATA[";return _===B.charCodeAt(l++)?(e.consume(_),l===B.length?r.interrupt?t:A:p):n(_)}function y(_){return bt(_)?(e.consume(_),a=String.fromCharCode(_),E):n(_)}function E(_){if(_===null||_===47||_===62||De(_)){const B=_===47,se=a.toLowerCase();return!B&&!i&&Hf.includes(se)?(s=1,r.interrupt?t(_):A(_)):a2.includes(a.toLowerCase())?(s=6,B?(e.consume(_),g):r.interrupt?t(_):A(_)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):i?v(_):x(_))}return _===45||ht(_)?(e.consume(_),a+=String.fromCharCode(_),E):n(_)}function g(_){return _===62?(e.consume(_),r.interrupt?t:A):n(_)}function v(_){return je(_)?(e.consume(_),v):b(_)}function x(_){return _===47?(e.consume(_),b):_===58||_===95||bt(_)?(e.consume(_),S):je(_)?(e.consume(_),x):b(_)}function S(_){return _===45||_===46||_===58||_===95||ht(_)?(e.consume(_),S):N(_)}function N(_){return _===61?(e.consume(_),w):je(_)?(e.consume(_),N):x(_)}function w(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),c=_,C):je(_)?(e.consume(_),w):P(_)}function C(_){return _===c?(e.consume(_),c=null,I):_===null||he(_)?n(_):(e.consume(_),C)}function P(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||De(_)?N(_):(e.consume(_),P)}function I(_){return _===47||_===62||je(_)?x(_):n(_)}function b(_){return _===62?(e.consume(_),T):n(_)}function T(_){return _===null||he(_)?A(_):je(_)?(e.consume(_),T):n(_)}function A(_){return _===45&&s===2?(e.consume(_),ne):_===60&&s===1?(e.consume(_),ee):_===62&&s===4?(e.consume(_),z):_===63&&s===3?(e.consume(_),k):_===93&&s===5?(e.consume(_),J):he(_)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(l2,re,R)(_)):_===null||he(_)?(e.exit("htmlFlowData"),R(_)):(e.consume(_),A)}function R(_){return e.check(c2,Q,re)(_)}function Q(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),q}function q(_){return _===null||he(_)?R(_):(e.enter("htmlFlowData"),A(_))}function ne(_){return _===45?(e.consume(_),k):A(_)}function ee(_){return _===47?(e.consume(_),a="",F):A(_)}function F(_){if(_===62){const B=a.toLowerCase();return Hf.includes(B)?(e.consume(_),z):A(_)}return bt(_)&&a.length<8?(e.consume(_),a+=String.fromCharCode(_),F):A(_)}function J(_){return _===93?(e.consume(_),k):A(_)}function k(_){return _===62?(e.consume(_),z):_===45&&s===2?(e.consume(_),k):A(_)}function z(_){return _===null||he(_)?(e.exit("htmlFlowData"),re(_)):(e.consume(_),z)}function re(_){return e.exit("htmlFlow"),t(_)}}function h2(e,t,n){const r=this;return s;function s(a){return he(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function f2(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Wi,t,n)}}const m2={name:"htmlText",tokenize:p2};function p2(e,t,n){const r=this;let s,i,a;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),N):k===63?(e.consume(k),x):bt(k)?(e.consume(k),P):n(k)}function u(k){return k===45?(e.consume(k),h):k===91?(e.consume(k),i=0,p):bt(k)?(e.consume(k),v):n(k)}function h(k){return k===45?(e.consume(k),f):n(k)}function d(k){return k===null?n(k):k===45?(e.consume(k),m):he(k)?(a=d,ee(k)):(e.consume(k),d)}function m(k){return k===45?(e.consume(k),f):d(k)}function f(k){return k===62?ne(k):k===45?m(k):d(k)}function p(k){const z="CDATA[";return k===z.charCodeAt(i++)?(e.consume(k),i===z.length?y:p):n(k)}function y(k){return k===null?n(k):k===93?(e.consume(k),E):he(k)?(a=y,ee(k)):(e.consume(k),y)}function E(k){return k===93?(e.consume(k),g):y(k)}function g(k){return k===62?ne(k):k===93?(e.consume(k),g):y(k)}function v(k){return k===null||k===62?ne(k):he(k)?(a=v,ee(k)):(e.consume(k),v)}function x(k){return k===null?n(k):k===63?(e.consume(k),S):he(k)?(a=x,ee(k)):(e.consume(k),x)}function S(k){return k===62?ne(k):x(k)}function N(k){return bt(k)?(e.consume(k),w):n(k)}function w(k){return k===45||ht(k)?(e.consume(k),w):C(k)}function C(k){return he(k)?(a=C,ee(k)):je(k)?(e.consume(k),C):ne(k)}function P(k){return k===45||ht(k)?(e.consume(k),P):k===47||k===62||De(k)?I(k):n(k)}function I(k){return k===47?(e.consume(k),ne):k===58||k===95||bt(k)?(e.consume(k),b):he(k)?(a=I,ee(k)):je(k)?(e.consume(k),I):ne(k)}function b(k){return k===45||k===46||k===58||k===95||ht(k)?(e.consume(k),b):T(k)}function T(k){return k===61?(e.consume(k),A):he(k)?(a=T,ee(k)):je(k)?(e.consume(k),T):I(k)}function A(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,R):he(k)?(a=A,ee(k)):je(k)?(e.consume(k),A):(e.consume(k),Q)}function R(k){return k===s?(e.consume(k),s=void 0,q):k===null?n(k):he(k)?(a=R,ee(k)):(e.consume(k),R)}function Q(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||De(k)?I(k):(e.consume(k),Q)}function q(k){return k===47||k===62||De(k)?I(k):n(k)}function ne(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function ee(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),F}function F(k){return je(k)?Ee(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):J(k)}function J(k){return e.enter("htmlTextData"),a(k)}}const kd={name:"labelEnd",resolveAll:b2,resolveTo:v2,tokenize:w2},g2={tokenize:k2},x2={tokenize:j2},y2={tokenize:N2};function b2(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&zt(e,0,e.length,n),e}function v2(e,t){let n=e.length,r=0,s,i,a,l;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Gt(l,e.slice(i+1,i+r+3)),l=Gt(l,[["enter",h,t]]),l=Gt(l,zo(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),l=Gt(l,[["exit",h,t],e[a-2],e[a-1],["exit",u,t]]),l=Gt(l,e.slice(a+1)),l=Gt(l,[["exit",c,t]]),zt(e,i,e.length,l),e}function w2(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(m){return i?i._inactive?d(m):(a=r.parser.defined.includes(ln(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(g2,h,a?h:d)(m):m===91?e.attempt(x2,h,a?u:d)(m):a?h(m):d(m)}function u(m){return e.attempt(y2,h,d)(m)}function h(m){return t(m)}function d(m){return i._balanced=!0,n(m)}}function k2(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),s}function s(d){return De(d)?ci(e,i)(d):i(d)}function i(d){return d===41?h(d):Dx(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return De(d)?ci(e,c)(d):h(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?Ox(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):h(d)}function u(d){return De(d)?ci(e,h)(d):h(d)}function h(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function j2(e,t,n){const r=this;return s;function s(l){return Lx.call(r,e,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(ln(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function N2(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const S2={name:"labelStartImage",resolveAll:kd.resolveAll,tokenize:_2};function _2(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const C2={name:"labelStartLink",resolveAll:kd.resolveAll,tokenize:E2};function E2(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Cl={name:"lineEnding",tokenize:P2};function P2(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ee(e,t,"linePrefix")}}const Aa={name:"thematicBreak",tokenize:T2};function T2(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||he(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),je(u)?Ee(e,l,"whitespace")(u):l(u))}}const _t={continuation:{tokenize:D2},exit:O2,name:"list",tokenize:M2},I2={partial:!0,tokenize:R2},A2={partial:!0,tokenize:L2};function M2(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Zc(f)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Aa,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Zc(f)&&++a<10?(e.consume(f),c):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Wi,r.interrupt?n:h,e.attempt(I2,m,d))}function h(f){return r.containerState.initialBlankLine=!0,i++,m(f)}function d(f){return je(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function D2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Wi,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ee(e,t,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!je(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(A2,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ee(e,e.attempt(_t,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function L2(e,t,n){const r=this;return Ee(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function O2(e){e.exit(this.containerState.type)}function R2(e,t,n){const r=this;return Ee(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!je(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const qf={name:"setextUnderline",resolveTo:F2,tokenize:z2};function F2(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function z2(e,t,n){const r=this;let s;return i;function i(u){let h=r.events.length,d;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){d=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),je(u)?Ee(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||he(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const $2={tokenize:B2};function B2(e){const t=this,n=e.attempt(Wi,r,e.attempt(this.parser.constructs.flowInitial,s,Ee(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Gj,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const U2={resolveAll:Fx()},H2=Rx("string"),q2=Rx("text");function Rx(e){return{resolveAll:Fx(e==="text"?W2:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,l);return a;function a(h){return u(h)?i(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return u(h)?(n.exit("data"),i(h)):(n.consume(h),c)}function u(h){if(h===null)return!0;const d=s[h];let m=-1;if(d)for(;++m<d.length;){const f=d[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Fx(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function W2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,l=0,c;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const G2={42:_t,43:_t,45:_t,48:_t,49:_t,50:_t,51:_t,52:_t,53:_t,54:_t,55:_t,56:_t,57:_t,62:Tx},V2={91:Yj},K2={[-2]:_l,[-1]:_l,32:_l},J2={35:r2,42:Aa,45:[qf,Aa],60:o2,61:qf,95:Aa,96:Uf,126:Uf},Q2={38:Ax,92:Ix},Y2={[-5]:Cl,[-4]:Cl,[-3]:Cl,33:S2,38:Ax,42:eu,60:[Cj,m2],91:C2,92:[t2,Ix],93:kd,95:eu,96:$j},X2={null:[eu,U2]},Z2={null:[42,95]},eN={null:[]},tN=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Z2,contentInitial:V2,disable:eN,document:G2,flow:J2,flowInitial:K2,insideSpan:X2,string:Q2,text:Y2},Symbol.toStringTag,{value:"Module"}));function nN(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const c={attempt:C(N),check:C(w),consume:v,enter:x,exit:S,interrupt:C(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:p,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:d};let h=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function d(T){return a=Gt(a,T),E(),a[a.length-1]!==null?[]:(P(t,0),u.events=zo(i,u.events,u),u.events)}function m(T,A){return sN(f(T),A)}function f(T){return rN(a,T)}function p(){const{_bufferIndex:T,_index:A,line:R,column:Q,offset:q}=r;return{_bufferIndex:T,_index:A,line:R,column:Q,offset:q}}function y(T){s[T.line]=T.column,b()}function E(){let T;for(;r._index<a.length;){const A=a[r._index];if(typeof A=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<A.length;)g(A.charCodeAt(r._bufferIndex));else g(A)}}function g(T){h=h(T)}function v(T){he(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,b()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=T}function x(T,A){const R=A||{};return R.type=T,R.start=p(),u.events.push(["enter",R,u]),l.push(R),R}function S(T){const A=l.pop();return A.end=p(),u.events.push(["exit",A,u]),A}function N(T,A){P(T,A.from)}function w(T,A){A.restore()}function C(T,A){return R;function R(Q,q,ne){let ee,F,J,k;return Array.isArray(Q)?re(Q):"tokenize"in Q?re([Q]):z(Q);function z(O){return U;function U(xe){const ce=xe!==null&&O[xe],K=xe!==null&&O.null,me=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(K)?K:K?[K]:[]];return re(me)(xe)}}function re(O){return ee=O,F=0,O.length===0?ne:_(O[F])}function _(O){return U;function U(xe){return k=I(),J=O,O.partial||(u.currentConstruct=O),O.name&&u.parser.constructs.disable.null.includes(O.name)?se():O.tokenize.call(A?Object.assign(Object.create(u),A):u,c,B,se)(xe)}}function B(O){return T(J,k),q}function se(O){return k.restore(),++F<ee.length?_(ee[F]):ne}}}function P(T,A){T.resolveAll&&!i.includes(T)&&i.push(T),T.resolve&&zt(u.events,A,u.events.length-A,T.resolve(u.events.slice(A),u)),T.resolveTo&&(u.events=T.resolveTo(u.events,u))}function I(){const T=p(),A=u.previous,R=u.currentConstruct,Q=u.events.length,q=Array.from(l);return{from:Q,restore:ne};function ne(){r=T,u.previous=A,u.currentConstruct=R,u.events.length=Q,l=q,b()}}function b(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function rN(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function sN(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function iN(e){const r={constructs:Ex([tN,...(e||{}).extensions||[]]),content:s(vj),defined:[],document:s(kj),flow:s($2),lazy:{},string:s(H2),text:s(q2)};return r;function s(i){return a;function a(l){return nN(r,i,l)}}}function aN(e){for(;!Mx(e););return e}const Wf=/[\0\t\n\r]/g;function oN(){let e=1,t="",n=!0,r;return s;function s(i,a,l){const c=[];let u,h,d,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(Wf.lastIndex=d,u=Wf.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(d);break}if(f===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(i.slice(d,m)),e+=m-d),f){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const lN=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cN(e){return e.replace(lN,uN)}function uN(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Px(n.slice(i?2:1),i?16:10)}return wd(n)||e}const zx={}.hasOwnProperty;function dN(e,t,n){return typeof t!="string"&&(n=t,t=void 0),hN(n)(aN(iN(n).document().write(oN()(e,t,!0))))}function hN(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(H),autolinkProtocol:I,autolinkEmail:I,atxHeading:i(ge),blockQuote:i(K),characterEscape:I,characterReference:I,codeFenced:i(me),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(me,a),codeText:i(Y,a),codeTextData:I,data:I,codeFlowValue:I,definition:i($),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(de),hardBreakEscape:i(Me),hardBreakTrailing:i(Me),htmlFlow:i(te,a),htmlFlowData:I,htmlText:i(te,a),htmlTextData:I,image:i(ae),label:a,link:i(H),listItem:i(_e),listItemValue:m,listOrdered:i(ue,d),listUnordered:i(ue),paragraph:i(ve),reference:_,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(ge),strong:i(X),thematicBreak:i(Te)},exit:{atxHeading:c(),atxHeadingSequence:N,autolink:c(),autolinkEmail:ce,autolinkProtocol:xe,blockQuote:c(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:O,characterReference:U,codeFenced:c(E),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:b,codeIndented:c(g),codeText:c(q),codeTextData:b,data:b,definition:c(),definitionDestinationString:S,definitionLabelString:v,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(A),hardBreakTrailing:c(A),htmlFlow:c(R),htmlFlowData:b,htmlText:c(Q),htmlTextData:b,image:c(ee),label:J,labelText:F,lineEnding:T,link:c(ne),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:B,resourceDestinationString:k,resourceTitleString:z,resource:re,setextHeading:c(P),setextHeadingLineSequence:C,setextHeadingText:w,strong:c(),thematicBreak:c()}};$x(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(M){let L={type:"root",children:[]};const Z={stack:[L],tokenStack:[],config:t,enter:l,exit:u,buffer:a,resume:h,data:n},oe=[];let pe=-1;for(;++pe<M.length;)if(M[pe][1].type==="listOrdered"||M[pe][1].type==="listUnordered")if(M[pe][0]==="enter")oe.push(pe);else{const Be=oe.pop();pe=s(M,Be,pe)}for(pe=-1;++pe<M.length;){const Be=t[M[pe][0]];zx.call(Be,M[pe][1].type)&&Be[M[pe][1].type].call(Object.assign({sliceSerialize:M[pe][2].sliceSerialize},Z),M[pe][1])}if(Z.tokenStack.length>0){const Be=Z.tokenStack[Z.tokenStack.length-1];(Be[1]||Gf).call(Z,void 0,Be[0])}for(L.position={start:Fn(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:Fn(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},pe=-1;++pe<t.transforms.length;)L=t.transforms[pe](L)||L;return L}function s(M,L,Z){let oe=L-1,pe=-1,Be=!1,Qe,Ie,gt,ur;for(;++oe<=Z;){const Ve=M[oe];switch(Ve[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ve[0]==="enter"?pe++:pe--,ur=void 0;break}case"lineEndingBlank":{Ve[0]==="enter"&&(Qe&&!ur&&!pe&&!gt&&(gt=oe),ur=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ur=void 0}if(!pe&&Ve[0]==="enter"&&Ve[1].type==="listItemPrefix"||pe===-1&&Ve[0]==="exit"&&(Ve[1].type==="listUnordered"||Ve[1].type==="listOrdered")){if(Qe){let D=oe;for(Ie=void 0;D--;){const fe=M[D];if(fe[1].type==="lineEnding"||fe[1].type==="lineEndingBlank"){if(fe[0]==="exit")continue;Ie&&(M[Ie][1].type="lineEndingBlank",Be=!0),fe[1].type="lineEnding",Ie=D}else if(!(fe[1].type==="linePrefix"||fe[1].type==="blockQuotePrefix"||fe[1].type==="blockQuotePrefixWhitespace"||fe[1].type==="blockQuoteMarker"||fe[1].type==="listItemIndent"))break}gt&&(!Ie||gt<Ie)&&(Qe._spread=!0),Qe.end=Object.assign({},Ie?M[Ie][1].start:Ve[1].end),M.splice(Ie||oe,0,["exit",Qe,Ve[2]]),oe++,Z++}if(Ve[1].type==="listItemPrefix"){const D={type:"listItem",_spread:!1,start:Object.assign({},Ve[1].start),end:void 0};Qe=D,M.splice(oe,0,["enter",D,Ve[2]]),oe++,Z++,gt=void 0,ur=!0}}}return M[L][1]._spread=Be,Z}function i(M,L){return Z;function Z(oe){l.call(this,M(oe),oe),L&&L.call(this,oe)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(M,L,Z){this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([L,Z||void 0]),M.position={start:Fn(L.start),end:void 0}}function c(M){return L;function L(Z){M&&M.call(this,Z),u.call(this,Z)}}function u(M,L){const Z=this.stack.pop(),oe=this.tokenStack.pop();if(oe)oe[0].type!==M.type&&(L?L.call(this,M,oe[0]):(oe[1]||Gf).call(this,M,oe[0]));else throw new Error("Cannot close `"+M.type+"` ("+li({start:M.start,end:M.end})+"): its not open");Z.position.end=Fn(M.end)}function h(){return vd(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(M){if(this.data.expectingFirstListItemValue){const L=this.stack[this.stack.length-2];L.start=Number.parseInt(this.sliceSerialize(M),10),this.data.expectingFirstListItemValue=void 0}}function f(){const M=this.resume(),L=this.stack[this.stack.length-1];L.lang=M}function p(){const M=this.resume(),L=this.stack[this.stack.length-1];L.meta=M}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const M=this.resume(),L=this.stack[this.stack.length-1];L.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const M=this.resume(),L=this.stack[this.stack.length-1];L.value=M.replace(/(\r?\n|\r)$/g,"")}function v(M){const L=this.resume(),Z=this.stack[this.stack.length-1];Z.label=L,Z.identifier=ln(this.sliceSerialize(M)).toLowerCase()}function x(){const M=this.resume(),L=this.stack[this.stack.length-1];L.title=M}function S(){const M=this.resume(),L=this.stack[this.stack.length-1];L.url=M}function N(M){const L=this.stack[this.stack.length-1];if(!L.depth){const Z=this.sliceSerialize(M).length;L.depth=Z}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function C(M){const L=this.stack[this.stack.length-1];L.depth=this.sliceSerialize(M).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function I(M){const Z=this.stack[this.stack.length-1].children;let oe=Z[Z.length-1];(!oe||oe.type!=="text")&&(oe=le(),oe.position={start:Fn(M.start),end:void 0},Z.push(oe)),this.stack.push(oe)}function b(M){const L=this.stack.pop();L.value+=this.sliceSerialize(M),L.position.end=Fn(M.end)}function T(M){const L=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Z=L.children[L.children.length-1];Z.position.end=Fn(M.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(L.type)&&(I.call(this,M),b.call(this,M))}function A(){this.data.atHardBreak=!0}function R(){const M=this.resume(),L=this.stack[this.stack.length-1];L.value=M}function Q(){const M=this.resume(),L=this.stack[this.stack.length-1];L.value=M}function q(){const M=this.resume(),L=this.stack[this.stack.length-1];L.value=M}function ne(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const L=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=L,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function ee(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const L=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=L,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function F(M){const L=this.sliceSerialize(M),Z=this.stack[this.stack.length-2];Z.label=cN(L),Z.identifier=ln(L).toLowerCase()}function J(){const M=this.stack[this.stack.length-1],L=this.resume(),Z=this.stack[this.stack.length-1];if(this.data.inReference=!0,Z.type==="link"){const oe=M.children;Z.children=oe}else Z.alt=L}function k(){const M=this.resume(),L=this.stack[this.stack.length-1];L.url=M}function z(){const M=this.resume(),L=this.stack[this.stack.length-1];L.title=M}function re(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function B(M){const L=this.resume(),Z=this.stack[this.stack.length-1];Z.label=L,Z.identifier=ln(this.sliceSerialize(M)).toLowerCase(),this.data.referenceType="full"}function se(M){this.data.characterReferenceType=M.type}function O(M){const L=this.sliceSerialize(M),Z=this.data.characterReferenceType;let oe;Z?(oe=Px(L,Z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):oe=wd(L);const pe=this.stack[this.stack.length-1];pe.value+=oe}function U(M){const L=this.stack.pop();L.position.end=Fn(M.end)}function xe(M){b.call(this,M);const L=this.stack[this.stack.length-1];L.url=this.sliceSerialize(M)}function ce(M){b.call(this,M);const L=this.stack[this.stack.length-1];L.url="mailto:"+this.sliceSerialize(M)}function K(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function $(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function de(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function Me(){return{type:"break"}}function te(){return{type:"html",value:""}}function ae(){return{type:"image",title:null,url:"",alt:null}}function H(){return{type:"link",title:null,url:"",children:[]}}function ue(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function _e(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function ve(){return{type:"paragraph",children:[]}}function X(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function Te(){return{type:"thematicBreak"}}}function Fn(e){return{line:e.line,column:e.column,offset:e.offset}}function $x(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?$x(e,r):fN(e,r)}}function fN(e,t){let n;for(n in t)if(zx.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Gf(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+li({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+li({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+li({start:t.start,end:t.end})+") is still open")}function mN(e){const t=this;t.parser=n;function n(r){return dN(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function pN(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function gN(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function xN(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function yN(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bN(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vN(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=As(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function wN(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kN(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Bx(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function jN(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bx(e,t);const s={src:As(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function NN(e,t){const n={src:As(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function SN(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function _N(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bx(e,t);const s={href:As(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function CN(e,t){const n={href:As(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function EN(e,t,n){const r=e.all(t),s=n?PN(n):Ux(t),i={},a=[];if(typeof t.checked=="boolean"){const h=r[0];let d;h&&h.type==="element"&&h.tagName==="p"?d=h:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const h=r[l];(s||l!==0||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!s?a.push(...h.children):a.push(h)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function PN(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ux(n[r])}return t}function Ux(e){const t=e.spread;return t??e.children.length>1}function TN(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function IN(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function AN(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function MN(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DN(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=gd(t.children[1]),c=wx(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function LN(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],m={},f=a?a[c]:void 0;f&&(m.align=f);let p={type:"element",tagName:i,properties:m,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,h),e.applyData(t,h)}function ON(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Vf=9,Kf=32;function RN(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(Jf(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(Jf(t.slice(s),s>0,!1)),i.join("")}function Jf(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===Vf||i===Kf;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===Vf||i===Kf;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function FN(e,t){const n={type:"text",value:RN(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function zN(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const $N={blockquote:pN,break:gN,code:xN,delete:yN,emphasis:bN,footnoteReference:vN,heading:wN,html:kN,imageReference:jN,image:NN,inlineCode:SN,linkReference:_N,link:CN,listItem:EN,list:TN,paragraph:IN,root:AN,strong:MN,table:DN,tableCell:ON,tableRow:LN,text:FN,thematicBreak:zN,toml:ga,yaml:ga,definition:ga,footnoteDefinition:ga};function ga(){}const Hx=-1,$o=0,ui=1,co=2,jd=3,Nd=4,Sd=5,_d=6,qx=7,Wx=8,Qf=typeof self=="object"?self:globalThis,BN=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case $o:case Hx:return n(a,s);case ui:{const l=n([],s);for(const c of a)l.push(r(c));return l}case co:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case jd:return n(new Date(a),s);case Nd:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case Sd:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case _d:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case qx:{const{name:l,message:c}=a;return n(new Qf[l](c),s)}case Wx:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new Qf[i](a),s)};return r},Yf=e=>BN(new Map,e)(0),Gr="",{toString:UN}={},{keys:HN}=Object,Hs=e=>{const t=typeof e;if(t!=="object"||!e)return[$o,t];const n=UN.call(e).slice(8,-1);switch(n){case"Array":return[ui,Gr];case"Object":return[co,Gr];case"Date":return[jd,Gr];case"RegExp":return[Nd,Gr];case"Map":return[Sd,Gr];case"Set":return[_d,Gr];case"DataView":return[ui,n]}return n.includes("Array")?[ui,n]:n.includes("Error")?[qx,n]:[co,n]},xa=([e,t])=>e===$o&&(t==="function"||t==="symbol"),qN=(e,t,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},i=a=>{if(n.has(a))return n.get(a);let[l,c]=Hs(a);switch(l){case $o:{let h=a;switch(c){case"bigint":l=Wx,h=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return s([Hx],a)}return s([l,h],a)}case ui:{if(c){let m=a;return c==="DataView"?m=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(a)),s([c,[...m]],a)}const h=[],d=s([l,h],a);for(const m of a)h.push(i(m));return d}case co:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const h=[],d=s([l,h],a);for(const m of HN(a))(e||!xa(Hs(a[m])))&&h.push([i(m),i(a[m])]);return d}case jd:return s([l,a.toISOString()],a);case Nd:{const{source:h,flags:d}=a;return s([l,{source:h,flags:d}],a)}case Sd:{const h=[],d=s([l,h],a);for(const[m,f]of a)(e||!(xa(Hs(m))||xa(Hs(f))))&&h.push([i(m),i(f)]);return d}case _d:{const h=[],d=s([l,h],a);for(const m of a)(e||!xa(Hs(m)))&&h.push(i(m));return d}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return i},Xf=(e,{json:t,lossy:n}={})=>{const r=[];return qN(!(t||n),!!t,new Map,r)(e),r},uo=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Yf(Xf(e,t)):structuredClone(e):(e,t)=>Yf(Xf(e,t));function WN(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function GN(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function VN(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||WN,r=e.options.footnoteBackLabel||GN,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const h=e.all(u),d=String(u.identifier).toUpperCase(),m=As(d.toLowerCase());let f=0;const p=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++f<=y;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const v=E.children[E.children.length-1];v&&v.type==="text"?v.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...p)}else h.push(...p);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(u,g),l.push(g)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...uo(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Bo=function(e){if(e==null)return YN;if(typeof e=="function")return Uo(e);if(typeof e=="object")return Array.isArray(e)?KN(e):JN(e);if(typeof e=="string")return QN(e);throw new Error("Expected function, string, or object as test")};function KN(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bo(e[n]);return Uo(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function JN(e){const t=e;return Uo(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function QN(e){return Uo(t);function t(n){return n&&n.type===e}}function Uo(e){return t;function t(n,r,s){return!!(XN(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function YN(){return!0}function XN(e){return e!==null&&typeof e=="object"&&"type"in e}const Gx=[],ZN=!0,tu=!1,eS="skip";function Vx(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=Bo(s),a=r?-1:1;l(e,void 0,[])();function l(c,u,h){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=Gx,p,y,E;if((!t||i(c,u,h[h.length-1]||void 0))&&(f=tS(n(c,h)),f[0]===tu))return f;if("children"in c&&c.children){const g=c;if(g.children&&f[0]!==eS)for(y=(r?g.children.length:-1)+a,E=h.concat(g);y>-1&&y<g.children.length;){const v=g.children[y];if(p=l(v,y,E)(),p[0]===tu)return p;y=typeof p[1]=="number"?p[1]:y+a}}return f}}}function tS(e){return Array.isArray(e)?e:typeof e=="number"?[ZN,e]:e==null?Gx:[e]}function Cd(e,t,n,r){let s,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),Vx(e,i,l,s);function l(c,u){const h=u[u.length-1],d=h?h.children.indexOf(c):void 0;return a(c,d,h)}}const nu={}.hasOwnProperty,nS={};function rS(e,t){const n=t||nS,r=new Map,s=new Map,i=new Map,a={...$N,...n.handlers},l={all:u,applyData:iS,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:c,options:n,patch:sS,wrap:oS};return Cd(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const d=h.type==="definition"?r:s,m=String(h.identifier).toUpperCase();d.has(m)||d.set(m,h)}}),l;function c(h,d){const m=h.type,f=l.handlers[m];if(nu.call(l.handlers,m)&&f)return f(l,h,d);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:y,...E}=h,g=uo(E);return g.children=l.all(h),g}return uo(h)}return(l.options.unknownHandler||aS)(l,h,d)}function u(h){const d=[];if("children"in h){const m=h.children;let f=-1;for(;++f<m.length;){const p=l.one(m[f],h);if(p){if(f&&m[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Zf(p.value)),!Array.isArray(p)&&p.type==="element")){const y=p.children[0];y&&y.type==="text"&&(y.value=Zf(y.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function sS(e,t){e.position&&(t.position=Gk(e))}function iS(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,uo(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function aS(e,t){const n=t.data||{},r="value"in t&&!(nu.call(n,"hProperties")||nu.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function oS(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Zf(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function em(e,t){const n=rS(e,t),r=n.one(e,void 0),s=VN(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function lS(e,t){return e&&"run"in e?async function(n,r){const s=em(n,{file:r,...t});await e.run(s,r)}:function(n,r){return em(n,{file:r,...e||t})}}function tm(e){if(e)throw e}var Ma=Object.prototype.hasOwnProperty,Kx=Object.prototype.toString,nm=Object.defineProperty,rm=Object.getOwnPropertyDescriptor,sm=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Kx.call(t)==="[object Array]"},im=function(t){if(!t||Kx.call(t)!=="[object Object]")return!1;var n=Ma.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Ma.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Ma.call(t,s)},am=function(t,n){nm&&n.name==="__proto__"?nm(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},om=function(t,n){if(n==="__proto__")if(Ma.call(t,n)){if(rm)return rm(t,n).value}else return;return t[n]},cS=function e(){var t,n,r,s,i,a,l=arguments[0],c=1,u=arguments.length,h=!1;for(typeof l=="boolean"&&(h=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=om(l,n),s=om(t,n),l!==s&&(h&&s&&(im(s)||(i=sm(s)))?(i?(i=!1,a=r&&sm(r)?r:[]):a=r&&im(r)?r:{},am(l,{name:n,newValue:e(h,a,s)})):typeof s<"u"&&am(l,{name:n,newValue:s}));return l};const El=ou(cS);function ru(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function uS(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const h=e[++i];let d=-1;if(c){a(c);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,h?dS(h,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function dS(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(s);try{c=e.apply(this,a)}catch(u){const h=u;if(l&&n)throw h;return s(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,s):c instanceof Error?s(c):i(c))}function s(a,...l){n||(n=!0,t(a,...l))}function i(a){s(null,a)}}const fn={basename:hS,dirname:fS,extname:mS,join:pS,sep:"/"};function hS(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Gi(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function fS(e){if(Gi(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function mS(e){Gi(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function pS(...e){let t=-1,n;for(;++t<e.length;)Gi(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":gS(n)}function gS(e){Gi(e);const t=e.codePointAt(0)===47;let n=xS(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function xS(e,t){let n="",r=0,s=-1,i=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function Gi(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const yS={cwd:bS};function bS(){return"/"}function su(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vS(e){if(typeof e=="string")e=new URL(e);else if(!su(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return wS(e)}function wS(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Pl=["history","path","basename","stem","extname","dirname"];class Jx{constructor(t){let n;t?su(t)?n={path:t}:typeof t=="string"||kS(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":yS.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Pl.length;){const i=Pl[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Pl.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?fn.basename(this.path):void 0}set basename(t){Il(t,"basename"),Tl(t,"basename"),this.path=fn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?fn.dirname(this.path):void 0}set dirname(t){lm(this.basename,"dirname"),this.path=fn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?fn.extname(this.path):void 0}set extname(t){if(Tl(t,"extname"),lm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=fn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){su(t)&&(t=vS(t)),Il(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?fn.basename(this.path,this.extname):void 0}set stem(t){Il(t,"stem"),Tl(t,"stem"),this.path=fn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new pt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Tl(e,t){if(e&&e.includes(fn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+fn.sep+"`")}function Il(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function lm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function kS(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jS=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},NS={}.hasOwnProperty;class Ed extends jS{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uS()}copy(){const t=new Ed;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(El(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Dl("data",this.frozen),this.namespace[t]=n,this):NS.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Dl("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ya(t),r=this.parser||this.Parser;return Al("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Al("process",this.parser||this.Parser),Ml("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=ya(t),c=r.parse(l);r.run(c,l,function(h,d,m){if(h||!d||!m)return u(h);const f=d,p=r.stringify(f,m);CS(p)?m.value=p:m.result=p,u(h,m)});function u(h,d){h||!d?a(h):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),Al("processSync",this.parser||this.Parser),Ml("processSync",this.compiler||this.Compiler),this.process(t,s),um("processSync","process",n),r;function s(i,a){n=!0,tm(i),r=a}}run(t,n,r){cm(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const c=ya(n);s.run(t,c,u);function u(h,d,m){const f=d||t;h?l(h):a?a(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),um("runSync","run",r),s;function i(a,l){tm(a),s=l,r=!0}}stringify(t,n){this.freeze();const r=ya(n),s=this.compiler||this.Compiler;return Ml("stringify",s),cm(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Dl("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...d]=u;c(h,d)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=El(!0,s.settings,u.settings))}function l(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const d=u[h];i(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,h){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===u){m=d;break}if(m===-1)r.push([u,...h]);else if(h.length>0){let[f,...p]=h;const y=r[m][1];ru(y)&&ru(f)&&(f=El(!0,y,f)),r[m]=[u,f,...p]}}}}const SS=new Ed().freeze();function Al(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Ml(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Dl(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cm(e){if(!ru(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function um(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ya(e){return _S(e)?e:new Jx(e)}function _S(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function CS(e){return typeof e=="string"||ES(e)}function ES(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const PS="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",dm=[],hm={allowDangerousHtml:!0},TS=/^(https?|ircs?|mailto|xmpp)$/i,IS=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Pd(e){const t=AS(e),n=MS(e);return DS(t.runSync(t.parse(n),n),e)}function AS(e){const t=e.rehypePlugins||dm,n=e.remarkPlugins||dm,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...hm}:hm;return SS().use(mN).use(n).use(lS,r).use(t)}function MS(e){const t=e.children||"",n=new Jx;return typeof t=="string"&&(n.value=t),n}function DS(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||LS;for(const h of IS)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+PS+h.id,void 0);return Cd(e,u),Yk(e,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function u(h,d,m){if(h.type==="raw"&&m&&typeof d=="number")return a?m.children.splice(d,1):m.children[d]={type:"text",value:h.value},d;if(h.type==="element"){let f;for(f in Sl)if(Object.hasOwn(Sl,f)&&Object.hasOwn(h.properties,f)){const p=h.properties[f],y=Sl[f];(y===null||y.includes(h.tagName))&&(h.properties[f]=c(String(p||""),f,h))}}if(h.type==="element"){let f=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(h,d,m)),f&&m&&typeof d=="number")return l&&h.children?m.children.splice(d,1,...h.children):m.children.splice(d,1),d}}}function LS(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||TS.test(e.slice(0,t))?e:""}function fm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function OS(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function RS(e,t,n){const s=Bo((n||{}).ignore||[]),i=FS(t);let a=-1;for(;++a<i.length;)Vx(e,"text",l);function l(u,h){let d=-1,m;for(;++d<h.length;){const f=h[d],p=m?m.children:void 0;if(s(f,p?p.indexOf(f):void 0,m))return;m=f}if(m)return c(u,h)}function c(u,h){const d=h[h.length-1],m=i[a][0],f=i[a][1];let p=0;const E=d.children.indexOf(u);let g=!1,v=[];m.lastIndex=0;let x=m.exec(u.value);for(;x;){const S=x.index,N={index:x.index,input:x.input,stack:[...h,u]};let w=f(...x,N);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?m.lastIndex=S+1:(p!==S&&v.push({type:"text",value:u.value.slice(p,S)}),Array.isArray(w)?v.push(...w):w&&v.push(w),p=S+x[0].length,g=!0),!m.global)break;x=m.exec(u.value)}return g?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(E,1,...v)):v=[u],E+v.length}}function FS(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([zS(s[0]),$S(s[1])])}return t}function zS(e){return typeof e=="string"?new RegExp(OS(e),"g"):e}function $S(e){return typeof e=="function"?e:function(){return e}}const Ll="phrasing",Ol=["autolink","link","image","label"];function BS(){return{transforms:[KS],enter:{literalAutolink:HS,literalAutolinkEmail:Rl,literalAutolinkHttp:Rl,literalAutolinkWww:Rl},exit:{literalAutolink:VS,literalAutolinkEmail:GS,literalAutolinkHttp:qS,literalAutolinkWww:WS}}}function US(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ll,notInConstruct:Ol},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ll,notInConstruct:Ol},{character:":",before:"[ps]",after:"\\/",inConstruct:Ll,notInConstruct:Ol}]}}function HS(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Rl(e){this.config.enter.autolinkProtocol.call(this,e)}function qS(e){this.config.exit.autolinkProtocol.call(this,e)}function WS(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function GS(e){this.config.exit.autolinkEmail.call(this,e)}function VS(e){this.exit(e)}function KS(e){RS(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,JS],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),QS]],{ignore:["link","linkReference"]})}function JS(e,t,n,r,s){let i="";if(!Qx(s)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!YS(n)))return!1;const a=XS(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function QS(e,t,n,r){return!Qx(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function YS(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function XS(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=fm(e,"(");let i=fm(e,")");for(;r!==-1&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function Qx(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ar(n)||Fo(n))&&(!t||n!==47)}Yx.peek=o_;function ZS(){this.buffer()}function e_(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function t_(){this.buffer()}function n_(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function r_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ln(this.sliceSerialize(e)).toLowerCase(),n.label=t}function s_(e){this.exit(e)}function i_(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ln(this.sliceSerialize(e)).toLowerCase(),n.label=t}function a_(e){this.exit(e)}function o_(){return"["}function Yx(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),l(),a(),i+=s.move("]"),i}function l_(){return{enter:{gfmFootnoteCallString:ZS,gfmFootnoteCall:e_,gfmFootnoteDefinitionLabelString:t_,gfmFootnoteDefinition:n_},exit:{gfmFootnoteCallString:r_,gfmFootnoteCall:s_,gfmFootnoteDefinitionLabelString:i_,gfmFootnoteDefinition:a_}}}function c_(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Yx},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,a){const l=i.createTracker(a);let c=l.move("[^");const u=i.enter("footnoteDefinition"),h=i.enter("label");return c+=l.move(i.safe(i.associationId(r),{before:c,after:"]"})),h(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),t?Xx:u_))),u(),c}}function u_(e,t,n){return t===0?e:Xx(e,t,n)}function Xx(e,t,n){return(n?"":"    ")+e}const d_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Zx.peek=g_;function h_(){return{canContainEols:["delete"],enter:{strikethrough:m_},exit:{strikethrough:p_}}}function f_(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:d_}],handlers:{delete:Zx}}}function m_(e){this.enter({type:"delete",children:[]},e)}function p_(e){this.exit(e)}function Zx(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(e,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function g_(){return"~"}function x_(e){return e.length}function y_(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||x_,i=[],a=[],l=[],c=[];let u=0,h=-1;for(;++h<e.length;){const y=[],E=[];let g=-1;for(e[h].length>u&&(u=e[h].length);++g<e[h].length;){const v=b_(e[h][g]);if(n.alignDelimiters!==!1){const x=s(v);E[g]=x,(c[g]===void 0||x>c[g])&&(c[g]=x)}y.push(v)}a[h]=y,l[h]=E}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)i[d]=mm(r[d]);else{const y=mm(r);for(;++d<u;)i[d]=y}d=-1;const m=[],f=[];for(;++d<u;){const y=i[d];let E="",g="";y===99?(E=":",g=":"):y===108?E=":":y===114&&(g=":");let v=n.alignDelimiters===!1?1:Math.max(1,c[d]-E.length-g.length);const x=E+"-".repeat(v)+g;n.alignDelimiters!==!1&&(v=E.length+v+g.length,v>c[d]&&(c[d]=v),f[d]=v),m[d]=x}a.splice(1,0,m),l.splice(1,0,f),h=-1;const p=[];for(;++h<a.length;){const y=a[h],E=l[h];d=-1;const g=[];for(;++d<u;){const v=y[d]||"";let x="",S="";if(n.alignDelimiters!==!1){const N=c[d]-(E[d]||0),w=i[d];w===114?x=" ".repeat(N):w===99?N%2?(x=" ".repeat(N/2+.5),S=" ".repeat(N/2-.5)):(x=" ".repeat(N/2),S=x):S=" ".repeat(N)}n.delimiterStart!==!1&&!d&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&g.push(" "),n.alignDelimiters!==!1&&g.push(x),g.push(v),n.alignDelimiters!==!1&&g.push(S),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function b_(e){return e==null?"":String(e)}function mm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function v_(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),w_);return s(),a}function w_(e,t,n){return">"+(n?"":" ")+e}function k_(e,t){return pm(e,t.inConstruct,!0)&&!pm(e,t.notInConstruct,!1)}function pm(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function gm(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&k_(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function j_(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>a&&(a=i):i=1,s=r+t.length,r=n.indexOf(t,s);return a}function N_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function S_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function __(e,t,n,r){const s=S_(n),i=e.value||"",a=s==="`"?"GraveAccent":"Tilde";if(N_(e,n)){const d=n.enter("codeIndented"),m=n.indentLines(i,C_);return d(),m}const l=n.createTracker(r),c=s.repeat(Math.max(j_(i,s)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${a}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),d()}return h+=l.move(`
`),i&&(h+=l.move(i+`
`)),h+=l.move(c),u(),h}function C_(e,t,n){return(n?"":"    ")+e}function Td(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function E_(e,t,n,r){const s=Td(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),a(),u}function P_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ai(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ho(e,t,n){const r=Ns(e),s=Ns(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ey.peek=T_;function ey(e,t,n,r){const s=P_(n),i=n.enter("emphasis"),a=n.createTracker(r),l=a.move(s);let c=a.move(n.containerPhrasing(e,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),h=ho(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Ai(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=ho(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Ai(d));const f=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function T_(e,t,n){return n.options.emphasis||"*"}function I_(e,t){let n=!1;return Cd(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,tu}),!!((!e.depth||e.depth<3)&&vd(e)&&(t.options.setext||n))}function A_(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(I_(e,n)){const h=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),h(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");i.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=Ai(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),l(),u}ty.peek=M_;function ty(e){return e.value||""}function M_(){return"<"}ny.peek=D_;function ny(e,t,n,r){const s=Td(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),a(),u}function D_(){return"!"}ry.peek=L_;function ry(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function L_(){return"!"}sy.peek=O_;function sy(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const a=n.unsafe[i],l=n.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function O_(){return"`"}function iy(e,t){const n=vd(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}ay.peek=R_;function ay(e,t,n,r){const s=Td(n),i=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,c;if(iy(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),l(),n.stack=h,d}l=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${i}`),u+=a.move(" "+s),u+=a.move(n.safe(e.title,{before:u,after:s,...a.current()})),u+=a.move(s),c()),u+=a.move(")"),l(),u}function R_(e,t,n){return iy(e,n)?"<":"["}oy.peek=F_;function oy(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,i(),s==="full"||!u||u!==d?c+=l.move(d+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function F_(){return"["}function Id(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function z_(e){const t=Id(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function $_(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function ly(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function B_(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?$_(n):Id(n);const l=e.ordered?a==="."?")":".":z_(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),ly(n)===a&&h){let d=-1;for(;++d<e.children.length;){const m=e.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),u}function U_(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function H_(e,t,n,r){const s=U_(n);let i=n.bulletCurrent||Id(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let a=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(a-i.length)),l.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),h);return c(),u;function h(d,m,f){return m?(f?"":" ".repeat(a))+d:(f?i:i+" ".repeat(a-i.length))+d}}function q_(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),s(),a}const W_=Bo(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function G_(e,t,n,r){return(e.children.some(function(a){return W_(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function V_(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}cy.peek=K_;function cy(e,t,n,r){const s=V_(n),i=n.enter("strong"),a=n.createTracker(r),l=a.move(s+s);let c=a.move(n.containerPhrasing(e,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),h=ho(r.before.charCodeAt(r.before.length-1),u,s);h.inside&&(c=Ai(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=ho(r.after.charCodeAt(0),d,s);m.inside&&(c=c.slice(0,-1)+Ai(d));const f=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+f}function K_(e,t,n){return n.options.strong||"*"}function J_(e,t,n,r){return n.safe(e.value,r)}function Q_(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Y_(e,t,n){const r=(ly(n)+(n.options.ruleSpaces?" ":"")).repeat(Q_(n));return n.options.ruleSpaces?r.slice(0,-1):r}const uy={blockquote:v_,break:gm,code:__,definition:E_,emphasis:ey,hardBreak:gm,heading:A_,html:ty,image:ny,imageReference:ry,inlineCode:sy,link:ay,linkReference:oy,list:B_,listItem:H_,paragraph:q_,root:G_,strong:cy,text:J_,thematicBreak:Y_};function X_(){return{enter:{table:Z_,tableData:xm,tableHeader:xm,tableRow:tC},exit:{codeText:nC,table:eC,tableData:Fl,tableHeader:Fl,tableRow:Fl}}}function Z_(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function eC(e){this.exit(e),this.data.inTable=void 0}function tC(e){this.enter({type:"tableRow",children:[]},e)}function Fl(e){this.exit(e)}function xm(e){this.enter({type:"tableCell",children:[]},e)}function nC(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,rC));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function rC(e,t){return t==="|"?t:e}function sC(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:a,tableCell:c,tableRow:l}};function a(f,p,y,E){return u(h(f,y,E),f.align)}function l(f,p,y,E){const g=d(f,y,E),v=u([g]);return v.slice(0,v.indexOf(`
`))}function c(f,p,y,E){const g=y.enter("tableCell"),v=y.enter("phrasing"),x=y.containerPhrasing(f,{...E,before:i,after:i});return v(),g(),x}function u(f,p){return y_(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function h(f,p,y){const E=f.children;let g=-1;const v=[],x=p.enter("table");for(;++g<E.length;)v[g]=d(E[g],p,y);return x(),v}function d(f,p,y){const E=f.children;let g=-1;const v=[],x=p.enter("tableRow");for(;++g<E.length;)v[g]=c(E[g],f,p,y);return x(),v}function m(f,p,y){let E=uy.inlineCode(f,p,y);return y.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function iC(){return{exit:{taskListCheckValueChecked:ym,taskListCheckValueUnchecked:ym,paragraph:oC}}}function aC(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:lC}}}function ym(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function oC(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let i=-1,a;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function lC(e,t,n,r){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(a);let c=uy.listItem(e,t,n,{...r,...l.current()});return i&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+a}}function cC(){return[BS(),l_(),h_(),X_(),iC()]}function uC(e){return{extensions:[US(),c_(e),f_(),sC(e),aC()]}}const dC={tokenize:xC,partial:!0},dy={tokenize:yC,partial:!0},hy={tokenize:bC,partial:!0},fy={tokenize:vC,partial:!0},hC={tokenize:wC,partial:!0},my={name:"wwwAutolink",tokenize:pC,previous:gy},py={name:"protocolAutolink",tokenize:gC,previous:xy},Dn={name:"emailAutolink",tokenize:mC,previous:yy},xn={};function fC(){return{text:xn}}let mr=48;for(;mr<123;)xn[mr]=Dn,mr++,mr===58?mr=65:mr===91&&(mr=97);xn[43]=Dn;xn[45]=Dn;xn[46]=Dn;xn[95]=Dn;xn[72]=[Dn,py];xn[104]=[Dn,py];xn[87]=[Dn,my];xn[119]=[Dn,my];function mC(e,t,n){const r=this;let s,i;return a;function a(d){return!iu(d)||!yy.call(r,r.previous)||Ad(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return iu(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(hC,h,u)(d):d===45||d===95||ht(d)?(i=!0,e.consume(d),c):h(d)}function u(d){return e.consume(d),s=!0,c}function h(d){return i&&s&&bt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function pC(e,t,n){const r=this;return s;function s(a){return a!==87&&a!==119||!gy.call(r,r.previous)||Ad(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(dC,e.attempt(dy,e.attempt(hy,i),n),n)(a))}function i(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function gC(e,t,n){const r=this;let s="",i=!1;return a;function a(d){return(d===72||d===104)&&xy.call(r,r.previous)&&!Ad(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(bt(d)&&s.length<5)return s+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),i?u:(i=!0,c)):n(d)}function u(d){return d===null||lo(d)||De(d)||Ar(d)||Fo(d)?n(d):e.attempt(dy,e.attempt(hy,h),n)(d)}function h(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function xC(e,t,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),s):a===46&&r===3?(e.consume(a),i):n(a)}function i(a){return a===null?n(a):t(a)}}function yC(e,t,n){let r,s,i;return a;function a(u){return u===46||u===95?e.check(fy,c,l)(u):u===null||De(u)||Ar(u)||u!==45&&Fo(u)?c(u):(i=!0,e.consume(u),a)}function l(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),a}function c(u){return s||r||!i?n(u):t(u)}}function bC(e,t){let n=0,r=0;return s;function s(a){return a===40?(n++,e.consume(a),s):a===41&&r<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(fy,t,i)(a):a===null||De(a)||Ar(a)?t(a):(e.consume(a),s)}function i(a){return a===41&&r++,e.consume(a),s}}function vC(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),i):l===93?(e.consume(l),s):l===60||l===null||De(l)||Ar(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||De(l)||Ar(l)?t(l):r(l)}function i(l){return bt(l)?a(l):n(l)}function a(l){return l===59?(e.consume(l),r):bt(l)?(e.consume(l),a):n(l)}}function wC(e,t,n){return r;function r(i){return e.consume(i),s}function s(i){return ht(i)?n(i):t(i)}}function gy(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||De(e)}function xy(e){return!bt(e)}function yy(e){return!(e===47||iu(e))}function iu(e){return e===43||e===45||e===46||e===95||ht(e)}function Ad(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const kC={tokenize:TC,partial:!0};function jC(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:CC,continuation:{tokenize:EC},exit:PC}},text:{91:{name:"gfmFootnoteCall",tokenize:_C},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:NC,resolveTo:SC}}}}function NC(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return n(c);const u=ln(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function SC(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function _C(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,a;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!a||d===null||d===91||De(d))return n(d);if(d===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(ln(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return De(d)||(a=!0),i++,e.consume(d),d===92?h:u}function h(d){return d===91||d===92||d===93?(e.consume(d),i++,u):u(d)}}function CC(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0,l;return c;function c(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(p)}function h(p){if(a>999||p===93&&!l||p===null||p===91||De(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return i=ln(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return De(p)||(l=!0),a++,e.consume(p),p===92?d:h}function d(p){return p===91||p===92||p===93?(e.consume(p),a++,h):h(p)}function m(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),s.includes(i)||s.push(i),Ee(e,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return t(p)}}function EC(e,t,n){return e.check(Wi,t,e.attempt(kC,t,n))}function PC(e){e.exit("gfmFootnoteDefinition")}function TC(e,t,n){const r=this;return Ee(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(i):n(i)}}function IC(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},d={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},m=[["enter",h,l],["enter",a[u][1],l],["exit",a[u][1],l],["enter",d,l]],f=l.parser.constructs.insideSpan.null;f&&zt(m,m.length,0,zo(f,a.slice(u+1,c),l)),zt(m,m.length,0,[["exit",d,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",h,l]]),zt(a,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function i(a,l,c){const u=this.previous,h=this.events;let d=0;return m;function m(p){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(p):(a.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const y=Ns(u);if(p===126)return d>1?c(p):(a.consume(p),d++,f);if(d<2&&!n)return c(p);const E=a.exit("strikethroughSequenceTemporary"),g=Ns(p);return E._open=!g||g===2&&!!y,E._close=!y||y===2&&!!g,l(p)}}}class AC{constructor(){this.map=[]}add(t,n,r){MC(this,t,n,r)}consume(t){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const i of s)t.push(i);s=r.pop()}this.map.length=0}}function MC(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function DC(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function LC(){return{flow:{null:{name:"table",tokenize:OC,resolveAll:RC}}}}function OC(e,t,n){const r=this;let s=0,i=0,a;return l;function l(b){let T=r.events.length-1;for(;T>-1;){const Q=r.events[T][1].type;if(Q==="lineEnding"||Q==="linePrefix")T--;else break}const A=T>-1?r.events[T][1].type:null,R=A==="tableHead"||A==="tableRow"?w:c;return R===w&&r.parser.lazy[r.now().line]?n(b):R(b)}function c(b){return e.enter("tableHead"),e.enter("tableRow"),u(b)}function u(b){return b===124||(a=!0,i+=1),h(b)}function h(b){return b===null?n(b):he(b)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):n(b):je(b)?Ee(e,h,"whitespace")(b):(i+=1,a&&(a=!1,s+=1),b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),d(b)))}function d(b){return b===null||b===124||De(b)?(e.exit("data"),h(b)):(e.consume(b),b===92?m:d)}function m(b){return b===92||b===124?(e.consume(b),d):d(b)}function f(b){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(b):(e.enter("tableDelimiterRow"),a=!1,je(b)?Ee(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):p(b))}function p(b){return b===45||b===58?E(b):b===124?(a=!0,e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),y):N(b)}function y(b){return je(b)?Ee(e,E,"whitespace")(b):E(b)}function E(b){return b===58?(i+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),g):b===45?(i+=1,g(b)):b===null||he(b)?S(b):N(b)}function g(b){return b===45?(e.enter("tableDelimiterFiller"),v(b)):N(b)}function v(b){return b===45?(e.consume(b),v):b===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(b),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(b))}function x(b){return je(b)?Ee(e,S,"whitespace")(b):S(b)}function S(b){return b===124?p(b):b===null||he(b)?!a||s!==i?N(b):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(b)):N(b)}function N(b){return n(b)}function w(b){return e.enter("tableRow"),C(b)}function C(b){return b===124?(e.enter("tableCellDivider"),e.consume(b),e.exit("tableCellDivider"),C):b===null||he(b)?(e.exit("tableRow"),t(b)):je(b)?Ee(e,C,"whitespace")(b):(e.enter("data"),P(b))}function P(b){return b===null||b===124||De(b)?(e.exit("data"),C(b)):(e.consume(b),b===92?I:P)}function I(b){return b===92||b===124?(e.consume(b),P):P(b)}}function RC(e,t){let n=-1,r=!0,s=0,i=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,u,h,d;const m=new AC;for(;++n<e.length;){const f=e[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,c!==0&&(bm(m,t,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",h,t]])),s=p.type==="tableDelimiterRow"?2:h?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],d=ba(m,t,i,s,void 0,d),i=[0,0,0,0]),a[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(a[0]=a[1],d=ba(m,t,i,s,void 0,d)),i=a,a=[i[1],n,0,0])):p.type==="tableHead"?(l=!0,c=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(c=n,i[1]!==0?(a[0]=a[1],d=ba(m,t,i,s,n,d)):a[1]!==0&&(d=ba(m,t,a,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&bm(m,t,c,u,h),m.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=DC(t.events,n))}return e}function ba(e,t,n,r,s,i){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},Jr(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const c=Jr(t.events,n[1]);if(i={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=Jr(t.events,n[2]),h=Jr(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const m=t.events[n[2]],f=t.events[n[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,y=n[3]-n[2]-1;e.add(p,y,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return s!==void 0&&(i.end=Object.assign({},Jr(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function bm(e,t,n,r,s){const i=[],a=Jr(t.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function Jr(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const FC={name:"tasklistCheck",tokenize:$C};function zC(){return{text:{91:FC}}}function $C(e,t,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),i)}function i(c){return De(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return he(c)?t(c):je(c)?e.check({tokenize:BC},t,n)(c):n(c)}}function BC(e,t,n){return Ee(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function UC(e){return Ex([fC(),jC(),IC(e),LC(),zC()])}const HC={};function Md(e){const t=this,n=e||HC,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(UC(n)),i.push(cC()),a.push(uC(n))}function qC({value:e,onChange:t,placeholder:n="Enter markdown text...",label:r="Notes",rows:s=3}){const[i,a]=j.useState(!1);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300",children:[o.jsx(Ei,{className:"w-4 h-4 mr-2"}),r]}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:i?o.jsxs(o.Fragment,{children:[o.jsx(Ac,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Mc,{className:"w-4 h-4"}),o.jsx("span",{children:"Preview"})]})})]}),i?o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 min-h-[80px] max-h-[200px] overflow-y-auto",children:e?o.jsx(Pd,{remarkPlugins:[Md],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:l})=>o.jsx("p",{className:"mb-2 last:mb-0",children:l}),h1:({children:l})=>o.jsx("h1",{className:"text-lg font-bold mb-2",children:l}),h2:({children:l})=>o.jsx("h2",{className:"text-base font-bold mb-2",children:l}),h3:({children:l})=>o.jsx("h3",{className:"text-sm font-bold mb-1",children:l}),ul:({children:l})=>o.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:l}),ol:({children:l})=>o.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:l}),li:({children:l})=>o.jsx("li",{className:"text-sm",children:l}),strong:({children:l})=>o.jsx("strong",{className:"font-semibold",children:l}),em:({children:l})=>o.jsx("em",{className:"italic",children:l}),code:({children:l})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:l}),pre:({children:l})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:l}),blockquote:({children:l})=>o.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2",children:l})},children:e}):o.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"No content to preview"})}):o.jsx("textarea",{value:e,onChange:l=>t(l.target.value),rows:s,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white resize-none",placeholder:n}),!i&&o.jsx("div",{className:"mt-1 text-xs text-secondary-text",children:"Supports markdown formatting (**, *, `, #, -, 1., etc.)"})]})}function WC({isOpen:e,onClose:t,model:n,onModelUpdated:r}){var T;const{user:s}=st(),[i,a]=j.useState({name:"",count:1,purchase_date:"",notes:"",game_id:"",status:"",painted_date:""}),[l,c]=j.useState(null),[u,h]=j.useState(!1),[d,m]=j.useState(!1),[f,p]=j.useState(!1),[y,E]=j.useState(null),[g,v]=j.useState(null),[x,S]=j.useState([]),[N,w]=j.useState(!1);j.useEffect(()=>{n&&a({name:n.name,count:n.count,purchase_date:n.purchase_date||"",notes:n.notes||"",game_id:n.game_id||"",status:n.status||"",painted_date:n.painted_date||""})},[n]),j.useEffect(()=>{e&&(async()=>{const{data:R,error:Q}=await W.from("games").select("id, name, icon").order("name");Q?console.error("Error fetching games:",Q):S(R||[])})()},[e]);const C=A=>{var Q;const R=(Q=A.target.files)==null?void 0:Q[0];if(R){if(!R.type.startsWith("image/")){alert("Please select an image file");return}c(R),E(R),p(!0)}},P=async A=>{try{m(!0),console.log("Original cropped size:",(A.size/1024).toFixed(2),"KB");const R=await In(A,1200,1200,.8);console.log("Compressed size:",(R.size/1024).toFixed(2),"KB"),v(R)}catch(R){console.error("Compression failed, using original cropped image:",R),v(A)}finally{m(!1),p(!1)}},I=()=>{w(!0),v(null),c(null)},b=async A=>{if(A.preventDefault(),!!s){h(!0);try{let R=n.image_url;if(N){if(n.image_url&&n.image_url.includes("supabase"))try{const q=n.image_url.split("/"),ne=q.findIndex(ee=>ee==="model-images");if(ne!==-1){const ee=q.slice(ne+1).join("/");await W.storage.from("model-images").remove([ee])}}catch(q){console.warn("Failed to delete old image:",q)}R=null}else if(g){if(n.image_url&&n.image_url.includes("supabase"))try{const z=n.image_url.split("/"),re=z.findIndex(_=>_==="model-images");if(re!==-1){const _=z.slice(re+1).join("/");await W.storage.from("model-images").remove([_])}}catch(z){console.warn("Failed to delete old image:",z)}const q=(l==null?void 0:l.name.split(".").pop())||"jpg",ne=`${Date.now()}-${Math.random().toString(36).substring(2)}.${q}`,ee=`${s.id}/${ne}`,{data:F,error:J}=await W.storage.from("model-images").upload(ee,g);if(J)throw console.error("Upload error:",J),new Error(`Failed to upload image: ${J.message}`);const{data:k}=W.storage.from("model-images").getPublicUrl(F.path);R=k.publicUrl,console.log("New image uploaded:",R)}const{error:Q}=await W.from("models").update({name:i.name,count:i.count,purchase_date:i.purchase_date||null,notes:i.notes||null,game_id:i.game_id||null,image_url:R,status:i.status||"None",painted_date:i.painted_date||null}).eq("id",n.id);if(Q)throw Q;r(),t(),c(null),v(null),E(null),w(!1)}catch(R){console.error("Error updating model:",R),alert("Failed to update model. Please try again.")}finally{h(!1)}}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Model"}),o.jsx("button",{onClick:t,className:"text-icon hover:text-icon-hover",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),f&&y&&o.jsx(Ir,{isOpen:f,imageFile:y,onCrop:P,onClose:()=>{p(!1),E(null),c(null)}}),!f&&o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Model Name"]}),o.jsx("input",{type:"text",value:i.name,onChange:A=>a({...i,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Box"]}),o.jsx("input",{type:"text",value:((T=n.box)==null?void 0:T.name)||"No Collection (Loose Model)",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Box assignment cannot be changed in edit mode."})]}),!n.box&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(rd,{className:"w-4 h-4 mr-2"}),"Game"]}),o.jsx(Hi,{games:x,selectedGame:i.game_id,onGameSelect:A=>a({...i,game_id:A})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Painted Status"]}),o.jsxs("select",{value:i.status,onChange:A=>a({...i,status:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Select Status"}),o.jsx("option",{value:"Assembled",children:"Assembled"}),o.jsx("option",{value:"Primed",children:"Primed"}),o.jsx("option",{value:"Partially Painted",children:"Partially Painted"}),o.jsx("option",{value:"Painted",children:"Painted"})]})]}),i.status==="Painted"&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(tt,{className:"w-4 h-4 mr-2"}),"Painted Date"]}),o.jsx("input",{type:"date",value:i.painted_date,onChange:A=>a({...i,painted_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring---color-brand dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),!n.box&&o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(tt,{className:"w-4 h-4 mr-2"}),"Purchase Date"]}),o.jsx("input",{type:"date",value:i.purchase_date,onChange:A=>a({...i,purchase_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Po,{className:"w-4 h-4 mr-2"}),"Number of Models"]}),o.jsx("input",{type:"number",min:"1",value:i.count,onChange:A=>a({...i,count:parseInt(A.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Replace Image"]}),n.image_url&&!N&&o.jsx("div",{className:"mb-3 p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:n.image_url,alt:"Current model image",className:"w-12 h-12 object-cover rounded",onError:A=>{const R=A.target;R.style.display="none"}}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current image"})]}),o.jsx("button",{type:"button",onClick:I,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:o.jsx(Or,{className:"w-4 h-4"})})]})}),N&&o.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-md bg-red-50 dark:bg-red-900/20",children:o.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:" Image will be deleted when you save changes"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-brand)] dark:bg-gray-700 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-brand)]/10 file:text-[var(--color-brand)] hover:file:bg-[var(--color-brand)]/20"}),g&&o.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[" Cropped image ready for upload (",(g.size/1024).toFixed(1)," KB)"]}),d&&o.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Compressing image..."})]}),o.jsx(qC,{value:i.notes,onChange:A=>a({...i,notes:A}),placeholder:"Optional notes about this model... (supports markdown formatting)",label:"Notes",rows:4}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:u||d,className:"btn-primary btn-flex",children:u?o.jsxs(o.Fragment,{children:[o.jsx(av,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Model"})]})]})]})}):null}function GC({message:e,isVisible:t,onClose:n,duration:r=3e3}){return j.useEffect(()=>{if(t){const s=setTimeout(()=>{n()},r);return()=>clearTimeout(s)}},[t,r,n]),t?o.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-in slide-in-from-top-2 duration-300",children:o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 flex items-center space-x-3 max-w-sm",children:[o.jsx(Qb,{className:"w-5 h-5 text-icon-active flex-shrink-0"}),o.jsx("p",{className:"text-sm font-medium text-green-800 flex-1",children:e}),o.jsx("button",{onClick:n,className:"text-green-600 hover:text-green-800 transition-colors",children:o.jsx(Ne,{className:"w-4 h-4 text-icon"})})]})}):null}function VC({isOpen:e,onClose:t,onModelDeleted:n,onModelUpdated:r,onViewBox:s,model:i}){var T,A,R,Q,q,ne,ee,F,J,k,z,re,_,B,se,O,U,xe,ce;const[a,l]=Ce.useState(!1),[c,u]=Ce.useState(!1),[h,d]=Ce.useState(!1),[m,f]=Ce.useState(!1),[p,y]=Ce.useState(!1),[E,g]=Ce.useState(i);if(Ce.useEffect(()=>{g(i)},[i]),Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e||!i)return null;const v=K=>{K.target===K.currentTarget&&t()},x=K=>new Date(K).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),S=(K,me)=>`${me} Model${me>1?"s":""}`,N=()=>(i==null?void 0:i.painted_date)||null,w=()=>(i==null?void 0:i.notes)||null,C=()=>{l(!0)},P=async()=>{if(i){d(!0);try{if(i.image_url&&typeof i.image_url=="string"&&i.image_url.includes("supabase")){const me=i.image_url.split("/"),Y=me.findIndex($=>$==="model-images");if(Y!==-1){const $=me.slice(Y+1).join("/");await W.storage.from("model-images").remove([$])}}const{error:K}=await W.from("models").delete().eq("id",i.id);if(K)throw K;l(!1),t(),n&&n()}catch(K){console.error("Error deleting model:",K)}finally{d(!1)}}},I=async()=>{if(i){f(!0);try{const K=ao(`/shared/model/${i.id}`);await navigator.clipboard.writeText(K),y(!0)}catch(K){console.error("Error sharing model:",K);const me=ao(`/shared/model/${i.id}`),Y=document.createElement("textarea");Y.value=me,document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y),y(!0)}finally{f(!1)}}},b=async()=>{u(!1),t(),r&&await r()};return!e||!E?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:v,children:o.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:(()=>{var me,Y,$;if(i.image_url&&typeof i.image_url=="string"&&i.image_url.trim()!==""&&i.image_url!=="undefined"&&i.image_url!=="null"&&(i.image_url.startsWith("http")||i.image_url.startsWith("/")))return i.image_url;const K=((Y=(me=i.box)==null?void 0:me.game)==null?void 0:Y.image)||(($=i.game)==null?void 0:$.image);return K&&typeof K=="string"&&K.trim()!==""&&K!=="undefined"&&K!=="null"&&K.startsWith("http")?K:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:i.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:K=>{const me=K.target,Y="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";me.src!==Y&&(console.log("Modal image failed to load:",me.src,"Falling back to default"),me.src=Y)}})}),o.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6 relative",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:i.name}),o.jsx("button",{onClick:()=>u(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:o.jsx(zi,{className:"w-4 h-4"})})]}),i.box?o.jsx("button",{onClick:()=>{t(),s==null||s(i.box)},className:"text-base text-secondary-text mb-3 hover:text-amber-600 transition-colors",children:i.box.name}):null,o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(A=(T=i.box)==null?void 0:T.game)!=null&&A.icon||(R=i.game)!=null&&R.icon?o.jsx("img",{src:((q=(Q=i.box)==null?void 0:Q.game)==null?void 0:q.icon)||((ne=i.game)==null?void 0:ne.icon),alt:`${((F=(ee=i.box)==null?void 0:ee.game)==null?void 0:F.name)||((J=i.game)==null?void 0:J.name)||"Unknown Game"} icon`,className:"object-cover rounded max-h-[32px]",onError:K=>{const me=K.target;console.warn("Game icon failed to load:",me.src,"Falling back to letter icon"),me.style.display="none";const Y=me.nextElementSibling;Y&&Y.classList.contains("icon-fallback")&&(Y.style.display="flex")},onLoad:K=>{const Y=K.target.nextElementSibling;Y&&Y.classList.contains("icon-fallback")&&(Y.style.display="none")}}):null,o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(z=(k=i.box)==null?void 0:k.game)!=null&&z.icon||(re=i.game)!=null&&re.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((B=(_=i.box)==null?void 0:_.game)==null?void 0:B.name)||((se=i.game)==null?void 0:se.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((U=(O=i.box)==null?void 0:O.game)==null?void 0:U.name)||((xe=i.game)==null?void 0:xe.name)||"Unknown Game"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(Po,{className:"w-5 h-5 text-secondary-text"}),o.jsx("span",{className:"text-base text-text font-medium",children:S(i.status,i.count)})]}),((ce=i.box)==null?void 0:ce.purchase_date)&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(tt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",x(i.box.purchase_date)]})]}),N()&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(nv,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Painted ",x(N())]})]}),w()&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-start space-x-3",children:[o.jsx(Ei,{className:"w-5 h-5 text-secondary-text mt-0.5"}),o.jsx("div",{className:"flex-1",children:o.jsx(Pd,{remarkPlugins:[Md],className:"prose prose-sm max-w-none dark:prose-invert",components:{p:({children:K})=>o.jsx("p",{className:"mb-2 last:mb-0 text-base text-text",children:K}),h1:({children:K})=>o.jsx("h1",{className:"text-lg font-bold mb-2 text-text",children:K}),h2:({children:K})=>o.jsx("h2",{className:"text-base font-bold mb-2 text-text",children:K}),h3:({children:K})=>o.jsx("h3",{className:"text-sm font-bold mb-1 text-text",children:K}),ul:({children:K})=>o.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:K}),ol:({children:K})=>o.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:K}),li:({children:K})=>o.jsx("li",{className:"text-sm text-text",children:K}),strong:({children:K})=>o.jsx("strong",{className:"font-semibold text-text",children:K}),em:({children:K})=>o.jsx("em",{className:"italic text-text",children:K}),code:({children:K})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:K}),pre:({children:K})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-xs font-mono overflow-x-auto mb-2",children:K}),blockquote:({children:K})=>o.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-3 italic mb-2 text-text",children:K})},children:w()})})]})]}),o.jsx("div",{className:"flex justify-center pt-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:I,disabled:m,className:"btn-primary btn-full btn-with-icon",children:[o.jsx(id,{className:"w-4 h-4"}),o.jsx("span",{children:m?"Copying Link...":"Share Model"})]}),o.jsx("button",{onClick:C,className:"btn-danger-outline",children:"Delete this model"})]})})]})]})}),o.jsx(tk,{isOpen:a,onClose:()=>l(!1),onConfirm:P,modelName:i.name,loading:h}),o.jsx(WC,{isOpen:c,onClose:()=>u(!1),onModelUpdated:b,model:i}),o.jsx(GC,{message:"A share link has been copied to your clipboard",isVisible:p,onClose:()=>y(!1)})]})}function KC({isOpen:e,onClose:t,onConfirm:n,boxName:r,loading:s=!1}){if(!e)return null;const i=a=>{a.target===a.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:i,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Are you sure you want to delete ",r,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"This cannot be undone. If you've added images or notes, these will be deleted as well."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:s,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:s,className:"btn-danger btn-flex",children:s?"Deleting...":"Delete Box"})]})]})})}function JC({isOpen:e,onClose:t,onModelsAdded:n,onAddNewModel:r,box:s}){var I;const[i,a]=j.useState([]),[l,c]=j.useState(new Set),[u,h]=j.useState(!0),[d,m]=j.useState(!1),[f,p]=j.useState(null),{user:y}=st();j.useEffect(()=>{e&&y&&E()},[e,y]);const E=async()=>{try{h(!0);const{data:b,error:T}=await W.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          box_id,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("user_id",y==null?void 0:y.id).is("box_id",null).order("created_at",{ascending:!1});if(T)throw T;const A=(b||[]).sort((R,Q)=>{var ee,F;const q=R.game_id===((ee=s.game)==null?void 0:ee.id),ne=Q.game_id===((F=s.game)==null?void 0:F.id);return q&&!ne?-1:!q&&ne?1:R.name.localeCompare(Q.name)});a(A)}catch(b){p(b instanceof Error?b.message:"Failed to fetch models")}finally{h(!1)}},g=b=>{c(T=>{const A=new Set(T);return A.has(b)?A.delete(b):A.add(b),A})},v=async()=>{if(l.size!==0){m(!0),p(null);try{const b=Array.from(l),{error:T}=await W.from("models").update({box_id:s.id}).in("id",b);if(T)throw T;n(),t(),c(new Set)}catch(b){p(b instanceof Error?b.message:"Failed to add models to box")}finally{m(!1)}}},x=()=>{try{localStorage.setItem("mini-myths-temp-box-context",JSON.stringify({id:s.id,name:s.name,game:s.game}))}catch(b){console.error("Error storing box context:",b)}r(),t()},S=b=>{switch(b){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},N=b=>{var A;if(b.image_url&&typeof b.image_url=="string"&&b.image_url.trim()!==""&&b.image_url!=="undefined"&&b.image_url!=="null"&&(b.image_url.startsWith("http")||b.image_url.startsWith("/")))return{src:b.image_url,isGameFallback:!1};const T=(A=b.game)==null?void 0:A.icon;return T&&typeof T=="string"&&T.trim()!==""&&T!=="undefined"&&T!=="null"&&T.startsWith("http")?{src:T,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},w=i.filter(b=>{var T;return b.game_id===((T=s.game)==null?void 0:T.id)}),C=i.filter(b=>{var T;return b.game_id!==((T=s.game)==null?void 0:T.id)});if(!e)return null;const P=b=>{b.target===b.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:P,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-title",children:["Add Models to Collection: ",s.name]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),f&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:f})}),u?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border---color-brand mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"Loading models..."})]}):i.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Mn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text mb-4",children:"No unboxed models found in your collection."}),o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"All your models are already assigned to collections."}),o.jsx("button",{onClick:x,className:"btn-primary-sm",children:"Add new model to collection"})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-secondary-text mb-6",children:"Select models to add to this box. Models will be moved from their current unboxed state."}),o.jsxs("div",{className:"space-y-6 mb-6",children:[w.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:[((I=s.game)==null?void 0:I.name)||"Same Game"," Models"]}),o.jsx("div",{className:"space-y-2",children:w.map(b=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[o.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&o.jsx(tf,{className:"w-3 h-3"})}),(()=>{const T=N(b);return o.jsx("img",{src:T.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${T.isGameFallback?"opacity-10":""}`,onError:A=>{const R=A.target;R.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${S(b.status)}`,children:b.status})]})]})]},b.id))})]}),C.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-title mb-3 uppercase tracking-wide",children:"Other Models"}),o.jsx("div",{className:"space-y-2",children:C.map(b=>{var T;return o.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border-custom rounded-lg hover:bg-bg-secondary transition-colors",children:[o.jsx("button",{type:"button",onClick:()=>g(b.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${l.has(b.id)?"bg-brand border---color-brand text-white":"border-border-custom hover:border---color-brand"}`,children:l.has(b.id)&&o.jsx(tf,{className:"w-3 h-3"})}),(()=>{const A=N(b);return o.jsx("img",{src:A.src,alt:b.name,className:`w-12 h-12 object-cover rounded ${A.isGameFallback?"opacity-10":""}`,onError:R=>{const Q=R.target;Q.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:b.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:"text-xs text-secondary-text",children:((T=b.game)==null?void 0:T.name)||"Unknown Game"}),o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsxs("span",{className:"text-xs text-secondary-text",children:[b.count," model",b.count!==1?"s":""]}),b.status!=="None"&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${S(b.status)}`,children:b.status})]})]})]})]},b.id)})})]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border-custom",children:[o.jsx("button",{onClick:t,disabled:d,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:v,disabled:l.size===0||d,className:"btn-primary btn-flex",children:d?"Adding...":`Add ${l.size} Model${l.size!==1?"s":""}`})]})]})]})})}function QC({isOpen:e,onClose:t,onBoxUpdated:n,box:r}){var me;const[s,i]=j.useState({name:"",game_id:"",purchase_date:"",image_url:""}),[a,l]=j.useState([]),[c,u]=j.useState(null),[h,d]=j.useState(!1),[m,f]=j.useState(null),[p,y]=j.useState(null),[E,g]=j.useState(!1),[v,x]=j.useState(!1),[S,N]=j.useState(""),[w,C]=j.useState(!1),[P,I]=j.useState(!1),[b,T]=j.useState(!1),[A,R]=j.useState([]),[Q,q]=j.useState(""),[ne,ee]=j.useState([]),[F,J]=j.useState(!1);j.useEffect(()=>{var Y;r&&i({name:r.name,game_id:r.game_id||((Y=r.game)==null?void 0:Y.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""})},[r]),j.useEffect(()=>{e&&k()},[e]),j.useEffect(()=>{e&&r&&k()},[e,r]);const k=async()=>{try{const{data:Y,error:$}=await W.from("games").select("id, name, icon").order("name");if($)throw $;l(Y||[])}catch(Y){console.error("Error fetching games:",Y)}},z=Y=>{var de;const $=(de=Y.target.files)==null?void 0:de[0];if($){if(!js($)){alert("Please select a valid image file");return}u($),f($),d(!0)}},re=Y=>{y(Y),d(!1),f(null)},_=()=>{C(!0),y(null),u(null)},B=async()=>{if(s.name.trim()){T(!0),R([]),ee([]);try{const Y=a.find(ae=>ae.id===s.game_id),$=(Y==null?void 0:Y.name)||"",de=`${s.name.trim()} ${$}`.trim(),ge=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:de,count:6})});if(!ge.ok)throw new Error("Failed to search for images");const te=(await ge.json()).images||[];R(te),ee(te),I(!0)}catch(Y){console.error("Error searching for images:",Y),I(!1)}finally{T(!1)}}},se=Y=>{q(Y),I(!1)},O=async()=>{if(s.name.trim()){J(!0);try{const Y=a.find(H=>H.id===s.game_id),$=(Y==null?void 0:Y.name)||"",de=`${s.name.trim()} ${$}`.trim();console.log("Finding more images with exclude:",ne);const ge=await fetch("https://dthxptbozocrbvmhwvao.supabase.co/functions/v1/search-images",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0aHhwdGJvem9jcmJ2bWh3dmFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTY0MzMsImV4cCI6MjA3MDg3MjQzM30.gFt4oRFZ7Mh4y8DgeKNbcKKDwTYjEdXRoBlqTNjvdRg","Content-Type":"application/json"},body:JSON.stringify({query:de,count:6,exclude:ne})});if(!ge.ok)throw new Error("Failed to search for more images");const te=(await ge.json()).images||[];console.log("Received additional images:",te),console.log("Previous results count:",ne.length),console.log("New results count:",te.length);const ae=te.filter(H=>!ne.includes(H));console.log("Unique new images after filtering:",ae),R(ae),ee([...ne,...ae])}catch(Y){console.error("Error searching for more images:",Y)}finally{J(!1)}}},U=async(Y,$,de)=>{const ge=(c==null?void 0:c.name.split(".").pop())||"jpg",Me=`${de}/${Date.now()}-${Math.random().toString(36).substring(2)}.${ge}`,{data:te,error:ae}=await W.storage.from($).upload(Me,Y);if(ae)throw ae;const{data:H}=W.storage.from($).getPublicUrl(te.path);return H.publicUrl},xe=async Y=>{if(Y.preventDefault(),!!r){g(!0),N("");try{let $=s.image_url;if(w){if(s.image_url&&s.image_url.includes("supabase"))try{const ge=s.image_url.split("/"),Me=ge.findIndex(te=>te==="model-images");if(Me!==-1){const te=ge.slice(Me+1).join("/");await W.storage.from("model-images").remove([te])}}catch(ge){console.warn("Failed to delete old image:",ge)}$=null}else if(Q)$=Q;else if(p){x(!0);const ge=await In(p,1200,1200,.8);$=await U(ge,"model-images","boxes")}const{error:de}=await W.from("boxes").update({name:s.name,game_id:s.game_id||null,purchase_date:s.purchase_date||null,image_url:$}).eq("id",r.id);if(de)throw de;n()}catch($){N($ instanceof Error?$.message:"Failed to update box")}finally{g(!1),x(!1)}}},ce=()=>{var Y;r&&i({name:r.name,game_id:r.game_id||((Y=r.game)==null?void 0:Y.id)||"",purchase_date:r.purchase_date||"",image_url:r.image_url||""}),u(null),y(null),C(!1),q(""),I(!1),R([]),ee([]),N("")};if(!e||!r)return null;const K=Y=>{Y.target===Y.currentTarget&&t()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",onClick:K,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Edit Collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),o.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxName",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collection Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"text",id:"boxName",value:s.name,onChange:Y=>i({...s,name:Y.target.value}),placeholder:"Enter collection name...",className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"game",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Game"}),o.jsx(Hi,{games:a,selectedGame:s.game_id||"",onGameSelect:Y=>i({...s,game_id:Y}),placeholder:"Choose a Game"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"purchaseDate",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Purchase Date"}),o.jsxs("div",{className:"relative",children:[o.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"date",id:"purchaseDate",value:s.purchase_date,onChange:Y=>i({...s,purchase_date:Y.target.value}),className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"boxImage",className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Box Image"}),s.image_url&&!w&&o.jsx("div",{className:"mb-3 p-3 border border-border-custom rounded-lg bg-bg-secondary",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:s.image_url,alt:"Current box image",className:"w-12 h-12 object-cover rounded",onError:Y=>{const $=Y.target;$.style.display="none"}}),o.jsx("span",{className:"text-sm text-secondary-text",children:"Current image"})]}),o.jsx("button",{type:"button",onClick:_,className:"text-icon hover:text-icon-hover transition-colors p-1",title:"Delete current image",children:o.jsx(Or,{className:"w-4 h-4"})})]})}),w&&o.jsx("div",{className:"mb-3 p-3 border border-red-300 rounded-lg bg-red-50",children:o.jsx("p",{className:"text-sm text-red-700",children:" Image will be deleted when you save changes"})}),o.jsxs("div",{className:"relative",children:[o.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-icon w-5 h-5"}),o.jsx("input",{type:"file",id:"boxImage",accept:"image/*",onChange:z,className:"w-full pl-12 pr-4 py-3 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 bg-bg-primary text-text"})]}),p&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" New image ready for upload"}),!s.image_url&&!p&&!Q&&s.name.trim()&&o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",onClick:B,disabled:b,className:"btn-secondary btn-full",children:b?"Searching for images...":"Find images for this box"})}),Q&&o.jsx("div",{className:"mt-3 p-3 border border-green-300 rounded-lg bg-green-50",children:o.jsx("p",{className:"text-sm text-green-700",children:" Image selected from search results"})})]}),S&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:S}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:ce,className:"btn-ghost btn-flex",children:"Discard Changes"}),o.jsx("button",{type:"submit",disabled:E||v,className:"btn-primary btn-flex",children:v?"Processing...":E?"Saving...":"Save Changes"})]})]})]})}),m&&o.jsx(Ir,{isOpen:h,onClose:()=>{d(!1),f(null),u(null)},onCrop:re,imageFile:m}),P&&o.jsx(fx,{isOpen:P,onClose:()=>I(!1),images:A,onImageSelect:se,searchQuery:`${s.name} ${((me=a.find(Y=>Y.id===s.game_id))==null?void 0:me.name)||""}`.trim(),onFindMoreImages:O,isLoadingMore:F})]})}function YC({isOpen:e,onClose:t,onConfirm:n,modelName:r,boxName:s,loading:i=!1}){if(!e)return null;const a=l=>{l.target===l.currentTarget&&t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:a,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Remove ",r," from ",s,"?"]}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-base text-secondary-text mb-6",children:"Are you sure you want to remove this model from this box? This won't delete the model or the box from your collection."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,disabled:i,className:"btn-ghost btn-flex",children:"Cancel"}),o.jsx("button",{onClick:n,disabled:i,className:"btn-primary btn-flex",children:i?"Removing...":"Remove from Box"})]})]})})}function XC({isOpen:e,onClose:t,onCollectionUpdated:n,box:r}){const[s,i]=j.useState(!1),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[h,d]=j.useState("");j.useEffect(()=>{r&&i(r.public??!1)},[r]);const m=async()=>{if(r){l(!0),d("");try{const{error:y}=await W.from("boxes").update({public:!s}).eq("id",r.id);if(y)throw y;i(!s),n==null||n()}catch(y){d(y instanceof Error?y.message:"Failed to update collection visibility")}finally{l(!1)}}},f=async()=>{if(r){u(!0),d("");try{const y=ao(`/shared/collection/${r.id}`);await navigator.clipboard.writeText(y),console.log("Collection share link copied to clipboard")}catch(y){console.error("Error copying URL:",y);const E=ao(`/shared/collection/${r.id}`),g=document.createElement("textarea");g.value=E,document.body.appendChild(g),g.select(),document.execCommand("copy"),document.body.removeChild(g),console.log("Collection share link copied to clipboard (fallback)")}finally{u(!1)}}},p=y=>{y.target===y.currentTarget&&t()};return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",onClick:p,children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-title",children:"Share this collection"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text transition-colors",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4",children:o.jsx("h3",{className:"font-semibold text-text mb-2",children:r.name})}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(id,{className:"w-5 h-5 text-icon"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-input-label",children:"Make Public"}),o.jsx("p",{className:"text-xs text-secondary-text",children:"Allow anyone to view this collection"})]})]}),o.jsx("button",{onClick:m,disabled:a,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 disabled:opacity-50 ${s?"bg-brand":"bg-secondary-text"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})}),s&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Fg,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm text-green-800",children:"This collection is now public and can be viewed by anyone with the link."})]})}),!s&&o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ev,{className:"w-4 h-4 text-gray-600"}),o.jsx("span",{className:"text-sm text-gray-800",children:"This collection is private and only visible to you."})]})}),o.jsxs("button",{onClick:f,disabled:c,className:"btn-secondary btn-full btn-with-icon",children:[o.jsx(Yb,{className:"w-4 h-4"}),o.jsx("span",{children:c?"Copying...":"Copy URL"})]}),h&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:h}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:t,className:"btn-secondary",children:"Done"})})]})]})})}function ZC({isOpen:e,onClose:t,onBoxDeleted:n,onModelsUpdated:r,onViewModel:s,onAddNewModel:i,box:a}){var xe,ce,K,me,Y;const[l,c]=Ce.useState(!1),[u,h]=Ce.useState(!1),[d,m]=Ce.useState(!1),[f,p]=Ce.useState(!1),[y,E]=Ce.useState({isOpen:!1,model:null}),[g,v]=Ce.useState(!1),[x,S]=Ce.useState(!1),[N,w]=Ce.useState(!1),[C,P]=Ce.useState([]),[I,b]=Ce.useState(!0),[T,A]=Ce.useState(null);Ce.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),Ce.useEffect(()=>{e&&a&&R()},[e,a]);const R=async()=>{if(a){b(!0),A(null);try{const{data:$,error:de}=await W.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",a.id).order("created_at",{ascending:!1});if(de)throw de;P($||[])}catch($){A($ instanceof Error?$.message:"Failed to fetch models")}finally{b(!1)}}},Q=()=>{h(!1),R(),r==null||r()},q=()=>{h(!1),v(!0),t()};Ce.useEffect(()=>{g&&!e&&(v(!1),i==null||i((a==null?void 0:a.id)||null))},[g,e,i,a==null?void 0:a.id]);const ne=$=>{E({isOpen:!0,model:$})},ee=async()=>{if(y.model){w(!0);try{const{error:$}=await W.from("models").update({box_id:null}).eq("id",y.model.id);if($)throw $;R(),r==null||r(),E({isOpen:!1,model:null})}catch($){console.error("Error removing model from box:",$)}finally{w(!1)}}},F=$=>{t(),s==null||s($)},J=()=>{m(!1),t(),r&&r()};if(!e||!a)return null;const k=$=>{$.target===$.currentTarget&&t()},z=$=>new Date($).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),re=()=>{var de;if(a.image_url&&typeof a.image_url=="string"&&a.image_url.trim()!==""&&a.image_url!=="undefined"&&a.image_url!=="null"&&(a.image_url.startsWith("http")||a.image_url.startsWith("/")))return a.image_url;const $=(de=a.game)==null?void 0:de.image;return $&&typeof $=="string"&&$.trim()!==""&&$!=="undefined"&&$!=="null"&&$.startsWith("http")?$:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},_=$=>{switch($){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},B=$=>{var ge;if($.image_url&&typeof $.image_url=="string"&&$.image_url.trim()!==""&&$.image_url!=="undefined"&&$.image_url!=="null"&&($.image_url.startsWith("http")||$.image_url.startsWith("/")))return{src:$.image_url,isGameFallback:!1};const de=(ge=$.game)==null?void 0:ge.icon;return de&&typeof de=="string"&&de.trim()!==""&&de!=="undefined"&&de!=="null"&&de.startsWith("http")?{src:de,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},se=()=>{p(!0)},O=()=>{c(!0)},U=async()=>{if(a){S(!0);try{if(a.image_url&&typeof a.image_url=="string"&&a.image_url.includes("supabase")){const de=a.image_url.split("/"),ge=de.findIndex(Me=>Me==="model-images");if(ge!==-1){const Me=de.slice(ge+1).join("/");await W.storage.from("model-images").remove([Me])}}const{error:$}=await W.from("boxes").delete().eq("id",a.id);if($)throw $;c(!1),t(),n&&n()}catch($){console.error("Error deleting box:",$)}finally{S(!1)}}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:k,children:o.jsxs("div",{className:"bg-modal-bg max-w-2xl w-full overflow-y-auto md:rounded-lg md:max-w-2xl md:max-h-[90vh] fixed inset-0 md:relative md:inset-auto h-screen md:h-auto",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:re(),alt:a.name,className:"w-full max-h-[60%] object-cover",loading:"lazy",onError:$=>{const de=$.target,ge="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";de.src!==ge&&(console.log("Box modal image failed to load:",de.src,"Falling back to default"),de.src=ge)}})}),o.jsx("button",{onClick:t,className:"fixed top-4 right-4 md:absolute text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 rounded-full p-2 z-20",children:o.jsx(Ne,{className:"w-6 h-6 text-icon"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6 relative",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:a.name}),o.jsx("button",{onClick:()=>m(!0),className:"p-1 text-secondary-text hover:text-text transition-colors rounded",children:o.jsx(zi,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[(xe=a.game)!=null&&xe.icon?o.jsx("img",{src:a.game.icon,alt:`${a.game.name} icon`,className:"object-cover rounded max-h-[32px]",onError:$=>{const de=$.target;console.warn("Game icon failed to load:",de.src,"Falling back to letter icon"),de.style.display="none";const ge=de.nextElementSibling;ge&&ge.classList.contains("icon-fallback")&&(ge.style.display="flex")},onLoad:$=>{const ge=$.target.nextElementSibling;ge&&ge.classList.contains("icon-fallback")&&(ge.style.display="none")}}):null,o.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(ce=a.game)!=null&&ce.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((K=a.game)==null?void 0:K.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-lg font-semibold text-secondary-text",children:((me=a.game)==null?void 0:me.name)||"Unknown Game"})]})]}),o.jsx("div",{className:"space-y-3",children:a.purchase_date&&o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center space-x-3",children:[o.jsx(tt,{className:"w-5 h-5 text-secondary-text"}),o.jsxs("span",{className:"text-base text-text font-medium",children:["Purchased ",z(a.purchase_date)]})]})}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-title mb-4",children:"Models in this Collection"}),I?o.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map(($,de)=>o.jsx("div",{className:"bg-bg-secondary rounded-lg p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]})]})},de))}):T?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-600",children:T})}):C.length===0?o.jsxs("div",{className:"text-center py-8 bg-bg-secondary rounded-lg",children:[o.jsx(Mn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No models in this collection yet."}),o.jsx("p",{className:"text-sm text-secondary-text mt-2",children:'Use the "Add Models to Collection" button to add some!'})]}):o.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:C.map($=>o.jsxs("div",{className:"bg-bg-secondary rounded-lg p-4 flex items-center justify-between hover:bg-bg-primary transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(()=>{const de=B($);return o.jsx("img",{src:de.src,alt:$.name,className:`w-12 h-12 object-cover rounded ${de.isGameFallback?"opacity-10":""}`,onError:ge=>{const Me=ge.target;Me.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})(),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-text truncate",children:$.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:"text-xs text-secondary-text",children:[$.count," model",$.count!==1?"s":""]}),$.status!=="None"&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs text-secondary-text",children:""}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${_($.status)}`,children:$.status})]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>ne($),className:"p-2 text-icon hover:text-icon-hover transition-colors",children:o.jsx(Or,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>F($),className:"p-2 text-secondary-text hover:text-text transition-colors",children:o.jsx(tr,{className:"w-4 h-4"})})]})]},$.id))})]}),o.jsx("div",{className:"flex justify-center pt-6",children:o.jsxs("div",{className:"space-y-3 w-full",children:[o.jsxs("button",{onClick:()=>h(!0),className:"btn-primary btn-full btn-with-icon",children:[o.jsx(Fi,{className:"w-4 h-4"}),o.jsx("span",{children:"Add Models to Collection"})]}),o.jsxs("button",{onClick:se,className:"btn-secondary btn-full btn-with-icon",children:[o.jsx(id,{className:"w-4 h-4"}),o.jsx("span",{children:"Share Collection"})]}),o.jsx("button",{onClick:O,className:"btn-danger-outline btn-full",children:"Delete Collection"})]})})]})]})}),o.jsx(KC,{isOpen:l,onClose:()=>c(!1),onConfirm:U,boxName:a.name,loading:x}),o.jsx(JC,{isOpen:u,onClose:()=>h(!1),onModelsAdded:Q,onAddNewModel:q,box:a}),o.jsx(QC,{isOpen:d,onClose:()=>m(!1),onBoxUpdated:J,box:a}),o.jsx(YC,{isOpen:y.isOpen,onClose:()=>E({isOpen:!1,model:null}),onConfirm:ee,modelName:((Y=y.model)==null?void 0:Y.name)||"",boxName:(a==null?void 0:a.name)||"",loading:N}),o.jsx(XC,{isOpen:f,onClose:()=>p(!1),onCollectionUpdated:J,box:a})]})}function eE({isOpen:e,onClose:t}){const[n,r]=j.useState(""),[s,i]=j.useState(""),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[h,d]=j.useState(!1),[m,f]=j.useState(""),[p,y]=j.useState(!1),{updatePassword:E}=st(),g=async v=>{if(v.preventDefault(),d(!0),f(""),n.length<6){f("Password must be at least 6 characters long"),d(!1);return}if(n!==s){f("Passwords do not match"),d(!1);return}try{const{error:x}=await E(n);x?f(x.message):(y(!0),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{t(),r(""),i(""),y(!1)},2e3))}catch{f("An unexpected error occurred")}finally{d(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-modal-bg rounded-lg max-w-md w-full p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-title",children:"Set New Password"}),o.jsx("button",{onClick:t,className:"text-secondary-text hover:text-text",children:o.jsx(Ne,{className:"w-6 h-6"})})]}),p?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-green-600 text-lg font-semibold mb-2",children:"Password updated successfully!"}),o.jsx("p",{className:"text-secondary-text",children:"You can now use your new password to log in."})]}):o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx("p",{className:"text-secondary-text text-sm",children:"Please set a new password for your account."}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:a?"text":"password",id:"newPassword",value:n,onChange:v=>r(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),o.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:a?o.jsx(Ac,{className:"w-4 h-4"}):o.jsx(Mc,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-input-label font-overpass mb-1",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:c?"text":"password",id:"confirmPassword",value:s,onChange:v=>i(v.target.value),required:!0,className:"w-full px-3 py-2 pr-10 border border-border-custom rounded-lg focus:ring-2 focus:ring---color-brand focus:border---color-brand bg-bg-primary text-text"}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-icon hover:text-icon-hover",children:c?o.jsx(Ac,{className:"w-4 h-4"}):o.jsx(Mc,{className:"w-4 h-4"})})]})]}),m&&o.jsx("div",{className:"text-red-600 text-sm",children:m}),o.jsx("button",{type:"submit",disabled:h,className:"btn-primary btn-full",children:h?"Updating Password...":"Update Password"})]})]})}):null}function tE(){const[e,t]=j.useState(null),[n,r]=j.useState(!0),{user:s}=st();return j.useEffect(()=>{(async()=>{try{const a=window.location.hash,l=new URLSearchParams(window.location.search);if(a.includes("access_token")||l.has("code"))setTimeout(()=>{r(!1),window.location.href=oi()},1e3);else if(a.includes("error")){const c=new URLSearchParams(a.substring(1)).get("error_description");t(c||"Authentication failed"),r(!1)}else t("Invalid authentication callback"),r(!1)}catch(a){console.error("Auth callback error:",a),t("Authentication failed"),r(!1)}})()},[]),j.useEffect(()=>{s&&!n&&(window.location.href=oi())},[s,n]),n?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),o.jsx("p",{className:"text-text",children:"Completing authentication..."})]})}):e?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[o.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-2xl font-bold text-title mb-4",children:"Authentication Failed"}),o.jsx("p",{className:"text-red-500 mb-6",children:e}),o.jsx("button",{onClick:()=>window.location.href=oi(),className:"btn-primary",children:"Return to Home"})]})}):null}function by({isExpanded:e,onClick:t}){return o.jsx("button",{onClick:t,className:`w-14 h-14 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 flex items-center justify-center ${e?"bg-brand-hover text-white":"bg-brand hover:bg-brand-hover text-white"}`,children:e?o.jsx(Ne,{className:"w-6 h-6 transition-transform duration-200"}):o.jsx(Fi,{className:"w-6 h-6 transition-transform duration-200"})})}function au({icon:e,label:t,onClick:n,animationClass:r="animate-fab-slide-in"}){return o.jsxs("button",{onClick:n,className:`flex items-center space-x-3 bg-brand hover:bg-brand-hover text-white px-8 py-3 rounded-full shadow-lg transition-all duration-200 transform hover:scale-105 ${r}`,children:[o.jsx(e,{className:"w-8 h-8"}),o.jsx("span",{className:"text-sm font-medium",children:t})]})}function nE({onAddModel:e,onAddCollection:t}){const[n,r]=j.useState(!1),s=()=>{r(!n)},i=()=>{r(!1),e()},a=()=>{r(!1),t()};return o.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[n&&o.jsxs("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:[o.jsx(au,{icon:_n,label:"Add Model",onClick:i,animationClass:"animate-fab-slide-in-delayed"}),o.jsx(au,{icon:Mn,label:"Add Collection",onClick:a,animationClass:"animate-fab-slide-in"})]}),o.jsx(by,{isExpanded:n,onClick:s})]})}function rE({onNewBooking:e}){const[t,n]=j.useState(!1),r=()=>{n(!t)},s=()=>{n(!1),e()};return o.jsxs("div",{className:"fixed bottom-20 right-6 z-40",children:[t&&o.jsx("div",{className:"absolute bottom-16 right-0 flex flex-col space-y-3",children:o.jsx(au,{icon:tt,label:"New Table Booking",onClick:s,animationClass:"animate-fab-slide-in"})}),o.jsx(by,{isExpanded:t,onClick:r})]})}function sE(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{user:a}=st();j.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await W.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          game_id,
          notes,
          box:boxes(
            id,
            name,
            purchase_date,
            game:games(id, name, icon, image)
          ),
          game:games(id, name, icon, image)
        `).eq("user_id",a==null?void 0:a.id).order("created_at",{ascending:!1});if(u)throw u;const h=(c||[]).map(d=>({...d,box:d.box&&Array.isArray(d.box)?d.box[0]:d.box,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch models")}finally{r(!1)}};return{models:e,loading:n,error:s,refetch:l}}function iE(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{user:a}=st();j.useEffect(()=>{if(!a){t([]),r(!1);return}l()},[a]);const l=async()=>{try{const{data:c,error:u}=await W.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(id, name, icon, image)
        `).eq("user_id",a==null?void 0:a.id).order("created_at",{ascending:!1}).limit(10);if(u)throw u;const h=(c||[]).map(d=>({...d,game:d.game&&Array.isArray(d.game)?d.game[0]:d.game}));t(h)}catch(c){i(c instanceof Error?c.message:"Failed to fetch boxes")}finally{r(!1)}};return{boxes:e,loading:n,error:s,refetch:l}}const zl="2025-08-26 00:53:40 UTC",vm=()=>({timestamp:zl,date:new Date(zl).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:new Date(zl).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})});function aE({games:e,boxes:t,models:n,selectedBoxes:r,selectedGames:s,selectedStatuses:i,searchQuery:a,onBoxesChange:l,onGamesChange:c,onStatusesChange:u,onSearchChange:h,onClearFilters:d}){const m=r.length>0||s.length>0||i.length>0||a.length>0,f=()=>{const w=new Map;return n.forEach(C=>{if(C.box){const P=C.box.id,I=C.box.name,b=w.get(P)||{name:I,count:0};b.count++,w.set(P,b)}}),Array.from(w.entries()).map(([C,{name:P,count:I}])=>({id:C,name:P,count:I})).sort((C,P)=>P.count-C.count)},p=()=>{const w=new Map;return n.forEach(C=>{var b,T,A,R,Q,q;const P=((T=(b=C.box)==null?void 0:b.game)==null?void 0:T.id)||((A=C.game)==null?void 0:A.id),I=((Q=(R=C.box)==null?void 0:R.game)==null?void 0:Q.name)||((q=C.game)==null?void 0:q.name);if(P&&I){const ne=w.get(P)||{name:I,count:0};ne.count++,w.set(P,ne)}}),Array.from(w.entries()).map(([C,{name:P,count:I}])=>({id:C,name:P,count:I})).sort((C,P)=>P.count-C.count)},y=()=>{const w=new Map;return n.forEach(C=>{const P=w.get(C.status)||0;w.set(C.status,P+1)}),Array.from(w.entries()).map(([C,P])=>({status:C,count:P})).sort((C,P)=>P.count-C.count)},E=f(),g=p(),v=y(),x=w=>{const C=r.includes(w)?r.filter(P=>P!==w):[...r,w];l(C)},S=w=>{const C=s.includes(w)?s.filter(P=>P!==w):[...s,w];c(C)},N=w=>{const C=i.includes(w)?i.filter(P=>P!==w):[...i,w];u(C)};return o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rg,{className:"w-5 h-5 text-secondary-text"}),o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),m&&o.jsxs("button",{onClick:d,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[o.jsx(Ne,{className:"w-4 h-4 text-icon"}),o.jsx("span",{children:"Clear all"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Models"}),o.jsx("input",{type:"text",value:a,onChange:w=>h(w.target.value),placeholder:"Search by model name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Collections"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:E.map(w=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r.includes(w.id),onChange:()=>x(w.id),className:"rounded border-border-custom text---color-brand focus:ring---color-brand"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",w.count,")"]})]},w.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:g.map(w=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.includes(w.id),onChange:()=>S(w.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",w.count,")"]})]},w.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Statuses"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:v.map(({status:w,count:C})=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.includes(w),onChange:()=>N(w),className:"rounded border-border-custom text-green-500 focus:ring-green-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:w}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",C,")"]})]},w))})]})]}),m&&o.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[a&&o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:['Search: "',a,'"']}),o.jsx("button",{onClick:()=>h(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]}),r.map(w=>{var P;const C=((P=E.find(I=>I.id===w))==null?void 0:P.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Collection: ",C]}),o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]},w)}),s.map(w=>{var P;const C=((P=g.find(I=>I.id===w))==null?void 0:P.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Game: ",C]}),o.jsx("button",{onClick:()=>S(w),className:"text-blue-600 hover:text-blue-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]},w)}),i.map(w=>o.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Status: ",w]}),o.jsx("button",{onClick:()=>N(w),className:"text-green-600 hover:text-green-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]},w))]})})]})}function oE({games:e,boxes:t,selectedGames:n,searchQuery:r,onGamesChange:s,onSearchChange:i,onClearFilters:a}){const l=n.length>0||r.length>0,u=(()=>{const d=new Map;return t.forEach(m=>{if(m.game){const f=m.game.id,p=m.game.name,y=d.get(f)||{name:p,count:0};y.count++,d.set(f,y)}}),Array.from(d.entries()).map(([m,{name:f,count:p}])=>({id:m,name:f,count:p})).sort((m,f)=>f.count-m.count)})(),h=d=>{const m=n.includes(d)?n.filter(f=>f!==d):[...n,d];s(m)};return o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rg,{className:"w-5 h-5 text-secondary-text"}),o.jsx("h3",{className:"text-lg font-semibold text-title",children:"Filters"})]}),l&&o.jsxs("button",{onClick:a,className:"flex items-center space-x-1 text-sm text-secondary-text hover:text-text transition-colors",children:[o.jsx(Ne,{className:"w-4 h-4 text-icon"}),o.jsx("span",{children:"Clear all"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Search Collections"}),o.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"Search by collection name...",className:"w-full px-3 py-2 border border-border-custom rounded-lg bg-bg-primary text-text placeholder-secondary-text focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-input-label font-overpass mb-2",children:"Games"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border border-border-custom rounded-lg bg-bg-primary",children:u.map(d=>o.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 hover:bg-bg-secondary cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:n.includes(d.id),onChange:()=>h(d.id),className:"rounded border-border-custom text-blue-500 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-text flex-1",children:d.name}),o.jsxs("span",{className:"text-xs text-secondary-text",children:["(",d.count,")"]})]},d.id))})]})}),l&&o.jsx("div",{className:"mt-4 pt-4 border-t border-border-custom",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:['Search: "',r,'"']}),o.jsx("button",{onClick:()=>i(""),className:"text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]}),n.map(d=>{var f;const m=((f=u.find(p=>p.id===d))==null?void 0:f.name)||"";return o.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[o.jsxs("span",{children:["Game: ",m]}),o.jsx("button",{onClick:()=>h(d),className:"text-blue-600 hover:text-blue-800 transition-colors",children:o.jsx(Ne,{className:"w-3 h-3 text-icon"})})]},d)})]})})]})}const lE="/battleplanapp/Battleplan-Logo-Purple.svg";function cE({collectionId:e}){var N,w,C,P;const[t,n]=j.useState(null),[r,s]=j.useState([]),[i,a]=j.useState(!0),[l,c]=j.useState(null),[u,h]=j.useState(!1),[d,m]=j.useState(!1),{isDarkMode:f,toggleDarkMode:p}=ux();j.useEffect(()=>{const I=b=>{const T=b.target;d&&!T.closest(".profile-dropdown")&&m(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[d]),j.useEffect(()=>{y()},[e]);const y=async()=>{try{a(!0),c(null);const{data:I,error:b}=await W.from("boxes").select(`
          id,
          name,
          purchase_date,
          image_url,
          public,
          game:games(
            id,
            name,
            icon,
            image
          )
        `).eq("id",e).eq("public",!0).single();if(b){if(b.code==="PGRST116")h(!0);else throw b;return}n(I);const{data:T,error:A}=await W.from("models").select(`
          id,
          name,
          status,
          count,
          image_url,
          notes,
          game:games(
            id,
            name,
            icon
          )
        `).eq("box_id",e).order("created_at",{ascending:!1});if(A)throw A;s(T||[])}catch(I){c(I instanceof Error?I.message:"Failed to load collection")}finally{a(!1)}},E=I=>new Date(I).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),g=()=>{var b;if(!t)return"";if(t.image_url&&typeof t.image_url=="string"&&t.image_url.trim()!==""&&t.image_url!=="undefined"&&t.image_url!=="null"&&(t.image_url.startsWith("http")||t.image_url.startsWith("/")))return t.image_url;const I=(b=t.game)==null?void 0:b.image;return I&&typeof I=="string"&&I.trim()!==""&&I!=="undefined"&&I!=="null"&&I.startsWith("http")?I:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"},v=I=>{var T;if(I.image_url&&typeof I.image_url=="string"&&I.image_url.trim()!==""&&I.image_url!=="undefined"&&I.image_url!=="null"&&(I.image_url.startsWith("http")||I.image_url.startsWith("/")))return{src:I.image_url,isGameFallback:!1};const b=(T=I.game)==null?void 0:T.icon;return b&&typeof b=="string"&&b.trim()!==""&&b!=="undefined"&&b!=="null"&&b.startsWith("http")?{src:b,isGameFallback:!0}:{src:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg",isGameFallback:!1}},x=I=>{switch(I){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=()=>{window.history.back()};return i?o.jsx("div",{className:"min-h-screen bg-bg-primary",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),o.jsx("div",{className:"h-64 bg-gray-200 rounded mb-8"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})}):u||l?o.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-title mb-2",children:u?"Collection Not Found":"Error Loading Collection"}),o.jsx("p",{className:"text-secondary-text mb-6",children:u?"This collection may be private or no longer exists.":l||"Something went wrong while loading the collection."}),o.jsx("button",{onClick:S,className:"btn-secondary",children:o.jsx("span",{children:"Go Back"})})]})}):t?o.jsxs("div",{className:"min-h-screen bg-bg-primary",children:[o.jsx("header",{className:"bg-bg-primary shadow-sm border-b border-border-custom relative z-50",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center"}),o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsx("img",{src:lE,alt:"Battleplan",className:"max-h-[300px] w-auto"})}),o.jsxs("div",{className:"relative profile-dropdown",children:[o.jsx("button",{onClick:()=>m(!d),className:"text-secondary-text hover:text-text focus:outline-none p-2",children:o.jsx(_n,{className:"w-6 h-6 text-icon hover:text-icon-hover"})}),d&&o.jsxs("div",{className:"absolute right-0 top-12 bg-bg-primary border border-border-custom rounded-lg shadow-lg py-2 z-[60] min-w-[200px]",children:[o.jsx("button",{onClick:()=>{m(!1),window.location.href="/"},className:"w-full px-4 py-2 text-left text-text hover:bg-bg-secondary transition-colors",children:o.jsx("span",{children:"Log In"})}),o.jsx("div",{className:"border-t border-border-custom my-1"}),o.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[f?o.jsx(zg,{className:"w-5 h-5 text-icon"}):o.jsx($g,{className:"w-5 h-5 text-icon"}),o.jsx("span",{className:"text-base font-semibold text-text",children:f?"Dark Mode":"Light Mode"})]}),o.jsx("button",{onClick:I=>{I.stopPropagation(),p()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2 ${f?"bg-brand":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]})]})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[o.jsx("div",{className:"mb-8",children:o.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:t.name})}),o.jsx("div",{className:"mb-8",children:o.jsx("img",{src:g(),alt:t.name,className:"w-full h-64 object-contain rounded-lg bg-bg-secondary",loading:"lazy",onError:I=>{const b=I.target,T="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";b.src!==T&&(b.src=T)}})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[(N=t.game)!=null&&N.icon?o.jsx("img",{src:t.game.icon,alt:`${t.game.name} icon`,className:"w-12 h-12 object-cover rounded",onError:I=>{const b=I.target;b.style.display="none";const T=b.nextElementSibling;T&&T.classList.contains("icon-fallback")&&(T.style.display="flex")},onLoad:I=>{const T=I.target.nextElementSibling;T&&T.classList.contains("icon-fallback")&&(T.style.display="none")}}):null,o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(w=t.game)!=null&&w.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-sm font-bold",children:(((C=t.game)==null?void 0:C.name)||"Unknown Game").charAt(0)})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-text",children:"Game"}),o.jsx("p",{className:"text-secondary-text",children:((P=t.game)==null?void 0:P.name)||"Unknown Game"})]})]})}),t.purchase_date&&o.jsx("div",{className:"bg-bg-card rounded-lg p-6 border border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tt,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-text",children:"Purchase Date"}),o.jsx("p",{className:"text-secondary-text",children:E(t.purchase_date)})]})]})})]}),o.jsxs("div",{className:"bg-bg-card rounded-lg border border-border-custom overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-border-custom",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Pi,{className:"w-6 h-6 text-secondary-text"}),o.jsxs("h2",{className:"text-xl font-bold text-title",children:["Models (",r.length,")"]})]})}),r.length===0?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(Mn,{className:"w-12 h-12 text-secondary-text mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-text",children:"No models in this collection."})]}):o.jsx("div",{className:"divide-y divide-border-custom",children:r.map(I=>o.jsx("div",{className:"p-6 hover:bg-bg-secondary transition-colors",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:(()=>{const b=v(I);return o.jsx("img",{src:b.src,alt:I.name,className:`w-16 h-16 object-cover rounded ${b.isGameFallback?"opacity-10":""}`,onError:T=>{const A=T.target;A.src="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"}})})()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-text mb-2",children:I.name}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-secondary-text mb-2",children:[I.count&&o.jsxs("span",{children:[I.count," model",I.count!==1?"s":""]}),I.status&&I.status!=="None"&&o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(I.status)}`,children:I.status})]}),I.notes&&o.jsx("div",{className:"text-sm text-secondary-text",children:o.jsx(Pd,{remarkPlugins:[Md],className:"prose prose-sm max-w-none",components:{p:({children:b})=>o.jsx("p",{className:"mb-1 last:mb-0 text-sm text-secondary-text",children:b}),h1:({children:b})=>o.jsx("h1",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h2:({children:b})=>o.jsx("h2",{className:"text-sm font-bold mb-1 text-secondary-text",children:b}),h3:({children:b})=>o.jsx("h3",{className:"text-xs font-bold mb-1 text-secondary-text",children:b}),ul:({children:b})=>o.jsx("ul",{className:"list-disc list-inside mb-1 space-y-0.5",children:b}),ol:({children:b})=>o.jsx("ol",{className:"list-decimal list-inside mb-1 space-y-0.5",children:b}),li:({children:b})=>o.jsx("li",{className:"text-sm text-secondary-text",children:b}),strong:({children:b})=>o.jsx("strong",{className:"font-semibold text-secondary-text",children:b}),em:({children:b})=>o.jsx("em",{className:"italic text-secondary-text",children:b}),code:({children:b})=>o.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs font-mono",children:b}),pre:({children:b})=>o.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded text-xs font-mono overflow-x-auto mb-1",children:b}),blockquote:({children:b})=>o.jsx("blockquote",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-2 italic mb-1 text-secondary-text",children:b})},children:I.notes})})]})]})},I.id))})]})]})]}):null}function uE(){const e=window.location.pathname==="/auth/callback",t=window.location.pathname.match(/^\/shared\/collection\/(.+)$/),n=t?t[1]:null;if(e)return o.jsx(tE,{});if(n)return o.jsx(cE,{collectionId:n});const[r,s]=j.useState("collection"),[i,a]=j.useState("recent"),[l,c]=j.useState(1),[u,h]=j.useState(1),[d,m]=j.useState({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),[f,p]=j.useState({selectedGames:[],searchQuery:""}),[y,E]=j.useState([]),[g,v]=j.useState({isOpen:!1,mode:"login"}),[x,S]=j.useState(!1),[N,w]=j.useState(!1),[C,P]=j.useState(!1),[I,b]=j.useState(!1),[T,A]=j.useState(!1),[R,Q]=j.useState(null),[q,ne]=j.useState({isOpen:!1,model:null}),[ee,F]=j.useState({isOpen:!1,box:null}),{user:J,loading:k,needsPasswordReset:z}=st(),{models:re,loading:_,refetch:B}=sE(),{boxes:se,loading:O,refetch:U}=iE();j.useEffect(()=>{J&&xe()},[J]);const xe=async()=>{try{const{data:D,error:fe}=await W.from("games").select("id, name, icon").order("name");if(fe)throw fe;E(D||[])}catch(D){console.error("Error fetching games:",D)}},ce=6,K=D=>{m(fe=>({...fe,selectedBoxes:D})),c(1)},me=D=>{m(fe=>({...fe,selectedGames:D})),c(1)},Y=D=>{m(fe=>({...fe,selectedStatuses:D})),c(1)},$=()=>{m({selectedBoxes:[],selectedGames:[],selectedStatuses:[],searchQuery:""}),c(1)},de=D=>{p(fe=>({...fe,selectedGames:D})),h(1)},ge=()=>{p({selectedGames:[],searchQuery:""}),h(1)},Me=D=>{m(fe=>({...fe,searchQuery:D})),c(1)},te=D=>{p(fe=>({...fe,searchQuery:D})),h(1)},ae=re.filter(D=>{var fe,jt,Nt,Yt;return!(d.searchQuery&&!D.name.toLowerCase().includes(d.searchQuery.toLowerCase())||d.selectedBoxes.length>0&&!d.selectedBoxes.includes(((fe=D.box)==null?void 0:fe.id)||"")||d.selectedGames.length>0&&!d.selectedGames.includes(((Nt=(jt=D.box)==null?void 0:jt.game)==null?void 0:Nt.id)||"")&&!d.selectedGames.includes(((Yt=D.game)==null?void 0:Yt.id)||"")||d.selectedStatuses.length>0&&!d.selectedStatuses.includes(D.status))}),H=re.filter(D=>D.status==="Painted"),ue=se.filter(D=>{var fe;return!(f.searchQuery&&!D.name.toLowerCase().includes(f.searchQuery.toLowerCase())||f.selectedGames.length>0&&!f.selectedGames.includes(((fe=D.game)==null?void 0:fe.id)||""))}),_e=Math.ceil(ae.length/ce),ve=Math.ceil(H.length/ce),X=Math.ceil(ue.length/ce),le=ae.slice((l-1)*ce,l*ce),Te=H.slice((l-1)*ce,l*ce),M=ue.slice((u-1)*ce,u*ce),L=()=>{B(),U(),Q(null)},Z=D=>{ne({isOpen:!0,model:D})},oe=D=>{F({isOpen:!0,box:D})},pe=()=>{B(),U()},Be=async()=>{await B(),await U()},Qe=()=>{U(),B()},Ie=()=>{U(),B()},gt=D=>{Q(D),S(!0)},ur=D=>{Q(D),S(!0)},Ve=()=>{b(!0)};return j.useEffect(()=>{z&&A(!0)},[z]),k?o.jsx("div",{className:"min-h-screen bg-bg-secondary flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-brand)] mx-auto mb-4"}),o.jsx("p",{className:"text-base text-secondary-text",children:"Loading..."})]})}):J?I?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),o.jsx(V1,{onBack:()=>b(!1)}),o.jsx(Wr,{activeTab:r,onTabChange:D=>{b(!1),s(D)}})]}):r==="about"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),o.jsx(K1,{onBack:()=>s("collection")}),o.jsx(Wr,{activeTab:r,onTabChange:s})]}):r==="all-bookings"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),o.jsx(Y1,{onBack:()=>s("collection")}),o.jsx(Wr,{activeTab:r,onTabChange:s})]}):r==="blocked-dates"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),o.jsx(ek,{onBack:()=>s("collection")}),o.jsx(Wr,{activeTab:r,onTabChange:s})]}):r==="battleplan"?o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),o.jsx(L1,{}),o.jsx(Wr,{activeTab:r,onTabChange:s}),o.jsx(rE,{onNewBooking:()=>P(!0)}),o.jsx(Vc,{isOpen:C,onClose:()=>P(!1),onBookingCreated:()=>{P(!1)},lastSelectedLocation:"",onLocationSelected:D=>{console.log("Location selected:",D)}})]}):o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{onAddModel:()=>S(!0),onAdminClick:Ve,activeTab:r,onTabChange:s}),r==="collection"&&o.jsx(P1,{activeView:i,onViewChange:a}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-24",children:[i==="recent"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"mb-16",children:[re.filter(D=>D.status==="Painted").length>0&&o.jsx("div",{className:"flex flex-col items-center mb-8",children:o.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT MODELS"})}),_?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((D,fe)=>o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[o.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),o.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},fe))}):H.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Te.map(D=>{var fe,jt,Nt,Yt,it,St,Ht;return o.jsx(O1,{model:D,name:D.name,boxName:((fe=D.box)==null?void 0:fe.name)||"Unknown Collection",gameName:((Nt=(jt=D.box)==null?void 0:jt.game)==null?void 0:Nt.name)||((Yt=D.game)==null?void 0:Yt.name)||"Unknown Game",gameIcon:((St=(it=D.box)==null?void 0:it.game)==null?void 0:St.icon)||((Ht=D.game)==null?void 0:Ht.icon)||null,status:D.status,count:D.count,imageUrl:D.image_url,onViewModel:()=>Z(D),onViewBox:oe},D.id)})}),ve>1&&o.jsx(pa,{currentPage:l,totalPages:ve,onPageChange:c})]})]}),o.jsxs("section",{children:[se.length>0&&o.jsx("div",{className:"flex flex-col items-center mb-8",children:o.jsx("h2",{className:"text-lg font-bold text-secondary-text text-center mb-4",children:"RECENT COLLECTIONS"})}),O?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((D,fe)=>o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm border border-border-custom overflow-hidden animate-pulse",children:[o.jsx("div",{className:"h-48 bg-secondary-text opacity-20"}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-2/3"}),o.jsx("div",{className:"h-8 bg-secondary-text opacity-20 rounded"})]})]},fe))}):se.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No collections in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(D=>{var fe,jt,Nt;return o.jsx(R1,{name:D.name,gameName:((fe=D.game)==null?void 0:fe.name)||"Unknown Game",purchaseDate:D.purchase_date,imageUrl:D.image_url,gameImage:(jt=D.game)==null?void 0:jt.image,gameIcon:(Nt=D.game)==null?void 0:Nt.icon,onViewBox:()=>oe(D)},D.id)})}),X>1&&o.jsx(pa,{currentPage:u,totalPages:X,onPageChange:h})]})]})]}),i==="collections"&&o.jsxs("section",{children:[se.length>0&&o.jsx(oE,{games:y,boxes:se,selectedGames:f.selectedGames,searchQuery:f.searchQuery,onGamesChange:de,onSearchChange:te,onClearFilters:ge}),O?o.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((D,fe)=>o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),o.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},fe))}):re.filter(D=>D.status==="Painted").length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No painted models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:M.map(D=>{var fe,jt,Nt,Yt;return o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>oe(D),children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:(()=>{var St;if(D.image_url&&typeof D.image_url=="string"&&D.image_url.trim()!==""&&D.image_url!=="undefined"&&D.image_url!=="null"&&(D.image_url.startsWith("http")||D.image_url.startsWith("/")))return D.image_url;const it=(St=D.game)==null?void 0:St.image;return it&&typeof it=="string"&&it.trim()!==""&&it!=="undefined"&&it!=="null"&&it.startsWith("http")?it:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:D.name,className:"w-16 h-16 object-cover rounded",onError:it=>{const St=it.target,Ht="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";St.src!==Ht&&(St.src=Ht)}}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:D.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(fe=D.game)!=null&&fe.icon?o.jsx("img",{src:D.game.icon,alt:`${D.game.name} icon`,className:"w-4 h-4 object-contain rounded",onError:it=>{const St=it.target;St.style.display="none";const Ht=St.nextElementSibling;Ht&&Ht.classList.contains("icon-fallback")&&(Ht.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(jt=D.game)!=null&&jt.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:(((Nt=D.game)==null?void 0:Nt.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text",children:((Yt=D.game)==null?void 0:Yt.name)||"Unknown Game"})]}),D.purchase_date&&o.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Purchased: ",new Date(D.purchase_date).toLocaleDateString()]})]})]})},D.id)})}),X>1&&o.jsx(pa,{currentPage:u,totalPages:X,onPageChange:h})]})]}),i==="models"&&o.jsxs("section",{children:[re.length>0&&o.jsx(aE,{games:y,boxes:se,models:re,selectedBoxes:d.selectedBoxes,selectedGames:d.selectedGames,selectedStatuses:d.selectedStatuses,searchQuery:d.searchQuery,onBoxesChange:K,onGamesChange:me,onStatusesChange:Y,onSearchChange:Me,onClearFilters:$}),_?o.jsx("div",{className:"space-y-3",children:Array.from({length:6}).map((D,fe)=>o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 animate-pulse",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-16 h-16 bg-secondary-text opacity-20 rounded"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-secondary-text opacity-20 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-secondary-text opacity-20 rounded w-1/2"})]}),o.jsx("div",{className:"w-20 h-8 bg-secondary-text opacity-20 rounded"})]})},fe))}):re.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-base text-secondary-text mb-4",children:"No models in your collection yet."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:le.map(D=>{var fe,jt,Nt,Yt,it,St,Ht,Dd,Ld,Od,Rd,Fd,zd,$d,Bd,Ud,Hd,qd;return o.jsx("div",{className:"bg-bg-card rounded-lg border border-border-custom p-4 hover:bg-bg-secondary transition-colors cursor-pointer",onClick:()=>Z(D),children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:(()=>{var Ln,yn,Wd;if(D.image_url&&typeof D.image_url=="string"&&D.image_url.trim()!==""&&D.image_url!=="undefined"&&D.image_url!=="null"&&(D.image_url.startsWith("http")||D.image_url.startsWith("/")))return D.image_url;const Xt=((yn=(Ln=D.box)==null?void 0:Ln.game)==null?void 0:yn.image)||((Wd=D.game)==null?void 0:Wd.image);return Xt&&typeof Xt=="string"&&Xt.trim()!==""&&Xt!=="undefined"&&Xt!=="null"&&Xt.startsWith("http")?Xt:"https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg"})(),alt:D.name,className:"w-16 h-16 object-cover rounded",onError:Xt=>{const Ln=Xt.target,yn="https://images.pexels.com/photos/8088212/pexels-photo-8088212.jpeg";Ln.src!==yn&&(Ln.src=yn)}}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-semibold text-title truncate",children:D.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[(jt=(fe=D.box)==null?void 0:fe.game)!=null&&jt.icon||(Nt=D.game)!=null&&Nt.icon?o.jsx("img",{src:((it=(Yt=D.box)==null?void 0:Yt.game)==null?void 0:it.icon)||((St=D.game)==null?void 0:St.icon),alt:`${((Dd=(Ht=D.box)==null?void 0:Ht.game)==null?void 0:Dd.name)||((Ld=D.game)==null?void 0:Ld.name)||"Unknown Game"} icon`,className:"w-4 h-4 object-contain rounded",onError:Xt=>{const Ln=Xt.target;Ln.style.display="none";const yn=Ln.nextElementSibling;yn&&yn.classList.contains("icon-fallback")&&(yn.style.display="flex")}}):null,o.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-full flex items-center justify-center icon-fallback",style:{display:(Rd=(Od=D.box)==null?void 0:Od.game)!=null&&Rd.icon||(Fd=D.game)!=null&&Fd.icon?"none":"flex"},children:o.jsx("span",{className:"text-white text-xs font-bold",children:((($d=(zd=D.box)==null?void 0:zd.game)==null?void 0:$d.name)||((Bd=D.game)==null?void 0:Bd.name)||"Unknown Game").charAt(0)})}),o.jsx("span",{className:"text-sm text-secondary-text",children:((Hd=(Ud=D.box)==null?void 0:Ud.game)==null?void 0:Hd.name)||((qd=D.game)==null?void 0:qd.name)||"Unknown Game"})]}),D.status!=="None"&&o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${(()=>{switch(D.status){case"Painted":return"bg-green-100 text-green-800";case"Partially Painted":return"bg-yellow-100 text-yellow-800";case"Primed":return"bg-blue-100 text-blue-800";case"Assembled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:D.status})})]})]})},D.id)})}),_e>1&&o.jsx(pa,{currentPage:l,totalPages:_e,onPageChange:c})]})]})]}),o.jsx(Wr,{activeTab:r,onTabChange:s}),o.jsx(jf,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode}),o.jsx(F1,{isOpen:x,onClose:()=>S(!1),onSuccess:L,preselectedBoxId:R}),o.jsx(z1,{isOpen:N,onClose:()=>w(!1),onSuccess:L,onAddModelsToBox:gt}),o.jsx(VC,{isOpen:q.isOpen,onClose:()=>ne({isOpen:!1,model:null}),onModelDeleted:pe,onModelUpdated:Be,onViewBox:oe,model:q.model}),o.jsx(ZC,{isOpen:ee.isOpen,onClose:()=>F({isOpen:!1,box:null}),onBoxDeleted:Qe,onModelsUpdated:Ie,onViewModel:Z,onAddNewModel:ur,box:ee.box}),o.jsx(eE,{isOpen:T,onClose:()=>A(!1)}),o.jsx(Vc,{isOpen:C,onClose:()=>P(!1),onBookingCreated:()=>{P(!1)},lastSelectedLocation:"",onLocationSelected:D=>{console.log("Location selected:",D)}}),r==="collection"&&o.jsx(nE,{onAddModel:()=>S(!0),onAddCollection:()=>w(!0)})]}):o.jsxs("div",{className:"min-h-screen bg-bg-secondary",children:[o.jsx(fr,{}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:o.jsxs("div",{className:"bg-bg-card rounded-lg shadow-sm p-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-title mb-4",children:"Welcome to the Mini Myths App Beta"}),o.jsxs("p",{className:"text-xs text-secondary-text mb-2",children:["Last updated: ",vm().date," at ",vm().time]}),o.jsxs("p",{className:"text-base text-secondary-text mb-8",children:["Track your miniatures and book a table at your favourite gaming store.",o.jsx("br",{}),o.jsx("br",{}),"Make sure to report any bugs and issues on the Discord!"]}),o.jsxs("div",{className:"flex justify-center space-x-4",children:[o.jsx("button",{onClick:()=>v({isOpen:!0,mode:"login"}),className:"btn-secondary",children:"Log In"}),o.jsx("button",{onClick:()=>v({isOpen:!0,mode:"signup"}),className:"btn-primary",children:"Sign Up"})]})]})}),o.jsx(jf,{isOpen:g.isOpen,onClose:()=>v({isOpen:!1,mode:"login"}),mode:g.mode})]})}Mg(document.getElementById("root")).render(o.jsx(j.StrictMode,{children:o.jsx(uE,{})}));
